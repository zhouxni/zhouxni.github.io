<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4109(){var n=["e8oHDslcR8knWQG","W7GWv8kMefldKsOpF8k0Cvi","WPrdW5zDzSoxW7tcRq","W6xcTSo3WQlcRuldSmoq","W4XilmoOWONcHMLcWRddJGucW7W","W7JcT8o0WOCDB8ojBvHlx2FdPa","EZRcP1hcQSoeWPJcJuFdRxXt","W6JcR2xdV3dcOSko","WQ7cTmkKouxdKCoUfmksWPSxWQK","W4GpxmkpW6ldIdO","h8k5gMFdTmoXWPCKW4/cQSklW40","WRhdQmo7WO7cJg/dRCoX","WR3dK8kaqsVcTheEcG","WOz/W5u6yCoQedlcIGKMh8oL","tCoUwXZcS8kTWOG","qmkPwwvmWPdcOSkFmSkRW6VcV2m","WQNdUMddT2NcTCkeW7G","m8oVFc/dGmkVvG","j8okW5z0CMaQfa","xgtcG8oOCwOfeLafW7tcM8o0","WOJcP8obEtrSW41xW5urCG","WR56W4pcHGddVcJcNXNcQ8ouwSo7","W4PNW6TXpLVcOSkuW6XWzM9x","W7JcRapdRCks","EmontGztW5TSW69JW57dGgDkW5xcISoFW6qdrhfOauGuW6qS","WOVdO8k3gL9zW5S","WPnLW6ddObBdO8kMWPZdGmkPWPu","WQeWr0pdRwlcJZpcJCkAW4BdVa"];return(_0x4109=function(){return n})()}function _0x5413(e,n){var c=_0x4109();return(_0x5413=function(n,s){var d=c[n-=463];void 0===_0x5413.mhSwqX&&(_0x5413.ibPrFd=function(n,s){var d,o=[],e=0,c="";for(n=(n=>{for(var s,d,o="",e="",c=0,t=0;d=n.charAt(t++);~d&&(s=c%4?64*s+d:d,c++%4)&&(o+=String.fromCharCode(255&s>>(-2*c&6))))d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(d);for(var l=0,a=o.length;l<a;l++)e+="%"+("00"+o.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(e)})(n),t=0;t<256;t++)o[t]=t;for(t=0;t<256;t++)e=(e+o[t]+s.charCodeAt(t%s.length))%256,d=o[t],o[t]=o[e],o[e]=d;for(var t=0,e=0,l=0;l<n.length;l++)d=o[t=(t+1)%256],o[t]=o[e=(e+o[t])%256],o[e]=d,c+=String.fromCharCode(n.charCodeAt(l)^o[(o[t]+o[e])%256]);return c},e=arguments,_0x5413.mhSwqX=!0);var n=n+c[0],o=e[n];return o?d=o:(void 0===_0x5413.KuEBhe&&(_0x5413.KuEBhe=!0),d=_0x5413.ibPrFd(d,s),e[n]=d),d})(e,n)}var _0x46f9c3=_0x5413;if((()=>{for(var n=_0x5413,s=_0x4109();;)try{if(664927==+parseInt(n(481,"(#V&"))*(-parseInt(n(472,"qAeX"))/2)+-parseInt(n(478,"#(hn"))/3*(-parseInt(n(467,"qAeX"))/4)+-parseInt(n(476,"&zqS"))/5+parseInt(n(468,"V6a5"))/6+parseInt(n(490,"bZ^E"))/7+parseInt(n(488,"O6zv"))/8*(parseInt(n(464,"c6#7"))/9)+-parseInt(n(463,"lqI%"))/10*(-parseInt(n(483,"1oXJ"))/11))break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x46f9c3(489,"9X$Z")](_0x46f9c3(487,"j%PK"))!=_0x46f9c3(470,"w]r@"))throw window[_0x46f9c3(486,"#(hn")][_0x46f9c3(482,"lqI%")](_0x46f9c3(471,"7lk@")),Error();document.title="MySQL 字符串类型",document.getElementById("article").innerHTML='<div><p>在 MySQL 中，字符串类型用于存储文本、字符序列等非数值数据，不同类型在 <strong>存储方式</strong>   、<strong>长度限制</strong>   、<strong>字符集支持</strong>   和 <strong>适用场景</strong>   上差异显著。合理选择字符串类型可减少存储空间浪费、提升查询性能，并避免数据截断风险。以下从「核心类型分类」「特性对比」「使用场景」「最佳实践」展开详解。</p>\n<h2>一、MySQL 字符串类型核心分类</h2>\n<p>MySQL 提供 5 种常用字符串类型，覆盖从“固定长度”到“变长”、从“短文本”到“长文本”的全场景需求，核心区别在于 <strong>是否固定长度</strong>   、<strong>最大存储容量</strong>   和 <strong>存储效率</strong>   ：</p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>存储方式</th>\n<th>最大长度（默认字符集 utf8mb4）</th>\n<th>字节数（utf8mb4 下）</th>\n<th>核心特性</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>CHAR(n)</code></td>\n<td>固定长度</td>\n<td><code>n</code> 取值 0~255（字符数）</td>\n<td>1 字符 = 4 字节（固定占用 <code>n×4</code> 字节）</td>\n<td>存储长度固定，查询速度快，适合短文本且长度固定的场景。</td>\n</tr>\n<tr>\n<td><code>VARCHAR(n)</code></td>\n<td>变长</td>\n<td><code>n</code> 取值 0~65535（字符数）</td>\n<td>1 字符 = 4 字节 + 1~2 字节长度标识</td>\n<td>存储长度随实际内容变化，节省空间，适合短文本且长度不固定的场景。</td>\n</tr>\n<tr>\n<td><code>TINYTEXT</code></td>\n<td>变长（长文本）</td>\n<td>255 字符（约 1KB）</td>\n<td>实际字符数×4 + 1 字节长度标识</td>\n<td>超短文本，适合存储备注、标签等（无需指定长度，默认最大 255 字符）。</td>\n</tr>\n<tr>\n<td><code>TEXT</code></td>\n<td>变长（长文本）</td>\n<td>65535 字符（约 64KB）</td>\n<td>实际字符数×4 + 2 字节长度标识</td>\n<td>短文本，适合存储文章摘要、评论等（无需指定长度）。</td>\n</tr>\n<tr>\n<td><code>LONGTEXT</code></td>\n<td>变长（长文本）</td>\n<td>4294967295 字符（约 4GB）</td>\n<td>实际字符数×4 + 4 字节长度标识</td>\n<td>超长文本，适合存储完整文章、日志、文件内容（无需指定长度）。</td>\n</tr>\n</tbody>\n</table>\n<h3>关键补充：字符集与长度的关系</h3>\n<p>字符串类型的“长度”指 <strong>字符数</strong>   ，而非字节数，实际占用空间需结合字符集计算：</p>\n<ul>\n<li><strong>utf8mb4（推荐）</strong>   ：1 个字符占 1~4 字节（英文 1 字节，中文/ emoji 4 字节）；</li>\n<li><strong>utf8（不推荐）</strong>   ：仅支持 1~3 字节字符，无法存储 emoji（如 😊），会导致数据截断；</li>\n<li><strong>latin1</strong>   ：1 个字符占 1 字节，仅支持英文，不支持中文。</li>\n</ul>\n<p>例如：<code>CHAR(10)</code> 在 utf8mb4 下固定占用 <code>10×4=40</code> 字节（即使仅存 1 个字符），<code>VARCHAR(10)</code> 存 1 个中文则占用 <code>4+1=5</code> 字节（4 字节中文 + 1 字节长度标识）。</p>\n<h2>二、各类型深度解析与使用场景</h2>\n<h3>1. <code>CHAR(n)</code>：固定长度，查询高效</h3>\n<ul>\n<li><strong>核心特性</strong>   ：\n<ol>\n<li>存储时按 <code>n</code> 个字符的固定长度分配空间，不足时用 <strong>空格填充</strong>   （查询时自动去除末尾空格）；</li>\n<li>无需额外存储“长度标识”，查询时直接定位数据，速度比 <code>VARCHAR</code> 快；</li>\n<li>长度 <code>n</code> 最大 255 字符（utf8mb4 下最大占用 255×4=1020 字节）。</li>\n</ol>\n</li>\n<li><strong>适用场景</strong>   ：\n<ul>\n<li>短文本且长度 <strong>完全固定</strong>   的数据，如：\n<ul>\n<li>手机号（11 位数字，<code>CHAR(11)</code>）；</li>\n<li>身份证号（18 位，<code>CHAR(18)</code>）；</li>\n<li>性别（1 字符：“男/女”，<code>CHAR(1)</code>）；</li>\n<li>状态码（如 “0/1/2”，<code>CHAR(1)</code>）。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>示例</strong>   ：<pre><code class="language-sql"><span class="hljs-keyword">CREATE TABLE</span> <span class="hljs-keyword">user</span> (\n  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY KEY</span> AUTO_INCREMENT,\n  phone <span class="hljs-type">CHAR</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT NULL</span>, <span class="hljs-comment">-- 手机号固定 11 位</span>\n  id_card <span class="hljs-type">CHAR</span>(<span class="hljs-number">18</span>) <span class="hljs-keyword">NOT NULL</span>, <span class="hljs-comment">-- 身份证号固定 18 位</span>\n  gender <span class="hljs-type">CHAR</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">-- 性别：&#x27;男&#x27;/&#x27;女&#x27;</span>\n);\n</code></pre>\n</li>\n</ul>\n<h3>2. <code>VARCHAR(n)</code>：变长存储，节省空间</h3>\n<ul>\n<li><strong>核心特性</strong>   ：\n<ol>\n<li>存储时按 <strong>实际字符长度</strong>   分配空间，额外占用 1~2 字节存储“长度标识”（长度 ≤255 字符用 1 字节，&gt;255 字符用 2 字节）；</li>\n<li>不填充空格，避免空间浪费，适合长度不固定的短文本；</li>\n<li>长度 <code>n</code> 最大 65535 字符（但受表总行大小限制：一行所有字段的总字节数 ≤65535，因此 <code>VARCHAR</code> 实际最大长度通常小于 65535）。</li>\n</ol>\n</li>\n<li><strong>适用场景</strong>   ：\n<ul>\n<li>短文本且长度 <strong>不固定</strong>   的数据，如：\n<ul>\n<li>用户名（2~20 字符，<code>VARCHAR(20)</code>）；</li>\n<li>邮箱（5~64 字符，<code>VARCHAR(64)</code>）；</li>\n<li>地址（10~200 字符，<code>VARCHAR(200)</code>）；</li>\n<li>商品名称（5~100 字符，<code>VARCHAR(100)</code>）。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>示例</strong>   ：<pre><code class="language-sql"><span class="hljs-keyword">CREATE TABLE</span> product (\n  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY KEY</span> AUTO_INCREMENT,\n  name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>, <span class="hljs-comment">-- 商品名称，长度不固定</span>\n  email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">UNIQUE</span>, <span class="hljs-comment">-- 邮箱，长度 5~64 字符</span>\n  address <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-comment">-- 地址，长度不固定</span>\n);\n</code></pre>\n</li>\n</ul>\n<h3>3. <code>TINYTEXT</code>/<code>TEXT</code>/<code>LONGTEXT</code>：长文本存储</h3>\n<p>三者均为“变长长文本类型”，无需指定长度，仅差异在于 <strong>最大存储容量</strong>   ，适合存储超过 <code>VARCHAR</code> 最大长度的文本数据。</p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>最大容量</th>\n<th>适用场景</th>\n<th>注意事项</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>TINYTEXT</code></td>\n<td>255 字符</td>\n<td>超短文本：标签、简短备注、关键词</td>\n<td>容量过小，实际用得少（可被 <code>VARCHAR(255)</code> 替代）</td>\n</tr>\n<tr>\n<td><code>TEXT</code></td>\n<td>65535 字符（约 64KB）</td>\n<td>短文本：文章摘要、评论、用户简介</td>\n<td>容量适合大多数长文本场景，查询性能优于 <code>LONGTEXT</code></td>\n</tr>\n<tr>\n<td><code>LONGTEXT</code></td>\n<td>4GB 字符</td>\n<td>超长文本：完整文章、日志文件、HTML 内容</td>\n<td>容量极大，但查询性能较差（需避免频繁查询或排序）</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>示例</strong>   ：<pre><code class="language-sql"><span class="hljs-keyword">CREATE TABLE</span> article (\n  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY KEY</span> AUTO_INCREMENT,\n  title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>, <span class="hljs-comment">-- 文章标题（短文本）</span>\n  summary TEXT, <span class="hljs-comment">-- 文章摘要（约 100~500 字符，用 TEXT）</span>\n  content LONGTEXT <span class="hljs-keyword">NOT NULL</span>, <span class="hljs-comment">-- 文章内容（可能上万字符，用 LONGTEXT）</span>\n  tags TINYTEXT <span class="hljs-comment">-- 标签（如 &quot;技术,MySQL&quot;，用 TINYTEXT）</span>\n);\n</code></pre>\n</li>\n</ul>\n<h2>三、关键对比：<code>CHAR</code> vs <code>VARCHAR</code> vs <code>TEXT</code></h2>\n<p>三者是最常用的字符串类型，核心差异直接影响存储效率和查询性能，对比如下：</p>\n<table>\n<thead>\n<tr>\n<th>对比维度</th>\n<th><code>CHAR(n)</code></th>\n<th><code>VARCHAR(n)</code></th>\n<th><code>TEXT</code>（含 TINYTEXT/LONGTEXT）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>存储方式</td>\n<td>固定长度，空格填充</td>\n<td>变长，按实际长度存储+长度标识</td>\n<td>变长，按实际长度存储+长度标识</td>\n</tr>\n<tr>\n<td>最大长度</td>\n<td>255 字符</td>\n<td>65535 字符（受行总大小限制）</td>\n<td>TINYTEXT:255 / TEXT:64KB / LONGTEXT:4GB</td>\n</tr>\n<tr>\n<td>空格处理</td>\n<td>插入时填充空格，查询时自动去除</td>\n<td>不填充空格，原样存储</td>\n<td>不填充空格，原样存储</td>\n</tr>\n<tr>\n<td>查询性能</td>\n<td>最快（无需解析长度标识）</td>\n<td>较快（需解析长度标识）</td>\n<td>较慢（需额外读取长文本数据，不支持索引前缀）</td>\n</tr>\n<tr>\n<td>索引支持</td>\n<td>支持完整索引和前缀索引</td>\n<td>支持完整索引和前缀索引</td>\n<td>仅支持前缀索引（如 <code>INDEX idx_content (content(100))</code>）</td>\n</tr>\n<tr>\n<td>适用场景</td>\n<td>短文本、长度固定（手机号/身份证）</td>\n<td>短文本、长度不固定（用户名/邮箱）</td>\n<td>长文本（文章/日志/评论）</td>\n</tr>\n</tbody>\n</table>\n<h2>四、字符串类型最佳实践</h2>\n<h3>1. 优先选择 <code>utf8mb4</code> 字符集</h3>\n<ul>\n<li>\n<p><strong>原因</strong>   ：<code>utf8mb4</code> 是 MySQL 推荐的字符集，支持所有 Unicode 字符（包括中文、emoji、特殊符号），而 <code>utf8</code> 仅支持 3 字节字符，无法存储 emoji（如 😊），会导致数据截断；</p>\n</li>\n<li>\n<p><strong>设置方式</strong>   ：建表时指定字符集，或修改数据库默认字符集：</p>\n<pre><code class="language-sql"><span class="hljs-comment">-- 建表时指定字符集</span>\n<span class="hljs-keyword">CREATE TABLE</span> <span class="hljs-keyword">user</span> (\n  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY KEY</span> AUTO_INCREMENT,\n  username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span>\n) <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci;\n\n<span class="hljs-comment">-- 修改数据库默认字符集（全局生效）</span>\n<span class="hljs-keyword">ALTER</span> DATABASE my_db <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci;\n</code></pre>\n</li>\n</ul>\n<h3>2. 按“长度是否固定”选择 <code>CHAR</code> 或 <code>VARCHAR</code></h3>\n<ul>\n<li><strong>固定长度 → <code>CHAR</code></strong>   ：如手机号（11 位）、身份证号（18 位），查询更快，且避免长度标识的额外开销；</li>\n<li><strong>不固定长度 → <code>VARCHAR</code></strong>   ：如用户名（2~20 字符）、邮箱（5~64 字符），节省空间，避免 <code>CHAR</code> 的空格浪费；</li>\n<li><strong>避坑</strong>   ：不要用 <code>CHAR</code> 存储长度不固定的文本（如地址），会导致大量空间浪费；也不要用 <code>VARCHAR(255)</code> 存储固定长度数据（如手机号），查询性能不如 <code>CHAR</code>。</li>\n</ul>\n<h3>3. 长文本优先用 <code>TEXT</code>，避免滥用 <code>LONGTEXT</code></h3>\n<ul>\n<li><strong>64KB 以内的长文本 → <code>TEXT</code></strong>   ：如评论（通常 ≤1000 字符）、文章摘要（≤500 字符），<code>TEXT</code> 性能优于 <code>LONGTEXT</code>；</li>\n<li><strong>超过 64KB → <code>LONGTEXT</code></strong>   ：如完整文章（上万字符）、日志文件，但需注意：\n<ul>\n<li><code>LONGTEXT</code> 不适合频繁查询或排序（会占用大量内存）；</li>\n<li>若需查询长文本中的关键词，建议用“全文索引”（<code>FULLTEXT INDEX</code>），而非普通索引。</li>\n</ul>\n</li>\n</ul>\n<h3>4. 合理设置 <code>VARCHAR</code> 的长度，避免“过度冗余”</h3>\n<ul>\n<li><strong>原则</strong>   ：<code>VARCHAR(n)</code> 的 <code>n</code> 应设为“业务最大可能长度 + 少量冗余”，而非盲目设为 <code>VARCHAR(255)</code> 或 <code>VARCHAR(65535)</code>；</li>\n<li><strong>示例</strong>   ：\n<ul>\n<li>用户名最大 20 字符 → 设 <code>VARCHAR(20)</code>（而非 255）；</li>\n<li>邮箱最大 64 字符（RFC 标准）→ 设 <code>VARCHAR(64)</code>（而非 100）；</li>\n</ul>\n</li>\n<li><strong>原因</strong>   ：过大的 <code>VARCHAR</code> 会导致：\n<ul>\n<li>行总字节数增大，一页数据存储的行数减少，查询时需读取更多页，性能下降；</li>\n<li>索引占用空间增大，索引查询效率降低。</li>\n</ul>\n</li>\n</ul>\n<h3>5. 避免用字符串类型存储数值或日期</h3>\n<ul>\n<li>\n<p><strong>反例1：用 <code>VARCHAR</code> 存储手机号</strong>   （如 <code>VARCHAR(11)</code>）：<br>\n问题：无法直接进行数值运算（如判断手机号归属地的前缀），查询时字符串比较比整数慢，且可能存储无效格式（如 <code>\'13800a12345\'</code>）；<br>\n正确：用 <code>CHAR(11)</code>（固定长度，查询更快）或 <code>BIGINT UNSIGNED</code>（但需处理前导零，不推荐）。</p>\n</li>\n<li>\n<p><strong>反例2：用 <code>VARCHAR</code> 存储日期</strong>   （如 <code>VARCHAR(10)</code> 存 <code>\'2024-05-20\'</code>）：<br>\n问题：无法使用日期函数（如 <code>DATE_ADD</code>、<code>DATEDIFF</code>），排序错误（如 <code>\'2024-10-01\' &lt; \'2024-09-01\'</code>），且占用空间更大（<code>VARCHAR(10)</code> 占 10 字节，<code>DATE</code> 仅 3 字节）；<br>\n正确：用 <code>DATE</code> 或 <code>DATETIME</code> 类型。</p>\n</li>\n</ul>\n<h2>五、常见问题与避坑</h2>\n<h3>1. 插入 emoji 报错“Data too long for column”</h3>\n<p>原因：字符集为 <code>utf8</code>（不支持 4 字节 emoji），解决方案：</p>\n<pre><code class="language-sql"><span class="hljs-comment">-- 1. 修改字段字符集为 utf8mb4</span>\n<span class="hljs-keyword">ALTER TABLE</span> <span class="hljs-keyword">user</span> MODIFY <span class="hljs-keyword">COLUMN</span> nickname <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">CHARACTER SET</span> utf8mb4 <span class="hljs-keyword">NOT NULL</span>;\n<span class="hljs-comment">-- 2. 确保表和数据库字符集也为 utf8mb4（避免新增字段继承旧字符集）</span>\n<span class="hljs-keyword">ALTER TABLE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;\n<span class="hljs-keyword">ALTER</span> DATABASE my_db <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;\n</code></pre>\n<h3>2. <code>CHAR</code> 字段查询结果末尾空格丢失</h3>\n<p>原因：<code>CHAR</code> 存储时会填充空格，查询时自动去除末尾空格，解决方案：</p>\n<ul>\n<li>若需保留空格，改用 <code>VARCHAR</code> 类型（<code>VARCHAR</code> 原样存储空格）；</li>\n<li>或查询时用 <code>BINARY</code> 关键字强制区分空格（如 <code>WHERE BINARY gender = \'男 \'</code>）。</li>\n</ul>\n<h3>3. <code>TEXT</code> 字段无法创建完整索引</h3>\n<p>原因：MySQL 不支持对 <code>TEXT</code> 字段创建完整索引（仅支持前缀索引），解决方案：</p>\n<ul>\n<li>若需查询完整文本，创建前缀索引（如 <code>INDEX idx_content (content(100))</code>，仅索引前 100 字符）；</li>\n<li>若需精确匹配完整文本，改用 <code>VARCHAR</code>（若长度 ≤65535）；</li>\n<li>若需全文检索，创建“全文索引”（<code>FULLTEXT INDEX idx_content (content)</code>），配合 <code>MATCH AGAINST</code> 查询：<pre><code class="language-sql"><span class="hljs-comment">-- 创建全文索引</span>\n<span class="hljs-keyword">ALTER TABLE</span> article <span class="hljs-keyword">ADD</span> FULLTEXT INDEX idx_content (content);\n<span class="hljs-comment">-- 全文检索（查询包含“MySQL”的文章）</span>\n<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> article <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">MATCH</span>(content) AGAINST(<span class="hljs-string">&#x27;MySQL&#x27;</span>);\n</code></pre>\n</li>\n</ul>\n<h3>4. <code>VARCHAR(65535)</code> 报错“Row size too large”</h3>\n<p>原因：MySQL 一行所有字段的总字节数 ≤65535，<code>VARCHAR(65535)</code> 在 utf8mb4 下最大占用 65535×4=262140 字节，远超限制，解决方案：</p>\n<ul>\n<li>减少 <code>VARCHAR</code> 长度（如设为 <code>VARCHAR(10000)</code>）；</li>\n<li>若文本过长，改用 <code>TEXT</code> 类型（<code>TEXT</code> 字段的内容存储在“行外”，不占用行总字节数配额）。</li>\n</ul>\n<h2>总结</h2>\n<p>MySQL 字符串类型的选择核心是「匹配业务场景+平衡效率」：</p>\n<ul>\n<li>短文本、固定长度 → <code>CHAR(n)</code>（如手机号）；</li>\n<li>短文本、不固定长度 → <code>VARCHAR(n)</code>（如用户名，长度设为业务最大需求+少量冗余）；</li>\n<li>长文本（&gt;65535 字符）→ <code>TEXT</code>/<code>LONGTEXT</code>（如文章内容）；</li>\n<li>字符集强制用 <code>utf8mb4</code>，避免 emoji 截断和中文乱码。</li>\n</ul>\n<p>同时规避“字符串存数值/日期”“滥用 <code>VARCHAR(255)</code>”“<code>TEXT</code> 建完整索引”等常见问题，确保字符串数据的存储效率和查询性能。</p>\n</div>'</script></body></html>