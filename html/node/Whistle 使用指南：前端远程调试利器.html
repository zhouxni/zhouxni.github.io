<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x62c122=_0x44c2;function _0x44c2(r,n){var e=_0x2386();return(_0x44c2=function(n,t){var s=e[n-=481];void 0===_0x44c2.FPQLsK&&(_0x44c2.ATduBG=function(n,t){var s,o=[],r=0,e="";for(n=(n=>{for(var t,s,o="",r="",e=0,l=0;s=n.charAt(l++);~s&&(t=e%4?64*t+s:s,e++%4)&&(o+=String.fromCharCode(255&t>>(-2*e&6))))s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(var a=0,g=o.length;a<g;a++)r+="%"+("00"+o.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(r)})(n),l=0;l<256;l++)o[l]=l;for(l=0;l<256;l++)r=(r+o[l]+t.charCodeAt(l%t.length))%256,s=o[l],o[l]=o[r],o[r]=s;for(var l=0,r=0,a=0;a<n.length;a++)s=o[l=(l+1)%256],o[l]=o[r=(r+o[l])%256],o[r]=s,e+=String.fromCharCode(n.charCodeAt(a)^o[(o[l]+o[r])%256]);return e},r=arguments,_0x44c2.FPQLsK=!0);var n=n+e[0],o=r[n];return o?s=o:(void 0===_0x44c2.bDWvuv&&(_0x44c2.bDWvuv=!0),s=_0x44c2.ATduBG(s,t),r[n]=s),s})(r,n)}function _0x2386(){var n=["Ev3dHdJdTCoBaWGpW67dM1ey","lv7dMayKgt/dGCkipfhcTG","WQtcTmkiW4ldQe/dRCo5CXrzW5i","W7tcUtqDWO8","WROfWRKFWRVcHuhdHs95WOC2Aq","dtldG8oVW6KkivtdJCkks8k3WOu","zmoaW4HhyGHPyq","nmkCWOhcKhfxW43cTK7cQ1BdMmoT","jmk4AbZdPHRcNSkBgXqmWQO","WOTsddhcKNiKCmoeWRhcOdKqsmo+FIb4D33cTmouCGVcU8oA","kLZdMqyGeuJdV8kAcMJcTmog","BdBdSCkCWQxcOmoV","gmoYi8kMW4D7WPxdHhpcKuCzdq","mJ3dG8oYlCo5zNP6WRhdPta","adddHmoPW6enzMJdHCkBDCk5","W5VdTCoJleFcUw1EW4yuWORdJG","WRy+lehdK8kQWO1uWOe","W4ZdJtLAEu08EW","FCoLp0ZcPKVcVSkK","WO0CEGBcTbWm","W4Pbp1RdRuDEW4qZW5aNWRKt"];return(_0x2386=function(){return n})()}if((()=>{for(var n=_0x44c2,t=_0x2386();;)try{if(722527==+parseInt(n(486,"&YJT"))+parseInt(n(485,"L#vq"))/2+-parseInt(n(498,"Pun0"))/3*(parseInt(n(500,"XoLr"))/4)+parseInt(n(496,"lR#&"))/5+-parseInt(n(483,"%i3Z"))/6+parseInt(n(491,"AJHU"))/7+parseInt(n(499,"zFox"))/8)break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x62c122(482,"1$Ie")](_0x62c122(487,")SGZ"))!=_0x62c122(495,"9EQ("))throw window[_0x62c122(489,"XoLr")][_0x62c122(490,"AJHU")](_0x62c122(501,"3XP&")),Error();document.title="Whistle ä½¿ç”¨æŒ‡å—ï¼šå‰ç«¯è¿œç¨‹è°ƒè¯•åˆ©å™¨",document.getElementById("article").innerHTML='<div><p>Whistle æ˜¯ä¸€æ¬¾åŸºäº Node.js çš„ <strong>è·¨å¹³å° Web è°ƒè¯•ä»£ç†å·¥å…·</strong>  ï¼Œç±»ä¼¼äº Charles å’Œ Fiddlerï¼Œä½†æ›´è½»é‡ã€çµæ´»ï¼Œé€‚åˆå‰ç«¯å¼€å‘ã€ç§»åŠ¨ç«¯è°ƒè¯•å’Œæ¥å£ Mockã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ï¼š</p>\n<hr>\n<h2><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h2>\n<h3><strong>å®‰è£…</strong></h3>\n<pre><code class="language-sh">npm install -g whistle\n</code></pre>\n<p>ï¼ˆéœ€æå‰å®‰è£… Node.jsï¼‰</p>\n<h3><strong>å¯åŠ¨</strong></h3>\n<pre><code class="language-sh">w2 start  <span class="hljs-comment"># å¯åŠ¨</span>\nw2 restart <span class="hljs-comment"># é‡å¯</span>\nw2 stop    <span class="hljs-comment"># åœæ­¢</span>\n</code></pre>\n<p>é»˜è®¤è®¿é—®åœ°å€ï¼š<br>\nğŸ‘‰ <a href="http://127.0.0.1:8899" target="_blank">http://127.0.0.1:8899</a></p>\n<hr>\n<h2><strong>2. é…ç½®ä»£ç†</strong></h2>\n<h3><strong>æ–¹å¼ 1ï¼šå…¨å±€ä»£ç†ï¼ˆæ¨èï¼‰</strong></h3>\n<ul>\n<li><strong>Windows</strong>  ï¼š<code>è®¾ç½® &gt; ç½‘ç»œ &gt; ä»£ç† &gt; æ‰‹åŠ¨ä»£ç†</code> â†’ <code>127.0.0.1:8899</code></li>\n<li><strong>Mac/Linux</strong>  ï¼š<code>ç³»ç»Ÿåå¥½è®¾ç½® &gt; ç½‘ç»œ &gt; é«˜çº§ &gt; ä»£ç† &gt; HTTP/HTTPS</code> â†’ <code>127.0.0.1:8899</code></li>\n<li><strong>æ‰‹æœº WiFi ä»£ç†</strong>  ï¼š\n<ul>\n<li>è¿æ¥åŒä¸€å±€åŸŸç½‘</li>\n<li>æ‰‹åŠ¨è®¾ç½®ä»£ç†ï¼š<code>æœåŠ¡å™¨=ç”µè„‘IP</code>ï¼Œç«¯å£=<code>8899</code></li>\n</ul>\n</li>\n</ul>\n<h3><strong>æ–¹å¼ 2ï¼šæµè§ˆå™¨æ’ä»¶ï¼ˆSwitchyOmegaï¼‰</strong></h3>\n<ul>\n<li>å®‰è£… Chrome æ’ä»¶ <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank">SwitchyOmega</a></li>\n<li>é…ç½®ä»£ç†è§„åˆ™æŒ‡å‘ <code>127.0.0.1:8899</code></li>\n</ul>\n<hr>\n<h2><strong>3. æ ¸å¿ƒåŠŸèƒ½</strong></h2>\n<h3><strong>â‘  æŠ“åŒ… &amp; æŸ¥çœ‹è¯·æ±‚</strong></h3>\n<ul>\n<li>è®¿é—®ä»»æ„ç½‘é¡µï¼ŒWhistle ä¼šè‡ªåŠ¨è®°å½•æ‰€æœ‰è¯·æ±‚</li>\n<li>æ”¯æŒ <strong>HTTP/HTTPS</strong>  ï¼ˆéœ€å®‰è£…è¯ä¹¦ï¼‰</li>\n<li>å¯æŸ¥çœ‹ï¼š\n<ul>\n<li><strong>Headers / Cookies</strong></li>\n<li><strong>Request / Response</strong></li>\n<li><strong>Timing ç€‘å¸ƒæµ</strong></li>\n</ul>\n</li>\n</ul>\n<h3><strong>â‘¡ HTTPS æŠ“åŒ…</strong></h3>\n<ol>\n<li><strong>ä¸‹è½½è¯ä¹¦</strong>  ï¼š\n<ul>\n<li>è®¿é—® <a href="http://127.0.0.1:8899" target="_blank">http://127.0.0.1:8899</a> â†’ <strong>HTTPS</strong>   â†’ ä¸‹è½½è¯ä¹¦</li>\n</ul>\n</li>\n<li><strong>å®‰è£…è¯ä¹¦</strong>  ï¼š\n<ul>\n<li><strong>Mac</strong>  ï¼šåŒå‡»å®‰è£…ï¼Œå¹¶ä¿¡ä»»è¯ä¹¦ï¼ˆé’¥åŒ™ä¸²è®¿é—® â†’ è¯ä¹¦ â†’ å§‹ç»ˆä¿¡ä»»ï¼‰</li>\n<li><strong>Windows</strong>  ï¼šå¯¼å…¥åˆ°â€œå—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„â€</li>\n</ul>\n</li>\n<li><strong>æ‰‹æœºå®‰è£…è¯ä¹¦</strong>  ï¼š\n<ul>\n<li>è®¿é—® <code>http://ç”µè„‘IP:8899</code> â†’ ä¸‹è½½è¯ä¹¦å®‰è£…</li>\n</ul>\n</li>\n</ol>\n<h3><strong>â‘¢ ä¿®æ”¹è¯·æ±‚/å“åº”</strong></h3>\n<p>åœ¨ <strong>Rules</strong>   é¢æ¿è¾“å…¥è§„åˆ™ï¼š</p>\n<pre><code class="language-sh"><span class="hljs-comment"># ä¿®æ”¹è¯·æ±‚å¤´</span>\nwww.example.com reqHeaders://{ <span class="hljs-string">&quot;X-Debug&quot;</span>: <span class="hljs-string">&quot;true&quot;</span> }\n\n<span class="hljs-comment"># ä¿®æ”¹å“åº”æ•°æ®</span>\nwww.example.com resBody://{ <span class="hljs-string">&quot;data&quot;</span>: <span class="hljs-string">&quot;mock&quot;</span> }\n\n<span class="hljs-comment"># æœ¬åœ°æ›¿æ¢çº¿ä¸Šæ–‡ä»¶</span>\nwww.example.com/file.js file:///Users/your/path/local.js\n\n<span class="hljs-comment"># å»¶è¿Ÿå“åº”</span>\nwww.example.com resDelay://2000  <span class="hljs-comment"># 2ç§’å»¶è¿Ÿ</span>\n</code></pre>\n<h3><strong>â‘£ ä»£ç†è½¬å‘ &amp; Mock</strong></h3>\n<pre><code class="language-sh"><span class="hljs-comment"># ä»£ç†åˆ°æœ¬åœ°å¼€å‘æœåŠ¡å™¨</span>\nwww.example.com 127.0.0.1:3000\n\n<span class="hljs-comment"># Mock æ•°æ®</span>\n/api/user resBody://{ <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;whistle&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: 18 }\n</code></pre>\n<h3><strong>â‘¤ æ‰‹æœºçœŸæœºè°ƒè¯•</strong></h3>\n<ol>\n<li>æ‰‹æœºè¿æ¥ <strong>åŒä¸€ WiFi</strong></li>\n<li>è®¾ç½®ä»£ç†ï¼š<code>æœåŠ¡å™¨=ç”µè„‘IP</code>ï¼Œç«¯å£=<code>8899</code></li>\n<li>è®¿é—®ç½‘é¡µï¼ŒWhistle è‡ªåŠ¨æŠ“åŒ…</li>\n</ol>\n<hr>\n<h2><strong>4. é«˜çº§åŠŸèƒ½</strong></h2>\n<h3><strong>æ’ä»¶æ‰©å±•</strong></h3>\n<pre><code class="language-sh"><span class="hljs-comment"># å®‰è£…æ’ä»¶ï¼ˆå¦‚ vConsole è°ƒè¯•ï¼‰</span>\nnpm install -g whistle.inspect\n</code></pre>\n<p>ç„¶ååœ¨ Rules é‡Œå¯ç”¨ï¼š</p>\n<pre><code class="language-sh">www.example.com whistle.inspect://enable\n</code></pre>\n<h3><strong>è‡ªåŠ¨åŒ–è„šæœ¬</strong></h3>\n<p>æ”¯æŒç”¨ <strong>Node.js è„šæœ¬</strong>   åŠ¨æ€ä¿®æ”¹è¯·æ±‚ï¼š</p>\n<pre><code class="language-sh">www.example.com script:///path/to/your/script.js\n</code></pre>\n<h3><strong>è·¨è®¾å¤‡åŒæ­¥</strong></h3>\n<ul>\n<li>\n<p>ä½¿ç”¨ <strong>Weinre</strong>   æ’ä»¶è¿›è¡Œ DOM è°ƒè¯•ï¼š</p>\n<pre><code class="language-sh">www.example.com weinre://test\n</code></pre>\n<p>è®¿é—® <code>http://127.0.0.1:8899/weinre</code> è°ƒè¯•</p>\n</li>\n</ul>\n<hr>\n<h2><strong>5. å¯¹æ¯” Charles / Fiddler</strong></h2>\n<table>\n<thead>\n<tr>\n<th>åŠŸèƒ½</th>\n<th>Whistle</th>\n<th>Charles</th>\n<th>Fiddler</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>è·¨å¹³å°</strong></td>\n<td>âœ… (Win/Mac/Linux)</td>\n<td>âœ… (Win/Mac)</td>\n<td>âŒ (ä»… Windows)</td>\n</tr>\n<tr>\n<td><strong>å…è´¹</strong></td>\n<td>âœ…</td>\n<td>âŒ (ä»˜è´¹)</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td><strong>HTTPS æŠ“åŒ…</strong></td>\n<td>âœ…</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td><strong>è§„åˆ™çµæ´»æ€§</strong></td>\n<td>âœ… (JS è„šæœ¬æ”¯æŒ)</td>\n<td>âŒ (ä»… GUI)</td>\n<td>âœ… (è„šæœ¬æ”¯æŒ)</td>\n</tr>\n<tr>\n<td><strong>ç§»åŠ¨ç«¯è°ƒè¯•</strong></td>\n<td>âœ… (çœŸæœºä»£ç†)</td>\n<td>âœ…</td>\n<td>âœ…</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>6. å¸¸è§é—®é¢˜</strong></h2>\n<h3><strong>Q1ï¼šWhistle æ— æ³•æŠ“ HTTPS è¯·æ±‚ï¼Ÿ</strong></h3>\n<ul>\n<li>ç¡®ä¿å·²å®‰è£…è¯ä¹¦å¹¶ä¿¡ä»»</li>\n<li>æ£€æŸ¥æµè§ˆå™¨/æ‰‹æœºä»£ç†è®¾ç½®æ˜¯å¦æ­£ç¡®</li>\n</ul>\n<h3><strong>Q2ï¼šå¦‚ä½•è°ƒè¯•æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Ÿ</strong></h3>\n<pre><code class="language-sh">localhost:3000 127.0.0.1:3000  <span class="hljs-comment"># ç›´æ¥ä»£ç†åˆ°æœ¬åœ°æœåŠ¡</span>\n</code></pre>\n<h3><strong>Q3ï¼šå¦‚ä½•æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œï¼Ÿ</strong></h3>\n<pre><code class="language-sh">www.example.com resDelay://3000  <span class="hljs-comment"># 3ç§’å»¶è¿Ÿ</span>\n</code></pre>\n<hr>\n<h2><strong>æ€»ç»“</strong></h2>\n<p>âœ… <strong>é€‚åˆåœºæ™¯</strong>  ï¼š</p>\n<ul>\n<li><strong>ç§»åŠ¨ç«¯ H5 è°ƒè¯•</strong></li>\n<li><strong>API Mock &amp; ç¯¡æ”¹</strong></li>\n<li><strong>æœ¬åœ°æ–‡ä»¶æ›¿æ¢çº¿ä¸Š</strong></li>\n<li><strong>HTTPS æŠ“åŒ…åˆ†æ</strong></li>\n</ul>\n<p>ğŸš€ <strong>æ¨èç»„åˆ</strong>  ï¼š</p>\n<ul>\n<li><strong>å¼€å‘è°ƒè¯•</strong>  ï¼šWhistle + Chrome DevTools</li>\n<li><strong>ç§»åŠ¨ç«¯</strong>  ï¼šWhistle + Eruda/VConsole</li>\n<li><strong>ç”Ÿäº§é—®é¢˜æ’æŸ¥</strong>  ï¼šWhistle + Sourcemap</li>\n</ul>\n<p>Whistle å‡­å€Ÿ <strong>è½»é‡ã€çµæ´»ã€å…è´¹</strong>   çš„ç‰¹ç‚¹ï¼Œæˆä¸ºå‰ç«¯è¿œç¨‹è°ƒè¯•çš„ <strong>é¦–é€‰å·¥å…·</strong>  ï¼ ğŸ¯</p>\n</div>'</script></body></html>