<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x28f7(l,s){var r=_0x1827();return(_0x28f7=function(s,n){var a=r[s-=427];void 0===_0x28f7.pvLYFT&&(_0x28f7.itoJxD=function(s,n){var a,t=[],l=0,r="";for(s=(s=>{for(var n,a,t="",l="",r=0,e=0;a=s.charAt(e++);~a&&(n=r%4?64*n+a:a,r++%4)&&(t+=String.fromCharCode(255&n>>(-2*r&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var p=0,c=t.length;p<c;p++)l+="%"+("00"+t.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(l)})(s),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)l=(l+t[e]+n.charCodeAt(e%n.length))%256,a=t[e],t[e]=t[l],t[l]=a;for(var e=0,l=0,p=0;p<s.length;p++)a=t[e=(e+1)%256],t[e]=t[l=(l+t[e])%256],t[l]=a,r+=String.fromCharCode(s.charCodeAt(p)^t[(t[e]+t[l])%256]);return r},l=arguments,_0x28f7.pvLYFT=!0);var s=s+r[0],t=l[s];return t?a=t:(void 0===_0x28f7.MdOApq&&(_0x28f7.MdOApq=!0),a=_0x28f7.itoJxD(a,n),l[s]=a),a})(l,s)}var _0x40bf75=_0x28f7;function _0x1827(){var s=["oHLZW7JcNc/cP8kuamkjWP8Mbmov","bq0je08IWQH2W7pdUCkxW6pdUa","W4ZcUbNdVeuPWQ7dGmoms8oLmG","W5/dV8kaWOGHlqZcNmkOge0","tL7cHCkGaSkYWOm","W5raWOXHW6BcKCkxW7BcSs8LWRTqfa","W47dSKJcRJzoWOC","W4Kke8k8rL8gW4Gbq8oRWOxcRq","mmoiWP08vrRdQW","BMvxohyfcCoBW74eWPCjzW","lCkXnmkltXutBby","WQqtW508WQldKmoUWQlcKa","zrnCbSkbDCogf18","zSk/WPuJgmkhWP4","WRJdHmoOWPZdTCopa8ohWPZdKWOms8oS","eCoZisiJWR99WQueWObUW4y0W6FdONFdOSoSWPTTDSoJg8kRvmk+","EMG4kavWWPjwW7qvW6ZcQG","W5bFWRTqu1dcNNue","rConjLZcJSkmbKRdRCo0WROU","zXTCEmo8C8o2nMWElG","WP7cSSolW4TP","emkcFmoxWOpdMxxdPa","mmoBAN4AtmoUDXiNWRnSWR4Q","ue/dO1VdOmk9ta","hv3dPCkdfmotWQzMyviDW4i","n0OHWReuWRPrph8","WQdcRIiFWRL1iwrfW4aDvbW","y1Omk8kiuSoa"];return(_0x1827=function(){return s})()}if((()=>{for(var s=_0x28f7,n=_0x1827();;)try{if(737990==+parseInt(s(453,"n2t5"))+-parseInt(s(449,"k2vy"))/2*(parseInt(s(440,"aEh#"))/3)+parseInt(s(444,"d#L#"))/4*(-parseInt(s(443,"d9JF"))/5)+-parseInt(s(438,"Ci2F"))/6+parseInt(s(442,"&Zy^"))/7*(-parseInt(s(432,"5vMN"))/8)+parseInt(s(437,"^7Zw"))/9+parseInt(s(434,"4p@s"))/10*(parseInt(s(439,"d9JF"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x40bf75(441,"8!LP")](_0x40bf75(448,"&Zy^"))!=_0x40bf75(429,"aEh#"))throw window[_0x40bf75(430,"CEA%")][_0x40bf75(450,"$R22")](_0x40bf75(452,"3c)Q")),Error();document.title="Jenkins 中部署前端项目到生产环境",document.getElementById("article").innerHTML='<div><p>在 Jenkins 中部署前端项目到生产环境，通常需要结合 <strong>自动化构建</strong>   和 <strong>部署策略</strong>   （如直接上传到服务器、Nginx、CDN 或云存储）。以下是详细步骤和方案：</p>\n<hr>\n<h2><strong>1. 前端项目部署到生产环境的常见方式</strong></h2>\n<h3><strong>(1) 直接部署到 Web 服务器（如 Nginx）</strong></h3>\n<ul>\n<li>适用于传统服务器部署，前端构建后的静态文件（<code>dist/</code>）通过 <code>scp</code> 或 <code>rsync</code> 上传到服务器，并配置 Nginx 提供服务。</li>\n</ul>\n<h3><strong>(2) 部署到 CDN（如 AWS S3、阿里云 OSS、腾讯云 COS）</strong></h3>\n<ul>\n<li>适用于静态网站托管，前端构建后的文件上传到 CDN，利用 CDN 加速访问。</li>\n</ul>\n<h3><strong>(3) 部署到云服务平台（如 Vercel、Netlify、AWS Amplify）</strong></h3>\n<ul>\n<li>适用于 Serverless 或静态站点托管，可直接集成 CI/CD 流程。</li>\n</ul>\n<h3><strong>(4) 部署到 Kubernetes（如 Nginx Ingress + 静态文件）</strong></h3>\n<ul>\n<li>适用于微服务架构，前端打包后作为静态文件挂载到 Kubernetes Pod。</li>\n</ul>\n<hr>\n<h2><strong>2. Jenkins 部署前端到生产环境的完整流程</strong></h2>\n<h3><strong>步骤 1：前端项目构建（Jenkins Pipeline）</strong></h3>\n<p>在 Jenkins Pipeline 中，前端项目需要先构建生成静态文件（如 <code>dist/</code> 目录）。</p>\n<h4><strong>示例 Jenkinsfile（Declarative Pipeline）</strong></h4>\n<pre><code class="language-groovy">pipeline {\n    agent any\n\n    environment {\n        <span class="hljs-comment">// 定义环境变量（如生产环境 API 地址）</span>\n        NODE_ENV = <span class="hljs-string">&#x27;production&#x27;</span>\n        API_BASE_URL = <span class="hljs-string">&#x27;https://api.your-production-domain.com&#x27;</span>\n    }\n\n    stages {\n        stage(<span class="hljs-string">&#x27;Checkout&#x27;</span>) {\n            steps {\n                git <span class="hljs-attr">branch:</span> <span class="hljs-string">&#x27;main&#x27;</span>, <span class="hljs-attr">url:</span> <span class="hljs-string">&#x27;https://github.com/your-repo/frontend-project.git&#x27;</span>\n            }\n        }\n\n        stage(<span class="hljs-string">&#x27;Install Dependencies&#x27;</span>) {\n            steps {\n                sh <span class="hljs-string">&#x27;npm install&#x27;</span>  <span class="hljs-comment">// 或 yarn install</span>\n            }\n        }\n\n        stage(<span class="hljs-string">&#x27;Build Frontend&#x27;</span>) {\n            steps {\n                sh <span class="hljs-string">&#x27;npm run build&#x27;</span>  <span class="hljs-comment">// 生成 dist/ 目录</span>\n            }\n        }\n\n        stage(<span class="hljs-string">&#x27;Deploy to Production&#x27;</span>) {\n            steps {\n                <span class="hljs-comment">// 选择一种部署方式（见下文）</span>\n                script {\n                    <span class="hljs-comment">// 方式 1：直接上传到服务器（Nginx）</span>\n                    <span class="hljs-comment">// sh &#x27;scp -r dist/* user@production-server:/var/www/html/&#x27;</span>\n\n                    <span class="hljs-comment">// 方式 2：上传到 CDN（如 AWS S3）</span>\n                    <span class="hljs-comment">// sh &#x27;aws s3 sync dist/ s3://your-bucket-name --delete&#x27;</span>\n\n                    <span class="hljs-comment">// 方式 3：调用脚本部署（如 Ansible、Kubernetes）</span>\n                    <span class="hljs-comment">// sh &#x27;./deploy-to-k8s.sh&#x27;</span>\n                }\n            }\n        }\n    }\n\n    post {\n        success {\n            mail <span class="hljs-attr">to:</span> <span class="hljs-string">&#x27;team@example.com&#x27;</span>, <span class="hljs-attr">subject:</span> <span class="hljs-string">&#x27;前端部署成功&#x27;</span>, <span class="hljs-attr">body:</span> <span class="hljs-string">&#x27;生产环境前端已更新！&#x27;</span>\n        }\n        failure {\n            mail <span class="hljs-attr">to:</span> <span class="hljs-string">&#x27;team@example.com&#x27;</span>, <span class="hljs-attr">subject:</span> <span class="hljs-string">&#x27;前端部署失败&#x27;</span>, <span class="hljs-attr">body:</span> <span class="hljs-string">&#x27;请检查 Jenkins 日志！&#x27;</span>\n        }\n    }\n}\n</code></pre>\n<hr>\n<h3><strong>步骤 2：选择部署方式</strong></h3>\n<h4><strong>方式 1：直接部署到 Nginx 服务器（<code>scp</code> 或 <code>rsync</code>）</strong></h4>\n<ul>\n<li>\n<p><strong>适用场景</strong>   ：传统服务器部署，前端静态文件由 Nginx 托管。</p>\n</li>\n<li>\n<p><strong>Jenkins 部署命令</strong>   ：</p>\n<pre><code class="language-bash">scp -r dist/* user@production-server:/var/www/html/\n<span class="hljs-comment"># 或使用 rsync（增量同步）</span>\nrsync -avz --delete dist/ user@production-server:/var/www/html/\n</code></pre>\n</li>\n<li>\n<p><strong>Nginx 配置示例</strong>   （确保服务器已安装 Nginx）：</p>\n<pre><code class="language-nginx"><span class="hljs-section">server</span> {\n    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;\n    <span class="hljs-attribute">server_name</span> your-domain.com;\n\n    <span class="hljs-attribute">root</span> /var/www/html;\n    <span class="hljs-attribute">index</span> index.html;\n\n    <span class="hljs-section">location</span> / {\n        <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /index.html;  <span class="hljs-comment"># 支持前端路由（如 Vue/React SPA）</span>\n    }\n}\n</code></pre>\n</li>\n<li>\n<p><strong>重启 Nginx</strong>   （可选）：</p>\n<pre><code class="language-bash">ssh user@production-server <span class="hljs-string">&quot;sudo systemctl restart nginx&quot;</span>\n</code></pre>\n</li>\n</ul>\n<h4><strong>方式 2：部署到 CDN（如 AWS S3、阿里云 OSS）</strong></h4>\n<ul>\n<li><strong>适用场景</strong>   ：静态网站托管，利用 CDN 加速访问。</li>\n<li><strong>AWS S3 示例</strong>   ：<pre><code class="language-bash">aws s3 <span class="hljs-built_in">sync</span> dist/ s3://your-bucket-name --delete\naws cloudfront create-invalidation --distribution-id YOUR_DISTRIBUTION_ID --paths <span class="hljs-string">&quot;/*&quot;</span>\n</code></pre>\n</li>\n<li><strong>阿里云 OSS 示例</strong>   ：<pre><code class="language-bash">ossutil <span class="hljs-built_in">cp</span> -r dist/ oss://your-bucket-name/ --update\n</code></pre>\n</li>\n</ul>\n<h4><strong>方式 3：部署到 Kubernetes（Nginx Ingress + 静态文件）</strong></h4>\n<ul>\n<li><strong>适用场景</strong>   ：微服务架构，前端作为静态文件挂载到 Kubernetes Pod。</li>\n<li><strong>步骤</strong>   ：\n<ol>\n<li>将 <code>dist/</code> 打包成 Docker 镜像：<pre><code class="language-dockerfile"><span class="hljs-keyword">FROM</span> nginx:alpine\n<span class="hljs-keyword">COPY</span><span class="language-bash"> dist/ /usr/share/nginx/html</span>\n</code></pre>\n</li>\n<li>推送镜像到镜像仓库（如 Docker Hub、Harbor）。</li>\n<li>在 Kubernetes 中部署：<pre><code class="language-yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>\n<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>\n<span class="hljs-attr">metadata:</span>\n  <span class="hljs-attr">name:</span> <span class="hljs-string">frontend</span>\n<span class="hljs-attr">spec:</span>\n  <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>\n  <span class="hljs-attr">selector:</span>\n    <span class="hljs-attr">matchLabels:</span>\n      <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>\n  <span class="hljs-attr">template:</span>\n    <span class="hljs-attr">metadata:</span>\n      <span class="hljs-attr">labels:</span>\n        <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>\n    <span class="hljs-attr">spec:</span>\n      <span class="hljs-attr">containers:</span>\n        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>\n          <span class="hljs-attr">image:</span> <span class="hljs-string">your-registry/frontend:latest</span>\n          <span class="hljs-attr">ports:</span>\n            <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>\n<span class="hljs-meta">---</span>\n<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>\n<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>\n<span class="hljs-attr">metadata:</span>\n  <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-service</span>\n<span class="hljs-attr">spec:</span>\n  <span class="hljs-attr">selector:</span>\n    <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>\n  <span class="hljs-attr">ports:</span>\n    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>\n      <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>\n      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span>\n<span class="hljs-meta">---</span>\n<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span>\n<span class="hljs-attr">kind:</span> <span class="hljs-string">Ingress</span>\n<span class="hljs-attr">metadata:</span>\n  <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-ingress</span>\n  <span class="hljs-attr">annotations:</span>\n    <span class="hljs-attr">nginx.ingress.kubernetes.io/rewrite-target:</span> <span class="hljs-string">/</span>\n<span class="hljs-attr">spec:</span>\n  <span class="hljs-attr">rules:</span>\n    <span class="hljs-bullet">-</span> <span class="hljs-attr">host:</span> <span class="hljs-string">your-domain.com</span>\n      <span class="hljs-attr">http:</span>\n        <span class="hljs-attr">paths:</span>\n          <span class="hljs-bullet">-</span> <span class="hljs-attr">path:</span> <span class="hljs-string">/</span>\n            <span class="hljs-attr">pathType:</span> <span class="hljs-string">Prefix</span>\n            <span class="hljs-attr">backend:</span>\n              <span class="hljs-attr">service:</span>\n                <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-service</span>\n                <span class="hljs-attr">port:</span>\n                  <span class="hljs-attr">number:</span> <span class="hljs-number">80</span>\n</code></pre>\n</li>\n<li>Jenkins 调用 <code>kubectl apply -f k8s-deployment.yaml</code> 更新部署。</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h3><strong>步骤 3：验证部署</strong></h3>\n<ul>\n<li><strong>手动访问</strong>   ：浏览器打开生产环境 URL（如 <code>https://your-domain.com</code>）。</li>\n<li><strong>自动化测试</strong>   （可选）：\n<ul>\n<li>使用 Selenium 或 Cypress 在 Jenkins Pipeline 中运行 E2E 测试。</li>\n<li>示例：<pre><code class="language-groovy">stage(<span class="hljs-string">&#x27;Run E2E Tests&#x27;</span>) {\n    steps {\n        sh <span class="hljs-string">&#x27;npm run test:e2e&#x27;</span>  # 假设已配置 Cypress\n    }\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2><strong>3. 最佳实践</strong></h2>\n<ol>\n<li><strong>环境变量管理</strong>   ：\n<ul>\n<li>使用 <code>.env.production</code> 文件或 Jenkins <code>environment</code> 变量注入生产环境配置（如 API 地址）。</li>\n</ul>\n</li>\n<li><strong>构建缓存优化</strong>   ：\n<ul>\n<li>在 <code>npm install</code> 前添加 <code>npm ci</code>（确保依赖版本一致）。</li>\n</ul>\n</li>\n<li><strong>部署回滚</strong>   ：\n<ul>\n<li>保留历史版本静态文件（如 Nginx 服务器保留 <code>dist-v1/</code>、<code>dist-v2/</code>），支持快速回滚。</li>\n</ul>\n</li>\n<li><strong>安全加固</strong>   ：\n<ul>\n<li>使用 <code>scp</code>/<code>rsync</code> 时配置 SSH 密钥认证，避免密码硬编码。</li>\n<li>CDN 或云存储启用 HTTPS 和访问权限控制。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2><strong>4. 总结</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>部署方式</strong></th>\n<th><strong>适用场景</strong></th>\n<th><strong>Jenkins 操作</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Nginx 服务器</td>\n<td>传统服务器托管</td>\n<td><code>scp</code>/<code>rsync</code> 上传 <code>dist/</code> 到服务器</td>\n</tr>\n<tr>\n<td>CDN（AWS S3 等）</td>\n<td>静态网站加速</td>\n<td><code>aws s3 sync</code> 或 OSS 工具上传</td>\n</tr>\n<tr>\n<td>Kubernetes</td>\n<td>微服务架构</td>\n<td>构建 Docker 镜像并更新 K8s Deployment</td>\n</tr>\n<tr>\n<td>云服务平台（Vercel）</td>\n<td>Serverless/静态托管</td>\n<td>调用平台 API 或 CLI 部署</td>\n</tr>\n</tbody>\n</table>\n<p>通过 Jenkins Pipeline 自动化前端部署，可以显著提高效率，减少人为错误。根据团队技术栈选择合适的部署方式即可。</p>\n</div>'</script></body></html>