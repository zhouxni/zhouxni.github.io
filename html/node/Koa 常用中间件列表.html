<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x215df2=_0x5dcb;function _0x26b5(){var n=["W6neexGTWQu6DuXiEGS","W4pcSmkyWPpcUdyruG","vvKoWRtdHmodW7q6iG","ySk/F8ohWObhubjxWO8TDW8","yNPVsqu+WOrhW5/dJSk5Da","WOPmlCoEf8khrCobuciSzmkgWOWkW5PgW5LQWOdcHCk7F8kycCkv","lY7dHSoEW4vIbW","WOOXySoYdCoAqW","WQFdRSo4W7CQW5pdTru","W53dK8o5m8kMW6yvW4ZcRvBcSSkW","WOXKaCkns8kiAWaaWPxcOgS","vmkUg8kzAcmBbmkbWP4","E3VcGmkJW6fHhmo/tCkn","WQixvYX4W7yi","WRWGmCkQdwv/EmkIW6u9w1W","W5qyWPDIWRq","WQ1BfXJdSWpcSW","edH0A8kpaJ/cQflcTIhdOa","q3ZdKCo/aJHmneddTKhcOG","ufWpW4FcJ8k3WOGuedqsWPzT","ySoDm3ePfrzod0KWDr0","csJdKCoYW4j0iCojxq","bSoMWP1zWOaTW5hcHW","zeJdKmocWPLbWPu","W7atWRHLd17cHxxcVG","W7hcHCoCBCktWP7cRW","x8kRhSkychCHpmkUWOddI0e","cvvDfszOWRVdNInHW4eg"];return(_0x26b5=function(){return n})()}function _0x5dcb(d,n){var a=_0x26b5();return(_0x5dcb=function(n,t){var o=a[n-=493];void 0===_0x5dcb.uBBUks&&(_0x5dcb.KyCrVZ=function(n,t){var o,s=[],d=0,a="";for(n=(n=>{for(var t,o,s="",d="",a=0,e=0;o=n.charAt(e++);~o&&(t=a%4?64*t+o:o,a++%4)&&(s+=String.fromCharCode(255&t>>(-2*a&6))))o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var c=0,r=s.length;c<r;c++)d+="%"+("00"+s.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(d)})(n),e=0;e<256;e++)s[e]=e;for(e=0;e<256;e++)d=(d+s[e]+t.charCodeAt(e%t.length))%256,o=s[e],s[e]=s[d],s[d]=o;for(var e=0,d=0,c=0;c<n.length;c++)o=s[e=(e+1)%256],s[e]=s[d=(d+s[e])%256],s[d]=o,a+=String.fromCharCode(n.charCodeAt(c)^s[(s[e]+s[d])%256]);return a},d=arguments,_0x5dcb.uBBUks=!0);var n=n+a[0],s=d[n];return s?o=s:(void 0===_0x5dcb.gjAWsg&&(_0x5dcb.gjAWsg=!0),o=_0x5dcb.KyCrVZ(o,t),d[n]=o),o})(d,n)}if((()=>{for(var n=_0x5dcb,t=_0x26b5();;)try{if(213981==+parseInt(n(495,"v!KS"))*(parseInt(n(501,"8y07"))/2)+-parseInt(n(494,"vIM7"))/3+-parseInt(n(504,"A3Bc"))/4*(-parseInt(n(508,"9TVp"))/5)+-parseInt(n(512,"Yv$9"))/6*(parseInt(n(507,"liW)"))/7)+-parseInt(n(513,"Z5Qq"))/8+parseInt(n(497,"^t(8"))/9*(parseInt(n(509,"Jthk"))/10)+parseInt(n(505,"SdiT"))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x215df2(519,"^t(8")](_0x215df2(506,"^t(8"))!=_0x215df2(500,"@2[l"))throw window[_0x215df2(493,"3BwJ")][_0x215df2(498,"Z5Qq")](_0x215df2(518,"p5%8")),Error();document.title="Koa 常用中间件列表",document.getElementById("article").innerHTML='<div><p>Koa 作为一个轻量级框架，其强大功能依赖于丰富的中间件生态。以下是 <strong>开发中最常用的 Koa 中间件</strong>  ，涵盖请求处理、安全、数据库、日志等场景：</p>\n<hr>\n<h2><strong>1. 基础功能增强</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-body</code></td>\n<td>解析请求体（JSON/表单/文件）</td>\n<td><code>npm install koa-body</code></td>\n</tr>\n<tr>\n<td><code>koa-json</code></td>\n<td>自动美化 JSON 响应</td>\n<td><code>npm install koa-json</code></td>\n</tr>\n<tr>\n<td><code>koa-views</code></td>\n<td>模板渲染（EJS/Pug等）</td>\n<td><code>npm install koa-views</code></td>\n</tr>\n<tr>\n<td><code>koa-static</code></td>\n<td>托管静态文件（HTML/CSS/JS）</td>\n<td><code>npm install koa-static</code></td>\n</tr>\n<tr>\n<td><code>koa-mount</code></td>\n<td>合并多个路由应用</td>\n<td><code>npm install koa-mount</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>2. 安全防护</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-helmet</code></td>\n<td>设置安全 HTTP 头（防 XSS/CSRF）</td>\n<td><code>npm install koa-helmet</code></td>\n</tr>\n<tr>\n<td><code>koa-cors</code></td>\n<td>跨域资源共享（CORS）</td>\n<td><code>npm install @koa/cors</code></td>\n</tr>\n<tr>\n<td><code>koa-ratelimit</code></td>\n<td>API 请求限流</td>\n<td><code>npm install koa-ratelimit</code></td>\n</tr>\n<tr>\n<td><code>koa-jwt</code></td>\n<td>JWT 认证</td>\n<td><code>npm install koa-jwt</code></td>\n</tr>\n<tr>\n<td><code>koa-csrf</code></td>\n<td>CSRF 防护</td>\n<td><code>npm install koa-csrf</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>3. 数据库集成</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-redis</code></td>\n<td>Redis 连接</td>\n<td><code>npm install koa-redis</code></td>\n</tr>\n<tr>\n<td><code>koa-mongoose</code></td>\n<td>MongoDB（Mongoose 集成）</td>\n<td><code>npm install koa-mongoose</code></td>\n</tr>\n<tr>\n<td><code>koa-knex</code></td>\n<td>SQL 查询（Knex.js）</td>\n<td><code>npm install koa-knex</code></td>\n</tr>\n<tr>\n<td><code>koa-typeorm</code></td>\n<td>TypeORM 集成</td>\n<td><code>npm install koa-typeorm</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>4. 日志与监控</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-logger</code></td>\n<td>请求日志（开发环境）</td>\n<td><code>npm install koa-logger</code></td>\n</tr>\n<tr>\n<td><code>koa-morgan</code></td>\n<td>高级 HTTP 请求日志</td>\n<td><code>npm install koa-morgan</code></td>\n</tr>\n<tr>\n<td><code>koa-pino-logger</code></td>\n<td>高性能 JSON 日志（生产环境）</td>\n<td><code>npm install koa-pino-logger</code></td>\n</tr>\n<tr>\n<td><code>koa2-swagger-ui</code></td>\n<td>自动生成 API 文档</td>\n<td><code>npm install koa2-swagger-ui</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>5. 会话与状态管理</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-session</code></td>\n<td>服务端 Session 管理</td>\n<td><code>npm install koa-session</code></td>\n</tr>\n<tr>\n<td><code>koa-passport</code></td>\n<td>OAuth/第三方登录</td>\n<td><code>npm install koa-passport</code></td>\n</tr>\n<tr>\n<td><code>koa-qs</code></td>\n<td>增强查询参数解析</td>\n<td><code>npm install koa-qs</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>6. 错误处理</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-http-errors</code></td>\n<td>标准化 HTTP 错误响应</td>\n<td><code>npm install koa-http-errors</code></td>\n</tr>\n<tr>\n<td><code>koa-onerror</code></td>\n<td>自动捕获全局异常</td>\n<td><code>npm install koa-onerror</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>7. 实用工具</strong></h2>\n<table>\n<thead>\n<tr>\n<th>中间件</th>\n<th>作用</th>\n<th>安装命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>koa-compress</code></td>\n<td>响应压缩（Gzip/Brotli）</td>\n<td><code>npm install koa-compress</code></td>\n</tr>\n<tr>\n<td><code>koa-conditional-get</code></td>\n<td>缓存控制（ETag/Last-Modified）</td>\n<td><code>npm install koa-conditional-get</code></td>\n</tr>\n<tr>\n<td><code>koa-respond</code></td>\n<td>简化 HTTP 响应方法</td>\n<td><code>npm install koa-respond</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>8. 完整示例代码</strong></h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa&#x27;</span>);\n<span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa-body&#x27;</span>);\n<span class="hljs-keyword">const</span> helmet = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa-helmet&#x27;</span>);\n<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@koa/cors&#x27;</span>);\n<span class="hljs-keyword">const</span> logger = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa-logger&#x27;</span>);\n\n<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();\n\n<span class="hljs-comment">// 基础中间件</span>\napp.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">bodyParser</span>()); <span class="hljs-comment">// 解析请求体</span>\napp.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">helmet</span>());     <span class="hljs-comment">// 安全防护</span>\napp.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());       <span class="hljs-comment">// 跨域支持</span>\napp.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">logger</span>());     <span class="hljs-comment">// 请求日志</span>\n\n<span class="hljs-comment">// 路由</span>\napp.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">async</span> (ctx) =&gt; {\n  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">&#x27;Hello Koa!&#x27;</span>;\n});\n\n<span class="hljs-comment">// 错误处理</span>\napp.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Server error:&#x27;</span>, err);\n});\n\napp.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on http://localhost:3000&#x27;</span>);\n});\n</code></pre>\n<hr>\n<h2><strong>如何选择中间件？</strong></h2>\n<ol>\n<li><strong>开发环境</strong>  ：\n<ul>\n<li>日志用 <code>koa-logger</code></li>\n<li>热更新用 <code>koa-webpack</code></li>\n</ul>\n</li>\n<li><strong>生产环境</strong>  ：\n<ul>\n<li>安全用 <code>koa-helmet</code> + <code>koa-jwt</code></li>\n<li>性能用 <code>koa-compress</code> + <code>koa-pino-logger</code></li>\n</ul>\n</li>\n<li><strong>API 项目</strong>  ：\n<ul>\n<li>文档用 <code>koa2-swagger-ui</code></li>\n<li>限流用 <code>koa-ratelimit</code></li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>总结</strong></h3>\n<ul>\n<li><strong>Koa 的轻量性</strong>   依赖中间件扩展功能。</li>\n<li><strong>安全</strong>  （<code>helmet</code>、<code>jwt</code>）、<strong>日志</strong>  （<code>pino-logger</code>）、<strong>数据库</strong>  （<code>typeorm</code>）是三大核心需求。</li>\n<li>官方维护的中间件通常以 <code>@koa/</code> 开头（如 <code>@koa/cors</code>）。</li>\n</ul>\n<p>根据项目需求组合中间件，可以快速构建高性能的 Koa 应用！</p>\n</div>'</script></body></html>