<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x2c49(l,s){var e=_0x2e8c();return(_0x2c49=function(s,n){var a=e[s-=193];void 0===_0x2c49.vavLvx&&(_0x2c49.WnVqlp=function(s,n){var a,t=[],l=0,e="";for(s=(s=>{for(var n,a,t="",l="",e=0,p=0;a=s.charAt(p++);~a&&(n=e%4?64*n+a:a,e++%4)&&(t+=String.fromCharCode(255&n>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,r=t.length;c<r;c++)l+="%"+("00"+t.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(s),p=0;p<256;p++)t[p]=p;for(p=0;p<256;p++)l=(l+t[p]+n.charCodeAt(p%n.length))%256,a=t[p],t[p]=t[l],t[l]=a;for(var p=0,l=0,c=0;c<s.length;c++)a=t[p=(p+1)%256],t[p]=t[l=(l+t[p])%256],t[l]=a,e+=String.fromCharCode(s.charCodeAt(c)^t[(t[p]+t[l])%256]);return e},l=arguments,_0x2c49.vavLvx=!0);var s=s+e[0],t=l[s];return t?a=t:(void 0===_0x2c49.knMSOI&&(_0x2c49.knMSOI=!0),a=_0x2c49.WnVqlp(a,n),l[s]=a),a})(l,s)}var _0x1c9840=_0x2c49;function _0x2e8c(){var s=["c8kPW5CzCKpcT8o6","bmkdumkxW6JdVGablCkuWPbVWQS","u8koWPpcGwT3tCoRWRbDW6qaWPH4","w8ovWOKoW5HHW6W","EKJdNmk8qSoDWPriWOBcIW","FSomoSkHpLjoWOfm","WPldTc3dT8olBSkDvSktcg3dJ8ou","W5ldUXebW4LyreZdVCkOhmocW7D9","W5RcKa9Jma","FCoio8oAzsKaWQLmWOubW4JcQa","i8oDW4BdLYeXpSk+WOa","W5rBWPDjW59rW5pdLZ9dqW","W5y6W7hdSMpdR8ojWRvvncn8ka","fCkJW4quz0NcVq","W5rDWPuYWOLzW6pdNHK","WO0EW5CmWPGPWRtcLtzhtMRdGYlcG09vWRDZDgulk2iLwG","qqiIW7FdRmkdxa53oa","W74MxY4XcCoBW5mHW5VcU8oV","W75gjwfVqmoI","qqqLW7FcT8kJxdfhp8k+","WOFdTmoQjYThiN9LW4xcMu4","W4KCW53cSK0oW57dGmkTfaS","tCo9DthcOh1IWQL6W68","t8oZDtldTKHYWPPnW6ml","WP05WQ/cU8kTW59rh8kBW6DmwW","b8khx8kwW6hdUeq9mCksWRrN","v8kfk8kTW4HelHtcO3K","W7VdUmkyg8kdW73cPa"];return(_0x2e8c=function(){return s})()}if((()=>{for(var s=_0x2c49,n=_0x2e8c();;)try{if(875617==-parseInt(s(202,"w8qP"))+-parseInt(s(219,"Ql0u"))/2+-parseInt(s(194,"Tq6I"))/3*(parseInt(s(203,"w8qP"))/4)+parseInt(s(201,"a&aW"))/5*(-parseInt(s(196,"^zc("))/6)+parseInt(s(215,"yhKc"))/7+-parseInt(s(218,"Tq6I"))/8*(-parseInt(s(210,")NH!"))/9)+parseInt(s(211,"@wui"))/10*(parseInt(s(206,"4CMb"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x1c9840(212,"DfnE")](_0x1c9840(195,"yhKc"))!=_0x1c9840(193,"0KFM"))throw window[_0x1c9840(213,"ztMj")][_0x1c9840(198,"ztMj")](_0x1c9840(200,"^zc(")),Error();document.title="jsonwebtoken 详解",document.getElementById("article").innerHTML='<div><p><code>jsonwebtoken</code> 是 Node.js 中最流行的 JWT (JSON Web Token) 实现库，用于生成、签名和验证 JWT。以下是全面详解：</p>\n<h2>1. 核心功能</h2>\n<h3>安装</h3>\n<pre><code class="language-sh">npm install jsonwebtoken\n</code></pre>\n<h3>基本用法</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>);\n<span class="hljs-keyword">const</span> secret = <span class="hljs-string">&#x27;your-secret-key&#x27;</span>;\n\n<span class="hljs-comment">// 生成Token</span>\n<span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>({ <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> }, secret, { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">&#x27;1h&#x27;</span> });\n\n<span class="hljs-comment">// 验证Token</span>\njwt.<span class="hljs-title function_">verify</span>(token, secret, <span class="hljs-function">(<span class="hljs-params">err, decoded</span>) =&gt;</span> {\n  <span class="hljs-keyword">if</span> (err) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;验证失败:&#x27;</span>, err.<span class="hljs-property">message</span>);\n  } <span class="hljs-keyword">else</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;解码内容:&#x27;</span>, decoded);\n  }\n});\n</code></pre>\n<h2>2. 生成 Token (<code>jwt.sign()</code>)</h2>\n<h3>签名方法</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 同步签名</span>\n<span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>(payload, secretOrPrivateKey, [options]);\n\n<span class="hljs-comment">// 异步签名（支持回调）</span>\njwt.<span class="hljs-title function_">sign</span>(payload, secretOrPrivateKey, [options, callback]);\n</code></pre>\n<h3>参数说明</h3>\n<ul>\n<li><strong>payload</strong>  : 要编码的数据对象</li>\n<li><strong>secretOrPrivateKey</strong>  : 密钥（字符串或Buffer）\n<ul>\n<li>HS256/HS384/HS512: 使用字符串密钥</li>\n<li>RS256/RS384/RS512: 使用PEM格式私钥</li>\n</ul>\n</li>\n<li><strong>options</strong>  : 配置选项</li>\n</ul>\n<h3>常用选项</h3>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>类型</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>algorithm</code></td>\n<td>string</td>\n<td>算法（默认HS256）</td>\n</tr>\n<tr>\n<td><code>expiresIn</code></td>\n<td>string/number</td>\n<td>过期时间（如 &quot;2 days&quot;, &quot;10h&quot;, 120秒）</td>\n</tr>\n<tr>\n<td><code>notBefore</code></td>\n<td>string/number</td>\n<td>生效时间</td>\n</tr>\n<tr>\n<td><code>audience</code></td>\n<td>string</td>\n<td>受众</td>\n</tr>\n<tr>\n<td><code>issuer</code></td>\n<td>string</td>\n<td>签发者</td>\n</tr>\n<tr>\n<td><code>jwtid</code></td>\n<td>string</td>\n<td>JWT ID</td>\n</tr>\n<tr>\n<td><code>subject</code></td>\n<td>string</td>\n<td>主题</td>\n</tr>\n<tr>\n<td><code>noTimestamp</code></td>\n<td>boolean</td>\n<td>是否省略iat</td>\n</tr>\n<tr>\n<td><code>header</code></td>\n<td>object</td>\n<td>自定义头部</td>\n</tr>\n</tbody>\n</table>\n<h3>示例</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 带过期时间的Token</span>\n<span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>(\n  { <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;admin&#x27;</span> },\n  secret,\n  { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">&#x27;2h&#x27;</span>, <span class="hljs-attr">issuer</span>: <span class="hljs-string">&#x27;my-app&#x27;</span> }\n);\n\n<span class="hljs-comment">// 使用RSA私钥</span>\n<span class="hljs-keyword">const</span> privateKey = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;private.key&#x27;</span>);\n<span class="hljs-keyword">const</span> rsaToken = jwt.<span class="hljs-title function_">sign</span>(\n  { <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;admin&#x27;</span> },\n  privateKey,\n  { <span class="hljs-attr">algorithm</span>: <span class="hljs-string">&#x27;RS256&#x27;</span> }\n);\n</code></pre>\n<h2>3. 验证 Token (<code>jwt.verify()</code>)</h2>\n<h3>验证方法</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 同步验证</span>\n<span class="hljs-keyword">const</span> decoded = jwt.<span class="hljs-title function_">verify</span>(token, secretOrPublicKey, [options]);\n\n<span class="hljs-comment">// 异步验证（支持回调）</span>\njwt.<span class="hljs-title function_">verify</span>(token, secretOrPublicKey, [options, callback]);\n</code></pre>\n<h3>验证选项</h3>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>类型</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>algorithms</code></td>\n<td>Array</td>\n<td>允许的算法列表</td>\n</tr>\n<tr>\n<td><code>audience</code></td>\n<td>string/RegExp</td>\n<td>验证受众</td>\n</tr>\n<tr>\n<td><code>issuer</code></td>\n<td>string/Array</td>\n<td>验证签发者</td>\n</tr>\n<tr>\n<td><code>ignoreExpiration</code></td>\n<td>boolean</td>\n<td>是否忽略过期</td>\n</tr>\n<tr>\n<td><code>ignoreNotBefore</code></td>\n<td>boolean</td>\n<td>是否忽略nbf</td>\n</tr>\n<tr>\n<td><code>subject</code></td>\n<td>string</td>\n<td>验证主题</td>\n</tr>\n<tr>\n<td><code>clockTolerance</code></td>\n<td>number</td>\n<td>时钟偏差容限（秒）</td>\n</tr>\n<tr>\n<td><code>maxAge</code></td>\n<td>string/number</td>\n<td>最大有效期</td>\n</tr>\n<tr>\n<td><code>clockTimestamp</code></td>\n<td>number</td>\n<td>自定义验证时间戳</td>\n</tr>\n</tbody>\n</table>\n<h3>示例</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 基本验证</span>\n<span class="hljs-keyword">try</span> {\n  <span class="hljs-keyword">const</span> decoded = jwt.<span class="hljs-title function_">verify</span>(token, secret);\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(decoded);\n} <span class="hljs-keyword">catch</span> (err) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;验证失败:&#x27;</span>, err.<span class="hljs-property">message</span>);\n}\n\n<span class="hljs-comment">// 带完整选项的验证</span>\njwt.<span class="hljs-title function_">verify</span>(token, secret, {\n  <span class="hljs-attr">audience</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n  <span class="hljs-attr">issuer</span>: <span class="hljs-string">&#x27;trusted-issuer&#x27;</span>,\n  <span class="hljs-attr">maxAge</span>: <span class="hljs-string">&#x27;2h&#x27;</span>\n}, <span class="hljs-function">(<span class="hljs-params">err, decoded</span>) =&gt;</span> {\n  <span class="hljs-comment">// 处理结果</span>\n});\n</code></pre>\n<h2>4. 解码 Token (<code>jwt.decode()</code>)</h2>\n<p>不解密仅解码：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> decoded = jwt.<span class="hljs-title function_">decode</span>(token, { <span class="hljs-attr">complete</span>: <span class="hljs-literal">true</span> });\n<span class="hljs-comment">/*\n返回结构：\n{\n  header: { alg: &#x27;HS256&#x27;, typ: &#x27;JWT&#x27; },\n  payload: { userId: 123, iat: 1516239022, exp: 1516242622 },\n  signature: &#x27;...&#x27;\n}\n*/</span>\n</code></pre>\n<h2>5. 支持的算法</h2>\n<table>\n<thead>\n<tr>\n<th>算法</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HS256</td>\n<td>HMAC SHA-256（默认）</td>\n</tr>\n<tr>\n<td>HS384</td>\n<td>HMAC SHA-384</td>\n</tr>\n<tr>\n<td>HS512</td>\n<td>HMAC SHA-512</td>\n</tr>\n<tr>\n<td>RS256</td>\n<td>RSA SHA-256</td>\n</tr>\n<tr>\n<td>RS384</td>\n<td>RSA SHA-384</td>\n</tr>\n<tr>\n<td>RS512</td>\n<td>RSA SHA-512</td>\n</tr>\n<tr>\n<td>ES256</td>\n<td>ECDSA SHA-256</td>\n</tr>\n<tr>\n<td>ES384</td>\n<td>ECDSA SHA-384</td>\n</tr>\n<tr>\n<td>ES512</td>\n<td>ECDSA SHA-512</td>\n</tr>\n<tr>\n<td>none</td>\n<td>无签名（不安全）</td>\n</tr>\n</tbody>\n</table>\n<h2>6. 错误类型</h2>\n<p>验证可能抛出的错误：</p>\n<ul>\n<li><code>TokenExpiredError</code>: Token已过期</li>\n<li><code>JsonWebTokenError</code>: 无效Token（包括无效签名、无效算法等）</li>\n<li><code>NotBeforeError</code>: Token未到生效时间</li>\n</ul>\n<pre><code class="language-javascript"><span class="hljs-keyword">try</span> {\n  jwt.<span class="hljs-title function_">verify</span>(expiredToken, secret);\n} <span class="hljs-keyword">catch</span> (err) {\n  <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;TokenExpiredError&#x27;</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Token已过期:&#x27;</span>, err.<span class="hljs-property">expiredAt</span>);\n  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;JsonWebTokenError&#x27;</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Token无效:&#x27;</span>, err.<span class="hljs-property">message</span>);\n  }\n}\n</code></pre>\n<h2>7. 高级用法</h2>\n<h3>密钥函数</h3>\n<p>动态获取密钥：</p>\n<pre><code class="language-javascript">jwt.<span class="hljs-title function_">verify</span>(token, <span class="hljs-function">(<span class="hljs-params">header, payload, callback</span>) =&gt;</span> {\n  <span class="hljs-comment">// 根据header.kid或其他字段获取密钥</span>\n  <span class="hljs-title function_">getSecret</span>(header.<span class="hljs-property">kid</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">secret</span> =&gt;</span> {\n    <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, secret);\n  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {\n    <span class="hljs-title function_">callback</span>(err);\n  });\n});\n</code></pre>\n<h3>自定义验证</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> decoded = jwt.<span class="hljs-title function_">verify</span>(token, secret);\n<span class="hljs-keyword">if</span> (decoded.<span class="hljs-property">userId</span> !== expectedUserId) {\n  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;用户不匹配&#x27;</span>);\n}\n</code></pre>\n<h2>8. 安全实践</h2>\n<ol>\n<li><strong>密钥管理</strong>  ：\n<ul>\n<li>不要硬编码密钥</li>\n<li>使用环境变量或密钥管理系统</li>\n</ul>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> secret = process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>;\n</code></pre>\n</li>\n<li><strong>算法选择</strong>  ：\n<ul>\n<li>生产环境避免使用HS*算法（对称加密）</li>\n<li>推荐使用RS256/ES256等非对称算法</li>\n</ul>\n</li>\n<li><strong>有效期控制</strong>  ：\n<ul>\n<li>设置合理的短有效期</li>\n<li>实现Token刷新机制</li>\n</ul>\n</li>\n<li><strong>敏感数据</strong>  ：\n<ul>\n<li>不要在payload中存储敏感信息</li>\n<li>JWT默认只编码不加密</li>\n</ul>\n</li>\n</ol>\n<h2>9. 完整示例</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>);\n<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);\n\n<span class="hljs-comment">// RSA密钥对</span>\n<span class="hljs-keyword">const</span> privateKey = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;./private.key&#x27;</span>);\n<span class="hljs-keyword">const</span> publicKey = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;./public.key&#x27;</span>);\n\n<span class="hljs-comment">// 生成Token</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateToken</span>(<span class="hljs-params">user</span>) {\n  <span class="hljs-keyword">return</span> jwt.<span class="hljs-title function_">sign</span>(\n    {\n      <span class="hljs-attr">userId</span>: user.<span class="hljs-property">id</span>,\n      <span class="hljs-attr">role</span>: user.<span class="hljs-property">role</span>\n    },\n    privateKey,\n    {\n      <span class="hljs-attr">algorithm</span>: <span class="hljs-string">&#x27;RS256&#x27;</span>,\n      <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">&#x27;1h&#x27;</span>,\n      <span class="hljs-attr">issuer</span>: <span class="hljs-string">&#x27;my-auth-service&#x27;</span>,\n      <span class="hljs-attr">audience</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>\n    }\n  );\n}\n\n<span class="hljs-comment">// 验证Token</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyToken</span>(<span class="hljs-params">token</span>) {\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">return</span> jwt.<span class="hljs-title function_">verify</span>(token, publicKey, {\n      <span class="hljs-attr">algorithms</span>: [<span class="hljs-string">&#x27;RS256&#x27;</span>],\n      <span class="hljs-attr">issuer</span>: <span class="hljs-string">&#x27;my-auth-service&#x27;</span>,\n      <span class="hljs-attr">audience</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n      <span class="hljs-attr">clockTolerance</span>: <span class="hljs-number">30</span> <span class="hljs-comment">// 30秒时钟偏差容限</span>\n    });\n  } <span class="hljs-keyword">catch</span> (err) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`验证失败: <span class="hljs-subst">${err.name}</span> - <span class="hljs-subst">${err.message}</span>`</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;\n  }\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> user = { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">&#x27;admin&#x27;</span> };\n<span class="hljs-keyword">const</span> token = <span class="hljs-title function_">generateToken</span>(user);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;生成的Token:&#x27;</span>, token);\n\n<span class="hljs-keyword">const</span> decoded = <span class="hljs-title function_">verifyToken</span>(token);\n<span class="hljs-keyword">if</span> (decoded) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;验证成功:&#x27;</span>, decoded);\n}\n</code></pre>\n<h2>10. 常见问题</h2>\n<p><strong>Q: 如何实现Token刷新？</strong><br>\nA: 当Token临近过期时返回新Token：</p>\n<pre><code class="language-javascript">router.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/refresh&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> oldToken = req.<span class="hljs-property">headers</span>.<span class="hljs-property">authorization</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27; &#x27;</span>)[<span class="hljs-number">1</span>];\n  <span class="hljs-keyword">const</span> decoded = jwt.<span class="hljs-title function_">decode</span>(oldToken);\n  \n  <span class="hljs-comment">// 如果Token将在30分钟内过期</span>\n  <span class="hljs-keyword">if</span> (decoded.<span class="hljs-property">exp</span> - (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()/<span class="hljs-number">1000</span>) &lt; <span class="hljs-number">1800</span>) {\n    <span class="hljs-keyword">const</span> newToken = <span class="hljs-title function_">generateToken</span>(decoded);\n    res.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Authorization&#x27;</span>, <span class="hljs-string">`Bearer <span class="hljs-subst">${newToken}</span>`</span>);\n  }\n  \n  res.<span class="hljs-title function_">sendStatus</span>(<span class="hljs-number">200</span>);\n});\n</code></pre>\n<p><strong>Q: 如何撤销Token？</strong><br>\nA: JWT本身无法撤销，常见解决方案：</p>\n<ol>\n<li>使用短有效期 + 刷新机制</li>\n<li>维护Token黑名单</li>\n<li>每次请求检查用户状态</li>\n</ol>\n<p><strong>Q: 如何在不同服务间共享JWT？</strong><br>\nA: 使用非对称加密（如RS256），公钥用于验证，私钥用于签名。</p>\n<p><code>jsonwebtoken</code> 提供了强大而灵活的JWT操作接口，正确使用可以构建安全的认证系统，但需要注意密钥管理和Token生命周期控制。</p>\n</div>'</script></body></html>