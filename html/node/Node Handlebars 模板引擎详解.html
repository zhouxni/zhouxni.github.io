<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4d9e(t,s){var p=_0x5562();return(_0x4d9e=function(s,a){var n=p[s-=475];void 0===_0x4d9e.AkuvGu&&(_0x4d9e.BZOeZw=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,e=0;n=s.charAt(e++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,h=l.length;c<h;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)t=(t+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[t],l[t]=n;for(var e=0,t=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[t=(t+l[e])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[t])%256]);return p},t=arguments,_0x4d9e.AkuvGu=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x4d9e.lnAqEk&&(_0x4d9e.lnAqEk=!0),n=_0x4d9e.BZOeZw(n,a),t[s]=n),n})(t,s)}function _0x5562(){var s=["ESkWs8knW5ddRSkvsSkioeZcSLq","W74bW57cSZyiymkgW78sWRq","y8kba8k9W6G","W7xcQLaFW5ldIs9DxbC0","uwFdIq8xW4ZdNSo1BCkvWPRcICoh","hCoHn2bEDMxdNruyWR0YlCkZ","W7SgW5dcVJz3mCoAW7GeWQCGW6VdHG","eItdMmocW6tcJwrHu0ddNItdIq","jCoCWRvEWPzxW4Lo","WPFdJ8kqW4JdLXtdUCopW6pdHCkcqCoO","ec7dNmogW63cIMrMvMddMJ3dHa","WPikW5XqDte1x3hdN8kJWPRcLq","W73dNSkIC8kdW63cHq","WO1OW7Dut8oCW48e","WRerWRNcOuNcPmkbzCkc","AgtcK1f/o8kWta","WR3cJSoHj8ovWRVdLMqMW63cNMNdHW","W7mPW4BdTcfUja","W7OHWRldGSoaWRCyf8k2s8kCW409","zCkTfSkXk8ons3i4BCoHCILcWOudWOZcU3VcKgJdNg3dVa7cMa","WQD9WOBcHwW6EmkikCoNW7vZBa","FmkfW6eoW5qiWPnNW7NdIwb+na"];return(_0x5562=function(){return s})()}var _0x1a5fec=_0x4d9e;if((()=>{for(var s=_0x4d9e,a=_0x5562();;)try{if(788855==-parseInt(s(496,"qX5s"))*(-parseInt(s(488,"!t#V"))/2)+-parseInt(s(477,"q^vo"))/3+parseInt(s(495,"Rah#"))/4+parseInt(s(482,"@F8j"))/5+parseInt(s(491,"Kxyk"))/6+parseInt(s(484,"eQpa"))/7+-parseInt(s(479,"qX5s"))/8)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x1a5fec(490,"S)9a")](_0x1a5fec(487,"Kwnj"))!=_0x1a5fec(475,"0bH#"))throw window[_0x1a5fec(481,"t]c(")][_0x1a5fec(485,"TLnx")](_0x1a5fec(492,"%Jox")),Error();document.title="Node Handlebars 模板引擎详解",document.getElementById("article").innerHTML='<div><p>Handlebars 是一款功能强大的<strong>逻辑较少（logic-less）模板引擎</strong>   ，基于 Mustache 模板语法扩展而来，保留了 Mustache 的简洁性同时增加了更多实用功能。它的核心设计理念是将模板中的逻辑处理最小化，强调视图与业务逻辑的分离，广泛应用于前后端开发、静态站点生成等场景。</p>\n<h2>一、Handlebars 核心特点</h2>\n<ol>\n<li><strong>逻辑较少（Logic-less）</strong>   ：模板中不允许直接编写复杂 JavaScript 逻辑，仅提供基本的条件判断和循环功能，强制分离视图与业务逻辑。</li>\n<li><strong>Mustache 兼容</strong>   ：完全兼容 Mustache 模板语法，已有的 Mustache 模板可直接在 Handlebars 中使用。</li>\n<li><strong>强大的扩展能力</strong>   ：支持自定义helpers（辅助函数），可扩展模板功能以满足复杂需求。</li>\n<li><strong>前后端通用</strong>   ：既可在浏览器端渲染（客户端），也可在 Node.js 环境中使用（服务端）。</li>\n<li><strong>预编译支持</strong>   ：模板可预编译为 JavaScript 函数，减少运行时解析开销，提升性能。</li>\n<li><strong>自动转义</strong>   ：默认对变量输出进行 HTML 转义，有效防止 XSS 攻击。</li>\n</ol>\n<h2>二、Handlebars 基础语法</h2>\n<p>Handlebars 模板由<strong>静态内容</strong>   和<strong>表达式</strong>   组成，表达式用双大括号 <code>{{ }}</code> 包裹，核心语法如下：</p>\n<table>\n<thead>\n<tr>\n<th>语法格式</th>\n<th>作用说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>{{ 变量名 }}</code></td>\n<td>输出变量值，默认自动转义 HTML 特殊字符</td>\n</tr>\n<tr>\n<td><code>{{{ 变量名 }}}</code></td>\n<td>输出变量值，不转义 HTML 内容（适用于可信的 HTML 片段）</td>\n</tr>\n<tr>\n<td><code>{{! 注释内容 }}</code></td>\n<td>模板注释，渲染时会被移除，不会出现在最终结果中</td>\n</tr>\n<tr>\n<td><code>{{#if 条件}}...{{/if}}</code></td>\n<td>条件判断，若条件为真则渲染中间内容</td>\n</tr>\n<tr>\n<td><code>{{#unless 条件}}...{{/unless}}</code></td>\n<td>反向条件判断，若条件为假则渲染中间内容</td>\n</tr>\n<tr>\n<td><code>{{#each 数组}}...{{/each}}</code></td>\n<td>循环遍历数组，内部可用 <code>{{this}}</code> 访问当前元素</td>\n</tr>\n<tr>\n<td><code>{{#with 对象}}...{{/with}}</code></td>\n<td>切换上下文到指定对象，简化深层属性访问</td>\n</tr>\n<tr>\n<td><code>{{&gt; 模板名}}</code></td>\n<td>引入其他模板（部分模板，Partials）</td>\n</tr>\n<tr>\n<td><code>{{helper 参数}}</code></td>\n<td>调用自定义辅助函数</td>\n</tr>\n</tbody>\n</table>\n<h3>基础语法示例</h3>\n<p>假设传递给模板的数据为：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> data = {\n  <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Handlebars 教程&quot;</span>,\n  <span class="hljs-attr">user</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;张三&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">isVIP</span>: <span class="hljs-literal">true</span> },\n  <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">&quot;读书&quot;</span>, <span class="hljs-string">&quot;编程&quot;</span>, <span class="hljs-string">&quot;旅行&quot;</span>],\n  <span class="hljs-attr">htmlContent</span>: <span class="hljs-string">&quot;&lt;strong&gt;重点内容&lt;/strong&gt;&quot;</span>,\n};\n</code></pre>\n<p>模板代码：</p>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- 1. 输出变量（自动转义） --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>用户名：{{ user.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- 2. 输出不转义的 HTML --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{{ htmlContent }}}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- 3. 条件判断 --&gt;</span>\n{{#if user.isVIP}}\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>尊贵的 VIP 用户<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n{{else}}\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>普通用户<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n{{/if}}\n\n<span class="hljs-comment">&lt;!-- 4. 反向条件判断 --&gt;</span>\n{{#unless user.isAdmin}}\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>您不是管理员<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n{{/unless}}\n\n<span class="hljs-comment">&lt;!-- 5. 循环遍历数组 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>\n  {{#each hobbies}}\n  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ this }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>\n  <span class="hljs-comment">&lt;!-- this 表示当前数组元素 --&gt;</span>\n  {{/each}}\n<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- 6. 切换上下文 --&gt;</span>\n{{#with user}}\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>姓名：{{ name }}，年龄：{{ age }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-comment">&lt;!-- 无需再写 user. --&gt;</span>\n{{/with}}\n\n<span class="hljs-comment">&lt;!-- 7. 模板注释 --&gt;</span>\n{{! 这行注释不会出现在渲染结果中 }}\n</code></pre>\n<p>渲染后的结果：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Handlebars 教程<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>用户名：张三<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>重点内容<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>尊贵的 VIP 用户<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>您不是管理员<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>读书<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>编程<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>旅行<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>姓名：张三，年龄：25<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n</code></pre>\n<h2>三、Handlebars 高级功能</h2>\n<h3>1. 部分模板（Partials）</h3>\n<p>部分模板用于复用公共模板片段（如头部、底部、导航栏），通过 <code>{{&gt; 模板名}}</code> 语法引入。</p>\n<h4>示例：</h4>\n<ul>\n<li>\n<p>定义部分模板（导航栏）<code>nav.hbs</code>：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/about&quot;</span>&gt;</span>关于<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>\n</code></pre>\n</li>\n<li>\n<p>在主模板中引入：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>\n  {{&gt; nav}}\n  <span class="hljs-comment">&lt;!-- 引入导航栏部分模板 --&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>\n</code></pre>\n</li>\n</ul>\n<p>在 Node.js 环境中需先注册部分模板：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> handlebars = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;handlebars&quot;</span>);\n<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);\n\n<span class="hljs-comment">// 读取部分模板内容</span>\n<span class="hljs-keyword">const</span> navTemplate = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&quot;./nav.hbs&quot;</span>, <span class="hljs-string">&quot;utf8&quot;</span>);\n<span class="hljs-comment">// 注册部分模板，第一个参数为模板名，第二个为模板内容</span>\nhandlebars.<span class="hljs-title function_">registerPartial</span>(<span class="hljs-string">&quot;nav&quot;</span>, navTemplate);\n</code></pre>\n<h3>2. 自定义辅助函数（Helpers）</h3>\n<p>Handlebars 允许通过自定义辅助函数扩展模板功能，解决复杂逻辑处理需求。</p>\n<h4>示例 1：简单辅助函数（格式化日期）</h4>\n<pre><code class="language-javascript"><span class="hljs-comment">// 注册辅助函数</span>\nhandlebars.<span class="hljs-title function_">registerHelper</span>(<span class="hljs-string">&quot;formatDate&quot;</span>, <span class="hljs-function">(<span class="hljs-params">date</span>) =&gt;</span> {\n  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(date).<span class="hljs-title function_">toLocaleDateString</span>();\n});\n</code></pre>\n<p>在模板中使用：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>注册日期：{{ formatDate user.regDate }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n</code></pre>\n<h4>示例 2：块级辅助函数（自定义循环）</h4>\n<pre><code class="language-javascript"><span class="hljs-comment">// 注册块级辅助函数（带开始和结束标签）</span>\nhandlebars.<span class="hljs-title function_">registerHelper</span>(<span class="hljs-string">&quot;repeat&quot;</span>, <span class="hljs-function">(<span class="hljs-params">n, options</span>) =&gt;</span> {\n  <span class="hljs-keyword">let</span> result = <span class="hljs-string">&quot;&quot;</span>;\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {\n    <span class="hljs-comment">// options.fn(this) 渲染辅助函数内部的内容</span>\n    result += options.<span class="hljs-title function_">fn</span>(i);\n  }\n  <span class="hljs-keyword">return</span> result;\n});\n</code></pre>\n<p>在模板中使用：</p>\n<pre><code class="language-html">{{#repeat 3}}\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是第 {{ this + 1 }} 次循环<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n{{/repeat}}\n</code></pre>\n<p>渲染结果：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是第 1 次循环<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是第 2 次循环<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是第 3 次循环<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n</code></pre>\n<h3>3. 预编译模板</h3>\n<p>Handlebars 支持将模板预编译为 JavaScript 函数，减少运行时解析时间，提升性能，尤其适合前端生产环境。</p>\n<h4>预编译步骤：</h4>\n<ol>\n<li>\n<p>安装预编译工具：</p>\n<pre><code class="language-bash">npm install -g handlebars\n</code></pre>\n</li>\n<li>\n<p>预编译模板文件：</p>\n<pre><code class="language-bash">handlebars template.hbs -f template.js\n</code></pre>\n</li>\n<li>\n<p>在浏览器中使用预编译的模板：</p>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- 引入 Handlebars 运行时库（比完整版小） --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/handlebars@4.7.8/dist/handlebars.runtime.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-comment">&lt;!-- 引入预编译的模板 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;template.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-comment">// 调用预编译生成的函数渲染模板</span>\n  <span class="hljs-keyword">const</span> html = <span class="hljs-title class_">Handlebars</span>.<span class="hljs-property">templates</span>.<span class="hljs-title function_">template</span>(data);\n  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = html;\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n</li>\n</ol>\n<h2>四、Handlebars 应用场景</h2>\n<h3>1. 前端客户端渲染</h3>\n<p>在浏览器中直接使用 Handlebars 渲染动态内容：</p>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- 引入 Handlebars 库 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/handlebars@4.7.8/dist/handlebars.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- 定义模板 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userTemplate&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/x-handlebars-template&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml">\n  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span></span><span class="hljs-template-variable">{{<span class="hljs-name">name</span>}}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>\n    </span><span class="hljs-template-tag">{{#<span class="hljs-name"><span class="hljs-built_in">if</span></span> age}}</span><span class="language-xml">\n      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>年龄：</span><span class="hljs-template-variable">{{<span class="hljs-name">age</span>}}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    </span><span class="hljs-template-tag">{{/<span class="hljs-name"><span class="hljs-built_in">if</span></span>}}</span><span class="language-xml">\n  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- 渲染容器 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userContainer&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-comment">// 获取模板内容</span>\n  <span class="hljs-keyword">const</span> templateSource = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;userTemplate&quot;</span>).<span class="hljs-property">innerHTML</span>;\n  <span class="hljs-comment">// 编译模板</span>\n  <span class="hljs-keyword">const</span> template = <span class="hljs-title class_">Handlebars</span>.<span class="hljs-title function_">compile</span>(templateSource);\n  <span class="hljs-comment">// 定义数据</span>\n  <span class="hljs-keyword">const</span> userData = { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;李四&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> };\n  <span class="hljs-comment">// 渲染模板</span>\n  <span class="hljs-keyword">const</span> html = <span class="hljs-title function_">template</span>(userData);\n  <span class="hljs-comment">// 插入到页面</span>\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;userContainer&quot;</span>).<span class="hljs-property">innerHTML</span> = html;\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<h3>2. Node.js 后端渲染（Express 框架）</h3>\n<p>Handlebars 可作为 Express 的模板引擎使用，实现服务端渲染：</p>\n<ol>\n<li>\n<p>安装依赖：</p>\n<pre><code class="language-bash">npm install express express-handlebars\n</code></pre>\n</li>\n<li>\n<p>配置 Express：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express&quot;</span>);\n<span class="hljs-keyword">const</span> { engine } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express-handlebars&quot;</span>);\n<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();\n\n<span class="hljs-comment">// 配置 Handlebars 模板引擎</span>\napp.<span class="hljs-title function_">engine</span>(\n  <span class="hljs-string">&quot;handlebars&quot;</span>,\n  <span class="hljs-title function_">engine</span>({\n    <span class="hljs-attr">defaultLayout</span>: <span class="hljs-string">&quot;main&quot;</span>, <span class="hljs-comment">// 默认布局模板</span>\n    <span class="hljs-attr">layoutsDir</span>: <span class="hljs-string">&quot;./views/layouts/&quot;</span>, <span class="hljs-comment">// 布局模板目录</span>\n  }),\n);\napp.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;view engine&quot;</span>, <span class="hljs-string">&quot;handlebars&quot;</span>);\napp.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;views&quot;</span>, <span class="hljs-string">&quot;./views&quot;</span>); <span class="hljs-comment">// 模板文件目录</span>\n\n<span class="hljs-comment">// 路由</span>\napp.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {\n  res.<span class="hljs-title function_">render</span>(<span class="hljs-string">&quot;home&quot;</span>, {\n    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;首页&quot;</span>,\n    <span class="hljs-attr">user</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;王五&quot;</span> },\n  });\n});\n\napp.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;服务器运行在 http://localhost:3000&quot;</span>);\n});\n</code></pre>\n</li>\n<li>\n<p>创建模板文件：</p>\n<ul>\n<li>布局模板 <code>views/layouts/main.handlebars</code>：<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    {{{ body }}}\n    <span class="hljs-comment">&lt;!-- 页面内容会插入到这里 --&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n</li>\n<li>页面模板 <code>views/home.handlebars</code>：<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>欢迎您，{{ user.name }}！<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n</code></pre>\n</li>\n</ul>\n</li>\n</ol>\n<h2>五、Handlebars 与其他模板引擎对比</h2>\n<table>\n<thead>\n<tr>\n<th>模板引擎</th>\n<th>特点</th>\n<th>优势</th>\n<th>劣势</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Handlebars</strong></td>\n<td>逻辑较少，支持helpers，Mustache兼容</td>\n<td>语法简洁，前后端通用，安全性高</td>\n<td>复杂逻辑需借助helpers</td>\n<td>中大型项目，强调视图与逻辑分离</td>\n</tr>\n<tr>\n<td><strong>EJS</strong></td>\n<td>嵌入JavaScript，语法灵活</td>\n<td>学习成本低，逻辑处理自由</td>\n<td>容易混淆视图与逻辑</td>\n<td>小型项目，快速开发</td>\n</tr>\n<tr>\n<td><strong>Pug</strong></td>\n<td>缩进式语法，无HTML标签</td>\n<td>代码简洁，开发效率高</td>\n<td>学习成本较高，不兼容HTML</td>\n<td>熟悉Pug语法的团队</td>\n</tr>\n<tr>\n<td><strong>Mustache</strong></td>\n<td>完全无逻辑，跨语言支持</td>\n<td>极致简洁，多语言通用</td>\n<td>功能有限，复杂场景需扩展</td>\n<td>多平台共享模板</td>\n</tr>\n</tbody>\n</table>\n<h2>六、最佳实践</h2>\n<ol>\n<li><strong>保持模板简洁</strong>   ：遵循“逻辑较少”原则，复杂逻辑处理放在模板外（如后端或前端JS），模板只负责展示。</li>\n<li><strong>善用辅助函数</strong>   ：将通用逻辑（如格式化、计算）封装为helpers，提高复用性。</li>\n<li><strong>合理拆分部分模板</strong>   ：将公共组件（导航、页脚等）拆分为部分模板，减少冗余。</li>\n<li><strong>生产环境预编译</strong>   ：前端使用时预编译模板，减少浏览器端解析开销。</li>\n<li><strong>谨慎使用不转义输出</strong>   ：<code>{{{ }}}</code> 仅用于可信内容，避免XSS攻击风险。</li>\n</ol>\n<h2>七、总结</h2>\n<p>Handlebars 凭借其“逻辑较少”的设计理念、简洁的语法和强大的扩展性，成为前后端模板渲染的优秀选择。它强制分离视图与业务逻辑，使代码更易于维护，同时通过辅助函数和部分模板机制满足复杂场景需求。</p>\n<p>无论是小型项目的快速开发，还是大型团队的协作开发，Handlebars 都能提供清晰的模板结构和一致的开发体验，是值得掌握的模板引擎工具。</p>\n</div>'</script></body></html>