<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2016ad=_0x1d1d;function _0x1d1d(o,n){var e=_0x1ad4();return(_0x1d1d=function(n,t){var s=e[n-=233];void 0===_0x1d1d.iUdGmM&&(_0x1d1d.qBZLOA=function(n,t){var s,d=[],o=0,e="";for(n=(n=>{for(var t,s,d="",o="",e=0,r=0;s=n.charAt(r++);~s&&(t=e%4?64*t+s:s,e++%4)&&(d+=String.fromCharCode(255&t>>(-2*e&6))))s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(var a=0,c=d.length;a<c;a++)o+="%"+("00"+d.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(o)})(n),r=0;r<256;r++)d[r]=r;for(r=0;r<256;r++)o=(o+d[r]+t.charCodeAt(r%t.length))%256,s=d[r],d[r]=d[o],d[o]=s;for(var r=0,o=0,a=0;a<n.length;a++)s=d[r=(r+1)%256],d[r]=d[o=(o+d[r])%256],d[o]=s,e+=String.fromCharCode(n.charCodeAt(a)^d[(d[r]+d[o])%256]);return e},o=arguments,_0x1d1d.iUdGmM=!0);var n=n+e[0],d=o[n];return d?s=d:(void 0===_0x1d1d.tKtZbR&&(_0x1d1d.tKtZbR=!0),s=_0x1d1d.qBZLOA(s,t),o[n]=s),s})(o,n)}function _0x1ad4(){var n=["pSk+W6axWRxdNCov","W5hdH2VcQSoL","x8k8W7hcV8kRwe4V","vSkVlcRcNKa6m8obwa","WQNcK3rNw8kZnG/dNK/dOKS","W70uEWmoWOqvzhNcGq","jSo1FNVcQfKig8o1","W5b7o8oNWPT5Ae5FW6tdTmo4eG","wSk9WQJdICoVla0oqCkVWOS8WQq","Esf+WOpdTMb3WRvJW54GnW","tdZdPcHcW43cUG","cSkDW413Cg3cSSk0WP7dO8kqW4vt","W4FdLCk9ucZdRZu","W5n8pmoJW5a2ow9QW54","jSkRFtlcV04mWOa","pCkuwSkzat5bWR3dS8ovswhdNG","WQfoxvTWvZa","FxGUW7RcOWLk","hH3dOJnLW4pcOq","l8kvnmkIcJnikJqbWOxdM8k6","W40vWPjTW5CFoCkcg8k/W6tdHG","CZxcPw05W7BcMSoVWP3cImkru3ZdGZLcW5tdUclcKCkvWRC3WQxcNZ0","WONdNmoGWPxdMCkTDSkDo8k2W4RdMW","WQbpkfacWPuDFq","o3/dJ8kSomoJbuyYutpdVtW","kxNdOIL7W7tcGCkZWONcJSk/BN0","WO7dNCoLWPNdNmkLfmkhgSk0W77dOMG"];return(_0x1ad4=function(){return n})()}if((()=>{for(var n=_0x1d1d,t=_0x1ad4();;)try{if(465951==+parseInt(n(243,"1m$L"))+parseInt(n(244,"*nNd"))/2*(parseInt(n(242,"8lLK"))/3)+parseInt(n(237,"wF)j"))/4*(-parseInt(n(257,"f%u1"))/5)+-parseInt(n(247,"d$vc"))/6*(-parseInt(n(256,"VJe9"))/7)+parseInt(n(250,"V*8F"))/8+-parseInt(n(253,"HiV("))/9*(parseInt(n(248,"VJe9"))/10)+-parseInt(n(236,"u$#6"))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x2016ad(249,"f%u1")](_0x2016ad(245,"8lLK"))!=_0x2016ad(240,"np4U"))throw window[_0x2016ad(235,"*nNd")][_0x2016ad(255,"%k[Q")](_0x2016ad(233,"wF)j")),Error();document.title="Nginx 终端指令",document.getElementById("article").innerHTML='<div><p>以下是 <strong>Nginx 终端指令</strong>   的详细解析，涵盖服务管理、配置测试、日志监控等核心操作，适用于 Linux/Unix 系统环境：</p>\n<hr>\n<h3><strong>一、服务管理指令</strong></h3>\n<h4>1. <strong>启动与停止</strong></h4>\n<table>\n<thead>\n<tr>\n<th>指令</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>nginx</code></td>\n<td>启动 Nginx 服务</td>\n<td><code>nginx</code></td>\n</tr>\n<tr>\n<td><code>nginx -s stop</code></td>\n<td><strong>强制停止</strong>  （立即终止进程）</td>\n<td><code>nginx -s stop</code></td>\n</tr>\n<tr>\n<td><code>nginx -s quit</code></td>\n<td><strong>优雅停止</strong>  （处理完当前请求后退出）</td>\n<td><code>nginx -s quit</code></td>\n</tr>\n<tr>\n<td><code>nginx -s reload</code></td>\n<td><strong>重载配置</strong>  （不重启服务，应用新配置）</td>\n<td><code>nginx -s reload</code></td>\n</tr>\n<tr>\n<td><code>nginx -s reopen</code></td>\n<td><strong>重新打开日志文件</strong>  （日志切割后使用）</td>\n<td><code>nginx -s reopen</code></td>\n</tr>\n</tbody>\n</table>\n<h4>2. <strong>通过 systemd 管理（推荐）</strong></h4>\n<pre><code class="language-sh"><span class="hljs-built_in">sudo</span> systemctl start nginx     <span class="hljs-comment"># 启动</span>\n<span class="hljs-built_in">sudo</span> systemctl stop nginx      <span class="hljs-comment"># 停止</span>\n<span class="hljs-built_in">sudo</span> systemctl restart nginx   <span class="hljs-comment"># 重启</span>\n<span class="hljs-built_in">sudo</span> systemctl reload nginx    <span class="hljs-comment"># 重载配置（同 `nginx -s reload`）</span>\n<span class="hljs-built_in">sudo</span> systemctl status nginx    <span class="hljs-comment"># 查看服务状态</span>\n</code></pre>\n<hr>\n<h3><strong>二、配置测试与调试</strong></h3>\n<table>\n<thead>\n<tr>\n<th>指令</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>nginx -t</code></td>\n<td><strong>测试配置文件语法</strong></td>\n<td><code>nginx -t</code></td>\n</tr>\n<tr>\n<td><code>nginx -T</code></td>\n<td>测试并<strong>打印完整配置</strong>  （调试用）</td>\n<td><code>nginx -T</code></td>\n</tr>\n<tr>\n<td><code>nginx -c /path/to/nginx.conf</code></td>\n<td>指定配置文件启动</td>\n<td><code>nginx -c /etc/nginx/custom.conf</code></td>\n</tr>\n<tr>\n<td><code>strace -p $(pgrep nginx)</code></td>\n<td>跟踪 Nginx 进程系统调用（高级调试）</td>\n<td><code>strace -p $(pgrep nginx)</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>三、版本与编译信息</strong></h3>\n<table>\n<thead>\n<tr>\n<th>指令</th>\n<th>作用</th>\n<th>示例输出片段</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>nginx -v</code></td>\n<td>查看版本</td>\n<td><code>nginx version: nginx/1.25.3</code></td>\n</tr>\n<tr>\n<td><code>nginx -V</code></td>\n<td>查看版本 + <strong>编译参数及模块</strong></td>\n<td><code>built with OpenSSL 3.0.2, --with-http_ssl_module</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>四、日志监控与分析</strong></h3>\n<h4>1. <strong>实时日志查看</strong></h4>\n<pre><code class="language-sh"><span class="hljs-comment"># 实时访问日志</span>\n<span class="hljs-built_in">tail</span> -f /var/log/nginx/access.log\n\n<span class="hljs-comment"># 实时错误日志</span>\n<span class="hljs-built_in">tail</span> -f /var/log/nginx/error.log\n</code></pre>\n<h4>2. <strong>日志过滤与统计</strong></h4>\n<pre><code class="language-sh"><span class="hljs-comment"># 统计 HTTP 状态码</span>\nawk <span class="hljs-string">&#x27;{print $9}&#x27;</span> /var/log/nginx/access.log | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c\n\n<span class="hljs-comment"># 查找错误请求</span>\ngrep <span class="hljs-string">&#x27; 500 &#x27;</span> /var/log/nginx/access.log\n\n<span class="hljs-comment"># 按 IP 统计访问量</span>\nawk <span class="hljs-string">&#x27;{print $1}&#x27;</span> /var/log/nginx/access.log | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr\n</code></pre>\n<hr>\n<h3><strong>五、网络与性能检查</strong></h3>\n<table>\n<thead>\n<tr>\n<th>指令</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>curl -I http://localhost</code></td>\n<td>检查 HTTP 响应头</td>\n<td><code>curl -I http://localhost</code></td>\n</tr>\n<tr>\n<td><code>ss -tulnp | grep nginx</code></td>\n<td>查看 Nginx 监听的端口</td>\n<td><code>ss -tulnp | grep nginx</code></td>\n</tr>\n<tr>\n<td><code>nginx -s reopen</code></td>\n<td>日志切割后重新打开日志文件</td>\n<td><code>nginx -s reopen</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>六、高级调试技巧</strong></h3>\n<h4>1. <strong>检查 Worker 进程</strong></h4>\n<pre><code class="language-sh"><span class="hljs-comment"># 查看 Nginx 主进程及 Worker 进程</span>\nps aux | grep nginx\n</code></pre>\n<p>输出示例：</p>\n<pre><code>root      1234  0.0  0.1  12345  6789 ?        Ss   Jan01   0:00 nginx: master process\nnginx     5678  0.0  0.2  23456  9876 ?        S    Jan01   0:05 nginx: worker process\n</code></pre>\n<h4>2. <strong>压力测试（ab 工具）</strong></h4>\n<pre><code class="language-sh">ab -n 1000 -c 100 http://localhost/\n</code></pre>\n<ul>\n<li><code>-n 1000</code>：总请求数</li>\n<li><code>-c 100</code>：并发请求数</li>\n</ul>\n<h4>3. <strong>检查配置文件继承关系</strong></h4>\n<pre><code class="language-sh">nginx -T | grep -A 10 <span class="hljs-string">&quot;server {&quot;</span>  <span class="hljs-comment"># 查看所有 server 块配置</span>\n</code></pre>\n<hr>\n<h3><strong>七、常见问题解决</strong></h3>\n<h4><strong>Q1: <code>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</code></strong></h4>\n<ul>\n<li><strong>原因</strong>  ：80 端口被占用（如 Apache、其他 Nginx 实例）。</li>\n<li><strong>解决</strong>  ：<pre><code class="language-sh"><span class="hljs-built_in">sudo</span> ss -tulnp | grep :80  <span class="hljs-comment"># 查找占用进程</span>\n<span class="hljs-built_in">sudo</span> <span class="hljs-built_in">kill</span> &lt;PID&gt;            <span class="hljs-comment"># 终止占用进程</span>\n<span class="hljs-built_in">sudo</span> nginx -s reload       <span class="hljs-comment"># 重新启动</span>\n</code></pre>\n</li>\n</ul>\n<h4><strong>Q2: <code>nginx: [error] open() &quot;/run/nginx.pid&quot; failed (2: No such file or directory)</code></strong></h4>\n<ul>\n<li><strong>原因</strong>  ：Nginx 未启动或 PID 文件丢失。</li>\n<li><strong>解决</strong>  ：<pre><code class="language-sh"><span class="hljs-built_in">sudo</span> nginx           <span class="hljs-comment"># 启动服务</span>\n<span class="hljs-built_in">sudo</span> nginx -s reload <span class="hljs-comment"># 重载配置</span>\n</code></pre>\n</li>\n</ul>\n<h4><strong>Q3: 如何查看已加载的模块？</strong></h4>\n<pre><code class="language-sh">nginx -V 2&gt;&amp;1 | grep --color -o <span class="hljs-string">&quot;with-http_[a-z_]*_module&quot;</span>\n</code></pre>\n<hr>\n<h3><strong>八、总结表</strong></h3>\n<table>\n<thead>\n<tr>\n<th>场景</th>\n<th>指令</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>启动/停止</strong></td>\n<td><code>nginx</code>, <code>nginx -s stop</code></td>\n<td>强制停止用 <code>stop</code>，优雅停止用 <code>quit</code></td>\n</tr>\n<tr>\n<td><strong>配置测试</strong></td>\n<td><code>nginx -t</code></td>\n<td>必须无 <code>[emerg]</code> 错误才能重载</td>\n</tr>\n<tr>\n<td><strong>日志分析</strong></td>\n<td><code>tail -f /var/log/nginx/access.log</code></td>\n<td>配合 <code>grep</code>/<code>awk</code> 过滤</td>\n</tr>\n<tr>\n<td><strong>性能检查</strong></td>\n<td><code>ss -tulnp</code>, <code>ab -n 1000</code></td>\n<td>监控端口和并发能力</td>\n</tr>\n<tr>\n<td><strong>调试</strong></td>\n<td><code>nginx -T</code>, <code>strace -p</code></td>\n<td>打印完整配置或跟踪系统调用</td>\n</tr>\n</tbody>\n</table>\n<p>掌握这些指令后，您可以高效管理 Nginx 服务并快速排查问题。建议结合 <code>man nginx</code> 查阅官方文档。</p>\n</div>'</script></body></html>