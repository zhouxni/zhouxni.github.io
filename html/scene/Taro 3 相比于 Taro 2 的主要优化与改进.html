<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0xb54242=_0x2f3b;function _0x2f3b(l,n){var r=_0x1158();return(_0x2f3b=function(n,s){var t=r[n-=164];void 0===_0x2f3b.kantAy&&(_0x2f3b.cDbHyK=function(n,s){var t,a=[],l=0,r="";for(n=(n=>{for(var s,t,a="",l="",r=0,o=0;t=n.charAt(o++);~t&&(s=r%4?64*s+t:t,r++%4)&&(a+=String.fromCharCode(255&s>>(-2*r&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var p=0,e=a.length;p<e;p++)l+="%"+("00"+a.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(l)})(n),o=0;o<256;o++)a[o]=o;for(o=0;o<256;o++)l=(l+a[o]+s.charCodeAt(o%s.length))%256,t=a[o],a[o]=a[l],a[l]=t;for(var o=0,l=0,p=0;p<n.length;p++)t=a[o=(o+1)%256],a[o]=a[l=(l+a[o])%256],a[l]=t,r+=String.fromCharCode(n.charCodeAt(p)^a[(a[o]+a[l])%256]);return r},l=arguments,_0x2f3b.kantAy=!0);var n=n+r[0],a=l[n];return a?t=a:(void 0===_0x2f3b.roQXtN&&(_0x2f3b.roQXtN=!0),t=_0x2f3b.cDbHyK(t,s),l[n]=t),t})(l,n)}if((()=>{for(var n=_0x2f3b,s=_0x1158();;)try{if(713239==+parseInt(n(181,"e^]j"))+-parseInt(n(170,"vCe5"))/2*(parseInt(n(184,"f4K("))/3)+-parseInt(n(187,"gn%%"))/4*(-parseInt(n(177,"BUhQ"))/5)+-parseInt(n(167,"#K7p"))/6+-parseInt(n(176,"XEal"))/7+parseInt(n(185,"&Q7U"))/8*(parseInt(n(165,"!K0O"))/9)+parseInt(n(171,"e^]j"))/10)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0xb54242(174,"xn^p")](_0xb54242(168,"lPB]"))!=_0xb54242(166,"Q4Cx"))throw window[_0xb54242(183,"k%hB")][_0xb54242(186,"SJpP")](_0xb54242(173,"a]yK")),Error();function _0x1158(){var n=["W5/cKeLUqsG8","W57dTmosWOP0m8kf","dSoix2yGemowWRZcRra8umot","tq9oW6NdKwKPW6ZdL27dRSos","c8obxG5MCSkSWRVcRa","W6ugW45hhSkCqmk/W6xdRf8QW6i","W7RdNmkvtComgCoPWQ7cSNOuW6i","WP0Om8oQqrNdQrjBWQpdPfS","rmovl00nW4BcLfnnW6uklee","W5FcPCkLhCoUuhjA","W6FcL8o4WPZdH2pdKmonemowqvS","DmkSW4yAW4LfbYjMDSkKWR8","W7VcG8oLvmo5deO","dmkSW5nYWPBdVCot","u356WPDqzNq1W5ddV8kOW4y","W6K4WQFcL1WQW4RdJ8ksW4tcISo2","ESkADmocW5FdMmoWWOlcUmkdWQtcLW","vh92W7Guah0wW7e","bhpcTmkLWO0","WQnyWOJcGCo1WPxdKGJdG35Qqa","W7RdM8o3WOZcIuWQm8oE","WQhdTrXWw2/cUCkq","W6FdR8o1c8o3WO9LW7S","WPaOoSoMsX/cTcDgWQ/dQNLa","dSoJWPtdQ8kwW4rRWOZcImkRsKO","WRL0W6VdNHyJWOJcUmk9W6BcR8oOF03dHJShWReVWQz6k8k0C8k8zW"];return(_0x1158=function(){return n})()}document.title="Taro 3 相比于 Taro 2 的主要优化与改进",document.getElementById("article").innerHTML='<div><p>Taro 3 是 Taro 框架的一次重大升级，在架构设计、开发体验和跨平台能力等方面都有显著提升。以下是 Taro 3 相比 Taro 2 的主要优化点：</p>\n<h2>一、架构重构：从编译时到运行时</h2>\n<h3>Taro 2 的架构</h3>\n<pre><code class="language-mermaid">graph LR\n    A[React/Vue代码] --&gt; B(编译时转换)\n    B --&gt; C[各平台原生代码]\n</code></pre>\n<h3>Taro 3 的新架构</h3>\n<pre><code class="language-mermaid">graph LR\n    A[React/Vue代码] --&gt; B(运行时适配)\n    B --&gt; C{平台支持层}\n    C --&gt; D[微信小程序]\n    C --&gt; E[支付宝小程序]\n    C --&gt; F[H5]\n</code></pre>\n<p><strong>优化效果</strong>   ：</p>\n<ul>\n<li>支持更多前端框架(React/Vue/Vue3/Nerv等)</li>\n<li>减少编译时转换带来的兼容性问题</li>\n<li>更灵活的扩展能力</li>\n</ul>\n<h2>二、多框架支持</h2>\n<table>\n<thead>\n<tr>\n<th>框架支持</th>\n<th>Taro 2</th>\n<th>Taro 3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>React</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>Vue</td>\n<td>✗</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>Vue 3</td>\n<td>✗</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>Nerv</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>自定义框架</td>\n<td>✗</td>\n<td>✓</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例</strong>   ：在 Taro 3 中使用 Vue 3</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// app.js</span>\n<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App.vue&quot;</span>;\n\n<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);\napp.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>);\n</code></pre>\n<h2>三、开发体验优化</h2>\n<ol>\n<li><strong>H5 支持大幅改进</strong>   ：\n<ul>\n<li>基于 Webpack 5 构建</li>\n<li>支持完整的 React/Vue 生态</li>\n<li>更好的路由系统和 CSS 处理</li>\n</ul>\n</li>\n<li><strong>热更新(HMR)支持</strong>   ：<pre><code class="language-javascript"><span class="hljs-comment">// taro.config.js</span>\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-comment">// 启用HMR</span>\n  <span class="hljs-attr">mini</span>: { <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span> },\n  <span class="hljs-attr">h5</span>: { <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span> },\n};\n</code></pre>\n</li>\n<li><strong>TypeScript 支持增强</strong>   ：\n<ul>\n<li>更好的类型推断</li>\n<li>完整的组件类型定义</li>\n<li>配置文件的 TS 支持</li>\n</ul>\n</li>\n</ol>\n<h2>四、性能优化</h2>\n<ol>\n<li><strong>包体积减小</strong>   ：\n<ul>\n<li>核心库体积减少约30%</li>\n<li>更智能的代码分割</li>\n</ul>\n</li>\n<li><strong>渲染性能提升</strong>   ：\n<ul>\n<li>虚拟列表组件优化</li>\n<li>减少不必要的重渲染</li>\n</ul>\n</li>\n<li><strong>小程序专项优化</strong>   ：<pre><code class="language-javascript"><span class="hljs-comment">// 使用新的useReady钩子</span>\n<span class="hljs-keyword">import</span> { useReady } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tarojs/taro&quot;</span>;\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-title function_">useReady</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;页面准备就绪&quot;</span>);\n  });\n}\n</code></pre>\n</li>\n</ol>\n<h2>五、API 与组件改进</h2>\n<ol>\n<li>\n<p><strong>统一 API 调用</strong>   ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// Taro 2需要区分平台</span>\n<span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">TARO_ENV</span> === <span class="hljs-string">&quot;weapp&quot;</span>) {\n  wx.<span class="hljs-title function_">request</span>();\n} <span class="hljs-keyword">else</span> {\n  my.<span class="hljs-title function_">request</span>();\n}\n\n<span class="hljs-comment">// Taro 3统一API</span>\n<span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">request</span>();\n</code></pre>\n</li>\n<li>\n<p><strong>组件系统升级</strong>   ：</p>\n<ul>\n<li>支持 React 18 新特性</li>\n<li>更好的跨平台组件一致性</li>\n<li>新增多个内置组件</li>\n</ul>\n</li>\n</ol>\n<h2>六、插件系统增强</h2>\n<ol>\n<li><strong>插件化架构</strong>   ：<pre><code class="language-javascript"><span class="hljs-comment">// 添加插件</span>\n<span class="hljs-comment">// taro.config.js</span>\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-string">&quot;@tarojs/plugin-mock&quot;</span>,\n    [<span class="hljs-string">&quot;@tarojs/plugin-uglify&quot;</span>, { <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span> }],\n  ],\n};\n</code></pre>\n</li>\n<li><strong>自定义编译器</strong>   ：\n<ul>\n<li>支持通过插件扩展编译能力</li>\n<li>可以自定义文件处理流程</li>\n</ul>\n</li>\n</ol>\n<h2>七、多端支持扩展</h2>\n<table>\n<thead>\n<tr>\n<th>平台支持</th>\n<th>Taro 2</th>\n<th>Taro 3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>微信小程序</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>支付宝小程序</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>百度小程序</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>字节跳动小程序</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>QQ小程序</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>H5</td>\n<td>✓</td>\n<td>✓(增强)</td>\n</tr>\n<tr>\n<td>React Native</td>\n<td>✓</td>\n<td>✓(优化)</td>\n</tr>\n<tr>\n<td>快应用</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>京东小程序</td>\n<td>✗</td>\n<td>✓</td>\n</tr>\n</tbody>\n</table>\n<h2>八、迁移与兼容性</h2>\n<ol>\n<li><strong>渐进式迁移</strong>   ：\n<ul>\n<li>支持部分页面使用 Taro 3 特性</li>\n<li>兼容大部分 Taro 2 的 API</li>\n</ul>\n</li>\n<li><strong>迁移工具</strong>   ：<pre><code class="language-sh"><span class="hljs-comment"># 使用迁移工具</span>\ntaro migrate\n</code></pre>\n</li>\n</ol>\n<h2>九、开发者工具改进</h2>\n<ol>\n<li><strong>Taro Doctor 增强</strong>   ：<pre><code class="language-sh"><span class="hljs-comment"># 检查项目健康状态</span>\ntaro doctor\n</code></pre>\n</li>\n<li><strong>调试工具</strong>   ：\n<ul>\n<li>更好的错误提示</li>\n<li>性能分析工具集成</li>\n</ul>\n</li>\n</ol>\n<h2>十、社区与生态</h2>\n<ol>\n<li><strong>官方插件</strong>   ：\n<ul>\n<li>@tarojs/plugin-http</li>\n<li>@tarojs/plugin-vue-devtools</li>\n</ul>\n</li>\n<li><strong>UI 库支持</strong>   ：\n<ul>\n<li>Taro UI 全面适配</li>\n<li>支持更多第三方 UI 库</li>\n</ul>\n</li>\n</ol>\n<h2>升级建议</h2>\n<ol>\n<li><strong>新项目</strong>   ：直接使用 Taro 3</li>\n<li><strong>已有项目</strong>   ：\n<ul>\n<li>小型项目可考虑全量升级</li>\n<li>大型项目建议逐步迁移</li>\n<li>检查插件和组件兼容性</li>\n</ul>\n</li>\n</ol>\n<p>Taro 3 通过架构重构带来了更大的灵活性和更好的开发体验，同时保持了 Taro 2 的稳定性，是更现代化的跨端开发解决方案。</p>\n<h3>Taro 3 的运行时适配指的是“运行时渲染和 API 调用”的适配，而“构建产物和语法转换”仍然需要各端专门的编译流程。</h3>\n</div>'</script></body></html>