<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x225b(t,s){var o=_0x34c7();return(_0x225b=function(s,n){var a=o[s-=304];void 0===_0x225b.btntzS&&(_0x225b.Djgeby=function(s,n){var a,l=[],t=0,o="";for(s=(s=>{for(var n,a,l="",t="",o=0,r=0;a=s.charAt(r++);~a&&(n=o%4?64*n+a:a,o++%4)&&(l+=String.fromCharCode(255&n>>(-2*o&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var e=0,c=l.length;e<c;e++)t+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)})(s),r=0;r<256;r++)l[r]=r;for(r=0;r<256;r++)t=(t+l[r]+n.charCodeAt(r%n.length))%256,a=l[r],l[r]=l[t],l[t]=a;for(var r=0,t=0,e=0;e<s.length;e++)a=l[r=(r+1)%256],l[r]=l[t=(t+l[r])%256],l[t]=a,o+=String.fromCharCode(s.charCodeAt(e)^l[(l[r]+l[t])%256]);return o},t=arguments,_0x225b.btntzS=!0);var s=s+o[0],l=t[s];return l?a=l:(void 0===_0x225b.bpuNbO&&(_0x225b.bpuNbO=!0),a=_0x225b.Djgeby(a,n),t[s]=a),a})(t,s)}var _0x53d5de=_0x225b;if((()=>{for(var s=_0x225b,n=_0x34c7();;)try{if(753217==+parseInt(s(319,"s0xy"))*(parseInt(s(323,"UU(w"))/2)+parseInt(s(327,"0L(#"))/3*(-parseInt(s(306,"wfX0"))/4)+-parseInt(s(330,"!M3c"))/5+parseInt(s(326,"$J^@"))/6*(-parseInt(s(311,"6y$D"))/7)+parseInt(s(321,"]SiZ"))/8+parseInt(s(307,"F1sV"))/9+parseInt(s(313,"kjWa"))/10*(parseInt(s(322,"#z8U"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x53d5de(329,"K7PU")](_0x53d5de(325,"S)O&"))!=_0x53d5de(331,"I]5p"))throw window[_0x53d5de(314,"UU(w")][_0x53d5de(328,"PJU!")](_0x53d5de(309,"He#6")),Error();function _0x34c7(){var s=["W47dVCkvxrFdSrlcLdi9W7pcM8k1","wmoFW7NdGd0lvvddVSkNWPZdKSkz","xCowW7pdHZKovg7dUSknWOFdRmkM","wSo0A8kDWQ8+W5tcMmopWR8+WQa","mmoZq8ozW7OmsW","WOTdWRRcQSkuyrK3WOG","rSkIWOZcIttcK1pcJNW","WQfQDYSmDr7dGee","DWiPC8oNWPxcOMa","bSoFWPuUq8oqxa","W7xcRg7dN8kMm8kb","W4PFbwlcV8oApbhcSCoGWRL5WPa","oI8Xv00","W7JcNSkSsCkIcs7dKZ4HW7C","W7xdRwlcJ8osW4tdRq","W6ilW7dcLr7cMLaQW41aAsi","WPNdG8keW4P1WQxdKaurAXpcTCkR","WPOjWO5Ei8omWPdcTH1hWRZcOmoS","WO7cNI7cOx44W6e/WQCWW5ZcJ0S4WPldLa4uD3VdISklW4RcPN1B","WPpdV8kLmgDOWOSyhSk6WPZdTG","W47dQmkqW4FdNCk7zCoZEbVcVq","rSkkW5v0e8kbtK0EFwFdQG","W7KdWQO4ErPUxhS","BSo1EmoTW4iiD8oi","W4LFbIxdVCk+qIBcOa","t8kOah0FfvpcMW","W4LwdMhcV8ozoZRcGSo1WOTjWRq","qmkdW5DWf8khdwSvsKJdKmo+"];return(_0x34c7=function(){return s})()}document.title="扫码登录",document.getElementById("article").innerHTML='<div><p>扫码登录是一种便捷的身份验证方式，用户通过扫描二维码完成登录，无需手动输入账号密码。以下是其核心流程和实现步骤：</p>\n<hr>\n<h3><strong>一、扫码登录的核心流程</strong></h3>\n<ol>\n<li><strong>生成二维码</strong>\n<ul>\n<li>服务端生成一个<strong>临时唯一令牌（Token）</strong>  ，并绑定当前设备/会话状态（如未登录）。</li>\n<li>将令牌编码为二维码内容（通常是一个带参数的URL，如 <code>https://example.com/login?token=xxx</code>）。</li>\n</ul>\n</li>\n<li><strong>用户扫码</strong>\n<ul>\n<li>用户使用<strong>已登录的移动端APP</strong>  （如微信、支付宝）扫描二维码。</li>\n<li>APP解析二维码中的令牌，并向服务端发送<strong>扫码确认请求</strong>  （携带令牌和用户身份）。</li>\n</ul>\n</li>\n<li><strong>服务端验证</strong>\n<ul>\n<li>服务端校验令牌的有效性（是否过期、是否未被使用）。</li>\n<li>确认后，将令牌状态更新为**“已扫描”**  ，并返回用户基本信息（如头像、昵称）给网页端展示。</li>\n</ul>\n</li>\n<li><strong>用户确认登录</strong>\n<ul>\n<li>移动端APP提示用户确认登录（防止误操作）。</li>\n<li>用户点击确认后，APP通知服务端<strong>授权登录</strong>  。</li>\n</ul>\n</li>\n<li><strong>网页端完成登录</strong>\n<ul>\n<li>服务端绑定令牌与用户账号，生成登录凭证（如Session或JWT）。</li>\n<li>网页端通过轮询或WebSocket获取凭证，完成登录跳转。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>二、技术实现步骤（以Web为例）</strong></h3>\n<h4><strong>1. 服务端准备</strong></h4>\n<ul>\n<li><strong>接口设计</strong>  ：\n<ul>\n<li><code>GET /api/qrcode/generate</code> → 生成令牌和二维码。</li>\n<li><code>POST /api/qrcode/scan</code> → 移动端扫码后调用。</li>\n<li><code>POST /api/qrcode/confirm</code> → 移动端确认登录。</li>\n<li><code>GET /api/qrcode/check?token=xxx</code> → 网页端轮询登录状态。</li>\n</ul>\n</li>\n<li><strong>令牌管理</strong>  ：<br>\n使用Redis存储临时令牌，设置过期时间（如300秒）：<pre><code class="language-python"><span class="hljs-comment"># Python示例（Redis）</span>\n<span class="hljs-keyword">import</span> redis\nr = redis.Redis()\ntoken = <span class="hljs-string">&quot;qrcode_123456&quot;</span>\nr.setex(token, <span class="hljs-number">300</span>, <span class="hljs-string">&quot;unscanned&quot;</span>)  <span class="hljs-comment"># 初始状态：未扫描</span>\n</code></pre>\n</li>\n</ul>\n<h4><strong>2. 网页端逻辑</strong></h4>\n<pre><code class="language-javascript"><span class="hljs-comment">// 1. 生成二维码</span>\n<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/qrcode/generate&#x27;</span>);\n<span class="hljs-keyword">const</span> { token, qrcodeUrl } = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();\n\n<span class="hljs-comment">// 2. 显示二维码（使用第三方库如qrcode.js）</span>\n<span class="hljs-keyword">const</span> qrElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;qrcode&#x27;</span>);\n<span class="hljs-title class_">QRCode</span>.<span class="hljs-title function_">toCanvas</span>(qrElement, qrcodeUrl);\n\n<span class="hljs-comment">// 3. 轮询检查登录状态</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/qrcode/check?token=<span class="hljs-subst">${token}</span>`</span>);\n  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();\n  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;confirmed&#x27;</span>) {\n    <span class="hljs-comment">// 登录成功，跳转页面</span>\n    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">&#x27;/home&#x27;</span>;\n  }\n};\n<span class="hljs-built_in">setInterval</span>(checkLogin, <span class="hljs-number">2000</span>); <span class="hljs-comment">// 每2秒轮询一次</span>\n</code></pre>\n<h4><strong>3. 移动端逻辑（以微信为例）</strong></h4>\n<ul>\n<li>扫码后调用微信JS-SDK或原生API，向服务端发送扫码通知：<pre><code class="language-javascript"><span class="hljs-comment">// 微信内扫码后调用服务端接口</span>\nwx.<span class="hljs-title function_">scanQRCode</span>({\n  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {\n    <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">extractTokenFromUrl</span>(res.<span class="hljs-property">result</span>); <span class="hljs-comment">// 从二维码URL提取token</span>\n    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://api.example.com/qrcode/scan&#x27;</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,\n      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ token, <span class="hljs-attr">user_id</span>: <span class="hljs-string">&#x27;当前用户ID&#x27;</span> })\n    });\n  }\n});\n</code></pre>\n</li>\n</ul>\n<h4><strong>4. 安全性措施</strong></h4>\n<ul>\n<li><strong>令牌防篡改</strong>  ：使用JWT签名或加密令牌。</li>\n<li><strong>限流控制</strong>  ：限制同一IP/用户的频繁请求。</li>\n<li><strong>短生命周期</strong>  ：令牌过期后自动失效。</li>\n</ul>\n<hr>\n<h3><strong>三、常见问题与优化</strong></h3>\n<ol>\n<li><strong>二维码过期</strong>   → 网页端实时更新二维码（重新生成）。</li>\n<li><strong>网络延迟</strong>   → 用WebSocket替代轮询，减少延迟。</li>\n<li><strong>跨平台兼容</strong>   → 确保移动端APP能解析二维码格式（如URL编码）。</li>\n</ol>\n<hr>\n<h3><strong>四、应用场景</strong></h3>\n<ul>\n<li><strong>微信网页扫码登录</strong></li>\n<li><strong>支付宝快捷登录</strong></li>\n<li><strong>企业内部系统（如钉钉）</strong></li>\n</ul>\n<hr>\n<p>通过以上步骤，可以实现安全、高效的扫码登录功能。如果需要具体语言（如Java/Go）的实现代码，可以进一步讨论！</p>\n</div>'</script></body></html>