<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x57a4c9=_0x3ed0;function _0xd65b(){var s=["k8kWWOdcMMqczSk4","qv/dM8kQWOmDuSk1W4RcJ8on","kCkesLhcOaXW","bXCTW4z8EHyPxXbvaG","w1fSWOe4CKbaDrftnSoao8kjxcZcGLHJWPnCWP5xpmoO","WONdLCoMW7/dQSkcqmoB","kSoYlSk5aSo4WRhdHq","DmktW4/dIsGfWOy","ab0OW4HZFtGAFsTBnG","ymkHmSkVW43dTslcIxK","WO7dLCkSWOJcOmoCrCopW7hdGLRdOW","W7FdTrFcGCkvW7vuW5xcJHGBkW","W5DfW4uNnSkEWQ1GWR4/WR3cPW","W6KWpfSVF0Pz","hHadWQVcUCkdfCknW4pdP8kJEW","DCohW4m5WRWeuHBcLCoVW6G","v8oEW6PmWPfAi8orhJel","pmk/W4tdIce","jCopW5hdVbZdI0e4D8o1WOOK","WOxdLcxcM8onymkL","l8kwdSkWnSoYWOe","FmottwNcGZP0W7W","W78sWQdcLHVdSCkSt8oPWODZ","WRRcVf7dKN41rCk/WPZcH8kuAmou","kCoXzmoXy8kyW6JdUqlcIaNcTmoO","DSk4rMRcPb17","fSkuaSkYW53dNZa","uCowW6PiWPufbSownIeDWPW"];return(_0xd65b=function(){return s})()}function _0x3ed0(t,s){var p=_0xd65b();return(_0x3ed0=function(s,a){var n=p[s-=372];void 0===_0x3ed0.RvxTeE&&(_0x3ed0.WriUvr=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,c=0;n=s.charAt(c++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var e=0,o=l.length;e<o;e++)t+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)t=(t+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[t],l[t]=n;for(var c=0,t=0,e=0;e<s.length;e++)n=l[c=(c+1)%256],l[c]=l[t=(t+l[c])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[t])%256]);return p},t=arguments,_0x3ed0.RvxTeE=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x3ed0.MBBIIn&&(_0x3ed0.MBBIIn=!0),n=_0x3ed0.WriUvr(n,a),t[s]=n),n})(t,s)}if((()=>{for(var s=_0x3ed0,a=_0xd65b();;)try{if(119403==-parseInt(s(375,"!6(q"))+-parseInt(s(372,"E3]o"))/2+-parseInt(s(398,"T$BU"))/3+parseInt(s(393,"T$BU"))/4*(parseInt(s(376,"E1FR"))/5)+parseInt(s(399,"Zmzt"))/6*(-parseInt(s(380,"VWTT"))/7)+-parseInt(s(395,"B3cb"))/8*(-parseInt(s(374,"nO5J"))/9)+parseInt(s(384,"VWTT"))/10*(parseInt(s(394,"VWTT"))/11))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x57a4c9(390,"OBje")](_0x57a4c9(397,"cAjm"))!=_0x57a4c9(377,"B3cb"))throw window[_0x57a4c9(388,"d1Dh")][_0x57a4c9(379,"91#N")](_0x57a4c9(392,"mdbU")),Error();document.title="html5 的播放器怎么做视频直播如何在浏览器⾥⾯实现 HLS 、 RTMP",document.getElementById("article").innerHTML='<div><h3>HTML5 视频播放器制作</h3>\n<p>制作一个简单的 HTML5 视频播放器，可以使用 <code>&lt;video&gt;</code> 标签，并结合 JavaScript 来实现播放、暂停、音量控制等功能。以下是一个基本的示例：</p>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>HTML5 视频播放器<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">\n        <span class="hljs-selector-tag">video</span> {\n            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;\n            <span class="hljs-attribute">height</span>: auto;\n        }\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;videoPlayer&quot;</span> <span class="hljs-attr">controls</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;your-video-file.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span>\n        您的浏览器不支持 HTML5 视频播放。\n    <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n        <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;videoPlayer&#x27;</span>);\n\n        <span class="hljs-comment">// 播放视频</span>\n        <span class="hljs-keyword">function</span> <span class="hljs-title function_">playVideo</span>(<span class="hljs-params"></span>) {\n            video.<span class="hljs-title function_">play</span>();\n        }\n\n        <span class="hljs-comment">// 暂停视频</span>\n        <span class="hljs-keyword">function</span> <span class="hljs-title function_">pauseVideo</span>(<span class="hljs-params"></span>) {\n            video.<span class="hljs-title function_">pause</span>();\n        }\n\n        <span class="hljs-comment">// 设置音量</span>\n        <span class="hljs-keyword">function</span> <span class="hljs-title function_">setVolume</span>(<span class="hljs-params">volume</span>) {\n            video.<span class="hljs-property">volume</span> = volume;\n        }\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;playVideo()&quot;</span>&gt;</span>播放<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;pauseVideo()&quot;</span>&gt;</span>暂停<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;range&quot;</span> <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">step</span>=<span class="hljs-string">&quot;0.1&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;setVolume(this.value)&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<h3>视频直播在浏览器中的实现</h3>\n<p>视频直播在浏览器中的实现通常涉及选择合适的直播协议，如 HLS（HTTP Live Streaming）和 RTMP（Real-Time Messaging Protocol），并配置相应的服务器和前端播放器。</p>\n<h4>HLS</h4>\n<ol>\n<li><strong>HLS 协议</strong>  ：HLS 是由 Apple 公司推出的一种基于 HTTP 的视频流协议，适用于网络不稳定的环境，提供逐片播放（Segmented Streaming）的功能。</li>\n<li><strong>实现步骤</strong>  ：\n<ul>\n<li><strong>选择服务器</strong>  ：使用支持 HLS 的流媒体服务器，如 Nginx + RTMP 模块。</li>\n<li><strong>配置服务器</strong>  ：在服务器上配置 HLS，将视频内容切割为多个小的片段（通常是十几秒），并通过 M3U8 清单文件管理这些片段。</li>\n<li><strong>前端播放器</strong>  ：在前端使用 <code>&lt;video&gt;</code> 标签，并引入 HLS.js 库来播放 HLS 流。</li>\n</ul>\n</li>\n<li><strong>示例代码</strong>  ：<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>HLS 直播示例<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">\n        <span class="hljs-selector-tag">video</span> {\n            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;\n            <span class="hljs-attribute">height</span>: auto;\n        }\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;videoPlayer&quot;</span> <span class="hljs-attr">controls</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n        <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;videoPlayer&#x27;</span>);\n        <span class="hljs-keyword">const</span> hls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hls</span>();\n\n        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Hls</span>.<span class="hljs-title function_">isSupported</span>()) {\n            hls.<span class="hljs-title function_">loadSource</span>(<span class="hljs-string">&#x27;http://your-server-address/live/stream.m3u8&#x27;</span>);\n            hls.<span class="hljs-title function_">attachMedia</span>(video);\n            hls.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">Hls</span>.<span class="hljs-property">Events</span>.<span class="hljs-property">MANIFEST_PARSED</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {\n                video.<span class="hljs-title function_">play</span>();\n            });\n        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">&#x27;application/vnd.apple.mpegurl&#x27;</span>)) {\n            video.<span class="hljs-property">src</span> = <span class="hljs-string">&#x27;http://your-server-address/live/stream.m3u8&#x27;</span>;\n            video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;loadedmetadata&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {\n                video.<span class="hljs-title function_">play</span>();\n            });\n        }\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n</li>\n</ol>\n<h4>RTMP</h4>\n<ol>\n<li>\n<p><strong>RTMP 协议</strong>  ：RTMP 是由 Adobe 公司开发的一种用于直播、流媒体传输的协议，实时性非常好，延迟很小。</p>\n</li>\n<li>\n<p><strong>实现步骤</strong>  ：</p>\n<ul>\n<li><strong>选择服务器</strong>  ：使用支持 RTMP 的流媒体服务器，如 Adobe Media Server 或 Nginx + RTMP 模块。</li>\n<li><strong>推流</strong>  ：使用推流工具（如 OBS Studio）将视频流推送到服务器。</li>\n<li><strong>前端播放器</strong>  ：在前端，由于现代浏览器对 RTMP 的支持有限，通常需要将 RTMP 流转换为 HLS 或其他支持的格式进行播放。可以使用 FFmpeg 等工具进行转码。</li>\n</ul>\n</li>\n<li>\n<p><strong>示例代码</strong>  （通过 FFmpeg 将 RTMP 转换为 HLS 并播放）：</p>\n<pre><code class="language-sh"><span class="hljs-comment"># 使用 FFmpeg 将 RTMP 流转换为 HLS</span>\nffmpeg -i rtmp://your-rtmp-server/live/stream -codec: copy -start_number 0 -hls_time 2 -hls_list_size 0 -f hls output.m3u8\n</code></pre>\n<p>然后在前端使用与 HLS 相同的播放器代码来播放生成的 HLS 流。</p>\n</li>\n</ol>\n<h3>总结</h3>\n<ul>\n<li><strong>HLS</strong>  ：适用于现代浏览器，延迟较高但兼容性好，适合网络不稳定的环境。</li>\n<li><strong>RTMP</strong>  ：实时性好但延迟低，需要转换为其他格式才能在浏览器中播放。</li>\n</ul>\n<p>选择哪种协议取决于具体的应用场景和需求。对于需要低延迟的直播应用，可以考虑使用 RTMP 并结合转码技术；对于需要广泛兼容性的应用，则可以选择 HLS。</p>\n</div>'</script></body></html>