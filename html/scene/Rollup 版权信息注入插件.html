<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x3313(){var s=["WQa8aCo3DvbR","B8oAWQVdVNhdUCkNWPNcHN3dMCkvDa","geBdG8koW5b7eWLrpq","E8kwj8kpEmopWO7cH0qugCkW","jsLBrSklW6RdI8kV","W7pcK3ucW5aiWQzqevTHjq","CCoFctfeWQCBDNW","ubaTW5Oj","E8kqjSkaEmopW7ZcVxiLe8k5cq","BZZdIZpcN8oXWO3dSq","WQPByb5Vp8koEmoRWRTVuSoE","nLRdISo+W402WQhdItXJWPmkBI0","fcqyvNdcRJ/dIuvDz8kTg0RdSmkkWOFcVe1Vimkvj8kazSkJ","WPhdJYVdMCkprSoFWOy","WQfrWPdcMSouALPCW5OyW6Ks","o0qNWRPuWQJcOalcR8oumXu","bmkfxMygW6e4CMVcKwGp","sgvAeexdHwFcP2TJ","B8otW53cGdZcVmorWO8","WO3dU8oHW7zBtCkWFSk7ottdLW","emoeWRbbz8oUlwT2W6G","fXBdTXhdHhGMW5O","aCknxwmeW6fMi33cHg09nSoY","W6apW5xdGK9eW74JWOzXWQRdVMO","r0FdRWJcP8o1W7JcQW","tbhcMvhdOfHSW7m","W6nQqCkRrxPJxHjR","rXVcJNNdOfrU"];return(_0x3313=function(){return s})()}var _0x5e5ab3=_0x3061;function _0x3061(p,s){var t=_0x3313();return(_0x3061=function(s,n){var a=t[s-=460];void 0===_0x3061.aDMTPd&&(_0x3061.yiXAcq=function(s,n){var a,l=[],p=0,t="";for(s=(s=>{for(var n,a,l="",p="",t=0,e=0;a=s.charAt(e++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,o=l.length;c<o;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)p=(p+l[e]+n.charCodeAt(e%n.length))%256,a=l[e],l[e]=l[p],l[p]=a;for(var e=0,p=0,c=0;c<s.length;c++)a=l[e=(e+1)%256],l[e]=l[p=(p+l[e])%256],l[p]=a,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[p])%256]);return t},p=arguments,_0x3061.aDMTPd=!0);var s=s+t[0],l=p[s];return l?a=l:(void 0===_0x3061.kkCYpk&&(_0x3061.kkCYpk=!0),a=_0x3061.yiXAcq(a,n),p[s]=a),a})(p,s)}if((()=>{for(var s=_0x3061,n=_0x3313();;)try{if(659486==+parseInt(s(460,"tTfh"))+parseInt(s(486,"uMNg"))/2+-parseInt(s(464,"nR48"))/3*(parseInt(s(470,"Zc2m"))/4)+-parseInt(s(475,"E^kW"))/5*(-parseInt(s(465,"SLxA"))/6)+parseInt(s(476,"%B#L"))/7*(parseInt(s(473,"M9Ms"))/8)+-parseInt(s(480,"E^kW"))/9+-parseInt(s(483,"66Lx"))/10*(parseInt(s(462,"M9Ms"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x5e5ab3(471,"ly[E")](_0x5e5ab3(478,"tTfh"))!=_0x5e5ab3(479,"e5nO"))throw window[_0x5e5ab3(469,"ly[E")][_0x5e5ab3(472,"Zc2m")](_0x5e5ab3(484,"X0j6")),Error();document.title="Rollup 版权信息注入插件",document.getElementById("article").innerHTML='<div><p>下面是一个 Rollup 插件实现，用于在打包后的文件头部自动添加版权声明、作者信息和许可证信息。</p>\n<h2>插件代码</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">rollupBannerPlugin</span>(<span class="hljs-params">options = {}</span>) {\n  <span class="hljs-keyword">const</span> {\n    copyright = <span class="hljs-string">&quot;&quot;</span>,\n    author = <span class="hljs-string">&quot;&quot;</span>,\n    license = <span class="hljs-string">&quot;&quot;</span>,\n    version = <span class="hljs-string">&quot;&quot;</span>,\n    buildDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),\n    includeHash = <span class="hljs-literal">false</span>,\n    commentStyle = <span class="hljs-string">&quot;block&quot;</span>, <span class="hljs-comment">// &#x27;block&#x27; or &#x27;line&#x27;</span>\n  } = options;\n\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;rollup-banner-plugin&quot;</span>,\n\n    <span class="hljs-title function_">renderChunk</span>(<span class="hljs-params">code, chunk, outputOptions</span>) {\n      <span class="hljs-keyword">let</span> banner = <span class="hljs-string">&quot;&quot;</span>;\n\n      <span class="hljs-comment">// 构建版权信息</span>\n      <span class="hljs-keyword">if</span> (copyright || author || license || version || buildDate) {\n        <span class="hljs-keyword">const</span> lines = [];\n\n        <span class="hljs-keyword">if</span> (commentStyle === <span class="hljs-string">&quot;block&quot;</span>) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;/*!&quot;</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (copyright) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">` * Copyright (c) <span class="hljs-subst">${copyright}</span>`</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (author) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">` * Author: <span class="hljs-subst">${author}</span>`</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (version) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">` * Version: <span class="hljs-subst">${version}</span>`</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (buildDate) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">` * Build Date: <span class="hljs-subst">${buildDate}</span>`</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (license) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">` * License: <span class="hljs-subst">${license}</span>`</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (includeHash &amp;&amp; chunk.<span class="hljs-property">fileName</span>) {\n          <span class="hljs-keyword">const</span> hash = <span class="hljs-title function_">getFileHash</span>(code);\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">` * Hash: <span class="hljs-subst">${hash}</span>`</span>);\n        }\n\n        <span class="hljs-keyword">if</span> (commentStyle === <span class="hljs-string">&quot;block&quot;</span>) {\n          lines.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot; */&quot;</span>);\n        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (commentStyle === <span class="hljs-string">&quot;line&quot;</span>) {\n          <span class="hljs-comment">// 将每行转换为行注释</span>\n          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; lines.<span class="hljs-property">length</span>; i++) {\n            lines[i] = lines[i].<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\\s*\\*\\s?/</span>, <span class="hljs-string">&quot;// &quot;</span>);\n          }\n        }\n\n        banner = lines.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;\\n&quot;</span>) + <span class="hljs-string">&quot;\\n\\n&quot;</span>;\n      }\n\n      <span class="hljs-keyword">return</span> {\n        <span class="hljs-attr">code</span>: banner + code,\n        <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>,\n      };\n    },\n  };\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">getFileHash</span>(<span class="hljs-params">content</span>) {\n  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createHash</span>(<span class="hljs-string">&quot;sha256&quot;</span>).<span class="hljs-title function_">update</span>(content).<span class="hljs-title function_">digest</span>(<span class="hljs-string">&quot;hex&quot;</span>).<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>);\n}\n</code></pre>\n<h2>使用示例</h2>\n<p>在你的 Rollup 配置文件中使用这个插件：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> bannerPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./rollup-banner-plugin.js&quot;</span>;\n<span class="hljs-keyword">import</span> pkg <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./package.json&quot;</span> assert { <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;json&quot;</span> };\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;src/index.js&quot;</span>,\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">file</span>: <span class="hljs-string">&quot;dist/bundle.js&quot;</span>,\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&quot;esm&quot;</span>,\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">bannerPlugin</span>({\n      <span class="hljs-attr">copyright</span>: <span class="hljs-string">`2020-<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear()}</span> My Project`</span>,\n      <span class="hljs-attr">author</span>: pkg.<span class="hljs-property">author</span> || <span class="hljs-string">&quot;Your Name&quot;</span>,\n      <span class="hljs-attr">license</span>: pkg.<span class="hljs-property">license</span> || <span class="hljs-string">&quot;MIT&quot;</span>,\n      <span class="hljs-attr">version</span>: pkg.<span class="hljs-property">version</span> || <span class="hljs-string">&quot;1.0.0&quot;</span>,\n      <span class="hljs-attr">buildDate</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleString</span>(),\n      <span class="hljs-attr">includeHash</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">commentStyle</span>: <span class="hljs-string">&quot;block&quot;</span>, <span class="hljs-comment">// 或者 &#x27;line&#x27;</span>\n    }),\n  ],\n};\n</code></pre>\n<h2>生成的输出示例</h2>\n<h3>块注释风格 (commentStyle: \'block\')</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">/*!\n * Copyright (c) 2020-2025 My Project\n * Author: Jane Doe\n * Version: 1.2.3\n * Build Date: 8/3/2025, 11:46:59 AM\n * License: MIT\n * Hash: a1b2c3d4\n */</span>\n\n<span class="hljs-comment">// 实际的打包代码...</span>\n</code></pre>\n<h3>行注释风格 (commentStyle: \'line\')</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// Copyright (c) 2020-2025 My Project</span>\n<span class="hljs-comment">// Author: Jane Doe</span>\n<span class="hljs-comment">// Version: 1.2.3</span>\n<span class="hljs-comment">// Build Date: 8/3/2025, 11:46:59 AM</span>\n<span class="hljs-comment">// License: MIT</span>\n<span class="hljs-comment">// Hash: a1b2c3d4</span>\n\n<span class="hljs-comment">// 实际的打包代码...</span>\n</code></pre>\n<h2>功能说明</h2>\n<ol>\n<li><strong>灵活的版权信息配置</strong>   ：支持版权年份、作者、版本号、许可证等信息</li>\n<li><strong>自动构建日期</strong>   ：自动添加构建时间戳</li>\n<li><strong>文件哈希值</strong>   ：可选添加文件内容的简短哈希值</li>\n<li><strong>注释风格选择</strong>   ：支持块注释(/* */)和行注释(//)两种风格</li>\n<li><strong>与package.json集成</strong>   ：可以直接从package.json中读取作者、版本和许可证信息</li>\n<li><strong>多文件支持</strong>   ：自动为每个输出文件添加适当的版权信息</li>\n</ol>\n<h2>高级用法</h2>\n<h3>动态生成版权年份</h3>\n<pre><code class="language-javascript"><span class="hljs-title function_">bannerPlugin</span>({\n  <span class="hljs-attr">copyright</span>: <span class="hljs-string">`2020-<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear()}</span> My Project`</span>,\n  <span class="hljs-comment">// 其他配置...</span>\n});\n</code></pre>\n<h3>从package.json自动获取信息</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> pkg <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./package.json&quot;</span> assert { <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;json&quot;</span> };\n\n<span class="hljs-title function_">bannerPlugin</span>({\n  <span class="hljs-attr">author</span>: pkg.<span class="hljs-property">author</span>,\n  <span class="hljs-attr">license</span>: pkg.<span class="hljs-property">license</span>,\n  <span class="hljs-attr">version</span>: pkg.<span class="hljs-property">version</span>,\n  <span class="hljs-comment">// 其他配置...</span>\n});\n</code></pre>\n<h3>自定义格式</h3>\n<p>你可以通过修改插件的<code>renderChunk</code>方法来实现完全自定义的版权信息格式：</p>\n<pre><code class="language-javascript"><span class="hljs-title function_">renderChunk</span>(<span class="hljs-params">code, chunk, outputOptions</span>) {\n  <span class="hljs-keyword">const</span> customBanner = <span class="hljs-string">`\n/**\n * <span class="hljs-subst">${pkg.name}</span> - <span class="hljs-subst">${pkg.description}</span>\n * @version <span class="hljs-subst">${pkg.version}</span>\n * @author <span class="hljs-subst">${pkg.author}</span>\n * @license <span class="hljs-subst">${pkg.license}</span>\n * @copyright <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear()}</span> <span class="hljs-subst">${pkg.author}</span>\n */\n  `</span>.<span class="hljs-title function_">trim</span>() + <span class="hljs-string">&#x27;\\n\\n&#x27;</span>;\n\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">code</span>: customBanner + code,\n    <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>\n  };\n}\n</code></pre>\n<p>这个插件可以帮助你确保开源项目的合规性，同时保持专业的代码外观。</p>\n</div>'</script></body></html>