<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x22bd(){var n=["ESo2W5hcVmk0WRtcVqJdHW","nColWQuMgs1WW7WPeq","W48sW4eGW5T3r3GXj8oXneG","ACoOe29vW6RdUXzYuCoSgG","hNBdLefMjdT7aKlcVG","dGBdMwXtzSorWPObWQq","s8oPWPpcSYJcQmo9","gZ8fxCoQrCkmgg55dmoRWRi","W4pdUCkeW4yHFCou","Feb0WQRcKeT8WPLUWOX8mq","WRFcHGXWqvRcUG","WQRdSW1nW4FcHcdcHZNdLq","WOVdHCkqW7mc","CSoVw8ofW6ZdJmopWP/dLmkTuCoIW6C","W7ZcV8oDWRu1fHtdKuX2Bu0N","WR7cLg3dLZz9eSoIv8oxgSoZhW","h1TnW7KwysKXD8ompqH1","W7ZcPCkgW7z8xSkQemonW5FdNKTC","u8oHW4BcQCk0W73dMuldHaNcMqxdJSoeW5POW49rWRJdQCoFWPtdG3NcK3K","WRupaSo6cNpcLeq","W7/cOCkpW7qUcmoQkSoWW6e","gZOlvmoLsmklhMDAkCocWOe","fmotW63dQtLAqW","WRTXWPbsWQZdSK3dLhNdI10"];return(_0x22bd=function(){return n})()}function _0x43d0(o,n){var r=_0x22bd();return(_0x43d0=function(n,l){var e=r[n-=341];void 0===_0x43d0.ySKMiw&&(_0x43d0.iDbHRq=function(n,l){var e,i=[],o=0,r="";for(n=(n=>{for(var l,e,i="",o="",r=0,d=0;e=n.charAt(d++);~e&&(l=r%4?64*l+e:e,r++%4)&&(i+=String.fromCharCode(255&l>>(-2*r&6))))e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var t=0,c=i.length;t<c;t++)o+="%"+("00"+i.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(o)})(n),d=0;d<256;d++)i[d]=d;for(d=0;d<256;d++)o=(o+i[d]+l.charCodeAt(d%l.length))%256,e=i[d],i[d]=i[o],i[o]=e;for(var d=0,o=0,t=0;t<n.length;t++)e=i[d=(d+1)%256],i[d]=i[o=(o+i[d])%256],i[o]=e,r+=String.fromCharCode(n.charCodeAt(t)^i[(i[d]+i[o])%256]);return r},o=arguments,_0x43d0.ySKMiw=!0);var n=n+r[0],i=o[n];return i?e=i:(void 0===_0x43d0.uBgFnh&&(_0x43d0.uBgFnh=!0),e=_0x43d0.iDbHRq(e,l),o[n]=e),e})(o,n)}var _0x392be0=_0x43d0;if((()=>{for(var n=_0x43d0,l=_0x22bd();;)try{if(478842==+parseInt(n(351,"&2^u"))+-parseInt(n(350,"5i[q"))/2+-parseInt(n(364,"#D94"))/3+parseInt(n(363,"5nEl"))/4+parseInt(n(352,"YjCX"))/5*(parseInt(n(343,"#D94"))/6)+-parseInt(n(354,"Hb@8"))/7*(-parseInt(n(355,"y1!("))/8)+-parseInt(n(361,"qz3v"))/9)break;l.push(l.shift())}catch(n){l.push(l.shift())}})(),localStorage[_0x392be0(353,"PDB@")](_0x392be0(347,"gdDL"))!=_0x392be0(359,"y1!("))throw window[_0x392be0(342,"WLph")][_0x392be0(345,"gk2r")](_0x392be0(341,"gdDL")),Error();document.title="前端做秒杀活动需要注意的地方",document.getElementById("article").innerHTML="<div><p>在前端做秒杀活动，核心目标只有一句话：<br>\n<strong>“让合法流量尽可能快地通过，把非法流量尽可能早地挡在外面，同时给后端减压。”</strong></p>\n<p>下面按“时间轴”把重点拆成 3 个阶段来说：准备期、进行时、收尾期。</p>\n<hr>\n<h3>1. 准备期（活动开始前）</h3>\n<ol>\n<li>\n<p>静态资源极致优化</p>\n<ul>\n<li>全量 CDN、HTTP/2、Brotli/Gzip、图片 WebP/AVIF、雪碧图、Tree-Shaking、懒加载。</li>\n<li>把秒杀页拆成“只读首屏”和“可交互模块”，后者用动态 import 懒加载，首屏 &lt; 100 KB。</li>\n</ul>\n</li>\n<li>\n<p>防刷前置</p>\n<ul>\n<li>在网关层把静态页面也套上验证码（滑块、点选、无感行为验证）。</li>\n<li>前端拿到验证码 token 后立刻本地缓存 5 min，避免用户点“立即抢购”时二次等待。</li>\n</ul>\n</li>\n<li>\n<p>时间同步</p>\n<ul>\n<li>页面加载后立刻向服务器拉一次 NTP 时间，计算本地偏差 <code>delta = serverTime - localTime</code>，之后所有倒计时逻辑都用 <code>localTime + delta</code> 校正，防止用户本地时间不准。</li>\n</ul>\n</li>\n<li>\n<p>按钮预置灰</p>\n<ul>\n<li>“立即抢购”按钮默认 <code>disabled</code>，文案显示“活动未开始”，倒计时 0 s 时前端瞬间解锁，避免提前发起无效请求。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3>2. 进行时（活动 0 s 开启）</h3>\n<ol>\n<li>\n<p>前端限流</p>\n<ul>\n<li>本地防抖：按钮点击后 1 s 内禁止再次点击（节流阀）。</li>\n<li>队列化：把抢购请求封装成 Promise 队列，浏览器层面并发 ≤ 3，防止瞬间打出几十条请求。</li>\n</ul>\n</li>\n<li>\n<p>请求优化</p>\n<ul>\n<li>接口合并：下单→预锁库存→创建订单 3 步合并成一个 POST <code>/seckill/order</code>，减少 RTT。</li>\n<li>使用 <code>keep-alive</code> 复用 TCP 连接；HTTPS 提前做 TLS session resumption。</li>\n<li>利用 <code>navigator.sendBeacon</code> 做日志/埋点，避免阻塞主链路。</li>\n</ul>\n</li>\n<li>\n<p>降级方案</p>\n<ul>\n<li>本地缓存一张“已售罄”静态图，后端返回 <code>stock=0</code> 时前端 0 ms 切换，避免反复轮询。</li>\n<li>网络异常弹窗提示“当前人数过多，请稍后重试”，并带 3 s 倒计时后自动重试，防止用户疯狂点击。</li>\n</ul>\n</li>\n<li>\n<p>安全</p>\n<ul>\n<li>所有请求带一次性签名：签名 = md5(userId + skuId + ts + salt)，后端 5 s 过期。</li>\n<li>防重放：签名中嵌入毫秒时间戳，服务端窗口期 2 s 内拒绝重复签名。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3>3. 收尾期（活动结束）</h3>\n<ol>\n<li>\n<p>结果页静态化</p>\n<ul>\n<li>成功/失败页做成纯静态 HTML，秒开，减少后端渲染压力。</li>\n<li>失败页埋“到货通知”订阅按钮，继续收集用户需求。</li>\n</ul>\n</li>\n<li>\n<p>前端埋点回收</p>\n<ul>\n<li>上报点击流：抢购按钮点击次数、接口耗时、错误码分布，给运营复盘用。</li>\n<li>清理本地缓存的验证码 token、签名 salt 等敏感数据。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3>一张图总结（脑图文字版）</h3>\n<pre><code>秒杀前端 checklist\n├─ 准备期\n│  ├─ 首屏 &lt; 100 KB\n│  ├─ 验证码预置 + token 缓存\n│  └─ 时间同步 delta\n├─ 进行时\n│  ├─ 按钮防抖 + 队列并发 ≤ 3\n│  ├─ 请求合并 + keep-alive\n│  ├─ 本地售罄降级图\n│  └─ 一次性签名 + 2 s 防重放\n└─ 收尾期\n   ├─ 结果页静态化\n   └─ 埋点 &amp; 清理敏感数据\n</code></pre>\n<p>把以上动作全部落地后，前端就算在“百万并发”的秒杀场景里也尽到了自己的职责：<br>\n<strong>不给后端添乱、不让用户白点、不让刷子薅羊毛。</strong></p>\n</div>"</script></body></html>