<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0xdbd595=_0x2712;function _0x2712(t,e){var d=_0x1eeb();return(_0x2712=function(e,r){var n=d[e-=350];void 0===_0x2712.IeOTLa&&(_0x2712.EVySKr=function(e,r){var n,o=[],t=0,d="";for(e=(e=>{for(var r,n,o="",t="",d=0,c=0;n=e.charAt(c++);~n&&(r=d%4?64*r+n:n,d++%4)&&(o+=String.fromCharCode(255&r>>(-2*d&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var W=0,a=o.length;W<a;W++)t+="%"+("00"+o.charCodeAt(W).toString(16)).slice(-2);return decodeURIComponent(t)})(e),c=0;c<256;c++)o[c]=c;for(c=0;c<256;c++)t=(t+o[c]+r.charCodeAt(c%r.length))%256,n=o[c],o[c]=o[t],o[t]=n;for(var c=0,t=0,W=0;W<e.length;W++)n=o[c=(c+1)%256],o[c]=o[t=(t+o[c])%256],o[t]=n,d+=String.fromCharCode(e.charCodeAt(W)^o[(o[c]+o[t])%256]);return d},t=arguments,_0x2712.IeOTLa=!0);var e=e+d[0],o=t[e];return o?n=o:(void 0===_0x2712.ugwncP&&(_0x2712.ugwncP=!0),n=_0x2712.EVySKr(n,r),t[e]=n),n})(t,e)}if((()=>{for(var e=_0x2712,r=_0x1eeb();;)try{if(721440==-parseInt(e(351,"cZg&"))*(parseInt(e(366,"dRJ0"))/2)+parseInt(e(365,"PWu2"))/3+-parseInt(e(375,"eAqR"))/4*(parseInt(e(368,"m2W8"))/5)+-parseInt(e(374,"]Fo2"))/6+-parseInt(e(352,"p]4$"))/7+-parseInt(e(370,"JTn("))/8*(parseInt(e(373,"Un^5"))/9)+-parseInt(e(376,"8uJJ"))/10*(-parseInt(e(360,"Oy8k"))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}})(),localStorage[_0xdbd595(377,"*7pW")](_0xdbd595(371,"]Ash"))!=_0xdbd595(364,"1Fne"))throw window[_0xdbd595(353,"I6ob")][_0xdbd595(357,"Z&rV")](_0xdbd595(367,"S21l")),Error();function _0x1eeb(){var e=["W6fECZxcJxRdGbyDv8oara","WOxdJmkbwvdcTYa","W7OlW6VcMgq","W6fDDtNcJxtcGsKYC8olrSoJ","W5rPW6BdUrDWWPa","qZRdVmkdzLFcK8kNfctdICkmiJVdMu55W4JdTSk7nSoQfSkkwIC","WP3cN8oJeKNcPWq","WQdcNu/dGSkcft9AfLZcNSoPWQxdUa","W5BdN3j7o1L8WPy","W75PW63dNmkHuhOHea","WOz+W7zewhRdKxm","WQpcQCk9Duf7pCoFWRldSGrC","D8o4WOu8WQaeWO7dSdmMl8oj","WRuSDmoKuMBcVbFdTG7dH8ka","WQT5WPZdJZfQxZVdPmoywHNcKSky","W7VcP8oYWOe2WRPD","WQFcQ8kpDSoxcu/cMSkwWOz2ea","gItdSSkhWR7dTfFdVSkflSoeja","W5GjmSkecCkMlCkGW697aSkiW5y","W6CaW4PhESopWOJcHa","WRxdSW3cVvtdTh8","W5hdMCoLW6lcICoaW45oAHXtcW","CSo4W6fhW7n6WR7dTa","WPrrjmoMv03cQW","wmohkCoyW7ZcGLRdVvRcKmknW6PI","WQFcMK7dICkef3OYg0VcSCoS","WQdcMYVcSSowyeO+","W6XvhK/cKCoCW506iCkyW6hcQuW"];return(_0x1eeb=function(){return e})()}document.title="React 的虚拟 DOM 比较过程",document.getElementById("article").innerHTML="<div><p>React 的虚拟 DOM 比较过程就是 <strong>Fiber Reconciler 的 Diff 算法</strong><br>\n核心目标：在「可中断」的前提下，把旧的 Fiber 树与新的 JSX（新的 VDOM）做最小化更新。</p>\n<p>下面用 3 个关键词 30 秒说清：</p>\n<ol>\n<li>\n<p><strong>单节点 Diff</strong><br>\n先比较 <code>key</code> + <code>type</code>（标签名或组件名）。</p>\n<ul>\n<li>相同 → 复用旧 Fiber，继续深入。</li>\n<li>不同 → 整棵子树标记为「删除」，然后新建整棵子树。</li>\n</ul>\n</li>\n<li>\n<p><strong>多节点 Diff（List）</strong><br>\n第一轮：遍历新旧子节点，按顺序比对 <code>key</code> 与 <code>type</code>，能复用就复用。<br>\n第二轮：对剩余节点建立 <strong>Map&lt;key, oldFiber&gt;</strong>   ，O(1) 查找复用。<br>\n第三轮：按顺序把「新增 / 移动 / 删除」打上 EffectTag。</p>\n</li>\n<li>\n<p><strong>组件 Diff</strong><br>\n把组件也当成一种「type」；若 type 变了直接卸载旧实例再 mount 新实例；type 不变则调用 <code>render → 继续 diff 子 Fiber</code>。</p>\n</li>\n</ol>\n<p>一句话总结：<br>\n<strong>React 的 diff 就是「key + type 作为开关」+「两轮遍历打补丁」+「可中断的 Fiber 遍历」，最终生成 Effect 链表在 commit 阶段一次性 DOM 操作。</strong></p>\n</div>"</script></body></html>