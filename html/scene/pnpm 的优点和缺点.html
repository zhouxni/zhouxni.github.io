<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0xd0f441=_0x1cf4;function _0x28ee(){var n=["WRxcL8oQrSknW6NdL1NcReehWO0","lfRcSW3dQCkiWRVcV8kPW6JcOYi","zLS1WPekv8k5xmoAW7m","tfddVSk2smoilIRdPL5HhCkq","pN0BxevLlCk0WQtdVsBdOZq","b8kCW6VcS8kJ","bcOvWR4AWRnbW6ddPCkM","zL4/WP9Xg8kTCSosW6pdJmo6","WPRdGSoRWQePW6yd","WQj2W5zDrSo5uLldR8kRiCkO","WR/cMWnay8ouWQzjW6xcJmoQnmoQ","W5rWWRKdW4DpWQZcTxJdPCoZWQO","WQ8WWPmInSkmAG","BCoHWOWja8kLWRC","W6eodtddKthdJG","BuLbWPpcHCoExa","W7FcOHJcG8kJvG3dUK8","W7FdHvXKW78WW5/cJCkFxgim","WQmulCoiW7dcM3y","zL80WPTZvCksq8oCW4pdNa","AmoDWPldMrpdT8k5W40","WQ5XW5DytSo1fw3dUCk7kmkWsW","W7ZdH1nJW75+W5dcNSkAtKy","W7NdGfjOWQHAW7VcNSkPtW","W7ZdG1jPWOD8W7VcGCkCFG","wSoFuv4Ghmozl8okW48DWP4peH/dK3/dMdRcMComBSoVz1NdHW"];return(_0x28ee=function(){return n})()}function _0x1cf4(e,n){var t=_0x28ee();return(_0x1cf4=function(n,o){var r=t[n-=129];void 0===_0x1cf4.Fdipwc&&(_0x1cf4.hnNaaU=function(n,o){var r,l=[],e=0,t="";for(n=(n=>{for(var o,r,l="",e="",t=0,d=0;r=n.charAt(d++);~r&&(o=t%4?64*o+r:r,t++%4)&&(l+=String.fromCharCode(255&o>>(-2*t&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var i=0,c=l.length;i<c;i++)e+="%"+("00"+l.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(e)})(n),d=0;d<256;d++)l[d]=d;for(d=0;d<256;d++)e=(e+l[d]+o.charCodeAt(d%o.length))%256,r=l[d],l[d]=l[e],l[e]=r;for(var d=0,e=0,i=0;i<n.length;i++)r=l[d=(d+1)%256],l[d]=l[e=(e+l[d])%256],l[e]=r,t+=String.fromCharCode(n.charCodeAt(i)^l[(l[d]+l[e])%256]);return t},e=arguments,_0x1cf4.Fdipwc=!0);var n=n+t[0],l=e[n];return l?r=l:(void 0===_0x1cf4.ebhmAf&&(_0x1cf4.ebhmAf=!0),r=_0x1cf4.hnNaaU(r,o),e[n]=r),r})(e,n)}if((()=>{for(var n=_0x1cf4,o=_0x28ee();;)try{if(356900==-parseInt(n(142,"jmT@"))+-parseInt(n(132,"w%OA"))/2*(-parseInt(n(137,"3dQV"))/3)+-parseInt(n(135,"w%OA"))/4*(-parseInt(n(134,"34vl"))/5)+-parseInt(n(152,"ONyj"))/6+parseInt(n(146,"4XP9"))/7*(-parseInt(n(151,"jmT@"))/8)+parseInt(n(149,"!ad4"))/9+parseInt(n(144,"w%OA"))/10)break;o.push(o.shift())}catch(n){o.push(o.shift())}})(),localStorage[_0xd0f441(141,"VG![")](_0xd0f441(139,"pc4#"))!=_0xd0f441(154,"uMuS"))throw window[_0xd0f441(143,"A&S&")][_0xd0f441(136,"!z7m")](_0xd0f441(148,"JAz!")),Error();document.title="pnpm 的优点和缺点",document.getElementById("article").innerHTML="<div><p>PNPM（Performant NPM）是一个高效的 Node.js 包管理工具，旨在解决 npm 和 Yarn 的某些痛点。以下是它的主要优点和缺点：</p>\n<hr>\n<h3><strong>优点</strong></h3>\n<ol>\n<li>\n<p><strong>磁盘空间高效</strong></p>\n<ul>\n<li>使用<strong>硬链接</strong>   和<strong>符号链接</strong>   共享依赖，相同版本的包在全局只存储一份，显著减少磁盘占用（尤其适合多项目场景）。</li>\n</ul>\n</li>\n<li>\n<p><strong>安装速度快</strong></p>\n<ul>\n<li>依赖解析和下载速度通常比 npm/Yarn 更快（尤其是重复安装时），因为避免了重复下载相同包。</li>\n</ul>\n</li>\n<li>\n<p><strong>严格的依赖结构</strong></p>\n<ul>\n<li>默认使用非扁平化的 <code>node_modules</code>（类似 npm 的 <code>node_modules</code> 结构），避免“幽灵依赖”问题（即未在 <code>package.json</code> 声明的依赖被误用）。</li>\n</ul>\n</li>\n<li>\n<p><strong>兼容性好</strong></p>\n<ul>\n<li>支持 <code>package.json</code> 和 <code>npm</code>/<code>Yarn</code> 的工作流，可无缝切换。</li>\n<li>兼容 npm 的脚本命令（如 <code>npm run</code> 可直接替换为 <code>pnpm run</code>）。</li>\n</ul>\n</li>\n<li>\n<p><strong>内置 Monorepo 支持</strong></p>\n<ul>\n<li>通过 <code>pnpm-workspace.yaml</code> 原生支持 Monorepo 项目，优化多包管理的性能。</li>\n</ul>\n</li>\n<li>\n<p><strong>安全性高</strong></p>\n<ul>\n<li>依赖隔离性强，减少因依赖冲突导致的安全风险。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>缺点</strong></h3>\n<ol>\n<li>\n<p><strong>生态兼容性问题</strong></p>\n<ul>\n<li>某些工具或框架（如旧版 Vue CLI、部分 Webpack 插件）可能因非扁平化 <code>node_modules</code> 结构报错，需额外配置（如 <code>shamefully-hoist</code>）。</li>\n</ul>\n</li>\n<li>\n<p><strong>调试复杂度</strong></p>\n<ul>\n<li>依赖通过硬链接指向全局存储，可能导致调试时路径显示为全局路径（而非项目本地），增加排查难度。</li>\n</ul>\n</li>\n<li>\n<p><strong>学习成本</strong></p>\n<ul>\n<li>需要理解其独特的依赖管理机制（如硬链接、符号链接），对新手可能有一定门槛。</li>\n</ul>\n</li>\n<li>\n<p><strong>社区规模较小</strong></p>\n<ul>\n<li>虽然发展迅速，但用户基数仍小于 npm/Yarn，遇到问题时解决方案可能较少。</li>\n</ul>\n</li>\n<li>\n<p><strong>CI/CD 环境需适配</strong></p>\n<ul>\n<li>部分 CI 系统需要显式缓存全局存储目录（<code>~/.pnpm-store</code>），否则可能重复下载依赖。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>适用场景</strong></h3>\n<ul>\n<li><strong>磁盘空间敏感</strong>   ：多项目共享依赖的场景（如企业级开发）。</li>\n<li><strong>大型项目/Monorepo</strong>   ：追求安装速度和依赖隔离性。</li>\n<li><strong>严格依赖管理</strong>   ：避免隐式依赖带来的问题。</li>\n</ul>\n<h3><strong>不适用场景</strong></h3>\n<ul>\n<li>依赖某些强制要求扁平化 <code>node_modules</code> 的旧工具链。</li>\n<li>对硬链接机制不熟悉的团队（需权衡调试成本）。</li>\n</ul>\n<hr>\n<h3><strong>总结</strong></h3>\n<p>PNPM 在性能和可靠性上表现优异，适合中大型项目，但可能需针对工具链做适配。建议在迁移前测试关键工作流（如构建、测试）是否兼容。</p>\n</div>"</script></body></html>