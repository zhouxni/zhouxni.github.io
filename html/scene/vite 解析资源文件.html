<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x5489(a,n){var r=_0x5c3a();return(_0x5489=function(n,s){var t=r[n-=448];void 0===_0x5489.pSRcli&&(_0x5489.EloPFw=function(n,s){var t,o=[],a=0,r="";for(n=(n=>{for(var s,t,o="",a="",r=0,e=0;t=n.charAt(e++);~t&&(s=r%4?64*s+t:t,r++%4)&&(o+=String.fromCharCode(255&s>>(-2*r&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var d=0,c=o.length;d<c;d++)a+="%"+("00"+o.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(a)})(n),e=0;e<256;e++)o[e]=e;for(e=0;e<256;e++)a=(a+o[e]+s.charCodeAt(e%s.length))%256,t=o[e],o[e]=o[a],o[a]=t;for(var e=0,a=0,d=0;d<n.length;d++)t=o[e=(e+1)%256],o[e]=o[a=(a+o[e])%256],o[a]=t,r+=String.fromCharCode(n.charCodeAt(d)^o[(o[e]+o[a])%256]);return r},a=arguments,_0x5489.pSRcli=!0);var n=n+r[0],o=a[n];return o?t=o:(void 0===_0x5489.klZyVD&&(_0x5489.klZyVD=!0),t=_0x5489.EloPFw(t,s),a[n]=t),t})(a,n)}function _0x5c3a(){var n=["WRPADc3dTmkkCblcQLzwWQzI","W6moW7zYW4ldU3/dGWBcS1np","W7/dPZzZW7VcNuS2","W4hdOmo6WQZdTHjaW53dJmoFW5yxoW","DKhcSZfVvSo6E8kuWOW","W4JcKCoQnCoCrWhdOwK","Emk3iCoVevxdOSkmCqdcRvG","WOf+WRNdNeyUW77cQCoqWP0","W4pcULtdGCoRW6KDkq","pCkIWO1lWOJdVai","FCo7xmosWRhdN0CoWQ5Fw8o8ea","W5ObmxtcH8kECrO","AtdcOuNcRhxdQMpdQCoPBmk4","Be/dVJuq","WPxcImoeawjUtW3cMhfnEYS","BwWtW6mlW6lcKCkFWOuS","kCkRhSkVW7dcIrO","kMxdQrtdUItdLW","BqFdOJuWWQxcNmoBWRdcQJy5xW","AatdPJy7WQtcNmo/WPlcUa09yW","f8oSW5JdTX3dOf3cJxlcOSkahSkCbmkifSk7W4ddLSozW6bchLfuDa","swi/CSkdlmksm8kRW4O","qSofqSkLW6RcPazJqmkMW4u1","W7pcMKJcU8k9iqddKIT2WP49W4K","r8ouW4xdRZ3cUdm","qSogrCkMW67cPNrAESkDW4u1hq"];return(_0x5c3a=function(){return n})()}var _0x3c1148=_0x5489;if((()=>{for(var n=_0x5489,s=_0x5c3a();;)try{if(491475==+parseInt(n(463,"MepC"))*(-parseInt(n(459,"sjU0"))/2)+-parseInt(n(472,"(5X$"))/3*(-parseInt(n(455,"V1oB"))/4)+-parseInt(n(461,"E@oW"))/5+parseInt(n(465,"C9in"))/6+parseInt(n(473,"s^HW"))/7*(parseInt(n(460,"v!l5"))/8)+-parseInt(n(451,"qeN]"))/9+parseInt(n(454,"Yyud"))/10)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x3c1148(467,"E@oW")](_0x3c1148(456,")*(F"))!=_0x3c1148(464,"b4!C"))throw window[_0x3c1148(462,"%nbr")][_0x3c1148(468,"MepC")](_0x3c1148(471,"!6Aw")),Error();document.title="vite 解析资源文件",document.getElementById("article").innerHTML='<div><p>是的，在 Vite 中使用 <code>import xx from \'资源路径\'</code> 语法导入资源时，<code>xx</code> 的值通常是该资源的<strong>引用地址（URL）</strong>  ，而非资源内容本身。但具体行为会因<strong>资源类型</strong>  和<strong>导入方式</strong>  而异：</p>\n<h3>一、核心机制：资源路径 → URL 转换</h3>\n<p>Vite 通过<strong>拦截浏览器请求</strong>  并返回处理后的资源，将导入的资源转换为可直接使用的 URL。例如：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> imgUrl <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./logo.png&#x27;</span>;\n<span class="hljs-comment">// imgUrl → &quot;/src/logo.png&quot;（开发环境）</span>\n<span class="hljs-comment">// imgUrl → &quot;/assets/logo.12345.png&quot;（生产环境）</span>\n\n<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;logo&#x27;</span>).<span class="hljs-property">src</span> = imgUrl;\n</code></pre>\n<h3>二、不同资源类型的处理结果</h3>\n<table>\n<thead>\n<tr>\n<th>资源类型</th>\n<th>导入语法</th>\n<th><code>xx</code> 的值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>图片</strong></td>\n<td><code>import img from \'./a.png\'</code></td>\n<td>字符串（URL）</td>\n<td>指向图片的引用地址，浏览器会根据该 URL 发起请求获取图片内容。</td>\n</tr>\n<tr>\n<td><strong>CSS 文件</strong></td>\n<td><code>import \'./style.css\'</code></td>\n<td>无（副作用导入）</td>\n<td>CSS 会被注入到页面，无需显式使用返回值。若使用 <code>?inline</code>，则返回 CSS 字符串。</td>\n</tr>\n<tr>\n<td><strong>JSON 文件</strong></td>\n<td><code>import json from \'./data.json\'</code></td>\n<td>对象（解析后的 JSON）</td>\n<td>Vite 会自动解析 JSON 文件为 JavaScript 对象。</td>\n</tr>\n<tr>\n<td><strong>字体文件</strong></td>\n<td><code>import font from \'./a.woff\'</code></td>\n<td>字符串（URL）</td>\n<td>与图片类似，返回字体文件的引用地址。</td>\n</tr>\n<tr>\n<td><strong>SVG 文件</strong></td>\n<td><code>import svg from \'./icon.svg\'</code></td>\n<td>字符串（URL）</td>\n<td>默认返回 URL。若使用 <code>?component</code>，则返回可渲染的组件（如 React/Vue 组件）。</td>\n</tr>\n</tbody>\n</table>\n<h3>三、特殊导入语法</h3>\n<h4>1. <strong>获取图片元数据（<code>?metadata</code>）</strong></h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { width, height } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./image.jpg?metadata&#x27;</span>;\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(width, height); <span class="hljs-comment">// 输出图片尺寸</span>\n</code></pre>\n<h4>2. <strong>强制内联资源（<code>?inline</code>）</strong></h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> inlineImg <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./small.png?inline&#x27;</span>;\n<span class="hljs-comment">// inlineImg → &quot;data:image/png;base64,...&quot;（Base64 字符串）</span>\n</code></pre>\n<h4>3. <strong>将 SVG 作为组件导入（<code>?component</code>）</strong></h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">SvgIcon</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./icon.svg?component&#x27;</span>;\n<span class="hljs-comment">// SvgIcon → 可直接渲染的组件（需配合框架使用）</span>\n</code></pre>\n<h3>四、开发环境 vs 生产环境</h3>\n<table>\n<thead>\n<tr>\n<th>环境</th>\n<th>URL 格式示例</th>\n<th>响应处理方式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>开发环境</strong></td>\n<td><code>/src/logo.png?hash=123</code></td>\n<td>Vite 服务器拦截请求，返回内存中的文件内容。</td>\n</tr>\n<tr>\n<td><strong>生产环境</strong></td>\n<td><code>/assets/logo.12345.png</code></td>\n<td>静态文件，由 Web 服务器（如 Nginx）直接返回。</td>\n</tr>\n</tbody>\n</table>\n<h3>五、注意事项</h3>\n<ol>\n<li><strong>路径敏感性</strong>\n<ul>\n<li>导入路径必须是<strong>静态可分析的</strong>  （如 <code>import \'./logo.png\'</code>），动态拼接路径（如 <code>import(\'./\' + name + \'.png\')</code>）可能导致 Vite 无法正确处理。</li>\n</ul>\n</li>\n<li><strong>插件影响</strong>\n<ul>\n<li>某些插件可能修改资源的处理方式（如 <code>vite-plugin-svg-transform</code> 将 SVG 转换为组件）。</li>\n</ul>\n</li>\n<li><strong>TypeScript 类型支持</strong>\n<ul>\n<li>需要配置类型声明以支持非 JS 资源导入：<pre><code class="language-typescript"><span class="hljs-comment">// src/vite-env.d.ts</span>\n<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.png&#x27;</span> {\n  <span class="hljs-keyword">const</span> <span class="hljs-attr">src</span>: <span class="hljs-built_in">string</span>;\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> src;\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ol>\n<h3>六、总结</h3>\n<p>在 Vite 中，<code>import xx from \'资源\'</code> 的核心机制是：</p>\n<ol>\n<li><strong>将资源路径转换为 URL</strong>  （开发环境为虚拟路径，生产环境为静态资源路径）。</li>\n<li><strong>拦截浏览器请求并返回资源内容</strong>  ，同时设置正确的响应头。</li>\n<li><code>xx</code> 的值通常是资源的 URL，但会因资源类型和导入方式而变化。</li>\n</ol>\n<p>这种设计使开发者可以像处理代码模块一样处理各种资源，同时获得 Vite 提供的优化和热更新支持。</p>\n</div>'</script></body></html>