<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x434634=_0x225a;function _0x2cc5(){var s=["rx3cLZH0oKxdR0K3xfe","pttdQSk8ESoAW7VcNSkpW4xcVmkJW5m","W7K9muayW7XJhIK3jH/dHG","W6n+WRyvlbtcL8oBWOddPZ7cKeGMgmkfeSoxzSk0wWzXA8kicG","FXDBnSonxY0","WQtcPcTeWQ/cJJu","q8oGWOP7WRTZW5G","y1VcSNCDW4tcIG","hCosW4NcH03cMCoAt3BcQ8kLka","aSkBW45YW77dPweGx8kNW6hdHxK","w8krWOZdGqi","W5j0mSoPWRdcJLPMgG","puFcRmoTcmkIWOW","o3FcP3aUW6pcP8oi","vSo7fmohW4BdP8kTlmk0WQJcOfi","eCkPCSkRq8oOWR7dHsS4w3z/","W7WBW6/cOhZdHaFcGSoUW5JdG08","W4moWPBcH8k9W4pdV8kxWRiGWQP8","W63dIwfJjI0Fw0f6BSoAWQK","WQyIzSk9W7VdJgvqoCorWQBdRa","W5tcLg/dH8oNdKtdNMfryHC","sCkNW4ZcHJJdT8kN","phRcJJnux1mlWOVdStxcGa","gCoCW4JcHuNcLmkAALlcMCk8l8oE"];return(_0x2cc5=function(){return s})()}function _0x225a(p,s){var t=_0x2cc5();return(_0x225a=function(s,a){var n=t[s-=279];void 0===_0x225a.UIPhrG&&(_0x225a.nOQvmp=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,c=0;n=s.charAt(c++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var e=0,o=l.length;e<o;e++)p+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(p)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)p=(p+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[p],l[p]=n;for(var c=0,p=0,e=0;e<s.length;e++)n=l[c=(c+1)%256],l[c]=l[p=(p+l[c])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[p])%256]);return t},p=arguments,_0x225a.UIPhrG=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0x225a.SloKUp&&(_0x225a.SloKUp=!0),n=_0x225a.nOQvmp(n,a),p[s]=n),n})(p,s)}if((()=>{for(var s=_0x225a,a=_0x2cc5();;)try{if(431495==-parseInt(s(295,"^c]f"))+parseInt(s(287,"*38q"))/2+parseInt(s(293,"nT(G"))/3*(parseInt(s(302,"l8]s"))/4)+parseInt(s(280,"QCaY"))/5+parseInt(s(291,"5$*O"))/6+-parseInt(s(286,"!3ap"))/7+-parseInt(s(301,"sqik"))/8*(-parseInt(s(289,"A)fy"))/9))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x434634(292,"A[4*")](_0x434634(282,"#G2E"))!=_0x434634(281,"LVKQ"))throw window[_0x434634(284,"l8]s")][_0x434634(299,"MN@K")](_0x434634(298,"%g)m")),Error();document.title="Webpack 构建通知插件实现",document.getElementById("article").innerHTML='<div><p>下面是一个实现 Webpack 构建通知插件的完整代码，该插件可以在构建完成（成功或失败）时发送系统通知，并支持自定义通知内容和样式。</p>\n<h2>插件代码</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { exec } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;child_process&quot;</span>);\n<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;os&quot;</span>);\n<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);\n<span class="hljs-keyword">const</span> notifier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;node-notifier&quot;</span>);\n<span class="hljs-keyword">const</span> chalk = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;chalk&quot;</span>);\n\n<span class="hljs-keyword">class</span> <span class="hljs-title class_">BuildNotifierPlugin</span> {\n  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Webpack Build&quot;</span>,\n      <span class="hljs-attr">successIcon</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&quot;icons/success.png&quot;</span>),\n      <span class="hljs-attr">failureIcon</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&quot;icons/failure.png&quot;</span>),\n      <span class="hljs-attr">successSound</span>: <span class="hljs-literal">false</span>,\n      <span class="hljs-attr">failureSound</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">suppressSuccess</span>: <span class="hljs-literal">false</span>,\n      <span class="hljs-attr">suppressFailure</span>: <span class="hljs-literal">false</span>,\n      <span class="hljs-attr">duration</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// seconds</span>\n      <span class="hljs-attr">onSuccess</span>: <span class="hljs-literal">null</span>,\n      <span class="hljs-attr">onFailure</span>: <span class="hljs-literal">null</span>,\n      ...options,\n    };\n  }\n\n  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {\n    <span class="hljs-comment">// 构建开始时间</span>\n    <span class="hljs-keyword">let</span> startTime;\n\n    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">beforeRun</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">&quot;BuildNotifierPlugin&quot;</span>, <span class="hljs-function">() =&gt;</span> {\n      startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();\n    });\n\n    <span class="hljs-comment">// 构建成功通知</span>\n    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">&quot;BuildNotifierPlugin&quot;</span>, <span class="hljs-function">(<span class="hljs-params">stats</span>) =&gt;</span> {\n      <span class="hljs-keyword">if</span> (stats.<span class="hljs-title function_">hasErrors</span>()) {\n        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// 由failed钩子处理</span>\n      }\n\n      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">suppressSuccess</span>) <span class="hljs-keyword">return</span>;\n\n      <span class="hljs-keyword">const</span> buildTime = ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startTime) / <span class="hljs-number">1000</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);\n      <span class="hljs-keyword">const</span> defaultMessage = <span class="hljs-string">`Build completed successfully in <span class="hljs-subst">${buildTime}</span>s`</span>;\n      <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">onSuccess</span>\n        ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-title function_">onSuccess</span>(stats, buildTime)\n        : defaultMessage;\n\n      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notify</span>({\n        <span class="hljs-attr">title</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">title</span>,\n        message,\n        <span class="hljs-attr">icon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">successIcon</span>,\n        <span class="hljs-attr">sound</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">successSound</span>,\n      });\n\n      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">logSuccess</span>(message);\n    });\n\n    <span class="hljs-comment">// 构建失败通知</span>\n    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">failed</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">&quot;BuildNotifierPlugin&quot;</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">suppressFailure</span>) <span class="hljs-keyword">return</span>;\n\n      <span class="hljs-keyword">const</span> defaultMessage = <span class="hljs-string">&quot;Build failed! Check the console for details.&quot;</span>;\n      <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">onFailure</span>\n        ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-title function_">onFailure</span>(error)\n        : defaultMessage;\n\n      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notify</span>({\n        <span class="hljs-attr">title</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">title</span>,\n        message,\n        <span class="hljs-attr">icon</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">failureIcon</span>,\n        <span class="hljs-attr">sound</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">failureSound</span>,\n      });\n\n      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">logError</span>(message);\n    });\n  }\n\n  <span class="hljs-title function_">notify</span>(<span class="hljs-params">options</span>) {\n    <span class="hljs-keyword">const</span> platform = os.<span class="hljs-title function_">platform</span>();\n\n    <span class="hljs-comment">// 通用通知</span>\n    notifier.<span class="hljs-title function_">notify</span>({\n      <span class="hljs-attr">title</span>: options.<span class="hljs-property">title</span>,\n      <span class="hljs-attr">message</span>: options.<span class="hljs-property">message</span>,\n      <span class="hljs-attr">icon</span>: options.<span class="hljs-property">icon</span>,\n      <span class="hljs-attr">sound</span>: options.<span class="hljs-property">sound</span>,\n      <span class="hljs-attr">timeout</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">duration</span>,\n      <span class="hljs-attr">wait</span>: <span class="hljs-literal">false</span>,\n    });\n\n    <span class="hljs-comment">// 平台特定通知</span>\n    <span class="hljs-keyword">switch</span> (platform) {\n      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;darwin&quot;</span>: <span class="hljs-comment">// macOS</span>\n        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">macNotification</span>(options);\n        <span class="hljs-keyword">break</span>;\n      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;win32&quot;</span>: <span class="hljs-comment">// Windows</span>\n        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">windowsNotification</span>(options);\n        <span class="hljs-keyword">break</span>;\n      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;linux&quot;</span>: <span class="hljs-comment">// Linux</span>\n        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">linuxNotification</span>(options);\n        <span class="hljs-keyword">break</span>;\n    }\n  }\n\n  <span class="hljs-title function_">macNotification</span>(<span class="hljs-params">options</span>) {\n    <span class="hljs-keyword">let</span> command = <span class="hljs-string">`osascript -e &#x27;display notification &quot;<span class="hljs-subst">${options.message}</span>&quot; `</span>;\n    command += <span class="hljs-string">`with title &quot;<span class="hljs-subst">${options.title}</span>&quot;&#x27;`</span>;\n\n    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">sound</span>) {\n      command += <span class="hljs-string">` &amp;&amp; afplay /System/Library/Sounds/Ping.aiff`</span>;\n    }\n\n    <span class="hljs-title function_">exec</span>(command);\n  }\n\n  <span class="hljs-title function_">windowsNotification</span>(<span class="hljs-params">options</span>) {\n    <span class="hljs-keyword">const</span> psCommand =\n      <span class="hljs-string">`[System.Reflection.Assembly]::LoadWithPartialName(&#x27;System.Windows.Forms&#x27;); `</span> +\n      <span class="hljs-string">`[System.Windows.Forms.MessageBox]::Show(&#x27;<span class="hljs-subst">${options.message}</span>&#x27;, &#x27;<span class="hljs-subst">${options.title}</span>&#x27;)`</span>;\n\n    <span class="hljs-title function_">exec</span>(<span class="hljs-string">`powershell -command &quot;<span class="hljs-subst">${psCommand}</span>&quot;`</span>);\n  }\n\n  <span class="hljs-title function_">linuxNotification</span>(<span class="hljs-params">options</span>) {\n    <span class="hljs-keyword">let</span> command = <span class="hljs-string">`notify-send &quot;<span class="hljs-subst">${options.title}</span>&quot; &quot;<span class="hljs-subst">${options.message}</span>&quot;`</span>;\n\n    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">icon</span>) {\n      command += <span class="hljs-string">` -i <span class="hljs-subst">${options.icon}</span>`</span>;\n    }\n\n    <span class="hljs-title function_">exec</span>(command);\n  }\n\n  <span class="hljs-title function_">logSuccess</span>(<span class="hljs-params">message</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">green</span>(<span class="hljs-string">`✓ <span class="hljs-subst">${message}</span>`</span>));\n  }\n\n  <span class="hljs-title function_">logError</span>(<span class="hljs-params">message</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">red</span>(<span class="hljs-string">`✗ <span class="hljs-subst">${message}</span>`</span>));\n  }\n}\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">BuildNotifierPlugin</span>;\n</code></pre>\n<h2>使用示例</h2>\n<p>在 webpack 配置中使用该插件：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">BuildNotifierPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./BuildNotifierPlugin&quot;</span>);\n<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-comment">// ...其他webpack配置</span>\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuildNotifierPlugin</span>({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;My App Build&quot;</span>, <span class="hljs-comment">// 通知标题</span>\n      <span class="hljs-attr">successIcon</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&quot;assets/success.png&quot;</span>), <span class="hljs-comment">// 成功图标</span>\n      <span class="hljs-attr">failureIcon</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&quot;assets/failure.png&quot;</span>), <span class="hljs-comment">// 失败图标</span>\n      <span class="hljs-attr">successSound</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 成功时播放声音</span>\n      <span class="hljs-attr">failureSound</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 失败时播放声音</span>\n      <span class="hljs-attr">duration</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">// 通知显示时间(秒)</span>\n      <span class="hljs-attr">suppressSuccess</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 不显示成功通知</span>\n      <span class="hljs-attr">suppressFailure</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 不显示失败通知</span>\n      <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">stats, buildTime</span>) =&gt;</span> {\n        <span class="hljs-comment">// 自定义成功消息</span>\n        <span class="hljs-keyword">return</span> (\n          <span class="hljs-string">`Build succeeded in <span class="hljs-subst">${buildTime}</span>s\\n`</span> +\n          <span class="hljs-string">`Assets: <span class="hljs-subst">${stats.compilation.assets.length}</span>\\n`</span> +\n          <span class="hljs-string">`Size: <span class="hljs-subst">${(stats.compilation.assets.reduce((sum, asset) =&gt; sum + asset.size(), <span class="hljs-number">0</span>) / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>).toFixed(<span class="hljs-number">2</span>)}</span>MB`</span>\n        );\n      },\n      <span class="hljs-attr">onFailure</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n        <span class="hljs-comment">// 自定义失败消息</span>\n        <span class="hljs-keyword">return</span> (\n          <span class="hljs-string">`Build failed with <span class="hljs-subst">${error.errors ? error.errors.length : <span class="hljs-number">1</span>}</span> errors\\n`</span> +\n          <span class="hljs-string">`Check the terminal for details`</span>\n        );\n      },\n    }),\n  ],\n};\n</code></pre>\n<h2>功能说明</h2>\n<ol>\n<li>\n<p><strong>多平台支持</strong>   ：</p>\n<ul>\n<li>支持 macOS、Windows 和 Linux 系统通知</li>\n<li>自动检测当前操作系统并使用最佳通知方式</li>\n</ul>\n</li>\n<li>\n<p><strong>自定义通知内容</strong>   ：</p>\n<ul>\n<li>可自定义成功和失败的通知标题、消息和图标</li>\n<li>支持动态生成通知内容（基于构建统计信息）</li>\n</ul>\n</li>\n<li>\n<p><strong>多媒体通知</strong>   ：</p>\n<ul>\n<li>支持播放声音提醒</li>\n<li>支持自定义通知图标</li>\n</ul>\n</li>\n<li>\n<p><strong>日志输出</strong>   ：</p>\n<ul>\n<li>在控制台输出彩色日志（成功绿色，失败红色）</li>\n</ul>\n</li>\n<li>\n<p><strong>灵活配置</strong>   ：</p>\n<ul>\n<li>可禁用成功或失败通知</li>\n<li>可设置通知显示时长</li>\n<li>支持完全自定义通知逻辑</li>\n</ul>\n</li>\n</ol>\n<h2>安装依赖</h2>\n<p>在使用前需要安装相关依赖：</p>\n<pre><code class="language-bash">npm install node-notifier chalk --save-dev\n</code></pre>\n<h2>高级用法</h2>\n<ol>\n<li><strong>使用自定义声音</strong>   （仅 macOS）：</li>\n</ol>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BuildNotifierPlugin</span>({\n  <span class="hljs-attr">successSound</span>: <span class="hljs-string">&quot;/path/to/success.mp3&quot;</span>,\n  <span class="hljs-attr">failureSound</span>: <span class="hljs-string">&quot;/path/to/error.mp3&quot;</span>,\n});\n</code></pre>\n<ol start="2">\n<li><strong>仅失败时通知</strong>   ：</li>\n</ol>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BuildNotifierPlugin</span>({\n  <span class="hljs-attr">suppressSuccess</span>: <span class="hljs-literal">true</span>,\n});\n</code></pre>\n<ol start="3">\n<li><strong>集成到 CI/CD 环境</strong>   ：</li>\n</ol>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BuildNotifierPlugin</span>({\n  <span class="hljs-attr">suppressSuccess</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CI</span> === <span class="hljs-string">&quot;true&quot;</span>, <span class="hljs-comment">// CI环境下不显示成功通知</span>\n  <span class="hljs-attr">onFailure</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;CI Build Failed! Please check the logs.&quot;</span>,\n});\n</code></pre>\n<ol start="4">\n<li><strong>结合其他通知服务</strong>   （如 Slack、Email）：</li>\n</ol>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BuildNotifierPlugin</span>({\n  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">stats</span>) =&gt;</span> {\n    <span class="hljs-comment">// 调用Slack webhook</span>\n    <span class="hljs-title function_">sendSlackNotification</span>(<span class="hljs-string">&quot;Build succeeded!&quot;</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Build succeeded and Slack notified&quot;</span>;\n  },\n});\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li>Windows 系统需要启用 PowerShell 脚本执行权限</li>\n<li>Linux 系统需要安装 <code>notify-send</code> 工具（通常包含在 libnotify-bin 包中）</li>\n<li>在无 GUI 的服务器环境（如 CI/CD）中，部分通知功能可能不可用</li>\n<li>图标文件路径需要使用绝对路径</li>\n</ol>\n<p>这个插件可以帮助开发者及时获取构建状态反馈，特别是在长时间构建过程中，无需一直盯着控制台等待构建完成。</p>\n<h2>如果需要跨平台的自定义声音文件播放，推荐组合以下模块：</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> notifier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;node-notifier&quot;</span>);\n<span class="hljs-keyword">const</span> player = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;play-sound&quot;</span>)(); <span class="hljs-comment">// 需安装 play-sound 包</span>\n\n<span class="hljs-comment">// 先触发通知</span>\nnotifier.<span class="hljs-title function_">notify</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;提醒&quot;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;播放自定义声音&quot;</span> });\n\n<span class="hljs-comment">// 播放本地音频文件</span>\nplayer.<span class="hljs-title function_">play</span>(<span class="hljs-string">&quot;./custom-sound.mp3&quot;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {\n  <span class="hljs-keyword">if</span> (err) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;声音播放失败&quot;</span>, err);\n});\n</code></pre>\n</div>'</script></body></html>