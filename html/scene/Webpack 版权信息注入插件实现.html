<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x5d56(p,s){var t=_0x2fac();return(_0x5d56=function(s,n){var a=t[s-=225];void 0===_0x5d56.ClAmms&&(_0x5d56.NExypt=function(s,n){var a,l=[],p=0,t="";for(s=(s=>{for(var n,a,l="",p="",t=0,o=0;a=s.charAt(o++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var e=0,c=l.length;e<c;e++)p+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(p)})(s),o=0;o<256;o++)l[o]=o;for(o=0;o<256;o++)p=(p+l[o]+n.charCodeAt(o%n.length))%256,a=l[o],l[o]=l[p],l[p]=a;for(var o=0,p=0,e=0;e<s.length;e++)a=l[o=(o+1)%256],l[o]=l[p=(p+l[o])%256],l[p]=a,t+=String.fromCharCode(s.charCodeAt(e)^l[(l[o]+l[p])%256]);return t},p=arguments,_0x5d56.ClAmms=!0);var s=s+t[0],l=p[s];return l?a=l:(void 0===_0x5d56.XVYjDD&&(_0x5d56.XVYjDD=!0),a=_0x5d56.NExypt(a,n),p[s]=a),a})(p,s)}var _0x1db2d2=_0x5d56;function _0x2fac(){var s=["W7KAW5dcJCkxbftdSCo0cL8/rSk/WR4BWQdcPeRcSmoyWRnjWQVdI8kh","FSojo8kCW6TbW4/dSWDvW7/dRSoE","WQqIW6FcN8kfzYS","aZrLu8kLWP/dGSon","WPFdPSoaWQbtvmocAmoMWQysW5q","W65ZCZtcSmktoJyGzCk5WRFdTW","gtpcVGRcNmkvW4VdVuqtoZ/dOW","WPvXWPxcS8kJW7VdJmozq8kVW7RcMLTf","DwizyrtcLCozWQVcHaq7W7r4WOG","dxe3WQrdd8klW7tdNG","W6L0FdZcTCktpaOpwSkPWR7dPG","WRlcKCkKFSkxj8kTW4JdNJPMWRZdUa","WPutW6VdQ8oPWRpcIW","W7pdHSoJkSodFmoW","WPJdGmkeWOywiCkeamoqvmk5cKi","schdVfdcUwDpAttdMCoQW43cVW","FITeW7VdR8o3WP3dOCo+W50/WP0k","mehcPZ8Tt1C","WPenW67dP8o6WPlcRG","WPJcPSo2W5PwBmof","uaXWW4xcIxbSwYueFCodga","saVdPr/cUsqMW5C6uSoiFW","e047WO/dHq"];return(_0x2fac=function(){return s})()}if((()=>{for(var s=_0x5d56,n=_0x2fac();;)try{if(512342==+parseInt(s(234,"sABm"))*(-parseInt(s(229,"sABm"))/2)+parseInt(s(236,"9]b9"))/3+parseInt(s(231,"X%BN"))/4*(parseInt(s(240,"xCsO"))/5)+-parseInt(s(225,"TwsO"))/6+-parseInt(s(230,"lt3o"))/7+parseInt(s(235,"YXEs"))/8+parseInt(s(246,"qgoA"))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x1db2d2(232,"n74n")](_0x1db2d2(247,"(Uk["))!=_0x1db2d2(237,"YXEs"))throw window[_0x1db2d2(241,"r9JN")][_0x1db2d2(228,"Aq]l")](_0x1db2d2(238,"xCsO")),Error();document.title="Webpack 版权信息注入插件实现",document.getElementById("article").innerHTML='<div><p>下面是一个实现 Webpack 版权信息注入插件的完整代码，该插件可以在打包后的文件头部自动添加版权声明、作者信息和许可证信息。</p>\n<h2>插件代码</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">ConcatSource</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack-sources&quot;</span>);\n\n<span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyrightPlugin</span> {\n  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {\n      <span class="hljs-attr">banner</span>: <span class="hljs-string">`/*!\n * Copyright (c) <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear()}</span> <span class="hljs-subst">${options.author || <span class="hljs-string">&quot;Your Name&quot;</span>}</span>.\n * Licensed under the <span class="hljs-subst">${options.license || <span class="hljs-string">&quot;MIT&quot;</span>}</span> License.\n * See LICENSE in the project root for license information.\n */\n`</span>,\n      ...options,\n    };\n  }\n\n  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {\n    <span class="hljs-keyword">const</span> { banner } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>;\n\n    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">compilation</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">&quot;CopyrightPlugin&quot;</span>, <span class="hljs-function">(<span class="hljs-params">compilation</span>) =&gt;</span> {\n      compilation.<span class="hljs-property">hooks</span>.<span class="hljs-property">processAssets</span>.<span class="hljs-title function_">tap</span>(\n        {\n          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;CopyrightPlugin&quot;</span>,\n          <span class="hljs-attr">stage</span>: compiler.<span class="hljs-property">webpack</span>.<span class="hljs-property">Compilation</span>.<span class="hljs-property">PROCESS_ASSETS_STAGE_ADDITIONS</span>,\n        },\n        <span class="hljs-function">(<span class="hljs-params">assets</span>) =&gt;</span> {\n          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [filename, asset] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(assets)) {\n            <span class="hljs-comment">// 只处理JS和CSS文件</span>\n            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/\\.(js|css)$/</span>.<span class="hljs-title function_">test</span>(filename)) {\n              compilation.<span class="hljs-title function_">updateAsset</span>(\n                filename,\n                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcatSource</span>(banner, asset),\n              );\n            }\n          }\n        },\n      );\n    });\n  }\n}\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">CopyrightPlugin</span>;\n</code></pre>\n<h2>使用示例</h2>\n<p>在 webpack 配置中使用该插件：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CopyrightPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./CopyrightPlugin&quot;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-comment">// ...其他webpack配置</span>\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyrightPlugin</span>({\n      <span class="hljs-attr">author</span>: <span class="hljs-string">&quot;Your Name or Organization&quot;</span>,\n      <span class="hljs-attr">license</span>: <span class="hljs-string">&quot;MIT&quot;</span>,\n      <span class="hljs-comment">// 可选：完全自定义banner</span>\n      <span class="hljs-comment">// banner: `/*! Custom banner text */\\n`</span>\n    }),\n  ],\n};\n</code></pre>\n<h2>功能说明</h2>\n<ol>\n<li><strong>自动添加版权信息</strong>   ：在所有 JS 和 CSS 文件头部添加版权声明</li>\n<li><strong>动态年份</strong>   ：自动使用当前年份</li>\n<li><strong>可配置</strong>   ：\n<ul>\n<li>可以指定作者名称</li>\n<li>可以指定许可证类型</li>\n<li>也可以完全自定义 banner 内容</li>\n</ul>\n</li>\n<li><strong>合规性</strong>   ：确保开源项目满足许可证要求</li>\n</ol>\n<h2>生成的版权信息示例</h2>\n<p>在打包后的文件头部会添加类似这样的注释：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">/*!\n * Copyright (c) 2025 Your Name or Organization.\n * Licensed under the MIT License.\n * See LICENSE in the project root for license information.\n */</span>\n</code></pre>\n<h2>高级用法</h2>\n<p>如果需要更复杂的版权信息格式，可以完全自定义 banner：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyrightPlugin</span>({\n  <span class="hljs-attr">banner</span>: <span class="hljs-string">`/**\n * @product    Your Product Name\n * @author     Your Name &lt;your@email.com&gt;\n * @copyright  <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear()}</span> Your Company\n * @license    MIT\n * @version    <span class="hljs-subst">${<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./package.json&quot;</span>).version}</span>\n * @build      <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>\n */\n`</span>,\n});\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li>插件只会处理 <code>.js</code> 和 <code>.css</code> 文件</li>\n<li>如果需要处理其他类型的文件，可以修改插件中的正则表达式</li>\n<li>确保你的 LICENSE 文件确实存在于项目根目录</li>\n<li>对于压缩后的文件，注释会被保留（除非你特意配置压缩工具移除注释）</li>\n</ol>\n<p>这个插件可以帮助开发者轻松满足开源项目的许可证要求，同时也可以用于商业项目中的版权声明管理。</p>\n</div>'</script></body></html>