<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4dffaa=_0xda23;function _0xcb65(){var s=["wXxcMby+W5HTxW","s8ouW4FdT8olamkPsmkR","W48FWPRdP29cW4PPeqDBia","W4JcV8kAWQ7cGCkvaCocrCoIW4RdJG","BSkyW45/W4NcJbNcJ8oVW5FcOSoC","WROzWOeDFSkJW44zWPVdMCoKW4K","eWdcUxJcKehcTG","W6G4WOjYW5lcKwe0","yMDAdJdcGWxcIW","dCkiWO3dOtC","W54buCk7WQXpida4W5PIa8ozoa","WRHFpgjzW652WQCkiCk3Aa","jX5hWRWGW7NdL2/cUG","CCkXsSkrW6qdWOjQW7fMW6JdG8oE","W44xWPRdO2PcW5rSmazzdW","nSooWPGSWO7dLXhcQG","r13dUxVcI3tcOISx","W44AWPhdO2rgWODRdILUgmoi","WPvBW5ZcOs9oWP8VgWbLd8o6emoOW4xdVXeYu8o0W5qll8k4za","a1LEd8knrWBdTCkvWP17WQZcL3i","W6T/yCkJWOnzW4a","aCkCW7ldMbKNWQOKet/dHYNcSq","w3iJFdmMW7BcJLC","yMWydJlcQZ7cQWS","y2qBCw7dJ3lcKXdcTIj+W40","eZFdJSovW6dcLvXJ"];return(_0xcb65=function(){return s})()}function _0xda23(l,s){var t=_0xcb65();return(_0xda23=function(s,n){var a=t[s-=266];void 0===_0xda23.KCOpaP&&(_0xda23.TsdukB=function(s,n){var a,e=[],l=0,t="";for(s=(s=>{for(var n,a,e="",l="",t=0,c=0;a=s.charAt(c++);~a&&(n=t%4?64*n+a:a,t++%4)&&(e+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var o=0,r=e.length;o<r;o++)l+="%"+("00"+e.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(l)})(s),c=0;c<256;c++)e[c]=c;for(c=0;c<256;c++)l=(l+e[c]+n.charCodeAt(c%n.length))%256,a=e[c],e[c]=e[l],e[l]=a;for(var c=0,l=0,o=0;o<s.length;o++)a=e[c=(c+1)%256],e[c]=e[l=(l+e[c])%256],e[l]=a,t+=String.fromCharCode(s.charCodeAt(o)^e[(e[c]+e[l])%256]);return t},l=arguments,_0xda23.KCOpaP=!0);var s=s+t[0],e=l[s];return e?a=e:(void 0===_0xda23.xySCkd&&(_0xda23.xySCkd=!0),a=_0xda23.TsdukB(a,n),l[s]=a),a})(l,s)}if((()=>{for(var s=_0xda23,n=_0xcb65();;)try{if(350991==+parseInt(s(278,"[Xkz"))*(parseInt(s(274,"(WX["))/2)+parseInt(s(277,"$kup"))/3*(parseInt(s(279,"x!aU"))/4)+parseInt(s(275,"(WX["))/5+-parseInt(s(280,"w6om"))/6+parseInt(s(276,"R#Ko"))/7*(parseInt(s(282,"VPW9"))/8)+parseInt(s(268,"x!aU"))/9+-parseInt(s(270,"Z!b5"))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x4dffaa(283,"Djm8")](_0x4dffaa(289,"lk!A"))!=_0x4dffaa(286,"zh16"))throw window[_0x4dffaa(266,"05gr")][_0x4dffaa(271,"[DGX")](_0x4dffaa(269,"x!aU")),Error();document.title="Umi.js 4 目录结构",document.getElementById("article").innerHTML='<div><p>Umi.js 是一个企业级前端应用框架，基于 React 和 TypeScript，提供了<strong>约定式路由</strong>  、<strong>插件化机制</strong>  、<strong>构建优化</strong>  等功能。它的目录结构遵循一定的约定，同时也支持自定义配置。以下是 <strong>Umi 4（最新版）</strong>   的典型目录结构及功能介绍：</p>\n<hr>\n<h2><strong>Umi.js 4 目录结构</strong></h2>\n<pre><code>.\n├── config/                  # 可选，Umi 配置目录（替代 .umirc.ts）\n├── src/                     # 项目源码目录（核心）\n│   ├── assets/              # 静态资源（图片、字体等）\n│   ├── components/          # 公共组件\n│   ├── layouts/             # 全局布局\n│   ├── models/              # 全局数据模型（基于 useModel）\n│   ├── pages/               # 页面目录（约定式路由）\n│   │   ├── index.tsx        # 首页（自动映射为 /）\n│   │   ├── users/           # 用户页（自动映射为 /users）\n│   │   │   ├── index.tsx    # 用户列表页（/users）\n│   │   │   └── [id].tsx     # 动态路由（/users/:id）\n│   ├── plugins/             # 可选，本地插件\n│   ├── services/            # API 请求层（推荐）\n│   ├── app.tsx              # 运行时配置（全局初始化）\n│   ├── global.css           # 全局样式\n│   └── wrappers/            # 路由高阶组件（如权限控制）\n├── mock/                    # Mock 数据（开发环境）\n├── public/                  # 静态资源（直接复制到构建目录）\n├── .umirc.ts                # Umi 配置文件（优先级高于 config/config.ts）\n├── package.json             # 项目依赖\n└── tsconfig.json            # TypeScript 配置\n</code></pre>\n<hr>\n<h2><strong>核心目录详解</strong></h2>\n<h3><strong>1. <code>src/pages/</code>（约定式路由）</strong></h3>\n<ul>\n<li><strong>自动生成路由</strong>  ，文件结构即路由结构：\n<ul>\n<li><code>pages/index.tsx</code> → <code>/</code></li>\n<li><code>pages/users/index.tsx</code> → <code>/users</code></li>\n<li><code>pages/users/[id].tsx</code> → <code>/users/:id</code>（动态路由）</li>\n</ul>\n</li>\n<li><strong>支持嵌套路由</strong>  ：<pre><code class="language-tsx"><span class="hljs-comment">// pages/users/_layout.tsx（布局组件）</span>\n<span class="hljs-keyword">export</span> <span class="hljs-title function_">default</span> (props) =&gt; {\n  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{props.children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;\n};\n</code></pre>\n</li>\n</ul>\n<h3><strong>2. <code>src/layouts/</code>（全局布局）</strong></h3>\n<ul>\n<li>用于定义全局布局，如导航栏、页脚：<pre><code class="language-tsx"><span class="hljs-comment">// src/layouts/index.tsx</span>\n<span class="hljs-keyword">export</span> <span class="hljs-title function_">default</span> (props) =&gt; {\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>\n      {props.children}\n      <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>\n  );\n};\n</code></pre>\n</li>\n</ul>\n<h3><strong>3. <code>src/models/</code>（全局状态管理）</strong></h3>\n<ul>\n<li>基于 <code>useModel</code> 的轻量级数据流：<pre><code class="language-typescript"><span class="hljs-comment">// src/models/user.ts</span>\n<span class="hljs-keyword">export</span> <span class="hljs-title function_">default</span> () =&gt; {\n  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;Umi&#x27;</span>);\n  <span class="hljs-keyword">return</span> { name, setName };\n};\n</code></pre>\n<pre><code class="language-tsx"><span class="hljs-comment">// 在组件中使用</span>\n<span class="hljs-keyword">const</span> { name } = <span class="hljs-title function_">useModel</span>(<span class="hljs-string">&#x27;user&#x27;</span>);\n</code></pre>\n</li>\n</ul>\n<h3><strong>4. <code>src/services/</code>（API 请求层）</strong></h3>\n<ul>\n<li>推荐存放 API 请求逻辑：<pre><code class="language-typescript"><span class="hljs-comment">// src/services/user.ts</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">&#x27;/api/user&#x27;</span>);\n}\n</code></pre>\n</li>\n</ul>\n<h3><strong>5. <code>src/app.tsx</code>（运行时配置）</strong></h3>\n<ul>\n<li>用于扩展运行时能力：<pre><code class="language-tsx"><span class="hljs-comment">// src/app.tsx</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getInitialState</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> { <span class="hljs-attr">userName</span>: <span class="hljs-string">&#x27;Admin&#x27;</span> };\n}\n</code></pre>\n</li>\n</ul>\n<h3><strong>6. <code>mock/</code>（Mock 数据）</strong></h3>\n<ul>\n<li>开发环境模拟 API：<pre><code class="language-typescript"><span class="hljs-comment">// mock/user.ts</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-string">&#x27;GET /api/user&#x27;</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Umi&#x27;</span> },\n};\n</code></pre>\n</li>\n</ul>\n<h3><strong>7. <code>public/</code>（静态资源）</strong></h3>\n<ul>\n<li>直接复制到构建目录（如 <code>favicon.ico</code>）。</li>\n</ul>\n<h3><strong>8. <code>config/</code> 或 <code>.umirc.ts</code>（Umi 配置）</strong></h3>\n<ul>\n<li>可配置路由、插件、Vite/Webpack 等：<pre><code class="language-typescript"><span class="hljs-comment">// .umirc.ts</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">routes</span>: [{ <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> }],\n  <span class="hljs-attr">npmClient</span>: <span class="hljs-string">&#x27;pnpm&#x27;</span>,\n  <span class="hljs-attr">vite</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 默认使用 Vite</span>\n};\n</code></pre>\n</li>\n</ul>\n<hr>\n<h2><strong>Umi 4 新增特性</strong></h2>\n<ol>\n<li><strong>默认使用 Vite</strong>  （更快构建 &amp; HMR）</li>\n<li><strong>支持 React 18</strong>  （并发模式）</li>\n<li><strong>更灵活的插件系统</strong>  （兼容 Vite 插件）</li>\n<li><strong>SSR &amp; 微前端优化</strong></li>\n</ol>\n<hr>\n<h2><strong>总结</strong></h2>\n<ul>\n<li><strong><code>pages/</code> 是核心</strong>  ，文件即路由。</li>\n<li><strong><code>layouts/</code> 和 <code>wrappers/</code></strong>   控制全局布局和权限。</li>\n<li><strong><code>models/</code> + <code>useModel</code></strong>   提供轻量级状态管理。</li>\n<li><strong><code>services/</code></strong>   存放 API 逻辑。</li>\n<li><strong><code>mock/</code></strong>   用于开发环境模拟数据。</li>\n<li><strong><code>.umirc.ts</code></strong>   是主要配置文件。</li>\n</ul>\n<p>Umi 4 的目录结构清晰且高度可扩展，适合企业级应用开发。🚀</p>\n</div>'</script></body></html>