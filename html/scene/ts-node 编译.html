<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x227b22=_0x4ca1;function _0x4ca1(o,s){var p=_0x456b();return(_0x4ca1=function(s,n){var a=p[s-=201];void 0===_0x4ca1.QxJcjP&&(_0x4ca1.nTWRwG=function(s,n){var a,t=[],o=0,p="";for(s=(s=>{for(var n,a,t="",o="",p=0,c=0;a=s.charAt(c++);~a&&(n=p%4?64*n+a:a,p++%4)&&(t+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var l=0,e=t.length;l<e;l++)o+="%"+("00"+t.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(o)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)o=(o+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[o],t[o]=a;for(var c=0,o=0,l=0;l<s.length;l++)a=t[c=(c+1)%256],t[c]=t[o=(o+t[c])%256],t[o]=a,p+=String.fromCharCode(s.charCodeAt(l)^t[(t[c]+t[o])%256]);return p},o=arguments,_0x4ca1.QxJcjP=!0);var s=s+p[0],t=o[s];return t?a=t:(void 0===_0x4ca1.OBigZD&&(_0x4ca1.OBigZD=!0),a=_0x4ca1.nTWRwG(a,n),o[s]=a),a})(o,s)}function _0x456b(){var s=["W70tW43dOKNcTSo9W4RcGhfRWRm","W5lcI2lcTSoOW5XyW4C","WP7cJgX1W4BdN0FdTwPM","W7a3W4SRW40muN02WPBdTmowvq","WPSFbKCxW6iHWO4M","lmk3mmoUW5HQxG","W7u4W4iOW44dhLehWRhdS8oU","W5W8WR3cImkPWOH0jtTv","tYRcNJ3cMXxdPSkSWOiP","WRK0c8o4gSoOC8kgW4tcQXjG","W6eUydJdVmoOWR9VW6pcUmoQaa","W5K6WRNcJSoaWR1KjsHoWPK","lCk1b8o0WOS","WQWxit7dVvFdOW","WP3cII4VW6JdIxZdGa","thRdHuJcTWpdLq","W5FcQhH6thv/WOWGeJhdGCoY","W5OFW7FdN8o4BrrBWQ0FW4pcJa","W5GhumoaW7lcT8oHqbldISksDq","W7PcyuldKfddRmkWhZu","WQBcN0ZdHYH+WRPFWQSuW7LI","xmkWpComW6jiBCkedG","W7SxW4RdO0JdL8oHW4/cGKnH","uWNdV8kvWQz2Cq","j3NdPWldTYFdVmkNc8knDSkj","WPKbm8kflSk4W5NcRa","sX/dPrOfWRD4rG","WQCDnHBdVvVdOCkS","W4VcMmoZWQddRCkOWPflW7iUWQxdVSkuCCkEFJj1W58kzdVdH03cSSoZ","WOBcN0rybdBdSq/cTq"];return(_0x456b=function(){return s})()}if((()=>{for(var s=_0x4ca1,n=_0x456b();;)try{if(108028==+parseInt(s(228,"[vaF"))*(-parseInt(s(230,"foBB"))/2)+-parseInt(s(207,"Kxh&"))/3+-parseInt(s(221,"[vaF"))/4*(parseInt(s(220,"B]EU"))/5)+-parseInt(s(227,"QvU)"))/6*(parseInt(s(222,"W05a"))/7)+-parseInt(s(201,"vtD]"))/8*(-parseInt(s(209,"eoOT"))/9)+parseInt(s(224,"B]EU"))/10*(parseInt(s(212,"ZdC("))/11)+parseInt(s(229,"O52@"))/12)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x227b22(226,"VT%*")](_0x227b22(204,"vkPj"))!=_0x227b22(225,"J8jg"))throw window[_0x227b22(210,"VT%*")][_0x227b22(206,"VzmU")](_0x227b22(211,"7Opt")),Error();document.title="ts-node 编译",document.getElementById("article").innerHTML='<div><p>使用 <strong>ts-node</strong>   运行整个 TypeScript 项目（多文件模块化项目）需要结合模块加载和配置，以下是完整指南：</p>\n<hr>\n<h3><strong>1. 基础配置</strong></h3>\n<h4><strong>(1) 安装依赖</strong></h4>\n<pre><code class="language-sh">npm install -D ts-node typescript @types/node\n<span class="hljs-comment"># 如果项目有路径别名（如 `@/utils`），额外安装：</span>\nnpm install -D tsconfig-paths\n</code></pre>\n<h4><strong>(2) 配置 <code>tsconfig.json</code></strong></h4>\n<p>确保配置支持模块化（如 <code>CommonJS</code> 或 <code>ESModules</code>）：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;target&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ES2022&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CommonJS&quot;</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// Node.js 默认用 CommonJS</span>\n    <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist&quot;</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// 编译输出目录（生产环境用）</span>\n    <span class="hljs-attr">&quot;rootDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./src&quot;</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// 源代码目录</span>\n    <span class="hljs-attr">&quot;esModuleInterop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// 兼容 ES 和 CommonJS</span>\n    <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node&quot;</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// 模块解析策略</span>\n    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.&quot;</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// 路径别名基础路径</span>\n    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                    <span class="hljs-comment">// 路径别名映射</span>\n      <span class="hljs-attr">&quot;@/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/*&quot;</span><span class="hljs-punctuation">]</span>\n    <span class="hljs-punctuation">}</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;include&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/**/*.ts&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// 包含的文件</span>\n  <span class="hljs-attr">&quot;exclude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;node_modules&quot;</span><span class="hljs-punctuation">]</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<hr>\n<h3><strong>2. 运行整个项目</strong></h3>\n<h4><strong>(1) 直接运行入口文件</strong></h4>\n<pre><code class="language-sh">npx ts-node --project tsconfig.json src/index.ts\n</code></pre>\n<ul>\n<li><code>--project</code>：显式指定 <code>tsconfig.json</code> 路径（可选）。</li>\n</ul>\n<h4><strong>(2) 启用路径别名支持</strong></h4>\n<p>如果用了 <code>paths</code> 别名，需加载 <code>tsconfig-paths</code>：</p>\n<pre><code class="language-sh">npx ts-node -r tsconfig-paths/register src/index.ts\n</code></pre>\n<h4><strong>(3) 监听文件变化（开发热更新）</strong></h4>\n<pre><code class="language-sh">npx ts-node --watch -r tsconfig-paths/register src/index.ts\n</code></pre>\n<p>或配合 <code>nodemon</code>（更稳定）：</p>\n<pre><code class="language-sh">npm install -D nodemon\n</code></pre>\n<p>配置 <code>nodemon.json</code>：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;watch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;ext&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ts&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;exec&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ts-node -r tsconfig-paths/register src/index.ts&quot;</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<p>运行：</p>\n<pre><code class="language-sh">npx nodemon\n</code></pre>\n<hr>\n<h3><strong>3. 复杂项目优化</strong></h3>\n<h4><strong>(1) 使用 <code>ES Modules</code> (ESM)</strong></h4>\n<p>如果 <code>tsconfig.json</code> 中设置 <code>&quot;module&quot;: &quot;ESNext&quot;</code>，需额外配置：</p>\n<pre><code class="language-sh">npx ts-node --esm -r tsconfig-paths/register src/index.ts\n</code></pre>\n<p>或在 <code>package.json</code> 中：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;module&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;NODE_OPTIONS=&#x27;--loader ts-node/esm&#x27; node src/index.ts&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h4><strong>(2) 忽略类型检查（加速开发）</strong></h4>\n<pre><code class="language-sh">npx ts-node --transpile-only -r tsconfig-paths/register src/index.ts\n</code></pre>\n<h4><strong>(3) 生产环境构建</strong></h4>\n<p><strong>不要用 ts-node 部署生产环境</strong>  ！应编译为 JS：</p>\n<pre><code class="language-sh">tsc &amp;&amp; node dist/index.js\n</code></pre>\n<hr>\n<h3><strong>4. 常见问题解决</strong></h3>\n<h4><strong>Q1: 报错 <code>Cannot find module</code></strong></h4>\n<ul>\n<li><strong>原因</strong>  ：路径别名未生效或模块类型不匹配。</li>\n<li><strong>解决</strong>  ：\n<ul>\n<li>确保 <code>-r tsconfig-paths/register</code> 已添加。</li>\n<li>检查 <code>tsconfig.json</code> 的 <code>paths</code> 和 <code>baseUrl</code> 配置。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>Q2: 循环依赖导致卡死</strong></h4>\n<ul>\n<li><strong>解决</strong>  ：重构代码或用 <code>import type</code> 减少循环依赖：<pre><code class="language-typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">SomeType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./other-module&#x27;</span>;\n</code></pre>\n</li>\n</ul>\n<h4><strong>Q3: 性能慢</strong></h4>\n<ul>\n<li><strong>优化方案</strong>  ：\n<ul>\n<li>用 <code>--transpile-only</code> 跳过类型检查。</li>\n<li>换用 <code>swc-node</code>（Rust 加速）：<pre><code class="language-sh">npm install -D @swc-node/register\nnpx swc-node -r tsconfig-paths/register src/index.ts\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>5. 完整示例项目结构</strong></h3>\n<pre><code>my-project/\n├── src/\n│   ├── index.ts          # 入口文件\n│   ├── utils/\n│   │   └── helper.ts    # 子模块（使用 `@/utils/helper` 别名）\n├── tsconfig.json\n├── package.json\n</code></pre>\n<p><strong>启动命令</strong>  ：</p>\n<pre><code class="language-sh">npm install -D ts-node typescript @types/node tsconfig-paths nodemon\nnpx nodemon\n</code></pre>\n<hr>\n<h3><strong>总结</strong></h3>\n<ul>\n<li><strong>开发阶段</strong>  ：用 <code>ts-node + nodemon</code> 实现热更新。</li>\n<li><strong>路径别名</strong>  ：通过 <code>tsconfig-paths/register</code> 解析。</li>\n<li><strong>生产环境</strong>  ：务必用 <code>tsc</code> 编译成 JS 再运行。</li>\n<li><strong>性能瓶颈</strong>  ：尝试 <code>swc-node</code> 或 <code>esbuild</code>。</li>\n</ul>\n<p>这样就能高效运行整个 TypeScript 项目了！ 🚀</p>\n</div>'</script></body></html>