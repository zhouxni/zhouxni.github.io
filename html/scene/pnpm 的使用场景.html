<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1ffd28=_0x26d3;if((()=>{for(var n=_0x26d3,o=_0x2476();;)try{if(149442==-parseInt(n(170,"2!&Q"))+parseInt(n(155,"h9&h"))/2*(parseInt(n(159,"No2g"))/3)+-parseInt(n(156,"CzbD"))/4*(parseInt(n(161,"kPzR"))/5)+-parseInt(n(172,"[lv5"))/6*(-parseInt(n(157,"h9&h"))/7)+-parseInt(n(174,"k*rt"))/8+parseInt(n(163,"ZCnM"))/9*(-parseInt(n(160,"jV(Z"))/10)+parseInt(n(164,"v0mX"))/11)break;o.push(o.shift())}catch(n){o.push(o.shift())}})(),localStorage[_0x1ffd28(158,"rjZ%")](_0x1ffd28(169,"YfP!"))!=_0x1ffd28(178,"BSEn"))throw window[_0x1ffd28(153,"JN5M")][_0x1ffd28(168,"]jB%")](_0x1ffd28(179,"8pY6")),Error();function _0x26d3(t,n){var e=_0x2476();return(_0x26d3=function(n,o){var r=e[n-=153];void 0===_0x26d3.OeewiK&&(_0x26d3.xNfeLj=function(n,o){var r,l=[],t=0,e="";for(n=(n=>{for(var o,r,l="",t="",e=0,d=0;r=n.charAt(d++);~r&&(o=e%4?64*o+r:r,e++%4)&&(l+=String.fromCharCode(255&o>>(-2*e&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var i=0,c=l.length;i<c;i++)t+="%"+("00"+l.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(t)})(n),d=0;d<256;d++)l[d]=d;for(d=0;d<256;d++)t=(t+l[d]+o.charCodeAt(d%o.length))%256,r=l[d],l[d]=l[t],l[t]=r;for(var d=0,t=0,i=0;i<n.length;i++)r=l[d=(d+1)%256],l[d]=l[t=(t+l[d])%256],l[t]=r,e+=String.fromCharCode(n.charCodeAt(i)^l[(l[d]+l[t])%256]);return e},t=arguments,_0x26d3.OeewiK=!0);var n=n+e[0],l=t[n];return l?r=l:(void 0===_0x26d3.zJIjrN&&(_0x26d3.zJIjrN=!0),r=_0x26d3.xNfeLj(r,o),t[n]=r),r})(t,n)}function _0x2476(){var n=["oWO1WOCMWRddKa","W6ifW73dJmo2CNldVSkrW6xcPSoG","eSkrn1VdNCo7hG","W7lcNCkgWRTXCI/cImohf8kRvq","zColh8kDCCoLtG5PnW0","cmoQW6BcOmkLWR/dO19/WO7dTSof","BLJdKrpcQSoLW7Cf","WR8qACkbff3dQHfg","W59qEqrTWRXmWR3dMNhdQ1JdIa","W5equ8oFarNcTSo4bdRdVG","WPSibLnBW6pcJLuCW4hdLCke","WRFdI8oQW6uUEmowWOibWRa7W7S","W7BdNCkXW4hcUcxcSW","xs7dT8oppCokW6qzWOa","FJSDb0ldG8ock2FdRX/cSW","omkCW6ryW4Kflq","WQRdM8oWu8oJvmoqWRW","jSo5vN3dRSo+W5D+W6BcQCoAW6/dHW","WP7dHCoxlNDnW7CEDSkuxYOO","W53dGmk6WPNcQh40tCou","jSo5vN/dPCo8WO19W6lcJ8oBW5e","W53dGSouWQRcMJhcMmo2WQlcJSk7Aa","W6q5WQ/dH8oc","WRtcKCoRW7/cMmkZWQi0xWW/F8ozWO0qoGCncgBcTttcRSkrF8kx","AqJdKd7cO8ozW7e","W7ZdKSofvuVcVmktqq","dSoQW6BcOCkLWR3cK35aWONdR8oKW5i","W6rAWQJcVCkbfv8"];return(_0x2476=function(){return n})()}document.title="pnpm 的使用场景",document.getElementById("article").innerHTML="<div><p>PNPM（Performant NPM）在以下场景中表现尤为出色，能够显著提升开发效率和资源利用率：</p>\n<hr>\n<h3><strong>1. 多项目开发（节省磁盘空间）</strong></h3>\n<ul>\n<li><strong>场景特点</strong>   ：同一台机器上维护多个前端/Node.js 项目，且项目间依赖大量重复（如 React、Lodash 等）。</li>\n<li><strong>PNPM 优势</strong>   ：\n<ul>\n<li>通过硬链接共享全局存储（<code>~/.pnpm-store</code>），相同版本的依赖只存一份，相比 npm/Yarn 可节省 <strong>50%~90% 磁盘空间</strong>   。</li>\n<li>示例：10 个项目都依赖 <code>lodash@4.17.21</code>，磁盘仅占用 1 份空间。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>2. Monorepo 项目（高效依赖管理）</strong></h3>\n<ul>\n<li><strong>场景特点</strong>   ：使用 Monorepo 管理多个子包（如 Turborepo、Rush 等工具）。</li>\n<li><strong>PNPM 优势</strong>   ：\n<ul>\n<li>原生支持 <code>pnpm-workspace.yaml</code>，子包间依赖通过符号链接复用，避免重复安装。</li>\n<li>依赖提升（hoisting）可控，减少因扁平化结构导致的版本冲突。</li>\n<li>示例：A 包依赖 <code>react@18</code>，B 包依赖 <code>react@17</code>，两者互不干扰。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>3. 对依赖隔离性要求高的项目</strong></h3>\n<ul>\n<li><strong>场景特点</strong>   ：需要严格避免“幽灵依赖”（即未声明但被误用的依赖）。</li>\n<li><strong>PNPM 优势</strong>   ：\n<ul>\n<li>默认非扁平化 <code>node_modules</code>，只有显式声明的依赖才能被访问。</li>\n<li>解决 npm/Yarn 中 <code>node_modules</code> 提升导致的隐式依赖问题。</li>\n<li>示例：项目未声明 <code>axios</code>，但代码中误用 <code>axios</code> 时，PNPM 会直接报错。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>4. 追求安装速度的CI/CD流水线</strong></h3>\n<ul>\n<li><strong>场景特点</strong>   ：频繁执行 CI/CD（如 GitHub Actions、Jenkins），需要快速安装依赖。</li>\n<li><strong>PNPM 优势</strong>   ：\n<ul>\n<li>依赖解析速度快，且通过全局缓存减少下载次数。</li>\n<li>支持离线模式（<code>pnpm install --offline</code>）。</li>\n<li>示例：CI 中缓存 <code>~/.pnpm-store</code>，后续构建速度提升 <strong>30%~50%</strong>   。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>5. 大型企业级应用（依赖数量多）</strong></h3>\n<ul>\n<li><strong>场景特点</strong>   ：项目依赖数百个包（如微前端、复杂后台系统）。</li>\n<li><strong>PNPM 优势</strong>   ：\n<ul>\n<li>减少 <code>node_modules</code> 嵌套层级，降低 Windows 路径长度限制问题。</li>\n<li>安装时间更稳定，避免 npm/Yarn 的“依赖爆炸”问题。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>6. 需要兼容 npm/Yarn 但追求优化的场景</strong></h3>\n<ul>\n<li><strong>场景特点</strong>   ：希望保留 <code>package.json</code> 和 npm 脚本，但优化性能。</li>\n<li><strong>PNPM 优势</strong>   ：\n<ul>\n<li>完全兼容 <code>package.json</code> 和 <code>npm scripts</code>，迁移成本低。</li>\n<li>提供 <code>pnpm import</code> 命令，可无缝从 npm/Yarn 切换。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>不推荐使用 PNPM 的场景</strong></h3>\n<ul>\n<li><strong>老旧工具链依赖扁平化结构</strong>   ：如旧版 Vue CLI、某些 Webpack 4 插件。</li>\n<li><strong>对硬链接机制不熟悉</strong>   ：调试时需注意全局存储路径问题。</li>\n<li><strong>极小型项目</strong>   ：依赖较少时，PNPM 的优势不明显。</li>\n</ul>\n<hr>\n<h3><strong>迁移建议</strong></h3>\n<ol>\n<li>测试关键流程：先在小项目或分支中验证构建、测试是否正常。</li>\n<li>处理兼容性问题：通过 <code>shamefully-hoist=true</code>（<code>.npmrc</code>）临时启用提升（如需）。</li>\n<li>清理旧依赖：迁移前删除 <code>node_modules</code> 和 <code>package-lock.json</code>/<code>yarn.lock</code>。</li>\n</ol>\n<p>PNPM 尤其适合 <strong>资源敏感型</strong>   和 <strong>大型协作项目</strong>   ，合理使用能显著提升开发体验。</p>\n</div>"</script></body></html>