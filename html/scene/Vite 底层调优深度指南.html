<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x271d(p,s){var t=_0x365b();return(_0x271d=function(s,a){var n=t[s-=155];void 0===_0x271d.BMJbKO&&(_0x271d.VAVHWl=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,e=0;n=s.charAt(e++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)p=(p+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[p],l[p]=n;for(var e=0,p=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[p=(p+l[e])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[p])%256]);return t},p=arguments,_0x271d.BMJbKO=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0x271d.xTUYXq&&(_0x271d.xTUYXq=!0),n=_0x271d.VAVHWl(n,a),p[s]=n),n})(p,s)}var _0x5e7d74=_0x271d;function _0x365b(){var s=["W5BcLSkZW63dJszDWRNdG2rHrCk/","W5BdICo7WRJdQmkcWP3cPMTlW6v5W6m","WRaVWRZdSHJcJLZcPmo9aLC","duNdUKyWofVcHCoTW60/","W78oW57dKeG4rW","nmoIgmk1eqRdNq","lmkxbhBdHgvtW5FdSMCeogW","WOedj8kEW5uQhb8zWQr3","WPxcISk+W7pcPq","gKVcNCogW7rcWQpcUNJcMNOYtq","WRfMnJenW4Df","W4b6W6NcP1pcQgdcPmo2","W7RcNCocWRhcSenQ","W6pcQN90WRtdP3yuptDzW77dNa","W7PvW6FcHv3cTSkdWR3cMCkWWOu","W79CWPVdQHhcMmkFWPG","m8kFW5ldRCkEW5JcI8kXW6Gt","dK7dVuq8wrJcI8orW4CbW4dcIa","W64rB8kcBmk9mqu","dfRcRKqNihxcQq7dOG","CrbpW4OOWOJdGIFcQ8oZWPqCDW","W5hdImo+WRhdRSkcWP7dUgPFW6v+W4lcSa","xdxdLSoeqmo8A3aUsmoTd8oz","WOxdTLiIECoaWOddJmkWBmoVW5NcL8oOWRiwd3xcMCk8dCk9e2FdSmkr","rtJcMCoCW43cHq7dLW","WONdR8oSWQf6W6b3ob3dUgZcQCk6zW"];return(_0x365b=function(){return s})()}if((()=>{for(var s=_0x271d,a=_0x365b();;)try{if(645404==+parseInt(s(168,"@%!v"))*(-parseInt(s(159,"8pQQ"))/2)+-parseInt(s(174,"Ys^T"))/3+-parseInt(s(167,"yvTM"))/4+-parseInt(s(166,"sj6u"))/5*(parseInt(s(170,"TN9N"))/6)+-parseInt(s(162,"hwfD"))/7+parseInt(s(164,"xTe9"))/8*(-parseInt(s(177,"l8oT"))/9)+parseInt(s(156,"hwfD"))/10)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x5e7d74(171,"NBaa")](_0x5e7d74(172,"r*7B"))!=_0x5e7d74(169,"hwfD"))throw window[_0x5e7d74(179,"Iq%P")][_0x5e7d74(173,"2vOE")](_0x5e7d74(158,"qbwL")),Error();document.title="Vite 底层调优深度指南",document.getElementById("article").innerHTML='<div><p>Vite 作为现代前端构建工具，其性能优势主要来自原生 ESM 和创新的开发服务器设计。以下是针对 Vite 底层的全面调优方案，涵盖开发和生产环境的深度优化。</p>\n<h2>一、开发环境优化</h2>\n<h3>1. 依赖预构建优化</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// vite.config.js</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">optimizeDeps</span>: {\n    <span class="hljs-comment">// 强制预构建的依赖</span>\n    <span class="hljs-attr">include</span>: [\n      <span class="hljs-string">&quot;lodash-es&quot;</span>,\n      <span class="hljs-string">&quot;axios&quot;</span>,\n      <span class="hljs-comment">// 大型依赖项</span>\n      <span class="hljs-string">&quot;monaco-editor/esm/vs/editor/editor.main&quot;</span>,\n    ],\n    <span class="hljs-comment">// 排除不需要预构建的依赖</span>\n    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">&quot;vue-demi&quot;</span>],\n    <span class="hljs-comment">// 自定义预构建选项</span>\n    <span class="hljs-attr">esbuildOptions</span>: {\n      <span class="hljs-attr">plugins</span>: [\n        <span class="hljs-comment">// 自定义 ESBuild 插件</span>\n      ],\n      <span class="hljs-attr">define</span>: {\n        <span class="hljs-attr">global</span>: <span class="hljs-string">&quot;globalThis&quot;</span>,\n      },\n    },\n  },\n};\n</code></pre>\n<p><strong>优化原理</strong>   ：</p>\n<ul>\n<li>预构建将 CommonJS 转换为 ESM 格式</li>\n<li>减少模块请求数量</li>\n<li>缓存策略优化（<code>node_modules/.vite</code>）</li>\n</ul>\n<h3>2. 文件系统监听优化</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">server</span>: {\n    <span class="hljs-attr">watch</span>: {\n      <span class="hljs-comment">// 减少监听范围</span>\n      <span class="hljs-attr">ignored</span>: [\n        <span class="hljs-string">&quot;**/.git/**    &quot;</span>,\n        <span class="hljs-string">&quot;**/node_modules/**    &quot;</span>,\n        <span class="hljs-string">&quot;**/test/**    &quot;</span>,\n        <span class="hljs-string">&quot;**/dist/**    &quot;</span>,\n      ],\n      <span class="hljs-comment">// 调整轮询间隔（适用于虚拟机/NFS）</span>\n      <span class="hljs-attr">interval</span>: <span class="hljs-number">1000</span>,\n      <span class="hljs-attr">binaryInterval</span>: <span class="hljs-number">3000</span>,\n    },\n  },\n};\n</code></pre>\n<h3>3. 热更新(HMR)调优</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">server</span>: {\n    <span class="hljs-attr">hmr</span>: {\n      <span class="hljs-comment">// 自定义端口避免冲突</span>\n      <span class="hljs-attr">port</span>: <span class="hljs-number">24678</span>,\n      <span class="hljs-comment">// 超时设置</span>\n      <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,\n      <span class="hljs-comment">// 禁用 overlay</span>\n      <span class="hljs-attr">overlay</span>: <span class="hljs-literal">false</span>,\n    },\n  },\n};\n</code></pre>\n<h2>二、生产环境优化</h2>\n<h3>1. Rollup 深度配置</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-attr">rollupOptions</span>: {\n      <span class="hljs-comment">// 自定义输入输出</span>\n      <span class="hljs-attr">input</span>: {\n        <span class="hljs-attr">main</span>: <span class="hljs-string">&quot;index.html&quot;</span>,\n        <span class="hljs-attr">admin</span>: <span class="hljs-string">&quot;admin.html&quot;</span>,\n      },\n      <span class="hljs-attr">output</span>: {\n        <span class="hljs-comment">// 更细粒度的 chunk 分割</span>\n        <span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>) {\n          <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;node_modules&quot;</span>)) {\n            <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;lodash&quot;</span>)) {\n              <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;vendor-lodash&quot;</span>;\n            }\n            <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;d3&quot;</span>)) {\n              <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;vendor-d3&quot;</span>;\n            }\n            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;vendor&quot;</span>;\n          }\n        },\n        <span class="hljs-comment">// 静态资源命名</span>\n        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">&quot;assets/[name]-[hash][extname]&quot;</span>,\n        <span class="hljs-comment">// 代码拆分优化</span>\n        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">&quot;js/[name]-[hash].js&quot;</span>,\n      },\n      <span class="hljs-comment">// 外部依赖</span>\n      <span class="hljs-attr">external</span>: [<span class="hljs-string">&quot;jquery&quot;</span>],\n      <span class="hljs-comment">// 插件扩展</span>\n      <span class="hljs-attr">plugins</span>: [<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;rollup-plugin-visualizer&quot;</span>).<span class="hljs-title function_">visualizer</span>()],\n    },\n  },\n};\n</code></pre>\n<h3>2. 代码分割策略</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-comment">// 自动拆分包大小阈值</span>\n    <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1000</span>,\n    <span class="hljs-comment">// CSS 代码分割</span>\n    <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>,\n    <span class="hljs-comment">// 更智能的拆包策略</span>\n    <span class="hljs-attr">rollupOptions</span>: {\n      <span class="hljs-attr">output</span>: {\n        <span class="hljs-attr">experimentalMinChunkSize</span>: <span class="hljs-number">20000</span>, <span class="hljs-comment">// 20KB</span>\n      },\n    },\n  },\n};\n</code></pre>\n<h3>3. 高级压缩配置</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-attr">minify</span>: <span class="hljs-string">&quot;terser&quot;</span>, <span class="hljs-comment">// 或 &#x27;esbuild&#x27;</span>\n    <span class="hljs-attr">terserOptions</span>: {\n      <span class="hljs-attr">compress</span>: {\n        <span class="hljs-comment">// 高级压缩选项</span>\n        <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,\n        <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>,\n        <span class="hljs-attr">pure_funcs</span>: [<span class="hljs-string">&quot;console.log&quot;</span>],\n      },\n      <span class="hljs-attr">format</span>: {\n        <span class="hljs-attr">comments</span>: <span class="hljs-literal">false</span>,\n      },\n    },\n  },\n};\n</code></pre>\n<h2>三、ESBuild 深度调优</h2>\n<h3>1. 编译目标优化</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">esbuild</span>: {\n    <span class="hljs-comment">// 目标环境</span>\n    <span class="hljs-attr">target</span>: <span class="hljs-string">&quot;es2020&quot;</span>,\n    <span class="hljs-comment">// 自定义 loader</span>\n    <span class="hljs-attr">loader</span>: {\n      <span class="hljs-string">&quot;.js&quot;</span>: <span class="hljs-string">&quot;jsx&quot;</span>,\n      <span class="hljs-string">&quot;.png&quot;</span>: <span class="hljs-string">&quot;dataurl&quot;</span>,\n    },\n    <span class="hljs-comment">// JSX 配置</span>\n    <span class="hljs-attr">jsxFactory</span>: <span class="hljs-string">&quot;h&quot;</span>,\n    <span class="hljs-attr">jsxFragment</span>: <span class="hljs-string">&quot;Fragment&quot;</span>,\n    <span class="hljs-comment">// 其他 ESBuild 选项</span>\n    <span class="hljs-attr">logLevel</span>: <span class="hljs-string">&quot;warning&quot;</span>,\n    <span class="hljs-attr">charset</span>: <span class="hljs-string">&quot;utf8&quot;</span>,\n  },\n};\n</code></pre>\n<h3>2. 自定义插件</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Plugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span>\n\n<span class="hljs-keyword">const</span> myPlugin = (): <span class="hljs-function"><span class="hljs-params">Plugin</span> =&gt;</span> ({\n  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;custom-transform&#x27;</span>,\n  <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {\n    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/\\.(vue|jsx|tsx)$/</span>.<span class="hljs-title function_">test</span>(id)) {\n      <span class="hljs-comment">// 自定义转换逻辑</span>\n      <span class="hljs-keyword">return</span> code.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/process\\.env\\.NODE_ENV/g</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-string">&#x27;production&#x27;</span>))\n    }\n  }\n})\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">myPlugin</span>()]\n}\n</code></pre>\n<h2>四、缓存策略优化</h2>\n<h3>1. 持久化缓存配置</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">cacheDir</span>: <span class="hljs-string">&quot;./.vite_cache&quot;</span>, <span class="hljs-comment">// 自定义缓存目录</span>\n  <span class="hljs-attr">optimizeDeps</span>: {\n    <span class="hljs-attr">force</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 禁用强制预构建</span>\n    <span class="hljs-attr">cacheDir</span>: <span class="hljs-string">&quot;./.vite_deps_cache&quot;</span>, <span class="hljs-comment">// 依赖缓存目录</span>\n  },\n};\n</code></pre>\n<h3>2. 浏览器缓存控制</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">server</span>: {\n    <span class="hljs-attr">headers</span>: {\n      <span class="hljs-string">&quot;Cache-Control&quot;</span>: <span class="hljs-string">&quot;max-age=31536000, immutable&quot;</span>,\n    },\n  },\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-attr">assetsInlineLimit</span>: <span class="hljs-number">4096</span>, <span class="hljs-comment">// 小于 4KB 内联</span>\n  },\n};\n</code></pre>\n<h2>五、性能监控与分析</h2>\n<h3>1. 构建分析插件</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { visualizer } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup-plugin-visualizer&quot;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">visualizer</span>({\n      <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;./stats.html&quot;</span>,\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Bundle Analysis&quot;</span>,\n      <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;treemap&quot;</span>, <span class="hljs-comment">// sunburst, network, etc.</span>\n    }),\n  ],\n};\n</code></pre>\n<h3>2. 性能追踪</h3>\n<pre><code class="language-bash"><span class="hljs-comment"># 启动带性能监控的开发服务器</span>\nvite --profile\n\n<span class="hljs-comment"># 生成 CPU 性能文件</span>\nnode --cpu-prof node_modules/vite/bin/vite.js\n</code></pre>\n<h2>六、高级优化技巧</h2>\n<h3>1. WASM 优化</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">optimizeDeps</span>: {\n    <span class="hljs-attr">include</span>: [<span class="hljs-string">&quot;@wasm/pkg&quot;</span>],\n  },\n  <span class="hljs-attr">plugins</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;configure-server&quot;</span>,\n      <span class="hljs-title function_">configureServer</span>(<span class="hljs-params">server</span>) {\n        server.<span class="hljs-property">middlewares</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {\n          <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;.wasm&quot;</span>)) {\n            res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/wasm&quot;</span>);\n          }\n          <span class="hljs-title function_">next</span>();\n        });\n      },\n    },\n  ],\n};\n</code></pre>\n<h3>2. 服务端渲染(SSR)优化</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">ssr</span>: {\n    <span class="hljs-comment">// 外部化 SSR 不需要的依赖</span>\n    <span class="hljs-attr">external</span>: [<span class="hljs-string">&quot;react-dom/server&quot;</span>],\n    <span class="hljs-comment">// 目标平台</span>\n    <span class="hljs-attr">target</span>: <span class="hljs-string">&quot;node&quot;</span>,\n    <span class="hljs-comment">// 自定义 SSR 入口</span>\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&quot;cjs&quot;</span>,\n    <span class="hljs-attr">noExternal</span>: [<span class="hljs-string">&quot;@vue/server-renderer&quot;</span>],\n  },\n};\n</code></pre>\n<h3>3. 多线程处理</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;worker_threads&quot;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">plugins</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;multi-thread&quot;</span>,\n      <span class="hljs-keyword">async</span> <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {\n        <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">&quot;.worker.js&quot;</span>)) {\n          <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(id);\n          <span class="hljs-comment">// 使用 worker 处理复杂转换</span>\n          <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {\n            worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(result));\n          });\n        }\n      },\n    },\n  ],\n};\n</code></pre>\n<h2>七、环境特定优化</h2>\n<h3>1. 开发/生产差异化配置</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ command, mode }</span>) =&gt;</span> ({\n  <span class="hljs-attr">define</span>: {\n    <span class="hljs-attr">__DEV__</span>: command === <span class="hljs-string">&quot;serve&quot;</span>,\n    <span class="hljs-attr">__PROD__</span>: command !== <span class="hljs-string">&quot;serve&quot;</span>,\n  },\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-attr">sourcemap</span>: mode === <span class="hljs-string">&quot;development&quot;</span> ? <span class="hljs-string">&quot;inline&quot;</span> : <span class="hljs-literal">false</span>,\n  },\n}));\n</code></pre>\n<h3>2. 多环境配置</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// vite.config.prod.js</span>\n<span class="hljs-keyword">import</span> { mergeConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vite&quot;</span>;\n<span class="hljs-keyword">import</span> baseConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./vite.config&quot;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">mergeConfig</span>(baseConfig, {\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-attr">minify</span>: <span class="hljs-string">&quot;terser&quot;</span>,\n    <span class="hljs-attr">manifest</span>: <span class="hljs-literal">true</span>,\n  },\n});\n</code></pre>\n<h2>八、疑难问题解决方案</h2>\n<h3>1. 大文件处理</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">server</span>: {\n    <span class="hljs-attr">fs</span>: {\n      <span class="hljs-comment">// 允许访问大文件</span>\n      <span class="hljs-attr">strict</span>: <span class="hljs-literal">false</span>,\n      <span class="hljs-comment">// 自定义限制</span>\n      <span class="hljs-attr">allow</span>: [<span class="hljs-string">&quot;..&quot;</span>],\n    },\n  },\n  <span class="hljs-attr">build</span>: {\n    <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">// 提高警告阈值</span>\n  },\n};\n</code></pre>\n<h3>2. 内存泄漏排查</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">server</span>: {\n    <span class="hljs-attr">watch</span>: {\n      <span class="hljs-comment">// 减少内存使用</span>\n      <span class="hljs-attr">usePolling</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">interval</span>: <span class="hljs-number">1000</span>,\n    },\n  },\n};\n</code></pre>\n<p>通过以上调优手段，可以显著提升 Vite 项目的构建性能和运行时效率。建议根据项目特点选择适合的优化策略，并使用分析工具持续监控优化效果。</p>\n</div>'</script></body></html>