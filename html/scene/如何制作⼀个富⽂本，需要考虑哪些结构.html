<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4ff5cf=_0x587d;function _0x587d(t,n){var r=_0x2f5d();return(_0x587d=function(n,s){var l=r[n-=295];void 0===_0x587d.oqGNGe&&(_0x587d.isunIO=function(n,s){var l,a=[],t=0,r="";for(n=(n=>{for(var s,l,a="",t="",r=0,o=0;l=n.charAt(o++);~l&&(s=r%4?64*s+l:l,r++%4)&&(a+=String.fromCharCode(255&s>>(-2*r&6))))l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(l);for(var i=0,e=a.length;i<e;i++)t+="%"+("00"+a.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(t)})(n),o=0;o<256;o++)a[o]=o;for(o=0;o<256;o++)t=(t+a[o]+s.charCodeAt(o%s.length))%256,l=a[o],a[o]=a[t],a[t]=l;for(var o=0,t=0,i=0;i<n.length;i++)l=a[o=(o+1)%256],a[o]=a[t=(t+a[o])%256],a[t]=l,r+=String.fromCharCode(n.charCodeAt(i)^a[(a[o]+a[t])%256]);return r},t=arguments,_0x587d.oqGNGe=!0);var n=n+r[0],a=t[n];return a?l=a:(void 0===_0x587d.KSNjOn&&(_0x587d.KSNjOn=!0),l=_0x587d.isunIO(l,s),t[n]=l),l})(t,n)}function _0x2f5d(){var n=["W6qtWOpdK07dIsZdRCkqze/cMSoNBa","WOhcM8knW5LhWQFcUW","tmojW4ddTqRdNCkypvVcP8o+dG","i2/dSYZdSL/cJCotx8kR","pxdcPSoTW41tWRm","smkyW6VcISowWPldShfHWRhdUmoQ","u8otyeVdLLSFa8kLWPL5W4VdLIK","WRddTSkwA0afWQddGCkMW6VcKhu","zmk8WQldOI0NFCkP","WR0JhCkSySkSomkPaq","WQvGW5iSufVdGCoX","mmoGW7JcSMP9smkbW7DrW5zu","rqJcMmkVtLZdLNuFoZizW5xcUW","W4NcQSoKWQtdG8k4maZcLq","WOy6WPqoWRhcOmo0WQlcPCk3grtcGCo6W50vWRjHWOrAWP7dL0hdVmo7cW","fSoCWQf6EqLQ","W5/cSmkgxNK","W57dNSkaW5m5WOOW","WOvvCcbJs8keArrbcgC","W45fdY1SoNRcGa","WQ/cT8oivmkseI9TrtP0WRGk","rSkEW6VcJCkSW6/dQM1BWOq","WRCNg8owg8olxSk/eSopW6eFka","W55QCItcR2HDWOtcGMFdH2GABa","pCoRW7dcUMP3sSk/W7LtW6L+","W6reDmkHWR4pd8kLDW"];return(_0x2f5d=function(){return n})()}if((()=>{for(var n=_0x587d,s=_0x2f5d();;)try{if(883344==+parseInt(n(306,"X[C^"))*(-parseInt(n(299,"MjAS"))/2)+-parseInt(n(319,"X[C^"))/3+parseInt(n(302,"hCo9"))/4+parseInt(n(307,"CTU6"))/5*(-parseInt(n(303,"NixW"))/6)+-parseInt(n(320,"BxF!"))/7+parseInt(n(301,"Wfs2"))/8*(parseInt(n(313,"NixW"))/9)+parseInt(n(305,"2UKC"))/10)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x4ff5cf(312,"bS!S")](_0x4ff5cf(295,"21Z&"))!=_0x4ff5cf(298,"9#Kc"))throw window[_0x4ff5cf(316,"X[C^")][_0x4ff5cf(309,"6!ly")](_0x4ff5cf(296,"cday")),Error();document.title="如何制作⼀个富⽂本，需要考虑哪些结构",document.getElementById("article").innerHTML='<div><p>制作一个富文本编辑器或富文本内容展示需要考虑多个方面，包括结构、功能、用户体验和性能等。以下是制作富文本时需要考虑的关键结构和要素：</p>\n<hr>\n<h3><strong>一、富文本的基本结构</strong></h3>\n<h4><strong>1. HTML 结构</strong></h4>\n<ul>\n<li><strong>容器元素</strong>  ：\n<ul>\n<li>使用一个可编辑的容器（如 <code>&lt;div&gt;</code> 或 <code>&lt;iframe&gt;</code>）来承载富文本内容。</li>\n<li>示例：<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rich-text-editor&quot;</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>工具栏</strong>  ：\n<ul>\n<li>提供一组工具按钮，用于格式化文本、插入媒体等。</li>\n<li>示例：<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;toolbar&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;formatText(&#x27;bold&#x27;)&quot;</span>&gt;</span>加粗<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;formatText(&#x27;italic&#x27;)&quot;</span>&gt;</span>斜体<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n  <span class="hljs-comment">&lt;!-- 其他工具按钮 --&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h4><strong>2. CSS 样式</strong></h4>\n<ul>\n<li><strong>基础样式</strong>  ：\n<ul>\n<li>设置容器和工具栏的样式，确保布局合理。</li>\n<li>示例：<pre><code class="language-css"><span class="hljs-selector-id">#rich-text-editor</span> {\n  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;\n  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;\n  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>;\n  <span class="hljs-attribute">overflow-y</span>: auto;\n}\n\n<span class="hljs-selector-id">#toolbar</span> {\n  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;\n  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;\n}\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>文本样式</strong>  ：\n<ul>\n<li>定义不同格式（如加粗、斜体）的样式。</li>\n<li>示例：<pre><code class="language-css"><span class="hljs-selector-class">.bold</span> {\n  <span class="hljs-attribute">font-weight</span>: bold;\n}\n\n<span class="hljs-selector-class">.italic</span> {\n  <span class="hljs-attribute">font-style</span>: italic;\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>二、富文本的核心功能</strong></h3>\n<h4><strong>1. 文本格式化</strong></h4>\n<ul>\n<li><strong>加粗、斜体、下划线</strong>  ：\n<ul>\n<li>使用 <code>document.execCommand</code> 或直接操作 DOM 来实现。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">formatText</span>(<span class="hljs-params">command</span>) {\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(command, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);\n}\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>字体、字号、颜色</strong>  ：\n<ul>\n<li>提供选择字体、字号和颜色的功能。</li>\n<li>可以通过弹出选择框或下拉菜单实现。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>2. 插入媒体</strong></h4>\n<ul>\n<li><strong>图片</strong>  ：\n<ul>\n<li>提供上传或插入图片的功能。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">insertImage</span>(<span class="hljs-params">url</span>) {\n  <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;img&#x27;</span>);\n  img.<span class="hljs-property">src</span> = url;\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;rich-text-editor&#x27;</span>).<span class="hljs-title function_">appendChild</span>(img);\n}\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>视频、音频</strong>  ：\n<ul>\n<li>类似插入图片，创建相应的 HTML 元素并插入到容器中。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>3. 列表和段落</strong></h4>\n<ul>\n<li><strong>有序列表、无序列表</strong>  ：\n<ul>\n<li>提供插入列表的功能。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">insertList</span>(<span class="hljs-params">type</span>) {\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(type === <span class="hljs-string">&#x27;ordered&#x27;</span> ? <span class="hljs-string">&#x27;insertOrderedList&#x27;</span> : <span class="hljs-string">&#x27;insertUnorderedList&#x27;</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);\n}\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>段落格式</strong>  ：\n<ul>\n<li>支持段落对齐（左对齐、居中、右对齐）。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>4. 撤销/重做</strong></h4>\n<ul>\n<li><strong>实现撤销和重做功能</strong>  ：\n<ul>\n<li>使用 <code>document.execCommand(\'undo\')</code> 和 <code>document.execCommand(\'redo\')</code>。</li>\n<li>或者自行维护操作栈来实现更复杂的撤销/重做逻辑。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>三、用户体验优化</strong></h3>\n<h4><strong>1. 实时预览</strong></h4>\n<ul>\n<li><strong>所见即所得（WYSIWYG）</strong>  ：\n<ul>\n<li>确保用户在编辑时能够实时看到最终的渲染效果。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>2. 快捷键支持</strong></h4>\n<ul>\n<li><strong>常用快捷键</strong>  ：\n<ul>\n<li>支持如 <code>Ctrl+B</code>（加粗）、<code>Ctrl+I</code>（斜体）等快捷键。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;keydown&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {\n  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">ctrlKey</span> &amp;&amp; event.<span class="hljs-property">key</span> === <span class="hljs-string">&#x27;b&#x27;</span>) {\n    <span class="hljs-title function_">formatText</span>(<span class="hljs-string">&#x27;bold&#x27;</span>);\n    event.<span class="hljs-title function_">preventDefault</span>();\n  }\n});\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h4><strong>3. 占位符和提示</strong></h4>\n<ul>\n<li><strong>占位符文本</strong>  ：\n<ul>\n<li>当编辑器为空时，显示占位符文本提示用户输入。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> editor = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;rich-text-editor&#x27;</span>);\neditor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, <span class="hljs-function">() =&gt;</span> editor.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;data-placeholder&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>));\neditor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;blur&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-keyword">if</span> (editor.<span class="hljs-property">innerHTML</span>.<span class="hljs-title function_">trim</span>() === <span class="hljs-string">&#x27;&#x27;</span>) {\n    editor.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;data-placeholder&#x27;</span>, <span class="hljs-string">&#x27;请输入内容...&#x27;</span>);\n  }\n});\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>四、性能与安全性</strong></h3>\n<h4><strong>1. 性能优化</strong></h4>\n<ul>\n<li><strong>防抖和节流</strong>  ：\n<ul>\n<li>对于频繁触发的事件（如输入事件），使用防抖或节流技术减少处理次数。</li>\n</ul>\n</li>\n<li><strong>懒加载</strong>  ：\n<ul>\n<li>对于插入的图片或视频，考虑使用懒加载技术提升性能。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>2. 安全性</strong></h4>\n<ul>\n<li><strong>XSS 防护</strong>  ：\n<ul>\n<li>对用户输入的内容进行过滤和转义，防止跨站脚本攻击（XSS）。</li>\n<li>可以使用库（如 DOMPurify）来清理 HTML 内容。</li>\n</ul>\n</li>\n<li><strong>内容限制</strong>  ：\n<ul>\n<li>限制用户插入的脚本、iframe 等可能带来安全风险的元素。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>五、扩展功能</strong></h3>\n<h4><strong>1. 导出和导入</strong></h4>\n<ul>\n<li><strong>导出为 HTML 或 Markdown</strong>  ：\n<ul>\n<li>提供将富文本内容导出为 HTML 或 Markdown 格式的功能。</li>\n</ul>\n</li>\n<li><strong>从 HTML 或 Markdown 导入</strong>  ：\n<ul>\n<li>支持从 HTML 或 Markdown 格式导入内容到编辑器。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>2. 协作编辑</strong></h4>\n<ul>\n<li><strong>实时协作</strong>  ：\n<ul>\n<li>使用 WebSocket 或其他实时通信技术实现多人协作编辑。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>3. 插件和扩展</strong></h4>\n<ul>\n<li><strong>插件系统</strong>  ：\n<ul>\n<li>设计插件系统，允许开发者扩展编辑器的功能。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>六、技术选型</strong></h3>\n<h4><strong>1. 自行实现</strong></h4>\n<ul>\n<li><strong>优点</strong>  ：\n<ul>\n<li>完全自定义，满足特定需求。</li>\n</ul>\n</li>\n<li><strong>缺点</strong>  ：\n<ul>\n<li>开发成本高，需要处理各种浏览器兼容性问题。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>2. 使用现有库</strong></h4>\n<ul>\n<li><strong>常用富文本编辑器库</strong>  ：\n<ul>\n<li><strong>Quill</strong>  ：轻量级，易于扩展。</li>\n<li><strong>TinyMCE</strong>  ：功能强大，支持多种插件。</li>\n<li><strong>CKEditor</strong>  ：企业级解决方案，支持现代编辑需求。</li>\n</ul>\n</li>\n<li><strong>优点</strong>  ：\n<ul>\n<li>快速开发，社区支持丰富。</li>\n</ul>\n</li>\n<li><strong>缺点</strong>  ：\n<ul>\n<li>可能需要适应库的 API 和限制。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>七、总结</strong></h3>\n<p>制作一个富文本编辑器或内容展示需要考虑以下关键结构和要素：</p>\n<ul>\n<li><strong>HTML 结构</strong>  ：包括容器和工具栏。</li>\n<li><strong>CSS 样式</strong>  ：确保布局和文本格式美观。</li>\n<li><strong>核心功能</strong>  ：文本格式化、插入媒体、列表和段落、撤销/重做。</li>\n<li><strong>用户体验</strong>  ：实时预览、快捷键支持、占位符和提示。</li>\n<li><strong>性能与安全性</strong>  ：性能优化、XSS 防护。</li>\n<li><strong>扩展功能</strong>  ：导出和导入、协作编辑、插件系统。</li>\n<li><strong>技术选型</strong>  ：自行实现或使用现有库。</li>\n</ul>\n<p>通过合理设计和实现这些要素，可以制作出一个功能强大、用户体验良好的富文本编辑器或内容展示。</p>\n</div>'</script></body></html>