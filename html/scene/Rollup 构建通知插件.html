<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x12e8(p,s){var t=_0x5b07();return(_0x12e8=function(s,n){var a=t[s-=207];void 0===_0x12e8.JlRImV&&(_0x12e8.ltrUdV=function(s,n){var a,l=[],p=0,t="";for(s=(s=>{for(var n,a,l="",p="",t=0,e=0;a=s.charAt(e++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,o=l.length;c<o;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)p=(p+l[e]+n.charCodeAt(e%n.length))%256,a=l[e],l[e]=l[p],l[p]=a;for(var e=0,p=0,c=0;c<s.length;c++)a=l[e=(e+1)%256],l[e]=l[p=(p+l[e])%256],l[p]=a,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[p])%256]);return t},p=arguments,_0x12e8.JlRImV=!0);var s=s+t[0],l=p[s];return l?a=l:(void 0===_0x12e8.xzxxhg&&(_0x12e8.xzxxhg=!0),a=_0x12e8.ltrUdV(a,n),p[s]=a),a})(p,s)}var _0x52477b=_0x12e8;function _0x5b07(){var s=["tsqOW7lcRmkDamkqWONcHL9L","WRjsuCk6WRZcGf3cSq","wv7cSI5PmCk9W4amuSkAW4RdOa","hCkrhCkqW6u","WQOWW50GWPbYACk4","gCoyW5JdSSk8W6ZdRte","WR/cRmodWRnDDfpdRW","uv0OW6BcJx4hqSkLouKq","W6tcGG0FWOnLEG","bCkJoZeoW6ycDaeHua","WPXGW7mXpbJcGKS","WRpcHCoCW7hdI8ohsSksW4xdSCoD","W43cQmkLpfrpcce4WPldJmkTW4C","W4mBlSkYyx/dMq","WRWSWQxcUmk2gSooWOWa","WOyxW4NcNCowCmkaW7i","WRfLWQfKv0SfWOW","x8ouxCoqWQJdHSkbW5pcGq50WQy","a8kKmdaoWQeivdGiFgC","W5fOpJfUW4BdHMRcRGtdSSkAW7G","W4L4W77dR8oXg8ooWOSyW6tcUa","Dmk6WPpdMSkdWPBcLeJcSWjy","WPZcUxeTqJRdNbPxW5vVWOVcMW","W7dcO18GW7FdVCk9W7yUwSoGWQ7cNMlcL8kBWQ3dRxdcUJyZWO3dG8ozWPC","eCoQfuFcKmk6wSkc","wLBcScTImCk5W5yTrmk1W7ldMa","DSk8W6hcRCoFWOdcLNK","WRhcGSouW7BdGSkIdCkWW5FdRmoNCdW"];return(_0x5b07=function(){return s})()}if((()=>{for(var s=_0x12e8,n=_0x5b07();;)try{if(404665==+parseInt(s(226,"gzZ0"))+parseInt(s(214,"V(!o"))/2*(-parseInt(s(209,"o9SK"))/3)+parseInt(s(211,"tHgF"))/4+-parseInt(s(207,"2vt#"))/5*(-parseInt(s(228,"47(4"))/6)+-parseInt(s(221,"VM!q"))/7+parseInt(s(218,"Gbki"))/8*(parseInt(s(219,"MR7o"))/9)+-parseInt(s(220,"m8q)"))/10*(parseInt(s(233,"$]QG"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x52477b(222,"zFWE")](_0x52477b(223,"aOnl"))!=_0x52477b(212,"gzZ0"))throw window[_0x52477b(215,")cPv")][_0x52477b(217,"w[6d")](_0x52477b(232,"XVyL")),Error();document.title="Rollup 构建通知插件",document.getElementById("article").innerHTML='<div><p>下面是一个 Rollup 插件实现，用于在构建完成（成功或失败）时发送系统通知，支持自定义通知内容和样式。</p>\n<h2>插件代码</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> notifier <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node-notifier&quot;</span>;\n<span class="hljs-keyword">import</span> chalk <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;chalk&quot;</span>;\n<span class="hljs-keyword">import</span> { readFileSync } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fs&quot;</span>;\n<span class="hljs-keyword">import</span> { relative } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">rollupBuildNotifier</span>(<span class="hljs-params">options = {}</span>) {\n  <span class="hljs-keyword">const</span> {\n    title = <span class="hljs-string">&quot;Rollup 构建通知&quot;</span>,\n    successIcon = <span class="hljs-literal">undefined</span>,\n    failureIcon = <span class="hljs-literal">undefined</span>,\n    sound = <span class="hljs-literal">true</span>,\n    successMessage = <span class="hljs-string">&quot;构建成功!&quot;</span>,\n    failureMessage = <span class="hljs-string">&quot;构建失败!&quot;</span>,\n    duration = <span class="hljs-number">5</span>, <span class="hljs-comment">// 通知显示时间(秒)</span>\n    onSuccess = <span class="hljs-literal">null</span>,\n    onFailure = <span class="hljs-literal">null</span>,\n    enableConsoleLog = <span class="hljs-literal">true</span>,\n    enableDesktopNotification = <span class="hljs-literal">true</span>,\n    showBuildSize = <span class="hljs-literal">true</span>,\n    showOutputFiles = <span class="hljs-literal">false</span>,\n    excludeFiles = [<span class="hljs-string">&quot;*.map&quot;</span>],\n  } = options;\n\n  <span class="hljs-keyword">let</span> startTime;\n  <span class="hljs-keyword">let</span> buildFailed = <span class="hljs-literal">false</span>;\n  <span class="hljs-keyword">let</span> errorDetails = <span class="hljs-literal">null</span>;\n\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;rollup-build-notifier&quot;</span>,\n\n    <span class="hljs-title function_">buildStart</span>(<span class="hljs-params"></span>) {\n      startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();\n      buildFailed = <span class="hljs-literal">false</span>;\n      errorDetails = <span class="hljs-literal">null</span>;\n      <span class="hljs-keyword">if</span> (enableConsoleLog) {\n        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">blue</span>(<span class="hljs-string">&quot;🏗️ 开始构建...&quot;</span>));\n      }\n    },\n\n    <span class="hljs-title function_">buildError</span>(<span class="hljs-params">error</span>) {\n      buildFailed = <span class="hljs-literal">true</span>;\n      errorDetails = {\n        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,\n        <span class="hljs-attr">stack</span>: error.<span class="hljs-property">stack</span>,\n        <span class="hljs-attr">id</span>: error.<span class="hljs-property">id</span>,\n        <span class="hljs-attr">frame</span>: error.<span class="hljs-property">frame</span>,\n      };\n    },\n\n    <span class="hljs-title function_">writeBundle</span>(<span class="hljs-params">outputOptions, bundle</span>) {\n      <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();\n      <span class="hljs-keyword">const</span> durationMs = endTime - startTime;\n      <span class="hljs-keyword">const</span> durationSec = (durationMs / <span class="hljs-number">1000</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);\n\n      <span class="hljs-keyword">let</span> outputInfo = <span class="hljs-string">&quot;&quot;</span>;\n      <span class="hljs-keyword">if</span> (bundle &amp;&amp; showOutputFiles) {\n        <span class="hljs-keyword">const</span> files = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(bundle)\n          .<span class="hljs-title function_">filter</span>(\n            <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> !excludeFiles.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">pattern</span>) =&gt;</span> file.<span class="hljs-title function_">match</span>(pattern)),\n          )\n          .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> <span class="hljs-title function_">relative</span>(process.<span class="hljs-title function_">cwd</span>(), file));\n\n        <span class="hljs-keyword">if</span> (files.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {\n          outputInfo = <span class="hljs-string">`\\n输出文件:\\n<span class="hljs-subst">${files.join(<span class="hljs-string">&quot;\\n&quot;</span>)}</span>`</span>;\n        }\n      }\n\n      <span class="hljs-keyword">let</span> sizeInfo = <span class="hljs-string">&quot;&quot;</span>;\n      <span class="hljs-keyword">if</span> (bundle &amp;&amp; showBuildSize) {\n        <span class="hljs-keyword">const</span> totalSize = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(bundle).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, file</span>) =&gt;</span> {\n          <span class="hljs-keyword">return</span> (\n            sum + (file.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;asset&quot;</span> ? <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">byteLength</span>(file.<span class="hljs-property">source</span>) : <span class="hljs-number">0</span>)\n          );\n        }, <span class="hljs-number">0</span>);\n        sizeInfo = <span class="hljs-string">`\\n总大小: <span class="hljs-subst">${(totalSize / <span class="hljs-number">1024</span>).toFixed(<span class="hljs-number">2</span>)}</span>KB`</span>;\n      }\n\n      <span class="hljs-keyword">if</span> (buildFailed) {\n        <span class="hljs-comment">// 构建失败处理</span>\n        <span class="hljs-keyword">const</span> errorMessage = errorDetails?.<span class="hljs-property">message</span> || <span class="hljs-string">&quot;未知错误&quot;</span>;\n        <span class="hljs-keyword">const</span> errorLocation = errorDetails?.<span class="hljs-property">id</span>\n          ? <span class="hljs-string">`\\n文件: <span class="hljs-subst">${errorDetails.id}</span>`</span>\n          : <span class="hljs-string">&quot;&quot;</span>;\n\n        <span class="hljs-keyword">const</span> consoleMessage = <span class="hljs-string">`<span class="hljs-subst">${chalk.red(<span class="hljs-string">&quot;❌ 构建失败!&quot;</span>)}</span>\n<span class="hljs-subst">${chalk.yellow(<span class="hljs-string">`耗时: <span class="hljs-subst">${durationSec}</span>s`</span>)}</span>\n<span class="hljs-subst">${chalk.red(<span class="hljs-string">`错误: <span class="hljs-subst">${errorMessage}</span>`</span>)}</span><span class="hljs-subst">${errorLocation}</span>`</span>;\n\n        <span class="hljs-keyword">const</span> notificationMessage = <span class="hljs-string">`<span class="hljs-subst">${failureMessage}</span>\n耗时: <span class="hljs-subst">${durationSec}</span>s\n错误: <span class="hljs-subst">${errorMessage.substring(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)}</span><span class="hljs-subst">${errorMessage.length &gt; <span class="hljs-number">100</span> ? <span class="hljs-string">&quot;...&quot;</span> : <span class="hljs-string">&quot;&quot;</span>}</span>`</span>;\n\n        <span class="hljs-keyword">if</span> (enableConsoleLog) {\n          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(consoleMessage);\n          <span class="hljs-keyword">if</span> (errorDetails?.<span class="hljs-property">frame</span>) {\n            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">gray</span>(errorDetails.<span class="hljs-property">frame</span>));\n          }\n        }\n\n        <span class="hljs-keyword">if</span> (enableDesktopNotification) {\n          notifier.<span class="hljs-title function_">notify</span>({\n            <span class="hljs-attr">title</span>: <span class="hljs-string">`<span class="hljs-subst">${title}</span> - 失败`</span>,\n            <span class="hljs-attr">message</span>: notificationMessage,\n            <span class="hljs-attr">icon</span>: failureIcon,\n            <span class="hljs-attr">sound</span>: sound,\n            <span class="hljs-attr">timeout</span>: duration,\n          });\n        }\n\n        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onFailure === <span class="hljs-string">&quot;function&quot;</span>) {\n          <span class="hljs-title function_">onFailure</span>({\n            <span class="hljs-attr">duration</span>: durationSec,\n            <span class="hljs-attr">error</span>: errorDetails,\n            outputOptions,\n            bundle,\n          });\n        }\n      } <span class="hljs-keyword">else</span> {\n        <span class="hljs-comment">// 构建成功处理</span>\n        <span class="hljs-keyword">const</span> consoleMessage = <span class="hljs-string">`<span class="hljs-subst">${chalk.green(<span class="hljs-string">&quot;✅ 构建成功!&quot;</span>)}</span>\n<span class="hljs-subst">${chalk.yellow(<span class="hljs-string">`耗时: <span class="hljs-subst">${durationSec}</span>s`</span>)}</span><span class="hljs-subst">${sizeInfo}</span><span class="hljs-subst">${outputInfo}</span>`</span>;\n\n        <span class="hljs-keyword">const</span> notificationMessage = <span class="hljs-string">`<span class="hljs-subst">${successMessage}</span>\n耗时: <span class="hljs-subst">${durationSec}</span>s<span class="hljs-subst">${sizeInfo}</span>`</span>;\n\n        <span class="hljs-keyword">if</span> (enableConsoleLog) {\n          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(consoleMessage);\n        }\n\n        <span class="hljs-keyword">if</span> (enableDesktopNotification) {\n          notifier.<span class="hljs-title function_">notify</span>({\n            <span class="hljs-attr">title</span>: <span class="hljs-string">`<span class="hljs-subst">${title}</span> - 成功`</span>,\n            <span class="hljs-attr">message</span>: notificationMessage,\n            <span class="hljs-attr">icon</span>: successIcon,\n            <span class="hljs-attr">sound</span>: sound,\n            <span class="hljs-attr">timeout</span>: duration,\n          });\n        }\n\n        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onSuccess === <span class="hljs-string">&quot;function&quot;</span>) {\n          <span class="hljs-title function_">onSuccess</span>({\n            <span class="hljs-attr">duration</span>: durationSec,\n            outputOptions,\n            bundle,\n            sizeInfo,\n            outputInfo,\n          });\n        }\n      }\n    },\n  };\n}\n</code></pre>\n<h2>使用示例</h2>\n<p>在你的 Rollup 配置文件中使用这个插件：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> buildNotifier <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./rollup-build-notifier.js&quot;</span>;\n<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;src/index.js&quot;</span>,\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">dir</span>: <span class="hljs-string">&quot;dist&quot;</span>,\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&quot;esm&quot;</span>,\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">buildNotifier</span>({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;我的项目构建&quot;</span>, <span class="hljs-comment">// 通知标题</span>\n      <span class="hljs-attr">successIcon</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;assets/success.png&quot;</span>), <span class="hljs-comment">// 成功图标</span>\n      <span class="hljs-attr">failureIcon</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;assets/failure.png&quot;</span>), <span class="hljs-comment">// 失败图标</span>\n      <span class="hljs-attr">sound</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 启用声音提示</span>\n      <span class="hljs-attr">successMessage</span>: <span class="hljs-string">&quot;项目构建完成!&quot;</span>, <span class="hljs-comment">// 成功消息</span>\n      <span class="hljs-attr">failureMessage</span>: <span class="hljs-string">&quot;构建过程中出错&quot;</span>, <span class="hljs-comment">// 失败消息</span>\n      <span class="hljs-attr">duration</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">// 通知显示时间(秒)</span>\n      <span class="hljs-attr">enableConsoleLog</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 启用控制台日志</span>\n      <span class="hljs-attr">enableDesktopNotification</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 启用桌面通知</span>\n      <span class="hljs-attr">showBuildSize</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 显示构建大小</span>\n      <span class="hljs-attr">showOutputFiles</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 显示输出文件</span>\n      <span class="hljs-attr">excludeFiles</span>: [<span class="hljs-string">&quot;*.map&quot;</span>], <span class="hljs-comment">// 排除.map文件</span>\n      <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {\n        <span class="hljs-comment">// 构建成功回调</span>\n        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;构建耗时:&quot;</span>, result.<span class="hljs-property">duration</span> + <span class="hljs-string">&quot;s&quot;</span>);\n      },\n      <span class="hljs-attr">onFailure</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n        <span class="hljs-comment">// 构建失败回调</span>\n        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;构建失败:&quot;</span>, error.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>);\n      },\n    }),\n  ],\n};\n</code></pre>\n<h2>功能说明</h2>\n<ol>\n<li>\n<p><strong>多平台通知支持</strong>   ：</p>\n<ul>\n<li>支持 macOS、Windows 和 Linux 的桌面通知</li>\n<li>自动适配不同操作系统的通知样式</li>\n</ul>\n</li>\n<li>\n<p><strong>构建状态反馈</strong>   ：</p>\n<ul>\n<li>清晰区分构建成功和失败状态</li>\n<li>失败时提供错误详情和位置</li>\n<li>成功时显示构建耗时和输出信息</li>\n</ul>\n</li>\n<li>\n<p><strong>丰富的自定义选项</strong>   ：</p>\n<ul>\n<li>自定义通知标题、消息和图标</li>\n<li>控制通知显示时长和声音提示</li>\n<li>选择显示构建大小和输出文件列表</li>\n</ul>\n</li>\n<li>\n<p><strong>多输出渠道</strong>   ：</p>\n<ul>\n<li>桌面系统通知</li>\n<li>控制台彩色输出</li>\n<li>自定义回调函数</li>\n</ul>\n</li>\n<li>\n<p><strong>开发友好</strong>   ：</p>\n<ul>\n<li>清晰的彩色控制台输出</li>\n<li>错误代码片段显示</li>\n<li>排除无关文件(如source maps)</li>\n</ul>\n</li>\n</ol>\n<h2>高级用法</h2>\n<h3>集成Webhook通知</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;\n\n<span class="hljs-title function_">buildNotifier</span>({\n  <span class="hljs-attr">onSuccess</span>: <span class="hljs-title function_">async</span> (result) =&gt; {\n    <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;https://webhook.example.com/build-success&quot;</span>, {\n      <span class="hljs-attr">project</span>: <span class="hljs-string">&quot;my-project&quot;</span>,\n      <span class="hljs-attr">duration</span>: result.<span class="hljs-property">duration</span>,\n      <span class="hljs-attr">size</span>: result.<span class="hljs-property">sizeInfo</span>,\n    });\n  },\n  <span class="hljs-attr">onFailure</span>: <span class="hljs-title function_">async</span> (error) =&gt; {\n    <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;https://webhook.example.com/build-failure&quot;</span>, {\n      <span class="hljs-attr">project</span>: <span class="hljs-string">&quot;my-project&quot;</span>,\n      <span class="hljs-attr">error</span>: error.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>,\n    });\n  },\n});\n</code></pre>\n<h3>与CI系统集成</h3>\n<pre><code class="language-javascript"><span class="hljs-title function_">buildNotifier</span>({\n  <span class="hljs-attr">enableDesktopNotification</span>: !process.<span class="hljs-property">env</span>.<span class="hljs-property">CI</span>, <span class="hljs-comment">// CI环境中禁用桌面通知</span>\n  <span class="hljs-attr">onFailure</span>: <span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">CI</span>) {\n      process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// CI环境中构建失败时退出</span>\n    }\n  },\n});\n</code></pre>\n<h3>自定义通知样式</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;\n\n<span class="hljs-title function_">buildNotifier</span>({\n  <span class="hljs-attr">successIcon</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;assets/custom-success.png&quot;</span>),\n  <span class="hljs-attr">failureIcon</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;assets/custom-error.png&quot;</span>),\n  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {\n    notifier.<span class="hljs-title function_">notify</span>({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;构建成功&quot;</span>,\n      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;点击打开项目目录&quot;</span>,\n      <span class="hljs-attr">icon</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;assets/custom-success.png&quot;</span>),\n      <span class="hljs-attr">sound</span>: <span class="hljs-string">&quot;Submarine&quot;</span>,\n      <span class="hljs-attr">wait</span>: <span class="hljs-literal">true</span>,\n      <span class="hljs-attr">open</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;dist&quot;</span>),\n    });\n  },\n});\n</code></pre>\n<h3>多通知服务支持</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> push <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pushover-notifications&quot;</span>;\n\n<span class="hljs-keyword">const</span> pushover = <span class="hljs-keyword">new</span> <span class="hljs-title function_">push</span>({\n  <span class="hljs-attr">user</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">PUSHOVER_USER</span>,\n  <span class="hljs-attr">token</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">PUSHOVER_TOKEN</span>,\n});\n\n<span class="hljs-title function_">buildNotifier</span>({\n  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {\n    pushover.<span class="hljs-title function_">send</span>({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;构建成功&quot;</span>,\n      <span class="hljs-attr">message</span>: <span class="hljs-string">`耗时: <span class="hljs-subst">${result.duration}</span>s`</span>,\n      <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>,\n    });\n  },\n  <span class="hljs-attr">onFailure</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    pushover.<span class="hljs-title function_">send</span>({\n      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;构建失败&quot;</span>,\n      <span class="hljs-attr">message</span>: error.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>,\n      <span class="hljs-attr">priority</span>: <span class="hljs-number">1</span>,\n      <span class="hljs-attr">sound</span>: <span class="hljs-string">&quot;siren&quot;</span>,\n    });\n  },\n});\n</code></pre>\n<p>这个插件可以帮助你及时了解构建状态，特别是在长时间构建或自动化部署场景中，能够显著提高开发效率和工作流程的透明度。</p>\n</div>'</script></body></html>