<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x3316(o,s){var p=_0x2f1e();return(_0x3316=function(s,n){var a=p[s-=443];void 0===_0x3316.SkpvYd&&(_0x3316.hffiTS=function(s,n){var a,t=[],o=0,p="";for(s=(s=>{for(var n,a,t="",o="",p=0,c=0;a=s.charAt(c++);~a&&(n=p%4?64*n+a:a,p++%4)&&(t+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var l=0,u=t.length;l<u;l++)o+="%"+("00"+t.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(o)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)o=(o+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[o],t[o]=a;for(var c=0,o=0,l=0;l<s.length;l++)a=t[c=(c+1)%256],t[c]=t[o=(o+t[c])%256],t[o]=a,p+=String.fromCharCode(s.charCodeAt(l)^t[(t[c]+t[o])%256]);return p},o=arguments,_0x3316.SkpvYd=!0);var s=s+p[0],t=o[s];return t?a=t:(void 0===_0x3316.YyVyTU&&(_0x3316.YyVyTU=!0),a=_0x3316.hffiTS(a,n),o[s]=a),a})(o,s)}function _0x2f1e(){var s=["W5NdTSojWOnqW7vaoSoObaqZ","z1LUWPRdSfa5q8oYwCozW4S","W5lcU8knW5pcUSoTnW","W5NcSCkAW7VcUSoHnCku","cftdP8ojd0bYWPuBtNtcUCovsW","WOVcQ8kGicj1q0BcM3hdVCo7W7FcRW","W6yXtmkCbqSoW4qWWQ8TW5xdISoCW5fpAmoIgdNdNgXIW6BcL8kR","W5NdRCkzWO7dUv/dGKfTmmoKgCog","W4P3xd3cG1FcMe7dGSkDbvy","WO/dOMNcUCotWRRdJW","psxdPJL8jmkRj8oT","WQVcK1BdI8oGWRBdL1SgWRiiW5hcIa","p8kEWP7dV8kQzLaVl33dJ8kB","mvNcI2FcNSogqSkBWQCeW7JdHa","hdKUW7PbWRC1ha","W581W4ldPrpdTXycWPO7fHC","W7edEmolWPi","x2q/W69AWQe2","W57dRCkFWOldVfBcM2H7gSoTpG","W6GSWOvhW6/cICkQW5O","WOddQ8okWQldVCk4BSk5WR5OWOpdPmkR","FbaeW4NdISoKWRNcU28KW5zx","ybbTcmkHsmk3","z11UWPJdS15ItSo8FmoqW4VcUa"];return(_0x2f1e=function(){return s})()}var _0x2c93c4=_0x3316;if((()=>{for(var s=_0x3316,n=_0x2f1e();;)try{if(666965==-parseInt(s(446,"aQXb"))+-parseInt(s(463,"MqNK"))/2+-parseInt(s(466,"Jt#B"))/3*(-parseInt(s(464,"IJxA"))/4)+-parseInt(s(465,"PJ!Z"))/5+-parseInt(s(461,"2ICp"))/6*(parseInt(s(443,"5Tfv"))/7)+parseInt(s(459,"aQXb"))/8+parseInt(s(456,"ij10"))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x2c93c4(454,"4QVD")](_0x2c93c4(462,"7cP@"))!=_0x2c93c4(444,"wVQF"))throw window[_0x2c93c4(455,"4QVD")][_0x2c93c4(445,"Jt#B")](_0x2c93c4(458,"ma(r")),Error();document.title="package.json exports有哪些功能",document.getElementById("article").innerHTML='<div><p>一句话概括：<br>\n<code>package.json</code> 中的 <code>&quot;exports&quot;</code> 字段把 <strong>“哪些文件可以被引用”</strong>   和 <strong>“在不同场景下引用到哪个文件”</strong>   这两件事一次性说清，同时还能 <strong>隐藏内部文件、支持多格式、多环境、多条件</strong>  。</p>\n<p>把它拆开就是下面 5 大核心功能：</p>\n<hr>\n<h3>1. 白名单：精确暴露可引用路径（安全 + 语义化）</h3>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;exports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;.&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./lib/index.js&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;./math&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./lib/math.js&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;./package.json&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./package.json&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<ul>\n<li>用户只能 <code>import \'pkg\'</code>, <code>import \'pkg/math\'</code>, <code>import \'pkg/package.json\'</code>。</li>\n<li>任何未列出的路径（如 <code>import \'pkg/src/internal.js\'</code>）直接报错 → 防止意外“深潜”。</li>\n</ul>\n<hr>\n<h3>2. 多入口映射：一个包多个子包</h3>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;exports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;.&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./index.js&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;./browser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./browser.js&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;./node&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./node.js&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<ul>\n<li>像 monorepo 一样把功能拆成子路径，但仍在同一个包里发布。</li>\n<li>用户：<code>import { format } from \'date-fns/format\'</code> 就是这种思路。</li>\n</ul>\n<hr>\n<h3>3. 条件导出：同一路径根据环境自动切换文件</h3>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;exports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;.&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n      <span class="hljs-attr">&quot;types&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.d.ts&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;node&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n        <span class="hljs-attr">&quot;import&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.node.mjs&quot;</span><span class="hljs-punctuation">,</span>\n        <span class="hljs-attr">&quot;require&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.node.cjs&quot;</span>\n      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;browser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.browser.js&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;development&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.dev.js&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;production&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.prod.js&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/index.js&quot;</span>\n    <span class="hljs-punctuation">}</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<ul>\n<li>打包器/运行时按优先级匹配：<br>\n<code>import</code>/<code>require</code> × <code>node</code>/<code>browser</code> × <code>development</code>/<code>production</code> × <code>default</code>。</li>\n<li>典型场景：\n<ul>\n<li>Node ESM → <code>index.node.mjs</code></li>\n<li>Webpack 生产模式 → <code>index.prod.js</code></li>\n<li>类型声明 → <code>index.d.ts</code></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3>4. 隐藏内部实现 &amp; 减少包体积</h3>\n<ul>\n<li>没列在 <code>&quot;exports&quot;</code> 里的文件永远不会被解析，<strong>Tree-shaking + 安全</strong>   双收益。</li>\n<li>未来重构目录结构，只要改 <code>&quot;exports&quot;</code> 即可，不会破坏用户代码。</li>\n</ul>\n<hr>\n<h3>5. 取代旧字段，统一规范</h3>\n<table>\n<thead>\n<tr>\n<th>旧做法</th>\n<th>新做法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&quot;main&quot;</code> + <code>&quot;module&quot;</code></td>\n<td><code>&quot;exports&quot;</code> 里同时给 <code>require</code> / <code>import</code></td>\n</tr>\n<tr>\n<td><code>&quot;browser&quot;</code> 字段</td>\n<td><code>&quot;exports&quot;.&quot;.&quot;</code> 下的 <code>&quot;browser&quot;</code> 条件</td>\n</tr>\n<tr>\n<td><code>package.json</code> 路径魔法</td>\n<td>显式 <code>&quot;./package.json&quot;</code> 映射</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3>一张图总结（记忆用）</h3>\n<pre><code>exports = 白名单 + 子路径 + 条件 + 隐藏 + 统一\n</code></pre>\n<p>只要记住这 5 个关键词，就知道 <code>exports</code> 能干什么了。</p>\n</div>'</script></body></html>