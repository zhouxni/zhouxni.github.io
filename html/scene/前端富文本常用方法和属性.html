<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0xa575(){var n=["WOBdQtFdH1WJlY0NWOBcLxe","D8kMcfHZWPrDW5/dJ8kSy8k6","ESk0W7VdTmk5B8k/WOC","xCojW5GmW4dcSHeSyt/cPCkT","cK5SW4BdNCoPWPldQWJdMmoBWOZdUG","ECoPWQJcSrHQAxX4","W61PWOiviLjf","qsaqWO9JW7ZcKSkWCJxcLSob","t1ddJSkJgCkJD1NcSmoyW57cUSkfW5WaWOxcUSo8W49ovJjfW4mjW4S","CCk2WQ/cPCofoCk0WRfBC8kmWRq","WQNcQbudqgaksH3dNSoeW7G","oW16oXpdGLBdMZmWneC","cK1VW4VdMSoJWPtdPWhdJ8onWQpdPG","W6qLt8o9W5ddLmkxwWhdLSkrsq","e8kZWPG3WPS","x8odW59mWO3dRI4wBW","zSkpW5WpjclcJq","kCo+pG3dOSolb8oGp8kHW6vewq","h8kTWRuLWQNcH3WGW4DXwmod","aSoRu8otFmk+EW","W4L9WPRdQSkLggu","jCowW7usvNlcUCozW7WLm8oR","bCk2amkrnCoSjq1TFf7dMmkx","t8o5W7fFW6JdKh4","FHeIWQBcHWbUW6W","W5ePW5BcUJbWySoT","iSoIeM08WQdcUcW","W47dQCoTWRBcHGC9","WO7dJSoxWR/cHIWV","C8k3W77dK8kzt8k7WR8","jCozW7TxfcRcRmo2W7S","l8o5laexkrC"];return(_0xa575=function(){return n})()}function _0x4344(l,n){var t=_0xa575();return(_0x4344=function(n,s){var a=t[n-=184];void 0===_0x4344.tufqHi&&(_0x4344.FaZDjs=function(n,s){var a,e=[],l=0,t="";for(n=(n=>{for(var s,a,e="",l="",t=0,o=0;a=n.charAt(o++);~a&&(s=t%4?64*s+a:a,t++%4)&&(e+=String.fromCharCode(255&s>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,r=e.length;c<r;c++)l+="%"+("00"+e.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(n),o=0;o<256;o++)e[o]=o;for(o=0;o<256;o++)l=(l+e[o]+s.charCodeAt(o%s.length))%256,a=e[o],e[o]=e[l],e[l]=a;for(var o=0,l=0,c=0;c<n.length;c++)a=e[o=(o+1)%256],e[o]=e[l=(l+e[o])%256],e[l]=a,t+=String.fromCharCode(n.charCodeAt(c)^e[(e[o]+e[l])%256]);return t},l=arguments,_0x4344.tufqHi=!0);var n=n+t[0],e=l[n];return e?a=e:(void 0===_0x4344.WGUJmD&&(_0x4344.WGUJmD=!0),a=_0x4344.FaZDjs(a,s),l[n]=a),a})(l,n)}var _0x2d9873=_0x4344;if((()=>{for(var n=_0x4344,s=_0xa575();;)try{if(313841==-parseInt(n(187,"k7xh"))*(parseInt(n(194,"Fhvw"))/2)+parseInt(n(212,"Ozfu"))/3*(-parseInt(n(206,"4W^^"))/4)+parseInt(n(196,"*i&W"))/5*(-parseInt(n(193,"*i&W"))/6)+parseInt(n(191,"yVsq"))/7+parseInt(n(198,"4]pg"))/8*(parseInt(n(215,"Hlyl"))/9)+-parseInt(n(185,"VSdB"))/10*(-parseInt(n(204,"&LIW"))/11)+-parseInt(n(192,"72Sm"))/12*(-parseInt(n(199,"s1Yu"))/13))break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x2d9873(197,"72Sm")](_0x2d9873(211,"Yxui"))!=_0x2d9873(188,"uTHR"))throw window[_0x2d9873(200,"Ri9a")][_0x2d9873(202,"HH1J")](_0x2d9873(214,"kawF")),Error();document.title="前端富文本常用方法和属性",document.getElementById("article").innerHTML='<div><p>前端富文本编辑器在开发中涉及多种方法和属性，这些方法和属性是实现富文本编辑功能的关键。以下是一些常用的方法和属性：</p>\n<h3>一、常用方法</h3>\n<ol>\n<li><strong><code>document.execCommand()</code></strong>\n<ul>\n<li><strong>功能</strong>  ：影响使用 <code>designMode</code> 或 <code>contentEditable</code> 属性实现可编辑区域的元素，执行各种编辑命令。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">&#x27;bold&#x27;</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">// 加粗</span>\n<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">&#x27;insertImage&#x27;</span>, <span class="hljs-literal">false</span>, <span class="hljs-string">&#x27;image.jpg&#x27;</span>); <span class="hljs-comment">// 插入图片</span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>window.getSelection()</code></strong>\n<ul>\n<li><strong>功能</strong>  ：返回一个 <code>Selection</code> 对象，表示用户选择的文本范围或插入符号的当前位置。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(selection.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 输出选中的文本</span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>Range</code> 对象的方法</strong>\n<ul>\n<li><strong><code>setStart()</code> 和 <code>setEnd()</code></strong>  ：用于设置 <code>Range</code> 的开始和结束位置。</li>\n<li><strong><code>deleteContents()</code></strong>  ：删除 <code>Range</code> 中的内容。</li>\n<li><strong><code>insertNode()</code></strong>  ：在 <code>Range</code> 的起始位置插入一个节点。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> range = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();\nrange.<span class="hljs-title function_">setStart</span>(node, offset);\nrange.<span class="hljs-title function_">setEnd</span>(node, offset + length);\nrange.<span class="hljs-title function_">deleteContents</span>();\nrange.<span class="hljs-title function_">insertNode</span>(newNode);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>自定义方法</strong>\n<ul>\n<li><strong>插入图片</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">insertImage</span>(<span class="hljs-params">url</span>) {\n  <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;img&#x27;</span>);\n  img.<span class="hljs-property">src</span> = url;\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;[contenteditable=&quot;true&quot;]&#x27;</span>).<span class="hljs-title function_">appendChild</span>(img);\n}\n</code></pre>\n</li>\n<li><strong>插入代码块</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">insertCodeBlock</span>(<span class="hljs-params">code</span>) {\n  <span class="hljs-keyword">const</span> pre = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;pre&#x27;</span>);\n  <span class="hljs-keyword">const</span> codeElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;code&#x27;</span>);\n  codeElement.<span class="hljs-property">textContent</span> = code;\n  pre.<span class="hljs-title function_">appendChild</span>(codeElement);\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;[contenteditable=&quot;true&quot;]&#x27;</span>).<span class="hljs-title function_">appendChild</span>(pre);\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ol>\n<h3>二、常用属性</h3>\n<ol>\n<li><strong><code>contentEditable</code></strong>\n<ul>\n<li><strong>功能</strong>  ：HTML 的一个全局属性，可以设置在元素上，使其内容可编辑。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>在这里编辑文本<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>designMode</code></strong>\n<ul>\n<li><strong>功能</strong>  ：用于将整个文档设置为可编辑模式。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">designMode</span> = <span class="hljs-string">&#x27;on&#x27;</span>; <span class="hljs-comment">// 整个文档可编辑</span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>Selection</code> 对象的属性</strong>\n<ul>\n<li><strong><code>anchorNode</code></strong>  ：返回选中区域对应的起始节点。</li>\n<li><strong><code>anchorOffset</code></strong>  ：返回选中区域的起始下标。</li>\n<li><strong><code>focusNode</code></strong>  ：返回选中区域终点所在的节点。</li>\n<li><strong><code>focusOffset</code></strong>  ：返回选中区域终点的下标。</li>\n<li><strong><code>rangeCount</code></strong>  ：返回选中的区域所对应的连续的范围内的数量。</li>\n<li><strong><code>type</code></strong>  ：返回选中区域所对应的类别（<code>Range</code> 或 <code>Caret</code>）。</li>\n</ul>\n</li>\n<li><strong><code>Range</code> 对象的属性</strong>\n<ul>\n<li><strong><code>startContainer</code></strong>   和 <strong><code>endContainer</code></strong>  ：分别表示 <code>Range</code> 的起始和结束容器节点。</li>\n<li><strong><code>startOffset</code></strong>   和 <strong><code>endOffset</code></strong>  ：分别表示 <code>Range</code> 的起始和结束偏移量。</li>\n<li><strong><code>collapsed</code></strong>  ：表示 <code>Range</code> 是否折叠（即起始和结束位置相同）。</li>\n</ul>\n</li>\n</ol>\n<h3>三、其他注意事项</h3>\n<ol>\n<li><strong>样式隔离</strong>  ：\n<ul>\n<li>使用 <code>iframe</code> 方式可以实现样式隔离，避免内部样式与外部样式冲突。</li>\n<li>使用 <code>contentEditable</code> 属性时，需要注意页面 CSS 对编辑区域的影响。</li>\n</ul>\n</li>\n<li><strong>事件监听</strong>  ：\n<ul>\n<li>监听用户的输入、选择、删除等操作，并相应地更新 DOM 结构。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;[contenteditable=&quot;true&quot;]&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;input&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内容已修改&#x27;</span>);\n});\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>性能优化</strong>  ：\n<ul>\n<li>对于大型文档或复杂操作，需要关注性能优化问题，如使用懒加载插件、优化 DOM 操作等。</li>\n</ul>\n</li>\n<li><strong>兼容性</strong>  ：\n<ul>\n<li>在开发过程中需要考虑不同浏览器和设备的兼容性问题。</li>\n</ul>\n</li>\n</ol>\n<p>通过掌握这些方法和属性，开发者可以构建出功能丰富、用户体验优良的富文本编辑器。同时，也可以根据需要选择成熟的开源库（如 CKEditor、Quill、TinyMCE 等）来快速实现富文本编辑功能。</p>\n</div>'</script></body></html>