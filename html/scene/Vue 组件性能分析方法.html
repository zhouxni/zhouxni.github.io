<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2c468d=_0x1377;if((()=>{for(var s=_0x1377,n=_0x3a5c();;)try{if(558401==-parseInt(s(218,"cL8b"))+-parseInt(s(215,"^c@U"))/2+parseInt(s(219,"^c@U"))/3*(-parseInt(s(204,"2opc"))/4)+-parseInt(s(211,"OmXw"))/5*(-parseInt(s(208,"Vakv"))/6)+parseInt(s(202,"^wW0"))/7*(-parseInt(s(205,"%TFK"))/8)+-parseInt(s(230,"i%hB"))/9*(-parseInt(s(207,"(eK@"))/10)+-parseInt(s(226,"r3cX"))/11*(-parseInt(s(216,"2XUB"))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x2c468d(220,"ZpY0")](_0x2c468d(217,"(eK@"))!=_0x2c468d(212,"ziIj"))throw window[_0x2c468d(223,"cL8b")][_0x2c468d(214,"cL8b")](_0x2c468d(222,"Ipsp")),Error();function _0x1377(e,s){var p=_0x3a5c();return(_0x1377=function(s,n){var a=p[s-=202];void 0===_0x1377.szTPyL&&(_0x1377.TKzAcs=function(s,n){var a,l=[],e=0,p="";for(s=(s=>{for(var n,a,l="",e="",p=0,o=0;a=s.charAt(o++);~a&&(n=p%4?64*n+a:a,p++%4)&&(l+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var t=0,c=l.length;t<c;t++)e+="%"+("00"+l.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(e)})(s),o=0;o<256;o++)l[o]=o;for(o=0;o<256;o++)e=(e+l[o]+n.charCodeAt(o%n.length))%256,a=l[o],l[o]=l[e],l[e]=a;for(var o=0,e=0,t=0;t<s.length;t++)a=l[o=(o+1)%256],l[o]=l[e=(e+l[o])%256],l[e]=a,p+=String.fromCharCode(s.charCodeAt(t)^l[(l[o]+l[e])%256]);return p},e=arguments,_0x1377.szTPyL=!0);var s=s+p[0],l=e[s];return l?a=l:(void 0===_0x1377.tKMWzD&&(_0x1377.tKMWzD=!0),a=_0x1377.TKzAcs(a,n),e[s]=a),a})(e,s)}function _0x3a5c(){var s=["W5GvWPvFWPddJr0VW5/cJL9SW7e","mSknW5JcUmkUCSkN","B00hEvOlWRTEqgu3E8o9","tr4FWOtdMcrVWPJdGIbgW5BcO0S","ggpcV13cNw9nW4ZdVG","DSoAWPhdPCo2ESktW5uGcgS","B0qbE15rW6XxuKer","WOlcUCkBuu9EmW","WO3dMHP0y8kOWQz6WQq","WPhdKSkFn1ddNSkAW6nEgCkKtSodW57cJmozlCkbW4hcNfLgg3RcOSod","lmkhW4VcTCk7EmkTW6m","W47cUmkgrSkimYO5WQlcVSkV","b3ZcUSkRvgJdVW","W44Bpmk8WPldTJW7","WO8EqSkOW7aMqSk9WOzrW4KqWOS","W4ikW5qZAHGz","g8oJvCoHqgxdKqCtEw0","W5pdRslcScCoWRiG","WOxdQqldKmkxd04LxxJdUSkUzq","WQ3cVmoGlK7cU14","B8kDWOhdQ14eWPzj","z8kvW5BdQ0GzWQzOW7e","iCkipIFcRwVcG8k8lNpdT2vO","W7hcSfH6r8kVWOOJeXJdKWNdTXu","AdBdRGVdLYq2W7/dGCojW43dKmoN","jSkDWQv1W5O2WQG","dCkcW44JdmkfW6a8","cmkbWR1ttmoeWPSSuCoQWRtdHCk6","FdnrvGP+C8kdq8kMfv5P","W4tcLLTqFW"];return(_0x3a5c=function(){return s})()}document.title="Vue 组件性能分析方法",document.getElementById("article").innerHTML='<div><p>在 Vue 应用中分析组件性能是优化应用的关键步骤。以下是多种查看 Vue 组件性能的方法：</p>\n<h2>一、使用 Vue DevTools 分析组件性能</h2>\n<h3>1. 安装 Vue DevTools</h3>\n<ul>\n<li>Chrome 扩展商店安装 <a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd" target="_blank">Vue DevTools</a></li>\n</ul>\n<h3>2. 性能分析功能</h3>\n<ul>\n<li><strong>组件渲染时间</strong>  ：在 &quot;Performance&quot; 标签页查看每个组件的渲染耗时</li>\n<li><strong>事件追踪</strong>  ：记录组件事件触发和响应时间</li>\n<li><strong>时间线记录</strong>  ：分析组件生命周期执行时间</li>\n</ul>\n<h2>二、使用 Vue 内置性能标记</h2>\n<h3>1. 启用开发模式性能追踪</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// main.js</span>\n<span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">performance</span> = <span class="hljs-literal">true</span>  <span class="hljs-comment">// 启用性能追踪</span>\n</code></pre>\n<p>启用后会在控制台输出组件初始化、编译、渲染和补丁的性能信息。</p>\n<h3>2. 自定义性能测量</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-comment">// 测量组件挂载时间</span>\n    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {\n      <span class="hljs-keyword">const</span> timing = <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">getEntriesByName</span>(<span class="hljs-string">&#x27;vue-mount&#x27;</span>)[<span class="hljs-number">0</span>]\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.$options.name}</span> 挂载耗时:`</span>, timing.<span class="hljs-property">duration</span> + <span class="hljs-string">&#x27;ms&#x27;</span>)\n    })\n  }\n}\n</code></pre>\n<h2>三、使用 Chrome DevTools 分析</h2>\n<h3>1. Performance 面板</h3>\n<ol>\n<li>打开 Chrome DevTools (F12)</li>\n<li>切换到 Performance 面板</li>\n<li>点击记录按钮</li>\n<li>与你的应用交互</li>\n<li>停止记录并分析结果</li>\n</ol>\n<p>重点关注：</p>\n<ul>\n<li><strong>Main</strong>   线程活动</li>\n<li><strong>Frames</strong>   每秒帧数</li>\n<li><strong>Timings</strong>   中的关键事件</li>\n</ul>\n<h3>2. Memory 面板</h3>\n<p>检测组件内存泄漏：</p>\n<ol>\n<li>记录堆快照</li>\n<li>执行可能引起泄漏的操作</li>\n<li>再次记录堆快照</li>\n<li>比较两次快照的内存差异</li>\n</ol>\n<h2>四、组件级性能优化检查</h2>\n<h3>1. 检查不必要的重新渲染</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">renderTracked</span>(<span class="hljs-params">e</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;渲染被追踪&#x27;</span>, e)\n  },\n  <span class="hljs-title function_">renderTriggered</span>(<span class="hljs-params">e</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;渲染被触发&#x27;</span>, e)\n  }\n}\n</code></pre>\n<h3>2. 使用 <code>v-once</code> 标记静态内容</h3>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-once</span>&gt;</span>这个内容只会渲染一次<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n<h3>3. 计算属性缓存验证</h3>\n<pre><code class="language-javascript"><span class="hljs-attr">computed</span>: {\n  <span class="hljs-title function_">expensiveComputation</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;计算属性执行&#x27;</span>) <span class="hljs-comment">// 观察是否被不必要地重新计算</span>\n    <span class="hljs-comment">// 复杂计算...</span>\n  }\n}\n</code></pre>\n<h2>五、高级性能分析工具</h2>\n<h3>1. 使用 <code>why-did-you-render</code></h3>\n<pre><code class="language-sh">npm install @welldone-software/why-did-you-render --save-dev\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-comment">// main.js</span>\n<span class="hljs-keyword">import</span> whyDidYouRender <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@welldone-software/why-did-you-render&#x27;</span>\n\n<span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">&#x27;production&#x27;</span>) {\n  <span class="hljs-title function_">whyDidYouRender</span>(<span class="hljs-title class_">Vue</span>, {\n    <span class="hljs-attr">trackAllPureComponents</span>: <span class="hljs-literal">true</span>\n  })\n}\n\n<span class="hljs-comment">// 在组件中</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">whyDidYouRender</span>: <span class="hljs-literal">true</span>,\n  <span class="hljs-comment">// 组件选项...</span>\n}\n</code></pre>\n<h3>2. 使用 <code>vue-composition-api-perf-debug</code></h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { perf } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-composition-api-perf-debug&#x27;</span>\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-title function_">perf</span>() <span class="hljs-comment">// 记录 composition API 性能</span>\n    <span class="hljs-comment">// setup 逻辑...</span>\n  }\n}\n</code></pre>\n<h2>六、生产环境性能监控</h2>\n<h3>1. 自定义性能指标上报</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>()\n    \n    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {\n      <span class="hljs-keyword">const</span> duration = performance.<span class="hljs-title function_">now</span>() - start\n      <span class="hljs-comment">// 上报组件渲染时间到监控系统</span>\n      <span class="hljs-title function_">trackComponentPerf</span>({\n        <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">name</span>,\n        duration,\n        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()\n      })\n    })\n  }\n}\n</code></pre>\n<h3>2. 使用 RUM (Real User Monitoring)</h3>\n<ul>\n<li><strong>Sentry Performance</strong></li>\n<li><strong>Google Analytics 自定义指标</strong></li>\n<li><strong>New Relic Browser</strong></li>\n</ul>\n<h2>七、性能优化检查清单</h2>\n<ol>\n<li><strong>组件是否频繁不必要重新渲染？</strong></li>\n</ol>\n<ul>\n<li>使用 <code>why-did-you-render</code> 检查</li>\n</ul>\n<ol start="2">\n<li><strong>计算属性是否被过度计算？</strong></li>\n</ol>\n<ul>\n<li>添加日志检查执行频率</li>\n</ul>\n<ol start="3">\n<li><strong>是否存在过深的组件嵌套？</strong></li>\n</ol>\n<ul>\n<li>检查组件层级结构</li>\n</ul>\n<ol start="4">\n<li><strong>大型列表是否使用虚拟滚动？</strong></li>\n</ol>\n<ul>\n<li>考虑 <code>vue-virtual-scroller</code> 等方案</li>\n</ul>\n<ol start="5">\n<li><strong>是否正确使用 <code>v-if</code> 和 <code>v-show</code>？</strong></li>\n</ol>\n<ul>\n<li>频繁切换用 <code>v-show</code>，条件稳定用 <code>v-if</code></li>\n</ul>\n<p>通过这些方法和工具，你可以全面了解 Vue 组件的性能表现，并找到优化机会。</p>\n</div>'</script></body></html>