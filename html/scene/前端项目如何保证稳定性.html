<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x58595b=_0x37bb;function _0x37bb(l,n){var o=_0x463f();return(_0x37bb=function(n,t){var r=o[n-=327];void 0===_0x37bb.MQOXhF&&(_0x37bb.CGbnnP=function(n,t){var r,s=[],l=0,o="";for(n=(n=>{for(var t,r,s="",l="",o=0,i=0;r=n.charAt(i++);~r&&(t=o%4?64*t+r:r,o++%4)&&(s+=String.fromCharCode(255&t>>(-2*o&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var e=0,a=s.length;e<a;e++)l+="%"+("00"+s.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(l)})(n),i=0;i<256;i++)s[i]=i;for(i=0;i<256;i++)l=(l+s[i]+t.charCodeAt(i%t.length))%256,r=s[i],s[i]=s[l],s[l]=r;for(var i=0,l=0,e=0;e<n.length;e++)r=s[i=(i+1)%256],s[i]=s[l=(l+s[i])%256],s[l]=r,o+=String.fromCharCode(n.charCodeAt(e)^s[(s[i]+s[l])%256]);return o},l=arguments,_0x37bb.MQOXhF=!0);var n=n+o[0],s=l[n];return s?r=s:(void 0===_0x37bb.eSbfXR&&(_0x37bb.eSbfXR=!0),r=_0x37bb.CGbnnP(r,t),l[n]=r),r})(l,n)}if((()=>{for(var n=_0x37bb,t=_0x463f();;)try{if(588695==+parseInt(n(337,"euHv"))+-parseInt(n(327,"]4@1"))/2+-parseInt(n(351,"PvG]"))/3*(-parseInt(n(332,"euHv"))/4)+-parseInt(n(345,"gA61"))/5*(-parseInt(n(333,"[yIG"))/6)+-parseInt(n(328,"pj1e"))/7+parseInt(n(344,"pj1e"))/8+parseInt(n(339,"pid4"))/9*(-parseInt(n(341,"&s(#"))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x58595b(331,"M5$a")](_0x58595b(349,"]!p&"))!=_0x58595b(347,"Q(ex"))throw window[_0x58595b(348,"]!p&")][_0x58595b(338,"k3AE")](_0x58595b(335,"Coc4")),Error();function _0x463f(){var n=["umkFWRqeF1VdLG","W5jWW4hdM8oHW5ldMcqCW7ZcOstdHW","CgNdN8kbAbTG","WQTBtCkzhs8nWOHbWOe","tI7dLXHkgCkicwRcLX3dS8omWQ/cU3xcK3f3mrFcOxtcTqJdSa","w8oMWP8TWQjhAHCukvCCWOm","W5b1W4FdK8oJW5pcStSJW4hcQq4","W6n6W4P0W6ldSSoZ","W5VdUvPcWPFcQCouj8oBsCkq","W5i+xmobWOpdMajMfHHmwcC","rCkTdHDqCCoZxdLw","WQBcHsxdSSkCW5TLWRK8WP7cOI1D","DmoHW5m+AYOW","WQTqsmkCCf5uWPD8WQPhqmoc","WPzIWPueWRXUWPufWOJcQf1YgW","WOb9nHPeuCouWRRdO8kTWR4","WRRdPuVcQb8","AJXnB3ToW4T0","rZbnA3XuW69/pq","W7VcPWVdRfrFW5ihuvZdNSkrWQu","WQxcMhbkWOnyuG","WPPPWQSKCMiJWQpdL8k6x3Gp","d8kKrKRcLKmwWOFdLSkLWQlcQmom","WQTBtCkyFLHxWQjAWPj7ECok","pSkPW5VcVCoZwYS","WRtcJSk2wc07DcBdKwKllG"];return(_0x463f=function(){return n})()}document.title="前端项目如何保证稳定性",document.getElementById("article").innerHTML='<div><p>前端项目的稳定性，本质上是“<strong>让代码在各种不确定条件下，仍然按预期运行，并且出了问题能快速修复</strong>   ”。它涉及<strong>开发、测试、发布、监控、应急</strong>   全流程，需要一套体系化的保障机制。</p>\n<hr>\n<h3>一、开发阶段：从“人”和“代码”两个维度减少错误</h3>\n<h4>1. 代码规范与约束</h4>\n<ul>\n<li>✅ <strong>强制代码规范</strong>   ：ESLint + Prettier + commit-lint（如 husky + lint-staged）</li>\n<li>✅ <strong>类型约束</strong>   ：TypeScript（或 Flow）+ 严格模式，避免运行时类型错误</li>\n<li>✅ <strong>代码格式化</strong>   ：Prettier 统一格式，减少无意义 diff</li>\n</ul>\n<h4>2. 架构设计</h4>\n<ul>\n<li>✅ <strong>模块化 &amp; 低耦合</strong>   ：按功能/业务拆分模块，避免“大泥球”</li>\n<li>✅ <strong>防御式编程</strong>   ：边界检查、空值处理、错误兜底（如 <code>?.</code>、默认值、try-catch）</li>\n<li>✅ <strong>错误隔离</strong>   ：微前端/iframe/Shadow DOM，防止一个模块崩溃拖垮全局</li>\n</ul>\n<h4>3. 自动化测试</h4>\n<ul>\n<li>✅ <strong>单元测试</strong>   ：Jest/Vitest，覆盖核心逻辑（如工具函数、状态管理）</li>\n<li>✅ <strong>集成测试</strong>   ：React Testing Library/Cypress，模拟用户操作（如登录、下单）</li>\n<li>✅ <strong>端到端测试</strong>   ：Cypress/Playwright，覆盖主流程（如“从首页到支付成功”）</li>\n<li>✅ <strong>视觉回归测试</strong>   ：Percy/Chromatic，防止 UI 意外变更</li>\n</ul>\n<hr>\n<h3>二、构建与发布：让“变更”可控</h3>\n<h4>1. 构建优化</h4>\n<ul>\n<li>✅ <strong>代码分割</strong>   ：Webpack/Rollup 的动态导入，减少首屏体积</li>\n<li>✅ <strong>Tree Shaking</strong>   ：移除未使用代码</li>\n<li>✅ <strong>Source Map</strong>   ：生产环境上传 Sentry，便于调试（但关闭用户访问）</li>\n</ul>\n<h4>2. 发布策略</h4>\n<ul>\n<li>✅ <strong>灰度发布</strong>   ：按用户/地域/流量逐步放量（如 1% → 10% → 100%）</li>\n<li>✅ <strong>蓝绿部署</strong>   ：新旧版本并存，一键回滚（如 Nginx 切换流量）</li>\n<li>✅ <strong>Feature Flag</strong>   ：通过配置开关功能，无需重新发布（如 LaunchDarkly）</li>\n</ul>\n<hr>\n<h3>三、线上监控：让“问题”可被观测</h3>\n<h4>1. 错误监控</h4>\n<ul>\n<li>✅ <strong>全局错误捕获</strong>   ：<pre><code class="language-js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">report</span>(e));\n<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;unhandledrejection&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">report</span>(e));\n</code></pre>\n</li>\n<li>✅ <strong>Sentry/Fundebug</strong>   ：自动上报错误堆栈、用户行为路径、设备信息</li>\n</ul>\n<h4>2. 性能监控</h4>\n<ul>\n<li>✅ <strong>Core Web Vitals</strong>   ：LCP（加载）、FID（交互）、CLS（布局偏移）</li>\n<li>✅ <strong>自定义指标</strong>   ：首屏时间、API 请求耗时（通过 Performance API 上报）</li>\n</ul>\n<h4>3. 业务监控</h4>\n<ul>\n<li>✅ <strong>埋点</strong>   ：关键操作（如支付、分享）的成功率、转化率</li>\n<li>✅ <strong>日志</strong>   ：用户操作路径、异常状态（如“支付失败，错误码 5003”）</li>\n</ul>\n<hr>\n<h3>四、应急与回滚：让“故障”快速止血</h3>\n<ul>\n<li>✅ <strong>自动回滚</strong>   ：监控到错误率飙升时，自动回滚到上一个版本（如 Argo CD）</li>\n<li>✅ <strong>降级方案</strong>   ：\n<ul>\n<li>静态化：若服务端崩溃，返回缓存的静态页面（如 CDN）</li>\n<li>功能降级：关闭非核心功能（如“评论模块异常时隐藏入口”）</li>\n</ul>\n</li>\n<li>✅ <strong>热修复</strong>   ：通过配置中心下发补丁（如 <code>window.REMOTE_CONFIG</code> 动态修复逻辑）</li>\n</ul>\n<hr>\n<h3>五、长期维护：让“稳定性”可持续</h3>\n<ul>\n<li>✅ <strong>依赖治理</strong>   ：\n<ul>\n<li>定期升级依赖（如 <code>npm audit</code> 修复漏洞）</li>\n<li>锁定版本（<code>package-lock.json</code> 或 <code>yarn.lock</code>）</li>\n</ul>\n</li>\n<li>✅ <strong>文档与知识库</strong>   ：\n<ul>\n<li>记录常见故障案例（如“某次发布因 CSP 策略导致白屏”）</li>\n<li>维护应急手册（如“如何快速回滚版本”）</li>\n</ul>\n</li>\n<li>✅ <strong>混沌工程</strong>   ：\n<ul>\n<li>模拟故障（如随机延迟 API、关闭某个服务），验证系统容错能力</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3>六、典型案例：一个电商首页的稳定性保障</h3>\n<table>\n<thead>\n<tr>\n<th>阶段</th>\n<th>措施</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>开发</td>\n<td>TypeScript + 单元测试</td>\n<td>商品卡片组件需覆盖“价格为空”的边界情况</td>\n</tr>\n<tr>\n<td>发布</td>\n<td>灰度发布</td>\n<td>先给内部员工开放新首页，观察 1 天无异常后全量</td>\n</tr>\n<tr>\n<td>监控</td>\n<td>Sentry + 埋点</td>\n<td>监控“加入购物车”按钮的点击成功率，若低于 99% 告警</td>\n</tr>\n<tr>\n<td>应急</td>\n<td>降级方案</td>\n<td>若“推荐商品”接口超时，隐藏该模块，显示兜底文案</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3>总结：稳定性是“系统工程”</h3>\n<ul>\n<li><strong>开发阶段</strong>   ：通过规范、测试、架构减少错误。</li>\n<li><strong>发布阶段</strong>   ：通过灰度、回滚、开关控制变更风险。</li>\n<li><strong>线上阶段</strong>   ：通过监控、告警、降级快速止血。</li>\n<li><strong>长期阶段</strong>   ：通过依赖治理、知识库、混沌工程持续优化。</li>\n</ul>\n<p>最终目标：<strong>让用户无感知地享受稳定服务，让开发者能高效地修复问题。</strong></p>\n</div>'</script></body></html>