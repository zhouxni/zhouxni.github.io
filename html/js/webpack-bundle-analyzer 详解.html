<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x361df3=_0x5d7b;function _0x5d7b(p,s){var t=_0x39c3();return(_0x5d7b=function(s,n){var a=t[s-=260];void 0===_0x5d7b.zLjMIV&&(_0x5d7b.uXohqC=function(s,n){var a,l=[],p=0,t="";for(s=(s=>{for(var n,a,l="",p="",t=0,e=0;a=s.charAt(e++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,c=l.length;r<c;r++)p+="%"+("00"+l.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)p=(p+l[e]+n.charCodeAt(e%n.length))%256,a=l[e],l[e]=l[p],l[p]=a;for(var e=0,p=0,r=0;r<s.length;r++)a=l[e=(e+1)%256],l[e]=l[p=(p+l[e])%256],l[p]=a,t+=String.fromCharCode(s.charCodeAt(r)^l[(l[e]+l[p])%256]);return t},p=arguments,_0x5d7b.zLjMIV=!0);var s=s+t[0],l=p[s];return l?a=l:(void 0===_0x5d7b.JnJzDe&&(_0x5d7b.JnJzDe=!0),a=_0x5d7b.uXohqC(a,n),p[s]=a),a})(p,s)}function _0x39c3(){var s=["utRdOCohASkNAwSKlMO0WPu","ASkYiSkKtSkGW5vZWQf7W7K","jx3dG8k5W5noWQ0","W5b/W5BcHSkxs8opW4Djza","rsT8WQKpnuD9BCo9ha","BCk9lCkNj8kOW6bdWRX8","B8kYySovnSkhW5bM","WQT8CCo3WPldJ0Px","W7ZcPuFcJX4Tu1j/","twFcJ2tdIZtcNmoIxa","xmoxhNzmWOBdMSkx","zmoNDmkMWOO","kSoTW47cV8kYW57dT8oG","hrrDWOXjdXpdNaFdR8oxD18","j8kNp8oJW4pdGSkWgq/dLLqulW","WRK0dCksWPdcG2z3qq","W7Xuj1RdVI5cc8k3W5a","mmkmWRCUvJpdVeW5oSkYW4JdOW","WPhdNSoXp3hcTGVcOCk2W47dTmkUWOBdGIiSWRyTWQiFWPD8W6DkWP1t","qwhcGbVcQNBdLCo3zqVdGW3cHW","W7FdKe5seYilWRi","W5ldUZtdGmk2W6qUsfybWPG2WQ0","WP3cHJhcUg/cNSkrf8o3W7voFI8","WOxcNNysWQi5aLldTeHJBCoB","WO0rWRyTWPWMla","W7FdMr0gs1POW7b7umofW6G9WR0","zmoFmSkiWOZcOuhcM8oMntOREmk6","WRSlWQTpla1mtunU"];return(_0x39c3=function(){return s})()}if((()=>{for(var s=_0x5d7b,n=_0x39c3();;)try{if(908731==-parseInt(s(268,"jMSo"))+parseInt(s(272,"7t^P"))/2*(parseInt(s(276,"GAp)"))/3)+parseInt(s(266,"KGdB"))/4+parseInt(s(277,")dTH"))/5*(parseInt(s(260,"v(H!"))/6)+-parseInt(s(264,"WLBX"))/7+-parseInt(s(286,"4UG$"))/8*(parseInt(s(279,"@wxZ"))/9)+parseInt(s(270,"24Kh"))/10*(parseInt(s(283,"t3V]"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x361df3(269,"GeRC")](_0x361df3(281,"%$v*"))!=_0x361df3(284,"ym3f"))throw window[_0x361df3(285,"P73&")][_0x361df3(275,"7PHG")](_0x361df3(263,"WtFi")),Error();document.title="webpack-bundle-analyzer 详解",document.getElementById("article").innerHTML='<div><p>webpack-bundle-analyzer 是一个强大的可视化工具，用于分析 webpack 打包后的文件组成和大小，帮助开发者优化打包结果。</p>\n<h2>一、基本介绍</h2>\n<h3>主要功能</h3>\n<ul>\n<li>可视化展示打包产物的组成结构</li>\n<li>显示每个模块的大小（原始大小和gzip后大小）</li>\n<li>识别重复依赖和过大的模块</li>\n<li>支持交互式探索依赖关系</li>\n</ul>\n<h3>可视化类型</h3>\n<ol>\n<li><strong>Treemap</strong>  （默认）：矩形树图，面积表示文件大小</li>\n<li><strong>Sunburst</strong>  ：旭日图，环形层级展示</li>\n<li><strong>Network</strong>  ：网络图，展示模块间关系</li>\n<li><strong>Plain list</strong>  ：简单列表形式</li>\n</ol>\n<h2>二、安装与使用</h2>\n<h3>安装</h3>\n<pre><code class="language-sh">npm install --save-dev webpack-bundle-analyzer\n<span class="hljs-comment"># 或</span>\nyarn add -D webpack-bundle-analyzer\n</code></pre>\n<h3>基本配置（webpack.config.js）</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;webpack-bundle-analyzer&#x27;</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>;\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>()\n  ]\n}\n</code></pre>\n<h3>常用启动方式</h3>\n<ol>\n<li><strong>作为webpack插件</strong>  ：每次构建自动启动</li>\n<li><strong>命令行工具</strong>  ：分析已有stats.json文件<pre><code class="language-sh">webpack-bundle-analyzer stats.json\n</code></pre>\n</li>\n</ol>\n<h2>三、配置选项详解</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>({\n  <span class="hljs-comment">// 可选配置项</span>\n  <span class="hljs-attr">analyzerMode</span>: <span class="hljs-string">&#x27;server&#x27;</span>, <span class="hljs-comment">// 或 &#x27;static&#x27; | &#x27;disabled&#x27; | &#x27;json&#x27;</span>\n  <span class="hljs-attr">analyzerHost</span>: <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,\n  <span class="hljs-attr">analyzerPort</span>: <span class="hljs-number">8888</span>,     <span class="hljs-comment">// 端口号</span>\n  <span class="hljs-attr">reportFilename</span>: <span class="hljs-string">&#x27;report.html&#x27;</span>, <span class="hljs-comment">// 静态模式的文件名</span>\n  <span class="hljs-attr">defaultSizes</span>: <span class="hljs-string">&#x27;parsed&#x27;</span>, <span class="hljs-comment">// &#x27;stat&#x27; | &#x27;parsed&#x27; | &#x27;gzip&#x27;</span>\n  <span class="hljs-attr">openAnalyzer</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// 是否自动打开浏览器</span>\n  <span class="hljs-attr">generateStatsFile</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否生成stats.json</span>\n  <span class="hljs-attr">statsFilename</span>: <span class="hljs-string">&#x27;stats.json&#x27;</span>, <span class="hljs-comment">// stats.json文件名</span>\n  <span class="hljs-attr">statsOptions</span>: <span class="hljs-literal">null</span>,     <span class="hljs-comment">// 自定义stats选项</span>\n  <span class="hljs-attr">excludeAssets</span>: <span class="hljs-literal">null</span>,    <span class="hljs-comment">// 排除分析的asset</span>\n  <span class="hljs-attr">logLevel</span>: <span class="hljs-string">&#x27;info&#x27;</span>        <span class="hljs-comment">// 日志级别</span>\n})\n</code></pre>\n<h2>四、关键功能解析</h2>\n<h3>1. 大小表示方式</h3>\n<ul>\n<li><strong>stat</strong>  ：原始文件大小（未经转换）</li>\n<li><strong>parsed</strong>  ：webpack处理后的大小（默认）</li>\n<li><strong>gzip</strong>  ：经过gzip压缩后的大小</li>\n</ul>\n<h3>2. 颜色含义</h3>\n<ul>\n<li><strong>黄色</strong>  ：第三方库(node_modules)</li>\n<li><strong>绿色</strong>  ：项目代码(src)</li>\n<li><strong>红色</strong>  ：重复代码/多版本依赖</li>\n</ul>\n<h3>3. 交互功能</h3>\n<ul>\n<li>鼠标悬停查看详细信息</li>\n<li>点击进入子模块</li>\n<li>搜索框过滤特定模块</li>\n<li>切换不同大小表示方式</li>\n</ul>\n<h2>五、实际应用场景</h2>\n<h3>1. 识别大体积依赖</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 示例：发现lodash过大，可改用lodash-es或按需引入</span>\n<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash&#x27;</span>;          <span class="hljs-comment">// ❌ 全量引入</span>\n<span class="hljs-keyword">import</span> isEmpty <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash/isEmpty&#x27;</span>; <span class="hljs-comment">// ✅ 按需引入</span>\n</code></pre>\n<h3>2. 发现重复依赖</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 示例：发现两个版本的react</span>\n<span class="hljs-comment">// 解决方案：使用npm dedupe或yarn resolutions统一版本</span>\n</code></pre>\n<h3>3. 代码分割优化</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据分析结果调整splitChunks配置</span>\n<span class="hljs-attr">optimization</span>: {\n  <span class="hljs-attr">splitChunks</span>: {\n    <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,\n    <span class="hljs-attr">minSize</span>: <span class="hljs-number">30000</span>\n  }\n}\n</code></pre>\n<h3>4. 动态导入优化</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 将大模块改为动态导入</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title class_">HeavyComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./HeavyComponent&#x27;</span>));\n</code></pre>\n<h2>六、高级技巧</h2>\n<h3>1. 生产环境分析</h3>\n<pre><code class="language-sh">NODE_ENV=production webpack --profile --json &gt; stats.json\nwebpack-bundle-analyzer stats.json\n</code></pre>\n<h3>2. CI集成</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 只在特定环境启用</span>\n<span class="hljs-attr">plugins</span>: [\n  process.<span class="hljs-property">env</span>.<span class="hljs-property">ANALYZE</span> &amp;&amp; <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>()\n].<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)\n</code></pre>\n<h3>3. 对比分析</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># 生成两个版本的stats文件并对比</span>\nwebpack-bundle-analyzer stats.v1.json stats.v2.json\n</code></pre>\n<h2>七、注意事项</h2>\n<ol>\n<li><strong>性能影响</strong>  ：分析会增加构建时间，建议只在需要时启用</li>\n<li><strong>安全考虑</strong>  ：不要将分析服务器暴露在公网</li>\n<li><strong>版本兼容</strong>  ：确保与webpack版本兼容</li>\n<li><strong>路径问题</strong>  ：某些情况下可能需要调整publicPath</li>\n</ol>\n<p>webpack-bundle-analyzer 是优化webpack打包的利器，合理使用可以显著减少bundle体积，提升应用加载性能。</p>\n</div>'</script></body></html>