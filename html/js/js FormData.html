<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0xbec6bb=_0x572a;function _0x40c6(){var s=["BbacCCkeW4m4AZawW67dTW","C8k5uq5dWPddVCkLW7dcSepcMG","WQtdMbRdLG/cOJBcQq7cJL8","xwmBg8kWW5JdOSkfWQZcICofWQ4","WPBcOtJcUfDpW4u6W4BdRSkpWOG","pWZcHSombWldGxi","zSoZjSoCW7WkWPfL","WQakjSoeW6bSlmo4","EfVcRSoyebJdNG","yrhdJSk4W7KkWP7cIa","WRnqvfXfz2e","FmkZFSoRW6q8W6u","CSodiSkcWRLtW5ddP2ldSmkPwW","WPjpFmo9pe7cUcddHG","WR9CkmkBW7ChqSkZWQZdMCo0W7/cOa","WQ0jsSkpWQ4Ge8ozC8k9b8oV","W6TdW7T1W7BdJCkkBSk6W7ldPuy","WOZcNYrkW6tcR8knFXxcPmonW74","w8ouWOdcUSohDSozz8kaBmoRhCoY","yCo2qSk1WRWUWPnfWPNcTWi","W5ddN2icWQxcPmoKjd3cOSoOW5OHkWqYgxvrDt5iWOO9WRdcLG","qSoSjghdIuZcJmooWOvIW7np","WOlcG8kZbJvXjmod","WQS5cmoPFq","kXrPWPD4A8ktW5JdOSk1WRJcTa","kMi3W7ORbCkT"];return(_0x40c6=function(){return s})()}function _0x572a(l,s){var o=_0x40c6();return(_0x572a=function(s,a){var n=o[s-=324];void 0===_0x572a.DisxtZ&&(_0x572a.FaGznP=function(s,a){var n,t=[],l=0,o="";for(s=(s=>{for(var a,n,t="",l="",o=0,e=0;n=s.charAt(e++);~n&&(a=o%4?64*a+n:n,o++%4)&&(t+=String.fromCharCode(255&a>>(-2*o&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=t.length;c<r;c++)l+="%"+("00"+t.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(s),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)l=(l+t[e]+a.charCodeAt(e%a.length))%256,n=t[e],t[e]=t[l],t[l]=n;for(var e=0,l=0,c=0;c<s.length;c++)n=t[e=(e+1)%256],t[e]=t[l=(l+t[e])%256],t[l]=n,o+=String.fromCharCode(s.charCodeAt(c)^t[(t[e]+t[l])%256]);return o},l=arguments,_0x572a.DisxtZ=!0);var s=s+o[0],t=l[s];return t?n=t:(void 0===_0x572a.kBbcnf&&(_0x572a.kBbcnf=!0),n=_0x572a.FaGznP(n,a),l[s]=n),n})(l,s)}if((()=>{for(var s=_0x572a,a=_0x40c6();;)try{if(342449==+parseInt(s(328,"gtPv"))*(-parseInt(s(340,"HRlq"))/2)+parseInt(s(338,"CCK4"))/3+parseInt(s(325,"Y^)0"))/4+-parseInt(s(333,"6MGH"))/5*(-parseInt(s(332,"6MGH"))/6)+parseInt(s(335,"w^OE"))/7+parseInt(s(348,"Xj1b"))/8+-parseInt(s(337,"xGXk"))/9*(-parseInt(s(327,"HRlq"))/10))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0xbec6bb(331,"@BA]")](_0xbec6bb(334,"h5Tq"))!=_0xbec6bb(344,"qn$f"))throw window[_0xbec6bb(343,"M5uH")][_0xbec6bb(329,"z[4U")](_0xbec6bb(341,"CCK4")),Error();document.title="js FormData",document.getElementById("article").innerHTML='<div><p><strong>JavaScript FormData 详解</strong></p>\n<p><code>FormData</code> 是 JavaScript 中用于处理表单数据的一个内置对象，它提供了一种便捷的方式来构建和操作表单数据，特别是在需要通过 AJAX 请求发送数据时。以下是关于 <code>FormData</code> 的详细解析：</p>\n<h3>一、基本概念</h3>\n<ul>\n<li><strong>定义</strong>  ：<code>FormData</code> 是 XMLHttpRequest Level 2 规范的一部分，用于创建键值对集合，这些键值对可以被发送到服务器。</li>\n<li><strong>用途</strong>  ：主要用于处理 <code>enctype=&quot;multipart/form-data&quot;</code> 类型的表单提交，即上传文件和数据。</li>\n</ul>\n<h3>二、创建方式</h3>\n<ul>\n<li><strong>空实例</strong>  ：可以通过 <code>new FormData()</code> 创建一个空的 <code>FormData</code> 对象。</li>\n<li><strong>从表单元素创建</strong>  ：可以通过传递一个 HTML 表单元素给 <code>FormData</code> 构造函数来创建一个包含表单数据的对象。例如：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> formElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;form&#x27;</span>);\n<span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(formElement);\n</code></pre>\n</li>\n</ul>\n<h3>三、常用方法</h3>\n<ul>\n<li><strong><code>append(name, value)</code></strong>  ：向 <code>FormData</code> 对象中添加一个新的键值对。如果键已经存在，新的值会被添加到键的数组中。</li>\n<li><strong><code>set(name, value)</code></strong>  ：与 <code>append()</code> 类似，但如果指定的键已经存在，<code>set()</code> 会使用新值覆盖已有的值。</li>\n<li><strong><code>delete(name)</code></strong>  ：从 <code>FormData</code> 对象中删除指定名称的键值对。</li>\n<li><strong><code>get(name)</code></strong>  ：获取 <code>FormData</code> 对象中指定名称的第一个值。</li>\n<li><strong><code>getAll(name)</code></strong>  ：获取 <code>FormData</code> 对象中指定名称的所有值，返回一个数组。</li>\n<li><strong><code>has(name)</code></strong>  ：检查 <code>FormData</code> 对象中是否包含指定名称的键值对，返回一个布尔值。</li>\n<li><strong><code>keys()</code></strong>  ：返回一个包含所有键的迭代器对象。</li>\n<li><strong><code>values()</code></strong>  ：返回一个包含所有值的迭代器对象。</li>\n<li><strong><code>entries()</code></strong>  ：返回一个包含所有键值对的迭代器对象。</li>\n</ul>\n<h3>四、应用场景</h3>\n<ul>\n<li><strong>表单提交</strong>  ：当需要通过 AJAX 提交表单时，可以使用 <code>FormData</code> 来收集表单数据。</li>\n<li><strong>文件上传</strong>  ：<code>FormData</code> 特别适用于文件上传场景，可以直接将文件对象添加到 <code>FormData</code> 中，并通过 AJAX 请求发送到服务器。</li>\n<li><strong>动态表单数据处理</strong>  ：在运行时动态添加或修改表单字段，<code>FormData</code> 提供了灵活的方法来操作表单数据。</li>\n</ul>\n<h3>五、示例代码</h3>\n<p>以下是一个简单的示例，展示了如何使用 <code>FormData</code> 来收集表单数据并通过 <code>fetch</code> API 发送到服务器：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myForm&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;JohnDoe&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;avatar&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myForm&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;submit&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {\n    event.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// 阻止表单默认提交行为</span>\n    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// 创建 FormData 实例</span>\n\n    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/submit-form&#x27;</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,\n      <span class="hljs-attr">body</span>: formData <span class="hljs-comment">// 直接传递 FormData 对象</span>\n    })\n    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())\n    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Success:&#x27;</span>, data))\n    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Error:&#x27;</span>, error));\n  });\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<h3>六、注意事项</h3>\n<ul>\n<li><strong>跨域请求</strong>  ：如果发送跨域请求，服务器需要正确设置 CORS 头。</li>\n<li><strong>文件上传限制</strong>  ：服务器可能对上传文件的大小和类型有限制，需要在前端进行验证和提示。</li>\n<li><strong>浏览器兼容性</strong>  ：<code>FormData</code> 在现代浏览器中广泛支持，但在一些旧版浏览器中可能不受支持。可以使用 polyfill 来为不支持 <code>FormData</code> 的浏览器提供兼容性支持。</li>\n</ul>\n<h3>七、总结</h3>\n<p><code>FormData</code> 是 JavaScript 中处理表单数据的强大工具，它提供了灵活的方法来构建和操作表单数据，并通过 AJAX 请求发送到服务器。掌握 <code>FormData</code> 的使用，可以大大提高开发效率，特别是在需要处理复杂表单和文件上传的场景中。</p>\n</div>'</script></body></html>