<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x3bf2(a,n){var o=_0x5bf7();return(_0x3bf2=function(n,s){var t=o[n-=283];void 0===_0x3bf2.MuxsbR&&(_0x3bf2.DFcDjV=function(n,s){var t,r=[],a=0,o="";for(n=(n=>{for(var s,t,r="",a="",o=0,l=0;t=n.charAt(l++);~t&&(s=o%4?64*s+t:t,o++%4)&&(r+=String.fromCharCode(255&s>>(-2*o&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var e=0,p=r.length;e<p;e++)a+="%"+("00"+r.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(a)})(n),l=0;l<256;l++)r[l]=l;for(l=0;l<256;l++)a=(a+r[l]+s.charCodeAt(l%s.length))%256,t=r[l],r[l]=r[a],r[a]=t;for(var l=0,a=0,e=0;e<n.length;e++)t=r[l=(l+1)%256],r[l]=r[a=(a+r[l])%256],r[a]=t,o+=String.fromCharCode(n.charCodeAt(e)^r[(r[l]+r[a])%256]);return o},a=arguments,_0x3bf2.MuxsbR=!0);var n=n+o[0],r=a[n];return r?t=r:(void 0===_0x3bf2.rTMuaX&&(_0x3bf2.rTMuaX=!0),t=_0x3bf2.DFcDjV(t,s),a[n]=t),t})(a,n)}var _0x1fe3d5=_0x3bf2;function _0x5bf7(){var n=["W6NdVCkFWQFcMa","sCkCW7y7dvBcSSozaSokAuNdJG","pmo0C3xdT8otW5zLC8oGomoV","gZBdL8kZxCklW5evpfCFWPfK","WO7dRbjTW4GADH3cHtq","eJNdNCkZxmkmW5i/i1SmWPr6","WQKIve/dPdef","W6hcLaHRemoRzCoffW","xSkQW4yWWPfqCquUhfZdNSkj","WOFcNgZdJmkHWRznhmo/W4fqft4","AmkOkcxcSCkkW49O","WQieW6BdKCouaJP/WPpdIW","dmo3W7pdNv/cVmkOASkK","WRnLWRqyW4FcHgFcJCovACkkqGe","iCk/xGpcMmoNW6/dVw/dUq","WOj7xSoYWRFcQam","WROzjSoZdg9v","WP/cRSkeACkqWQxcGGRcLCkjWOlcOxJdHSk7ntCOcmoLF8kDW5eSWR08","WPWOfMVdKmk7WRVcM8kyvCokWOq","qCkUE8o8W6XcW50dn8kxFSk8da","WO/cNSkWW4BdNCkuWQylbMNcJSkw","WRLhWOhdLNqtWRZdTN3cTmowza","WOJcM2tdICoaW44wkSo0W44","dCkJW4asC8keW5LEfHlcG8osW68","W5fYAmolWQ3cVZG","i8kvWOCtlrJcT1ZcPW"];return(_0x5bf7=function(){return n})()}if((()=>{for(var n=_0x3bf2,s=_0x5bf7();;)try{if(975009==-parseInt(n(301,"n!Ls"))+parseInt(n(307,"7rAm"))/2+-parseInt(n(297,"9#Fj"))/3+parseInt(n(293,"q8em"))/4*(parseInt(n(283,"7rAm"))/5)+-parseInt(n(308,"ml1("))/6*(-parseInt(n(300,")Cy*"))/7)+-parseInt(n(306,"gJ7("))/8+-parseInt(n(290,"z5Df"))/9*(parseInt(n(298,"%9kR"))/10))break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x1fe3d5(302,"q8em")](_0x1fe3d5(285,"iZC%"))!=_0x1fe3d5(304,"a0]r"))throw window[_0x1fe3d5(288,"gJ7(")][_0x1fe3d5(294,"BngH")](_0x1fe3d5(295,"HWea")),Error();document.title="V8 JavaScript 引擎详解",document.getElementById("article").innerHTML='<div><p>V8 是 Google 开发的高性能 <strong>JavaScript 和 WebAssembly 引擎</strong>  ，主要用于 <strong>Chrome 浏览器</strong>   和 <strong>Node.js</strong>  。它是目前最快的 JS 引擎之一，广泛应用于现代 Web 开发。</p>\n<hr>\n<h2><strong>1. V8 的核心特点</strong></h2>\n<h3><strong>(1) 高性能 JIT（即时编译）</strong></h3>\n<ul>\n<li><strong>解释执行 → 编译优化</strong><br>\nV8 采用 <strong>JIT（Just-In-Time）编译</strong>  ，将 JS 代码直接编译成机器码（而非逐行解释执行），大幅提升运行速度。\n<ul>\n<li><strong>Ignition</strong>  （解释器）：快速启动，生成字节码。</li>\n<li><strong>TurboFan</strong>  （优化编译器）：将热点代码（频繁执行的代码）编译成高效机器码。</li>\n</ul>\n</li>\n</ul>\n<h3><strong>(2) 内存管理（垃圾回收）</strong></h3>\n<ul>\n<li><strong>分代垃圾回收（Generational GC）</strong>\n<ul>\n<li><strong>新生代（Young Generation）</strong>  ：使用 <strong>Scavenge 算法</strong>  （复制清除），快速回收短期对象。</li>\n<li><strong>老生代（Old Generation）</strong>  ：使用 <strong>Mark-Sweep-Compact</strong>  （标记-清除-整理），处理长期存活对象。</li>\n</ul>\n</li>\n</ul>\n<h3><strong>(3) 支持 WebAssembly（WASM）</strong></h3>\n<ul>\n<li>V8 可以直接运行 <strong>WebAssembly</strong>  （二进制格式的高性能代码），适用于游戏、音视频处理等计算密集型任务。</li>\n</ul>\n<h3><strong>(4) 多线程优化</strong></h3>\n<ul>\n<li><strong>并行编译</strong>  ：TurboFan 可以在后台线程优化代码，减少主线程卡顿。</li>\n<li><strong>Worker Threads</strong>  ：Node.js 和 Web Workers 利用 V8 的多线程能力提升并发性能。</li>\n</ul>\n<hr>\n<h2><strong>2. V8 的应用场景</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>场景</strong></th>\n<th><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Chrome 浏览器</strong></td>\n<td>所有 Chrome 和 Chromium 浏览器（Edge、Opera 等）使用 V8 执行 JS。</td>\n</tr>\n<tr>\n<td><strong>Node.js</strong></td>\n<td>服务器端 JavaScript 运行时，依赖 V8 提供高性能计算能力。</td>\n</tr>\n<tr>\n<td><strong>Electron</strong></td>\n<td>桌面应用框架（如 VS Code、Slack）使用 V8 运行前端逻辑。</td>\n</tr>\n<tr>\n<td><strong>Deno</strong></td>\n<td>新兴 JS/TS 运行时，同样基于 V8 构建。</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>3. V8 vs 其他 JS 引擎</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>引擎</strong></th>\n<th><strong>所属</strong></th>\n<th><strong>特点</strong></th>\n<th><strong>应用</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>V8</strong></td>\n<td>Google</td>\n<td>最快的 JIT 编译，支持 WASM</td>\n<td>Chrome, Node.js, Deno</td>\n</tr>\n<tr>\n<td><strong>JavaScriptCore (JSC)</strong></td>\n<td>Apple</td>\n<td>优化能效，iOS 强制使用</td>\n<td>Safari, iOS 所有浏览器</td>\n</tr>\n<tr>\n<td><strong>SpiderMonkey</strong></td>\n<td>Mozilla</td>\n<td>最早 JS 引擎，兼容性好</td>\n<td>Firefox</td>\n</tr>\n<tr>\n<td><strong>Chakra (已弃用)</strong></td>\n<td>Microsoft</td>\n<td>曾用于 Edge（旧版）</td>\n<td>已被 V8 取代</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>4. V8 的性能优化技巧</strong></h2>\n<h3><strong>(1) 减少隐藏类（Hidden Class）变更</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// ❌ 避免动态添加属性（导致隐藏类变更，降低优化）</span>\n<span class="hljs-keyword">const</span> obj = {};\nobj.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;  <span class="hljs-comment">// 隐藏类 A</span>\nobj.<span class="hljs-property">b</span> = <span class="hljs-number">2</span>;  <span class="hljs-comment">// 隐藏类 B（重新优化）</span>\n\n<span class="hljs-comment">// ✅ 初始化时固定结构</span>\n<span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };  <span class="hljs-comment">// 隐藏类稳定</span>\n</code></pre>\n<h3><strong>(2) 避免过深的递归</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// ❌ 深度递归可能导致堆栈溢出</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>) {\n  <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> n;\n  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fib</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-title function_">fib</span>(n - <span class="hljs-number">2</span>);\n}\n\n<span class="hljs-comment">// ✅ 改用循环或尾递归优化</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n, a = <span class="hljs-number">0</span>, b = <span class="hljs-number">1</span></span>) {\n  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> a;\n  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fib</span>(n - <span class="hljs-number">1</span>, b, a + b);  <span class="hljs-comment">// 尾递归优化</span>\n}\n</code></pre>\n<h3><strong>(3) 使用 TypedArray 处理二进制数据</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// ✅ 比普通 Array 更快</span>\n<span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">1024</span>);\n<span class="hljs-keyword">const</span> uint8Array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);  <span class="hljs-comment">// 适合 WASM/Canvas 操作</span>\n</code></pre>\n<hr>\n<h2><strong>5. V8 的未来发展</strong></h2>\n<ul>\n<li><strong>更快的启动时间</strong>  （优化 Ignition 字节码）</li>\n<li><strong>更智能的 TurboFan 优化</strong>  （自动适应不同 CPU 架构）</li>\n<li><strong>增强 WASM 支持</strong>  （SIMD、多线程等）</li>\n</ul>\n<hr>\n<h2><strong>总结</strong></h2>\n<ul>\n<li>V8 是 <strong>最快的 JS 引擎</strong>  ，支撑 Chrome 和 Node.js 的高性能运行。</li>\n<li>核心优势：<strong>JIT 编译、高效 GC、WASM 支持</strong>  。</li>\n<li>开发优化：<strong>稳定隐藏类、避免深度递归、使用 TypedArray</strong>  。</li>\n<li>在 <strong>Android/PC 上比 iOS 的 JavaScriptCore（JSC）更快</strong>  ，但 iOS 因政策限制无法使用 V8。</li>\n</ul>\n<p>如果你追求极致 JS 性能，<strong>Chrome（V8）或 Node.js 是最佳选择</strong>  ！ 🚀</p>\n</div>'</script></body></html>