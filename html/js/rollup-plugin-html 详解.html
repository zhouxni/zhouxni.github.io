<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0xc0a4(t,s){var p=_0x88f5();return(_0xc0a4=function(s,n){var a=p[s-=273];void 0===_0xc0a4.rsMSKx&&(_0xc0a4.SAIVPf=function(s,n){var a,l=[],t=0,p="";for(s=(s=>{for(var n,a,l="",t="",p=0,c=0;a=s.charAt(c++);~a&&(n=p%4?64*n+a:a,p++%4)&&(l+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var e=0,r=l.length;e<r;e++)t+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)t=(t+l[c]+n.charCodeAt(c%n.length))%256,a=l[c],l[c]=l[t],l[t]=a;for(var c=0,t=0,e=0;e<s.length;e++)a=l[c=(c+1)%256],l[c]=l[t=(t+l[c])%256],l[t]=a,p+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[t])%256]);return p},t=arguments,_0xc0a4.rsMSKx=!0);var s=s+p[0],l=t[s];return l?a=l:(void 0===_0xc0a4.VMCmta&&(_0xc0a4.VMCmta=!0),a=_0xc0a4.SAIVPf(a,n),t[s]=a),a})(t,s)}var _0x175b9b=_0xc0a4;function _0x88f5(){var s=["m8oNimouWRtcISopjtBdNa","WOpcL8oHW6BcN1BcPmkph8oCW6uonW","cCkpW47dRqCzW7RdNqNcSIlcVmob","wSonWPrsA8kGfJddTN9xWRi","zmoIwSkhECoUW4elcCoD","W4nMW5lcKb9jEv7cMmoozmkV","BWxcNcy2W5lcN0ZdJG","m8kswmkGWQBcP8oH","W4dcUSkvWPBdM1K0C34","kCo7W4lcN8k1WPOXF8klWRRcPNO","f8k5wuRdTgNcNa","n2BcI8oPySknaq","WOaUk8kQWPldO8kixKr+sSk+W5y","b8kKWQBdMmkvfxq","ywBcGCkZbfJdLYfwW4VdHW","prldHvzIW63dG8ogWOpdPrJdImky","WPFdH8oykmoDW5m2kq","yJZdMCoqF3/dGW","pmkFWOxdHCozW6SCwCk+AX7dHSoH","yu4YuNWWWQq","WPldVGBcLWFdMwuNiq","AHPSWOFcM8oBCW","WQ0VWOzbWQJcR8kza8kTW5NcK2P8","tLtcNmkHwmksW4NdQa0/Ea","oCkvWOldICoCW6DPrCk7BXNdQq","W4/cMmklECkEWOWOeN9kdH8","jCoYW4hcM8k0WPWqBCkfWQJcS3S","ncjxWRhcQSkfp2NcNXNdSdbqWPhcSsrBf8osrhlcNMNcRmopW4G","brldKSoKWR0","WQRdGxxcNCk4WOFdTq"];return(_0x88f5=function(){return s})()}if((()=>{for(var s=_0xc0a4,n=_0x88f5();;)try{if(830305==-parseInt(s(300,"1oXQ"))*(parseInt(s(297,"TtHl"))/2)+-parseInt(s(302,"]x0B"))/3*(parseInt(s(288,"QwV4"))/4)+parseInt(s(289,"140V"))/5*(-parseInt(s(292,"wfl2"))/6)+parseInt(s(274,"5KQE"))/7*(parseInt(s(291,"fbCN"))/8)+-parseInt(s(273,"SPZ%"))/9+-parseInt(s(280,"TtHl"))/10+parseInt(s(294,"q[Tr"))/11*(parseInt(s(275,"W6(@"))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x175b9b(282,"xzyl")](_0x175b9b(277,"(GZW"))!=_0x175b9b(299,"[mYU"))throw window[_0x175b9b(287,"7kjX")][_0x175b9b(290,"tLbi")](_0x175b9b(298,"wfl2")),Error();document.title="rollup-plugin-html 详解",document.getElementById("article").innerHTML='<div><p>在 Rollup 中，<code>rollup-plugin-html</code> 是一个用于处理 HTML 文件的插件，它可以帮助你将打包后的 JS/CSS 资源自动注入到 HTML 文件中。以下是该插件的 详细使用指南 和 常见场景配置：</p>\n<hr>\n<p><strong>1. 基本功能</strong></p>\n<ul>\n<li>\n<p>自动注入 JS/CSS：将 Rollup 打包生成的资源（如 <code>.js</code>、<code>.css</code>）自动插入到 HTML 文件中。</p>\n</li>\n<li>\n<p>模板支持：支持自定义 HTML 模板或直接使用已有 HTML 文件。</p>\n</li>\n<li>\n<p>多入口支持：适用于多页面应用（MPA）场景。</p>\n</li>\n</ul>\n<hr>\n<p><strong>2. 安装</strong></p>\n<pre><code class="language-sh">npm install rollup-plugin-html --save-dev\n<span class="hljs-comment"># 或</span>\nyarn add rollup-plugin-html -D\n</code></pre>\n<hr>\n<p><strong>3. 基础配置</strong><br>\n<strong>场景 1：自动生成 HTML 并注入 JS</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// rollup.config.js</span>\n<span class="hljs-keyword">import</span> html <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-html&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>,\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">dir</span>: <span class="hljs-string">&#x27;dist&#x27;</span>,\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;es&#x27;</span>,\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">html</span>({\n      <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Rollup&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#x27;</span>,\n      <span class="hljs-attr">inject</span>: <span class="hljs-string">&#x27;body&#x27;</span>, <span class="hljs-comment">// 将 JS 注入到 body 末尾</span>\n    }),\n  ],\n};\n</code></pre>\n<p>生成结果 (<code>dist/index.html</code>)：</p>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Rollup<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <span class="hljs-comment">&lt;!-- 自动注入的 JS --&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<hr>\n<p><strong>场景 2：使用已有 HTML 文件作为模板</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// rollup.config.js</span>\n<span class="hljs-keyword">import</span> html <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-html&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">html</span>({\n      <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;src/index.html&#x27;</span>, <span class="hljs-comment">// 指定已有 HTML 文件路径</span>\n    }),\n  ],\n};\n</code></pre>\n<p>HTML 文件 (<code>src/index.html</code>)：</p>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-comment">&lt;!-- 插件会自动在此处注入 JS --&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<hr>\n<p><strong>4. 高级配置</strong><br>\n<strong>选项说明</strong></p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>类型</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>template</code></td>\n<td><code>string</code></td>\n<td>HTML 模板内容或文件路径（支持 <code>.html</code> 文件）。</td>\n</tr>\n<tr>\n<td><code>inject</code></td>\n<td><code>string</code></td>\n<td>注入位置：<code>\'head\'</code>、<code>\'body\'</code> 或 <code>false</code>（不自动注入）。</td>\n</tr>\n<tr>\n<td><code>publicPath</code></td>\n<td><code>string</code></td>\n<td>资源路径前缀（如 <code>\'/assets/\'</code>）。</td>\n</tr>\n<tr>\n<td><code>fileName</code></td>\n<td><code>string</code></td>\n<td>输出文件名（默认 <code>index.html</code>）。</td>\n</tr>\n<tr>\n<td><code>attributes</code></td>\n<td><code>object</code></td>\n<td>为注入的 <code>&lt;script&gt;</code> 或 <code>&lt;link&gt;</code> 添加额外属性（如 <code>{ defer: true }</code>）。</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例：自定义资源路径和属性</strong></p>\n<pre><code class="language-javascript"><span class="hljs-title function_">html</span>({\n  <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;src/index.html&#x27;</span>,\n  <span class="hljs-attr">publicPath</span>: <span class="hljs-string">&#x27;/assets/&#x27;</span>, <span class="hljs-comment">// 资源路径添加前缀</span>\n  <span class="hljs-attr">attributes</span>: { \n    <span class="hljs-attr">script</span>: { <span class="hljs-attr">defer</span>: <span class="hljs-literal">true</span> }, <span class="hljs-comment">// 为 JS 添加 defer 属性</span>\n    <span class="hljs-attr">link</span>: { <span class="hljs-attr">rel</span>: <span class="hljs-string">&#x27;preload&#x27;</span> } <span class="hljs-comment">// 为 CSS 添加 preload</span>\n  }\n})\n</code></pre>\n<p>生成结果：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/assets/main.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/assets/style.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;preload&quot;</span>&gt;</span>\n</code></pre>\n<hr>\n<p><strong>5. 多页面应用（MPA）支持</strong><br>\n为每个入口生成独立的 HTML 文件：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// rollup.config.js</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: {\n    <span class="hljs-attr">home</span>: <span class="hljs-string">&#x27;src/home.js&#x27;</span>,\n    <span class="hljs-attr">about</span>: <span class="hljs-string">&#x27;src/about.js&#x27;</span>,\n  },\n  <span class="hljs-attr">output</span>: { <span class="hljs-attr">dir</span>: <span class="hljs-string">&#x27;dist&#x27;</span> },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">html</span>({\n      <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;src/template.html&#x27;</span>, <span class="hljs-comment">// 公共模板</span>\n      <span class="hljs-attr">inject</span>: <span class="hljs-string">&#x27;body&#x27;</span>,\n      <span class="hljs-attr">fileName</span>: <span class="hljs-string">&#x27;[name].html&#x27;</span>, <span class="hljs-comment">// 动态生成文件名</span>\n    }),\n  ],\n};\n</code></pre>\n<p>生成结构：</p>\n<pre><code>dist/\n├── home.html    # 注入 home.js\n├── about.html   # 注入 about.js\n├── home.js\n└── about.js\n</code></pre>\n<hr>\n<p><strong>6. 与其他插件协作</strong><br>\n<strong>配合 <code>rollup-plugin-serve</code> 实现开发服务器</strong></p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> serve <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-serve&#x27;</span>;\n<span class="hljs-keyword">import</span> html <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-html&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">html</span>({ <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;src/index.html&#x27;</span> }),\n    <span class="hljs-title function_">serve</span>({\n      <span class="hljs-attr">contentBase</span>: <span class="hljs-string">&#x27;dist&#x27;</span>, <span class="hljs-comment">// 服务根目录</span>\n      <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,\n    }),\n  ],\n};\n</code></pre>\n<p><strong>配合 <code>rollup-plugin-css</code> 注入 CSS</strong></p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> css <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-css&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">css</span>({ <span class="hljs-attr">output</span>: <span class="hljs-string">&#x27;bundle.css&#x27;</span> }),\n    <span class="hljs-title function_">html</span>({\n      <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;src/index.html&#x27;</span>,\n      <span class="hljs-attr">inject</span>: { <span class="hljs-attr">css</span>: <span class="hljs-string">&#x27;head&#x27;</span> }, <span class="hljs-comment">// 将 CSS 注入到 head</span>\n    }),\n  ],\n};\n</code></pre>\n<hr>\n<p><strong>7. 注意事项</strong></p>\n<ol>\n<li>文件路径问题：</li>\n</ol>\n<ul>\n<li>\n<p>确保 <code>template</code> 指定的 HTML 文件路径正确（相对于 Rollup 配置文件的路径）。</p>\n<ul>\n<li>使用 <code>publicPath</code> 解决资源路径问题（如 CDN 场景）。</li>\n</ul>\n</li>\n</ul>\n<ol start="2">\n<li>HMR 支持：</li>\n</ol>\n<ul>\n<li>该插件本身不支持热更新（HMR），需结合 <code>rollup-plugin-serve</code> 和 <code>rollup-plugin-livereload</code>。</li>\n</ul>\n<ol start="3">\n<li>生产构建：</li>\n</ol>\n<ul>\n<li>建议通过 <code>@rollup/plugin-html</code>（官方维护版本）替代此插件，功能更稳定。</li>\n</ul>\n<hr>\n<p><strong>8. 替代方案</strong></p>\n<ul>\n<li><code>@rollup/plugin-html</code>：Rollup 官方维护的 HTML 插件（推荐）。</li>\n</ul>\n<pre><code class="language-sh">npm install @rollup/plugin-html --save-dev\n</code></pre>\n<ul>\n<li>Vite：如果项目复杂，直接使用 Vite（底层基于 Rollup，内置 HTML 处理）。</li>\n</ul>\n<hr>\n<p>通过 <code>rollup-plugin-html</code>，你可以轻松实现 HTML 与 Rollup 打包资源的自动化集成，适用于大多数前端项目场景！</p>\n</div>'</script></body></html>