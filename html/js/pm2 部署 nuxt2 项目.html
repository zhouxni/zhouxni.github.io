<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x234f3f=_0x26d1;function _0x3818(){var n=["lwNcJNZdPCkmWRFdP07dVb4","fbxdGJK3W7xcPq/dQ8kV","WPNcJCocWPJcMW","j8ocWOvdwLOvd2i","wglcStKeW6yOW7VcSN01h8k8W6i","WQBdQmo9q8oiimoQrYC","W4XAa33dGCoMW4tcTa","W65gvX/dG8oWW617W4dcUG","nMJcJCkzW6NcP21Y","WQpdUmkmt8o2WQBcSa","WRFcICkHz8klWRCWkW","AthdNSonWQ/cRhToa8kuWP4","wMtcUKvLWRzUWQ7cLa","zCoeW6lcGbZdGCktWQ8","W7j8F8oyW4hdGCoYvCkNrqldR8kVDG","WQGCW5hcGSoyW5HJqSk/","W7v3imkjWP3cLSk1nq","d8kSWPmmFchdG8oeWPhcMmoUiIawpNKXkmoBWQdcUCkKFwbSWQq","C3/cSHjbWQyTvLT+","W7nMWQSHW43cRqD0Ca","amkDc8oWrJegW4NcLSkh","FIeaecxcLmk1WOpcHfibzN0","erhdHtPrW5JcKHhdNCkNW6S","FgKPtg3dPSoUW45qW4m+pgy","w2pcUZL5WRH+WOZcTLC","WOBdVJOGW68DW6hdHSkDaHq","fwtdNSkbW57dKcddM8ogaulcHCkP","F2WPtM3dPSoUW6LVW4ulg0y","WRBdUmkiASoJWQdcUa","hmouw21vWQ3dVsFcQ8ob"];return(_0x3818=function(){return n})()}function _0x26d1(e,n){var c=_0x3818();return(_0x26d1=function(n,s){var o=c[n-=328];void 0===_0x26d1.EfAhnO&&(_0x26d1.GQXUgz=function(n,s){var o,a=[],e=0,c="";for(n=(n=>{for(var s,o,a="",e="",c=0,t=0;o=n.charAt(t++);~o&&(s=c%4?64*s+o:o,c++%4)&&(a+=String.fromCharCode(255&s>>(-2*c&6))))o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var r=0,l=a.length;r<l;r++)e+="%"+("00"+a.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)})(n),t=0;t<256;t++)a[t]=t;for(t=0;t<256;t++)e=(e+a[t]+s.charCodeAt(t%s.length))%256,o=a[t],a[t]=a[e],a[e]=o;for(var t=0,e=0,r=0;r<n.length;r++)o=a[t=(t+1)%256],a[t]=a[e=(e+a[t])%256],a[e]=o,c+=String.fromCharCode(n.charCodeAt(r)^a[(a[t]+a[e])%256]);return c},e=arguments,_0x26d1.EfAhnO=!0);var n=n+c[0],a=e[n];return a?o=a:(void 0===_0x26d1.tALcEd&&(_0x26d1.tALcEd=!0),o=_0x26d1.GQXUgz(o,s),e[n]=o),o})(e,n)}if((()=>{for(var n=_0x26d1,s=_0x3818();;)try{if(266144==+parseInt(n(337,"wtCo"))*(-parseInt(n(356,"ZSXJ"))/2)+-parseInt(n(338,"yxSD"))/3*(parseInt(n(354,"Q89o"))/4)+parseInt(n(350,"Op6o"))/5*(parseInt(n(333,"Q89o"))/6)+-parseInt(n(329,"dph9"))/7+-parseInt(n(328,"ZPyk"))/8*(parseInt(n(345,"[38G"))/9)+-parseInt(n(347,"wa#m"))/10*(-parseInt(n(332,"IH@T"))/11)+parseInt(n(336,"ZSXJ"))/12)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x234f3f(341,"G(ix")](_0x234f3f(335,"P@du"))!=_0x234f3f(334,"00rf"))throw window[_0x234f3f(340,"r6y*")][_0x234f3f(330,"G(ix")](_0x234f3f(349,"UwA#")),Error();document.title="pm2 部署 nuxt2 项目",document.getElementById("article").innerHTML='<div><p>使用 PM2 部署 Nuxt 项目是一个常见的做法，因为 PM2 是一个强大的进程管理工具，可以帮助你管理 Node.js 应用的启动、停止、重启以及监控等任务。以下是使用 PM2 部署 Nuxt 项目的详细步骤：</p>\n<h3>一、准备工作</h3>\n<ol>\n<li><strong>安装 Node.js 和 npm</strong>  ：确保你的服务器上已经安装了 Node.js 和 npm，并且版本符合 Nuxt 项目的需求。</li>\n<li><strong>安装 PM2</strong>  ：在服务器上全局安装 PM2，可以使用以下命令：<pre><code class="language-sh">npm install -g pm2\n</code></pre>\n</li>\n</ol>\n<h3>二、构建 Nuxt 项目</h3>\n<ol>\n<li><strong>在本地构建项目</strong>  ：使用 <code>npm run build</code> 命令在本地构建 Nuxt 项目。构建完成后，项目会生成一个 <code>.nuxt</code> 目录，其中包含编译后的静态资源和服务器代码。</li>\n<li><strong>上传文件</strong>  ：将 <code>.nuxt</code> 目录、<code>nuxt.config.js</code>、<code>package.json</code> 和 <code>static</code> 目录（如果存在）上传到服务器。</li>\n</ol>\n<h3>三、安装依赖</h3>\n<p>在服务器上，进入 Nuxt 项目的根目录，然后运行以下命令来安装项目依赖：</p>\n<pre><code class="language-sh">npm install\n</code></pre>\n<h3>四、配置 PM2</h3>\n<ol>\n<li><strong>创建 ecosystem.config.js 文件</strong>  ：在 Nuxt 项目的根目录下创建一个名为 <code>ecosystem.config.js</code> 的文件，用于配置 PM2 的应用。文件内容示例如下：<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [\n    {\n      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;nuxt-app&#x27;</span>, <span class="hljs-comment">// 应用名称</span>\n      <span class="hljs-attr">exec_mode</span>: <span class="hljs-string">&#x27;cluster&#x27;</span>, <span class="hljs-comment">// 执行模式，可以是 &#x27;fork&#x27; 或 &#x27;cluster&#x27;</span>\n      <span class="hljs-attr">instances</span>: <span class="hljs-string">&#x27;max&#x27;</span>, <span class="hljs-comment">// 实例数量，可以是具体数字或 &#x27;max&#x27; 表示使用所有 CPU 核心</span>\n      <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./node_modules/nuxt/bin/nuxt.js&#x27;</span>, <span class="hljs-comment">// 启动脚本</span>\n      <span class="hljs-attr">args</span>: <span class="hljs-string">&#x27;start --port 3000&#x27;</span>, <span class="hljs-comment">// 启动参数，指定端口</span>\n      <span class="hljs-attr">env</span>: {\n        <span class="hljs-attr">NODE_ENV</span>: <span class="hljs-string">&#x27;production&#x27;</span> <span class="hljs-comment">// 环境变量，设置为生产环境</span>\n      }\n    }\n  ]\n};\n</code></pre>\n</li>\n<li><strong>配置说明</strong>  ：\n<ul>\n<li><code>name</code>：应用的名称，可以根据需要自定义。</li>\n<li><code>exec_mode</code>：执行模式，<code>cluster</code> 模式可以利用多核 CPU 提高性能。</li>\n<li><code>instances</code>：实例数量，<code>max</code> 表示使用所有可用的 CPU 核心。</li>\n<li><code>script</code>：启动脚本，指定为 Nuxt 的启动脚本路径。</li>\n<li><code>args</code>：启动参数，这里指定了端口号为 3000，你可以根据需要修改。</li>\n<li><code>env</code>：环境变量，这里设置了 <code>NODE_ENV</code> 为 <code>production</code>，表示生产环境。</li>\n</ul>\n</li>\n</ol>\n<h3>五、启动 Nuxt 项目</h3>\n<p>使用 PM2 启动 Nuxt 项目：</p>\n<pre><code class="language-sh">pm2 start ecosystem.config.js\n</code></pre>\n<h3>六、管理 PM2 进程</h3>\n<ol>\n<li>\n<p><strong>查看进程列表</strong>  ：</p>\n<pre><code class="language-sh">pm2 list\n</code></pre>\n</li>\n<li>\n<p><strong>停止所有进程</strong>  ：</p>\n<pre><code class="language-sh">pm2 stop all\n</code></pre>\n</li>\n<li>\n<p><strong>重启所有进程</strong>  ：</p>\n<pre><code class="language-sh">pm2 restart all\n</code></pre>\n</li>\n<li>\n<p><strong>删除指定进程</strong>  ：</p>\n<pre><code class="language-sh">pm2 delete app_name\n</code></pre>\n<p>将 <code>app_name</code> 替换为你要删除的应用名称。</p>\n</li>\n<li>\n<p><strong>保存进程列表</strong>  ：</p>\n<pre><code class="language-sh">pm2 save\n</code></pre>\n<p>保存当前进程列表，以便在服务器重启后自动启动这些进程。</p>\n</li>\n<li>\n<p><strong>设置开机自启动</strong>  ：</p>\n<pre><code class="language-sh">pm2 startup\n</code></pre>\n<p>按照提示执行命令，将 PM2 设置为开机自启动。</p>\n</li>\n</ol>\n<h3>七、注意事项</h3>\n<ol>\n<li><strong>端口配置</strong>  ：确保服务器防火墙允许 Nuxt 项目使用的端口（如 3000）通过。</li>\n<li><strong>环境变量</strong>  ：确保服务器上的环境变量与本地一致，特别是那些对应用运行有重要影响的变量。</li>\n<li><strong>文件权限</strong>  ：确保 Nuxt 项目目录和文件具有正确的权限，以便 PM2 可以正常访问和启动应用。</li>\n</ol>\n<p>通过以上步骤，你就可以使用 PM2 成功部署 Nuxt 项目了。PM2 提供了强大的进程管理功能，可以帮助你更好地管理和监控 Nuxt 应用的运行。</p>\n</div>'</script></body></html>