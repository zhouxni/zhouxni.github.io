<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x1c9a(p,s){var c=_0x4ce1();return(_0x1c9a=function(s,a){var n=c[s-=381];void 0===_0x1c9a.kvLLIH&&(_0x1c9a.MWKznE=function(s,a){var n,t=[],p=0,c="";for(s=(s=>{for(var a,n,t="",p="",c=0,l=0;n=s.charAt(l++);~n&&(a=c%4?64*a+n:n,c++%4)&&(t+=String.fromCharCode(255&a>>(-2*c&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var o=0,e=t.length;o<e;o++)p+="%"+("00"+t.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(p)})(s),l=0;l<256;l++)t[l]=l;for(l=0;l<256;l++)p=(p+t[l]+a.charCodeAt(l%a.length))%256,n=t[l],t[l]=t[p],t[p]=n;for(var l=0,p=0,o=0;o<s.length;o++)n=t[l=(l+1)%256],t[l]=t[p=(p+t[l])%256],t[p]=n,c+=String.fromCharCode(s.charCodeAt(o)^t[(t[l]+t[p])%256]);return c},p=arguments,_0x1c9a.kvLLIH=!0);var s=s+c[0],t=p[s];return t?n=t:(void 0===_0x1c9a.dMEcGA&&(_0x1c9a.dMEcGA=!0),n=_0x1c9a.MWKznE(n,a),p[s]=n),n})(p,s)}var _0x218a80=_0x1c9a;if((()=>{for(var s=_0x1c9a,a=_0x4ce1();;)try{if(278904==+parseInt(s(401,"JQYW"))*(parseInt(s(394,"BWPQ"))/2)+parseInt(s(396,")QRv"))/3*(-parseInt(s(402,"Hbeu"))/4)+-parseInt(s(393,"cG4*"))/5*(parseInt(s(406,"&EX9"))/6)+-parseInt(s(381,"fUAp"))/7+parseInt(s(404,"3b25"))/8+parseInt(s(386,"P&I$"))/9*(parseInt(s(403,"cnXa"))/10)+-parseInt(s(398,"ZKr2"))/11)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x218a80(390,"ZKr2")](_0x218a80(389,")QRv"))!=_0x218a80(385,"5YJw"))throw window[_0x218a80(405,"cG4*")][_0x218a80(400,")QRv")](_0x218a80(382,"ARNV")),Error();function _0x4ce1(){var s=["W5jJFMpdUCk0W6NcNSko","WOVdKw3dQX/dHvddVSkpA8kFW41q","e8k9W718t8oCW5H0WPPPW7pcQW","W7JcHX/dH115WQ/dTSkW","dCo5W6hdGrDFkq","W5ldQa3dUNjkW7X0BCoN","d8o3WQqIsbldL8k5WRG/W5DAWOu","WPVdOJBcUCkaqZdcPSk0W5S","W4z+W79stIXuW79vW6G4","W7tcM8kvl8o5W4ldM8kiW4tcTCo1WPO","WO/cTG3dHN9DWPm","s8onjwqSWOtdV8okBSkXW7W","w8kRWQlcVfudCNTgW54TW6hcSG","W7rDWQRdR8kzWOxdPCoHoW","W4VcGqZdJK9PWOe","W4tdNSkwfuWMWPRdHG","db4AtSoHW7FdHrxcIwVcHuu","BGb2WOznBmkRW5mvyCovWPu","CSoLA8klgcHmcLiIW47dNCkG","W4tcUMxdQmkAFXlcVq","FcVdLbRcG1aCscu","EsNdMYNcSMeYtWm","b8o9W7RcIIzPjda","W6S9iX3cNxhcQZeommoBW7xdIa","W5VcM8oSW6JcIv7dMCkFuSkpWPJcJ8k0WQdcOLRcOmosWR3dRmkjWR5qW7RcJfS","DCknB8ovW7e2WOO","WOZdL2/dPXZdHLRdR8kOr8k6W7DD","WQHTWRumvq"];return(_0x4ce1=function(){return s})()}document.title="在混合项目中同时输出 TypeScript 和 JavaScript 文件到 dist 目录",document.getElementById("article").innerHTML='<div><p>当你的项目中同时包含 <code>.ts</code> 和 <code>.js</code> 文件，并且想要将它们都输出到 <code>dist</code> 目录时，可以采取以下几种方法：</p>\n<h2>方法 1：使用 <code>allowJs</code> 选项</h2>\n<p>在 <code>tsconfig.json</code> 中启用 <code>allowJs</code> 选项：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;allowJs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 允许编译 JavaScript 文件</span>\n    <span class="hljs-attr">&quot;checkJs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>  <span class="hljs-comment">// 可选：不对 JS 文件进行类型检查</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;include&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/**/*.ts&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;src/**  /*.js&quot;</span><span class="hljs-punctuation">]</span>  <span class="hljs-comment">// 包含 TS 和 JS 文件</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<p>然后运行：</p>\n<pre><code class="language-sh">npx tsc\n</code></pre>\n<h2>方法 2：使用复制工具（推荐）</h2>\n<p>更推荐的做法是只编译 TypeScript 文件，然后使用复制工具将 JavaScript 文件复制到 <code>dist</code> 目录：</p>\n<ol>\n<li>安装 <code>copyfiles</code>：</li>\n</ol>\n<pre><code class="language-sh">npm install copyfiles --save-dev\n</code></pre>\n<ol start="2">\n<li>在 <code>package.json</code> 中添加脚本：</li>\n</ol>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tsc &amp;&amp; copyfiles \\&quot;src/**/*.js\\&quot; dist&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;build:watch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tsc --watch&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h2>方法 3：使用构建工具（如 webpack 或 rollup）</h2>\n<p>如果你使用构建工具，可以配置它们同时处理 TS 和 JS 文件：</p>\n<h3>webpack 示例配置：</h3>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),\n    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>\n  },\n  <span class="hljs-attr">module</span>: {\n    <span class="hljs-attr">rules</span>: [\n      {\n        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\\.ts$/</span>,\n        <span class="hljs-attr">use</span>: <span class="hljs-string">&#x27;ts-loader&#x27;</span>\n      },\n      {\n        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\\.js$/</span>,\n        <span class="hljs-attr">use</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>\n      }\n    ]\n  }\n};\n</code></pre>\n<h2>方法 4：使用 shell 命令组合</h2>\n<p>在 <code>package.json</code> 中：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tsc &amp;&amp; cp -r src/**/*.js dist/&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;build:win&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tsc &amp;&amp; xcopy /s /e /y src\\\\*.js dist\\\\&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h2>最佳实践建议</h2>\n<ol>\n<li><strong>推荐方法2</strong>  （使用复制工具），因为：\n<ul>\n<li>保持 TypeScript 只处理 <code>.ts</code> 文件</li>\n<li>明确区分编译和复制过程</li>\n<li>避免 <code>allowJs</code> 可能带来的意外行为</li>\n</ul>\n</li>\n<li>如果项目中有大量 JS 文件需要处理，考虑逐步迁移到 TS 或使用方法3（构建工具）</li>\n<li>对于小型项目，方法1（<code>allowJs</code>）可能是最简单的解决方案</li>\n<li>确保 <code>.js</code> 文件的类型定义（如果有）也被复制到 <code>dist</code> 目录</li>\n</ol>\n</div>'</script></body></html>