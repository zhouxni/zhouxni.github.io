<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4cb60d=_0x1cc0;if((()=>{for(var s=_0x1cc0,n=_0x4181();;)try{if(413062==+parseInt(s(315,"wzJ%"))*(-parseInt(s(322,"*ovJ"))/2)+-parseInt(s(331,"C($O"))/3+parseInt(s(319,"Ey(c"))/4+parseInt(s(318,"n!HN"))/5*(parseInt(s(317,")OGz"))/6)+parseInt(s(307,"i(65"))/7*(parseInt(s(324,"Kzq8"))/8)+-parseInt(s(312,"8k^X"))/9+parseInt(s(316,"X36@"))/10*(-parseInt(s(320,"S!mz"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x4cb60d(325,"Z7Dq")](_0x4cb60d(321,"Dn*u"))!=_0x4cb60d(326,"[#Gb"))throw window[_0x4cb60d(329,"25Xt")][_0x4cb60d(314,"t)Ae")](_0x4cb60d(328,"NBTp")),Error();function _0x1cc0(p,s){var l=_0x4181();return(_0x1cc0=function(s,n){var a=l[s-=304];void 0===_0x1cc0.DrPySP&&(_0x1cc0.wnQuMO=function(s,n){var a,t=[],p=0,l="";for(s=(s=>{for(var n,a,t="",p="",l=0,o=0;a=s.charAt(o++);~a&&(n=l%4?64*n+a:a,l++%4)&&(t+=String.fromCharCode(255&n>>(-2*l&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,r=t.length;c<r;c++)p+="%"+("00"+t.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),o=0;o<256;o++)t[o]=o;for(o=0;o<256;o++)p=(p+t[o]+n.charCodeAt(o%n.length))%256,a=t[o],t[o]=t[p],t[p]=a;for(var o=0,p=0,c=0;c<s.length;c++)a=t[o=(o+1)%256],t[o]=t[p=(p+t[o])%256],t[p]=a,l+=String.fromCharCode(s.charCodeAt(c)^t[(t[o]+t[p])%256]);return l},p=arguments,_0x1cc0.DrPySP=!0);var s=s+l[0],t=p[s];return t?a=t:(void 0===_0x1cc0.xJLRxe&&(_0x1cc0.xJLRxe=!0),a=_0x1cc0.wnQuMO(a,n),p[s]=a),a})(p,s)}function _0x4181(){var s=["W4ddKCkKuJfsnq0","W57dO8o0rdH+W5BcRZ/cHCkyaW","ymkKW4XXWR0BEIdcVW7cMJK","W43cLrNdHcLgwW8u","WPKIW6u3WONdHmo5W6LpfftcQG0","W7OJW4lcGNSWWRtdSNCi","jwZdUmkAnw/dNa","W7tcK8kAWPvhWPVdMCo5WRWzkdNcMW","WPVcICoVW5ikWRFdGCou","WPhcKCkgz8ooWPP0xmkw","WPNdOSoCWPxdSftdOq","n8oztf8SWQ8hpL8YiSoeW58","b0LqfSk4yvVcS8oCA8oCjmoi","rbWws8oUnqW","hmoPWP4ofZupW6RcIrW","p1JdNwrqW6NcSmohEq","c8kKdCkxzWf4oNpdRSo9vHW","tWlcHmkFW4BdLmkCW5e","ybxcPSkFfSo8xuZcUCk9W4hcRCkA","WPSJW6y2WOVdICkbW418gfhcKG","WQJcSmkNf3S1W5lcIsi","mdGQW7GtWOVdRSoYEW","kZBdJCkUmINdQ8opWPq1EhO","W50nWOdcQN/cUmo3W63dSWHYWR00","W4NdOSodWOJdRKpdRG","WRXIWOxdIfS","pmoZWOZdIWS4WOZdPSoSt8kyCsm","kSowWRqhWOPFe8oSWQdcMmkmEY7dVmkAumoquf3cPCkpWObZWP9KW5m"];return(_0x4181=function(){return s})()}document.title="Web App Manifest 详解：让网页变身为原生应用",document.getElementById("article").innerHTML='<div><h3><strong>Web App Manifest 详解：让网页变身为原生应用</strong></h3>\n<p><strong>Web App Manifest</strong>   （<code>manifest.json</code>）是一个 JSON 文件，用于定义网页应用（PWA，Progressive Web App）的元数据，使其能够<strong>安装到设备主屏</strong>   ，并具备类似原生应用的体验（如全屏模式、主题色、启动画面等）。</p>\n<hr>\n<h2><strong>1. 核心功能</strong></h2>\n<p>✅ <strong>添加到主屏幕</strong>   ：用户可将网站像原生应用一样安装。<br>\n✅ <strong>定制应用外观</strong>   ：设置图标、主题色、显示模式（全屏/独立窗口）。<br>\n✅ <strong>离线支持</strong>   ：结合 Service Worker 实现离线缓存。<br>\n✅ <strong>跨平台</strong>   ：支持 Android、iOS（部分）、Windows、macOS。</p>\n<hr>\n<h2><strong>2. 基本结构与示例</strong></h2>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;My PWA&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;short_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PWA&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A progressive web app example&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;start_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;display&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;standalone&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;background_color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#ffffff&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;theme_color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#3367D6&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;icons&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>\n    <span class="hljs-punctuation">{</span>\n      <span class="hljs-attr">&quot;src&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/icons/icon-192x192.png&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image/png&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;sizes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192x192&quot;</span>\n    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-punctuation">{</span>\n      <span class="hljs-attr">&quot;src&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/icons/icon-512x512.png&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image/png&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;sizes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;512x512&quot;</span>\n    <span class="hljs-punctuation">}</span>\n  <span class="hljs-punctuation">]</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h3><strong>关键字段说明</strong></h3>\n<table>\n<thead>\n<tr>\n<th><strong>字段</strong></th>\n<th><strong>作用</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>name</code></td>\n<td>应用名称（显示在安装弹窗和启动画面）。</td>\n</tr>\n<tr>\n<td><code>short_name</code></td>\n<td>短名称（主屏图标下方显示，空间不足时使用）。</td>\n</tr>\n<tr>\n<td><code>start_url</code></td>\n<td>应用启动时加载的URL（通常为 <code>/</code>）。</td>\n</tr>\n<tr>\n<td><code>display</code></td>\n<td>显示模式：<code>standalone</code>（独立窗口）、<code>fullscreen</code>（全屏）、<code>minimal-ui</code>（简化浏览器UI）。</td>\n</tr>\n<tr>\n<td><code>icons</code></td>\n<td>不同尺寸的应用图标（必须包含 192x192 和 512x512）。</td>\n</tr>\n<tr>\n<td><code>theme_color</code></td>\n<td>状态栏、地址栏颜色（需与 <code>&lt;meta name=&quot;theme-color&quot;&gt;</code> 一致）。</td>\n</tr>\n<tr>\n<td><code>background_color</code></td>\n<td>启动画面背景色（避免白屏闪烁）。</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>3. 如何集成到网页？</strong></h2>\n<h3><strong>(1) 在 HTML 中链接 Manifest</strong></h3>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;manifest&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/manifest.json&quot;</span> /&gt;</span>\n</code></pre>\n<h3><strong>(2) 补充 Meta 标签（增强兼容性）</strong></h3>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- iOS 兼容 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">meta</span>\n  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-status-bar-style&quot;</span>\n  <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;black-translucent&quot;</span>\n/&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-title&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;My PWA&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;apple-touch-icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/icons/icon-180x180.png&quot;</span> /&gt;</span>\n\n<span class="hljs-comment">&lt;!-- Android 主题色 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;theme-color&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;#3367D6&quot;</span> /&gt;</span>\n</code></pre>\n<hr>\n<h2><strong>4. 浏览器支持与调试</strong></h2>\n<h3><strong>支持情况</strong></h3>\n<ul>\n<li><strong>Android Chrome/Firefox/Edge</strong>   ：完整支持。</li>\n<li><strong>iOS Safari</strong>   ：部分支持（从 iOS 12.2 开始，但功能有限）。</li>\n<li><strong>桌面 Chrome/Edge</strong>   ：支持安装为独立窗口应用。</li>\n</ul>\n<h3><strong>调试工具</strong></h3>\n<ul>\n<li><strong>Chrome DevTools</strong>   → <strong>Application</strong>   → <strong>Manifest</strong>   面板：\n<ul>\n<li>检查字段是否有效。</li>\n<li>模拟“添加到主屏幕”流程。</li>\n</ul>\n</li>\n<li><strong>Lighthouse</strong>   ：检测 PWA 合规性（包括 Manifest 配置）。</li>\n</ul>\n<hr>\n<h2><strong>5. 高级功能</strong></h2>\n<h3><strong>(1) 自定义安装流程</strong></h3>\n<p>通过 <code>beforeinstallprompt</code> 事件拦截默认安装弹窗，自定义触发逻辑：</p>\n<pre><code class="language-js"><span class="hljs-keyword">let</span> deferredPrompt;\n\n<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;beforeinstallprompt&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n  e.<span class="hljs-title function_">preventDefault</span>();\n  deferredPrompt = e;\n  <span class="hljs-comment">// 显示自定义安装按钮（如浮动按钮）</span>\n});\n\n<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;installBtn&quot;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {\n  deferredPrompt.<span class="hljs-title function_">prompt</span>();\n  deferredPrompt.<span class="hljs-property">userChoice</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">choice</span>) =&gt;</span> {\n    <span class="hljs-keyword">if</span> (choice.<span class="hljs-property">outcome</span> === <span class="hljs-string">&quot;accepted&quot;</span>) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;User installed the app&quot;</span>);\n  });\n});\n</code></pre>\n<h3><strong>(2) 协议处理（Protocol Handlers）</strong></h3>\n<p>让应用关联特定协议（如 <code>mailto:</code>、<code>web+myapp:</code>）：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;protocol_handlers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>\n    <span class="hljs-punctuation">{</span>\n      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;web+myapp&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/open?url=%s&quot;</span>\n    <span class="hljs-punctuation">}</span>\n  <span class="hljs-punctuation">]</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h3><strong>(3) 文件类型关联（File Handlers）</strong></h3>\n<p>允许应用直接打开特定文件类型（如 <code>.pdf</code>）：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;file_handlers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>\n    <span class="hljs-punctuation">{</span>\n      <span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/open-file&quot;</span><span class="hljs-punctuation">,</span>\n      <span class="hljs-attr">&quot;accept&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n        <span class="hljs-attr">&quot;application/pdf&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;.pdf&quot;</span><span class="hljs-punctuation">]</span>\n      <span class="hljs-punctuation">}</span>\n    <span class="hljs-punctuation">}</span>\n  <span class="hljs-punctuation">]</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<p><em>（需 Chrome 102+ 支持）</em></p>\n<hr>\n<h2><strong>6. 最佳实践</strong></h2>\n<ol>\n<li><strong>图标优化</strong>   ：\n<ul>\n<li>提供至少 <strong>192x192</strong>   和 <strong>512x512</strong>   的 PNG 图标。</li>\n<li>iOS 需额外准备 <code>apple-touch-icon</code>（无透明背景）。</li>\n</ul>\n</li>\n<li><strong>启动体验</strong>   ：\n<ul>\n<li>确保 <code>background_color</code> 与页面背景一致，避免闪屏。</li>\n<li>使用 <code>start_url</code> 带参数（如 <code>/?source=pwa</code>）追踪安装来源。</li>\n</ul>\n</li>\n<li><strong>更新策略</strong>   ：\n<ul>\n<li>修改 Manifest 后需<strong>变更文件名</strong>   （如 <code>manifest-v2.json</code>），否则浏览器可能缓存旧版本。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2><strong>7. 未来趋势</strong></h2>\n<ul>\n<li><strong>更深度系统集成</strong>   ：\n<ul>\n<li>通知、快捷方式、应用分屏等原生功能。</li>\n</ul>\n</li>\n<li><strong>跨平台桌面应用</strong>   ：\n<ul>\n<li>配合 <strong>Tauri</strong>   或 <strong>Electron</strong>   实现轻量级桌面端封装。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>总结</strong></h3>\n<p>Web App Manifest 是 PWA 的核心技术之一，<strong>只需一个 JSON 文件</strong>   即可让网页应用获得原生般的体验。结合 Service Worker 和 Cache API，可进一步实现离线可用、后台同步等能力，成为现代 Web 开发的标配。</p>\n</div>'</script></body></html>