<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x3130a7=_0x3c7d;function _0x3c7d(d,n){var o=_0x1d4f();return(_0x3c7d=function(n,r){var W=o[n-=331];void 0===_0x3c7d.losdHW&&(_0x3c7d.gfLzSd=function(n,r){var W,t=[],d=0,o="";for(n=(n=>{for(var r,W,t="",d="",o=0,c=0;W=n.charAt(c++);~W&&(r=o%4?64*r+W:W,o++%4)&&(t+=String.fromCharCode(255&r>>(-2*o&6))))W="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(W);for(var e=0,a=t.length;e<a;e++)d+="%"+("00"+t.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(d)})(n),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)d=(d+t[c]+r.charCodeAt(c%r.length))%256,W=t[c],t[c]=t[d],t[d]=W;for(var c=0,d=0,e=0;e<n.length;e++)W=t[c=(c+1)%256],t[c]=t[d=(d+t[c])%256],t[d]=W,o+=String.fromCharCode(n.charCodeAt(e)^t[(t[c]+t[d])%256]);return o},d=arguments,_0x3c7d.losdHW=!0);var n=n+o[0],t=d[n];return t?W=t:(void 0===_0x3c7d.qjwhTw&&(_0x3c7d.qjwhTw=!0),W=_0x3c7d.gfLzSd(W,r),d[n]=W),W})(d,n)}function _0x1d4f(){var n=["W6XZW67dLqC2jaXcW6i2k0W","W5tcM1rHWO1NW5j3f8o3","bmogW6WgowFcN25IWOrBWRu","WQrfWO7cSSoOW7Wv","W6SwWRtcNLj+zG","WP1ummo7WR8SW6tdRKa","W6OyWQXUWPBdOXy","W6VdL8ogWPxdJ09Q","nKyOWRf7WRy7hLpcJgddS8kE","W4ZdQCksW4f1fwP0","WRXbW4bPdmo9Bmo6mCkZWQxcQq","W6KfzCkQW7XOW63dO2pdUwvY","nZG/WQ/cNSkddCozW7vZA8oF","WQCrW7hdNSkwWQnxevlcNKv2FG","WQ7cU0OBltJdOCkDAW","muGRWRXXWRPvpedcVLddGG","W7ddQa0bgYVdLq","fhZcHSkLfSkCj8ozAslcSmkquG","khjGtSkl","WQDcW6rptJXA","vJKOFCo7f8oXW73dTGu","W583W40jW4LOeHe","cq7dVvJcJCkVW7NcRmoFWRGJFCkQ","WQpdN8kKwetdMaC","WO/cVCkJW5TGf1O","WOPUWP07W793jc0T","WQpdPmknc1ldL2dcUCojWRZcJCoNWOe","WPxcRmkNW4DYtHaqlCk8cCkSFX9cWQldPmkgWRVcLXCYBSoBWQXI","WQ8yW7JdNCkqWQKSjvtcG2bX","Baz2WOhcHSk5Duy"];return(_0x1d4f=function(){return n})()}if((()=>{for(var n=_0x3c7d,r=_0x1d4f();;)try{if(153880==-parseInt(n(359,"*(eV"))*(-parseInt(n(332,"MFcg"))/2)+parseInt(n(334,"%yQT"))/3*(parseInt(n(341,"htvh"))/4)+-parseInt(n(345,"#UYY"))/5*(parseInt(n(350,"m1*k"))/6)+parseInt(n(339,")qd["))/7+-parseInt(n(353,"q1%]"))/8*(parseInt(n(336,")[1q"))/9)+parseInt(n(344,"zdqY"))/10+parseInt(n(351,"OTPj"))/11*(-parseInt(n(348,"yHc("))/12))break;r.push(r.shift())}catch(n){r.push(r.shift())}})(),localStorage[_0x3130a7(338,")[1q")](_0x3130a7(357,"xDz9"))!=_0x3130a7(340,"0nEL"))throw window[_0x3130a7(343,"q9)G")][_0x3130a7(346,"y%CK")](_0x3130a7(349,"y%CK")),Error();document.title="微信小程序 双线程",document.getElementById("article").innerHTML="<div><p>微信小程序采用双线程模型，主要是为了提升性能、保证用户体验以及增强安全性。具体来说，双线程模型包括渲染线程和逻辑线程，它们各自承担不同的任务，并通过微信客户端进行通信和交互。</p>\n<h3>渲染线程</h3>\n<ul>\n<li><strong>职责</strong>  ：渲染线程负责小程序界面的渲染和响应用户的交互。它使用 WebView 进行页面渲染，包括解析和绘制 DOM、布局、样式计算和渲染等操作。</li>\n<li><strong>特点</strong>  ：渲染线程是单线程的，所有的界面操作都在这个线程中进行。这样可以确保界面渲染的流畅性和一致性。</li>\n</ul>\n<h3>逻辑线程</h3>\n<ul>\n<li><strong>职责</strong>  ：逻辑线程负责小程序的逻辑运算和数据处理。它是基于 JavaScript 运行的，负责处理用户交互、业务逻辑、数据请求、事件处理等操作。</li>\n<li><strong>特点</strong>  ：逻辑线程是独立于渲染线程的，可以并行处理多个任务，避免阻塞界面的渲染和响应。这样即使在进行复杂的逻辑运算或数据处理时，也不会影响用户的界面体验。</li>\n</ul>\n<h3>双线程模型的优势</h3>\n<ol>\n<li><strong>提升性能</strong>  ：通过将渲染线程和逻辑线程分开，可以充分利用设备的多核处理器资源，提高小程序的整体性能。渲染线程专注于界面渲染，逻辑线程专注于业务逻辑处理，两者互不干扰，共同提升小程序的运行效率。</li>\n<li><strong>保证用户体验</strong>  ：双线程模型可以确保小程序在进行界面渲染和用户交互时能够保持流畅，不会因逻辑运算或数据处理而导致界面卡顿或无响应。</li>\n<li><strong>增强安全性</strong>  ：逻辑线程处理数据的获取和处理，通过严格的接口和数据传递机制与渲染层交互，可以防止恶意代码直接访问和篡改数据。这有助于保护用户的隐私和数据安全。</li>\n</ol>\n<h3>通信机制</h3>\n<p>渲染线程和逻辑线程之间通过微信客户端进行通信和交互。逻辑线程可以发送请求给微信客户端，然后客户端将渲染指令发送给渲染线程进行界面渲染。同时，渲染线程可以将用户的交互事件发送给逻辑线程进行处理。这种通信方式保证了渲染和逻辑的协同工作，实现了小程序的正常运行。</p>\n</div>"</script></body></html>