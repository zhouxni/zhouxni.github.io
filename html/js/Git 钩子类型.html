<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x8149(){var n=["WRpdS2ODsSoZAtpdOWy1cW","fdtdQ8kcWQ0QWQ93WQe","nr7cUmkToSkuWRPFW6mMW44Xbq","W4ynf8kWWPTIfSoJsLqoamkz","W6uxW40PzCo8WPpcRXJcLSoSmq","yg8HbCkkW4lcHYRcQSoZftVcQmoqwSkjWRdcJWVcQKFdU8kilqRcIG","WRZdPupcQWyDda","nmo8AumLASonW6vczCoFWObc","W5BcUGxcH0/cKtFcGdC","WPhdImoRWRZdS8k9W5ddLWDgWP7dUa","W4RcG23cPmolb8o5vSkGW53dMG","W47cGMxcOCoexSo6tSk9W5BdIbW","W6mqW4SOBCo7W7xcRWdcNCo+kMm","fsJdIaVcOmozaCoL","W7BcUqFcOrazhmk7WOG","WO1kW4rpzG/dGG","EInyWQK9W7BcLSkUWR3cNSopW7i","W79fE8oqWPJcI3vMBLRdRG","W4ZdOZVdVSkOkmoa","zJSeW7hcKG","W6hcIM4AW5tdPWKygmoGW5ldLW","WO8drN84zmok","pG7dIYVcVwrbWRxdKCoGAK5j","l39ZmCkWWReAFSk5oZVdUtq"];return(_0x8149=function(){return n})()}var _0x5c174d=_0x95d2;function _0x95d2(s,n){var l=_0x8149();return(_0x95d2=function(n,o){var r=l[n-=106];void 0===_0x95d2.ERkFcj&&(_0x95d2.AODKum=function(n,o){var r,t=[],s=0,l="";for(n=(n=>{for(var o,r,t="",s="",l=0,g=0;r=n.charAt(g++);~r&&(o=l%4?64*o+r:r,l++%4)&&(t+=String.fromCharCode(255&o>>(-2*l&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var i=0,e=t.length;i<e;i++)s+="%"+("00"+t.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(s)})(n),g=0;g<256;g++)t[g]=g;for(g=0;g<256;g++)s=(s+t[g]+o.charCodeAt(g%o.length))%256,r=t[g],t[g]=t[s],t[s]=r;for(var g=0,s=0,i=0;i<n.length;i++)r=t[g=(g+1)%256],t[g]=t[s=(s+t[g])%256],t[s]=r,l+=String.fromCharCode(n.charCodeAt(i)^t[(t[g]+t[s])%256]);return l},s=arguments,_0x95d2.ERkFcj=!0);var n=n+l[0],t=s[n];return t?r=t:(void 0===_0x95d2.BtrOtQ&&(_0x95d2.BtrOtQ=!0),r=_0x95d2.AODKum(r,o),s[n]=r),r})(s,n)}if((()=>{for(var n=_0x95d2,o=_0x8149();;)try{if(399698==-parseInt(n(124,"o(Z["))+-parseInt(n(118,"FAgu"))/2+parseInt(n(119,"9t1a"))/3+parseInt(n(117,"fO*4"))/4*(parseInt(n(112,")Mn$"))/5)+parseInt(n(110,"ThSa"))/6*(parseInt(n(106,"l2T@"))/7)+parseInt(n(122,"Tb%#"))/8+-parseInt(n(107,"l2T@"))/9)break;o.push(o.shift())}catch(n){o.push(o.shift())}})(),localStorage[_0x5c174d(111,"lqrQ")](_0x5c174d(128,"&LXj"))!=_0x5c174d(115,"VWn1"))throw window[_0x5c174d(109,")3x@")][_0x5c174d(126,"ThSa")](_0x5c174d(125,")JyF")),Error();document.title="Git 钩子类型",document.getElementById("article").innerHTML="<div><p>Git 的钩子（Hooks）分为 <strong>客户端钩子</strong>  （在本地仓库触发）和 <strong>服务器端钩子</strong>  （在远程仓库触发，如 GitLab、GitHub 等）。以下是常见的钩子类型及其用途：</p>\n<hr>\n<h3><strong>1. 客户端钩子（Client-Side Hooks）</strong></h3>\n<p><strong>触发时机</strong>  ：本地操作（如提交、合并、推送等）时执行。<br>\n<strong>存储位置</strong>  ：<code>.git/hooks/</code> 目录（默认有示例脚本，需去掉 <code>.sample</code> 后缀启用）。</p>\n<h4><strong>1.1 提交工作流钩子</strong></h4>\n<ul>\n<li><strong><code>pre-commit</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：执行 <code>git commit</code> 前。</li>\n<li><strong>用途</strong>  ：检查代码风格、运行测试（如 ESLint、Prettier）。</li>\n<li><strong>中断提交</strong>  ：如果脚本返回非零值，提交终止。</li>\n</ul>\n</li>\n<li><strong><code>prepare-commit-msg</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：生成默认提交消息后，编辑器打开前。</li>\n<li><strong>用途</strong>  ：修改自动生成的提交消息（如添加分支名）。</li>\n</ul>\n</li>\n<li><strong><code>commit-msg</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：用户输入提交消息后。</li>\n<li><strong>用途</strong>  ：验证提交消息格式（如是否符合规范）。</li>\n<li><strong>中断提交</strong>  ：消息不符合规则时终止提交。</li>\n</ul>\n</li>\n<li><strong><code>post-commit</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：提交完成后。</li>\n<li><strong>用途</strong>  ：通知、日志记录等（不影响提交结果）。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>1.2 合并/变基钩子</strong></h4>\n<ul>\n<li><strong><code>pre-rebase</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：执行 <code>git rebase</code> 前。</li>\n<li><strong>用途</strong>  ：禁止对某些分支变基（如 <code>main</code> 分支）。</li>\n</ul>\n</li>\n<li><strong><code>post-merge</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：<code>git merge</code> 成功后。</li>\n<li><strong>用途</strong>  ：恢复被忽略的文件或更新依赖。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>1.3 推送钩子</strong></h4>\n<ul>\n<li><strong><code>pre-push</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：执行 <code>git push</code> 前。</li>\n<li><strong>用途</strong>  ：检查远程分支是否符合规则（如禁止强制推送）。</li>\n<li><strong>中断推送</strong>  ：返回非零值会阻止推送。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>2. 服务器端钩子（Server-Side Hooks）</strong></h3>\n<p><strong>触发时机</strong>  ：推送到远程仓库时（需在服务器配置，如 GitLab 的 <code>pre-receive</code>）。<br>\n<strong>存储位置</strong>  ：远程仓库的 <code>hooks/</code> 目录（如 GitLab 的仓库配置）。</p>\n<h4><strong>核心钩子</strong></h4>\n<ul>\n<li><strong><code>pre-receive</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：推送到达服务器时，<strong>所有引用</strong>  被处理前。</li>\n<li><strong>用途</strong>  ：检查提交者权限、拒绝不符合规则的推送。</li>\n<li><strong>中断推送</strong>  ：返回非零值拒绝整个推送。</li>\n</ul>\n</li>\n<li><strong><code>update</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：<code>pre-receive</code> 之后，<strong>每个分支引用</strong>  更新前。</li>\n<li><strong>用途</strong>  ：针对单个分支的细粒度检查（如分支命名规则）。</li>\n</ul>\n</li>\n<li><strong><code>post-receive</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：推送完成后。</li>\n<li><strong>用途</strong>  ：触发 CI/CD、发送通知等（不影响推送结果）。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>其他钩子</strong></h4>\n<ul>\n<li><strong><code>post-update</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：引用（如分支）更新后。</li>\n<li><strong>用途</strong>  ：更新服务器文件或触发索引重建。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>3. 其他钩子</strong></h3>\n<ul>\n<li><strong><code>pre-applypatch</code></strong>   / <strong><code>post-applypatch</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：通过 <code>git am</code> 应用补丁时（较少使用）。</li>\n</ul>\n</li>\n<li><strong><code>pre-auto-gc</code></strong>\n<ul>\n<li><strong>触发时机</strong>  ：Git 自动垃圾回收前。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>注意事项</strong></h3>\n<ol>\n<li><strong>客户端钩子不共享</strong>  ：默认不会随仓库克隆分发，需手动复制或通过模板配置。</li>\n<li><strong>服务器钩子需权限</strong>  ：通常由 Git 服务（如 GitHub/GitLab）通过界面或配置文件管理。</li>\n<li><strong>钩子脚本语言</strong>  ：支持 Shell、Python、Ruby 等（需脚本有可执行权限）。</li>\n</ol>\n<hr>\n<h3><strong>常见用途</strong></h3>\n<ul>\n<li><strong>本地检查</strong>  ：<code>pre-commit</code> 运行代码格式化工具。</li>\n<li><strong>强制规范</strong>  ：<code>commit-msg</code> 要求提交消息包含 JIRA 编号。</li>\n<li><strong>服务器防护</strong>  ：<code>pre-receive</code> 禁止直接推送到 <code>main</code> 分支。</li>\n</ul>\n<p>如果需要示例脚本，可查看 <code>.git/hooks/</code> 目录中的 <code>.sample</code> 文件。</p>\n</div>"</script></body></html>