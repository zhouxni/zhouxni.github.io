<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0xf98b29=_0x204c;if((()=>{for(var s=_0x204c,n=_0x16cb();;)try{if(273561==-parseInt(s(221,"1@Rr"))+-parseInt(s(237,"U@!^"))/2+parseInt(s(235,"3taK"))/3*(-parseInt(s(218,"ft$R"))/4)+-parseInt(s(220,"U@!^"))/5*(parseInt(s(231,"%bP&"))/6)+parseInt(s(241,"AR^x"))/7*(parseInt(s(245,"Dwn2"))/8)+parseInt(s(234,"n*0I"))/9*(-parseInt(s(222,"RJW@"))/10)+-parseInt(s(223,"PnE4"))/11*(-parseInt(s(217,"V&p("))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0xf98b29(240,"n*0I")](_0xf98b29(243,"u9PA"))!=_0xf98b29(236,"pf0x"))throw window[_0xf98b29(242,"AR^x")][_0xf98b29(224,"PnE4")](_0xf98b29(219,"sKrZ")),Error();function _0x204c(o,s){var c=_0x16cb();return(_0x204c=function(s,n){var a=c[s-=217];void 0===_0x204c.gUfgZu&&(_0x204c.pElGKX=function(s,n){var a,t=[],o=0,c="";for(s=(s=>{for(var n,a,t="",o="",c=0,p=0;a=s.charAt(p++);~a&&(n=c%4?64*n+a:a,c++%4)&&(t+=String.fromCharCode(255&n>>(-2*c&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var l=0,r=t.length;l<r;l++)o+="%"+("00"+t.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(o)})(s),p=0;p<256;p++)t[p]=p;for(p=0;p<256;p++)o=(o+t[p]+n.charCodeAt(p%n.length))%256,a=t[p],t[p]=t[o],t[o]=a;for(var p=0,o=0,l=0;l<s.length;l++)a=t[p=(p+1)%256],t[p]=t[o=(o+t[p])%256],t[o]=a,c+=String.fromCharCode(s.charCodeAt(l)^t[(t[p]+t[o])%256]);return c},o=arguments,_0x204c.gUfgZu=!0);var s=s+c[0],t=o[s];return t?a=t:(void 0===_0x204c.YScOEg&&(_0x204c.YScOEg=!0),a=_0x204c.pElGKX(a,n),o[s]=a),a})(o,s)}function _0x16cb(){var s=["DGqiW6BdQmk1j8kbW5K","emoPuCoyCfKRCa","W6fVWOZcVmkFzvBcJa","WQVdQSkmpJZcVSo8aW","WQ/dR8oMw23dPSkPublcTqBcTbjQ","W7hdUCo+WPzsWQtcSdxdIL/cVJ8","pbqJDw/dUfBcGNjKWPFcJSoOW4tcO8oiW4XdW4n9CmoMrcS/aa","WPhdVCoqi3/dUIpdUa","EXDTW4PcEwHrBw4wW4O","WPtdTCodW4dcVmoFW5PKW605","i8k6W44hsttcINW","ymoUW7qmEtxcUa","WPeegSocCahcN2FdTG7cPCoB","jqiebqVcNCoJ","l8k2j1NcJmkbWPlcLvvK","WPBcSSofW4KKdcKHxcZcI8oN","WOrJW4iiW7uNWQWdW7HhyftcHXK","WPldUCknyu/dNsVdNSofW6y","ySodW41WW5PJWQZcVNRcH8o/AW","lLT9ChxdOSohWQ3cPSkZCmkE","kSkWlLhdRCo1WO/cThr6eSkC","W7hcLerViYLtn25u","hhGiCmonr8kD","E8o4WOpdJgK","WPBdTCkdzX/cRtpdP8oRW7DsrW","W4dcUmoeWPRdKMnqW5K4W7C4AG","WPhdVmoWm33dUYZdPW","WQtdHqCtnaHU","W5TebCkFeSoYu8k/WPZcQmoDWQW","WOuyv8omu8kItmk+"];return(_0x16cb=function(){return s})()}document.title="Redux 的 bindActionCreators 详解",document.getElementById("article").innerHTML='<div><p><code>bindActionCreators</code> 是 Redux 提供的一个实用工具函数，用于简化 action creators 与 <code>dispatch</code> 方法的绑定过程。</p>\n<h2>基本概念</h2>\n<h3>作用</h3>\n<p>将 action creators 自动绑定到 <code>dispatch</code> 方法，避免每次手动调用 <code>dispatch(actionCreator())</code></p>\n<h3>使用场景</h3>\n<ul>\n<li>需要将多个 action creators 传递给子组件时</li>\n<li>希望隐藏 Redux store 和 dispatch 的存在时</li>\n<li>简化 action creators 的调用方式</li>\n</ul>\n<h2>使用方法</h2>\n<h3>基本语法</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { bindActionCreators } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;\n\n<span class="hljs-keyword">const</span> boundActionCreators = <span class="hljs-title function_">bindActionCreators</span>(actionCreators, dispatch);\n</code></pre>\n<h3>参数说明</h3>\n<ul>\n<li><code>actionCreators</code>: 可以是一个 action creator 函数或包含多个 action creators 的对象</li>\n<li><code>dispatch</code>: Redux store 的 <code>dispatch</code> 方法</li>\n</ul>\n<h3>返回值</h3>\n<ul>\n<li>如果传入单个函数，返回绑定后的函数</li>\n<li>如果传入对象，返回绑定后的 action creators 对象</li>\n</ul>\n<h2>代码示例</h2>\n<h3>示例1：绑定单个 action creator</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// action creator</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">addTodo</span>(<span class="hljs-params">text</span>) {\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;ADD_TODO&#x27;</span>,\n    text\n  };\n}\n\n<span class="hljs-comment">// 绑定前</span>\nstore.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">addTodo</span>(<span class="hljs-string">&#x27;Learn Redux&#x27;</span>));\n\n<span class="hljs-comment">// 绑定后</span>\n<span class="hljs-keyword">const</span> boundAddTodo = <span class="hljs-title function_">bindActionCreators</span>(addTodo, store.<span class="hljs-property">dispatch</span>);\n<span class="hljs-title function_">boundAddTodo</span>(<span class="hljs-string">&#x27;Learn Redux&#x27;</span>); <span class="hljs-comment">// 自动 dispatch</span>\n</code></pre>\n<h3>示例2：绑定多个 action creators</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// action creators</span>\n<span class="hljs-keyword">const</span> todoActions = {\n  <span class="hljs-attr">addTodo</span>: <span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> ({ <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;ADD_TODO&#x27;</span>, text }),\n  <span class="hljs-attr">removeTodo</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> ({ <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;REMOVE_TODO&#x27;</span>, id })\n};\n\n<span class="hljs-comment">// 绑定</span>\n<span class="hljs-keyword">const</span> boundTodoActions = <span class="hljs-title function_">bindActionCreators</span>(todoActions, store.<span class="hljs-property">dispatch</span>);\n\n<span class="hljs-comment">// 使用</span>\nboundTodoActions.<span class="hljs-title function_">addTodo</span>(<span class="hljs-string">&#x27;Learn bindActionCreators&#x27;</span>);\nboundTodoActions.<span class="hljs-title function_">removeTodo</span>(<span class="hljs-number">1</span>);\n</code></pre>\n<h2>在 React 中的应用</h2>\n<h3>替代 mapDispatchToProps</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span>;\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> todoActions <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./todoActions&#x27;</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params">{ todos, actions }</span>) {\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>\n      {todos.map(todo =&gt; (\n        <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> \n          <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span> \n          <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span> \n          <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{actions.removeTodo}</span> \n        /&gt;</span>\n      ))}\n    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>\n  );\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">mapStateToProps</span>(<span class="hljs-params">state</span>) {\n  <span class="hljs-keyword">return</span> { <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span> };\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">mapDispatchToProps</span>(<span class="hljs-params">dispatch</span>) {\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">actions</span>: <span class="hljs-title function_">bindActionCreators</span>(todoActions, dispatch)\n  };\n}\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">connect</span>(mapStateToProps, mapDispatchToProps)(<span class="hljs-title class_">TodoList</span>);\n</code></pre>\n<h3>更简洁的写法（React-Redux 7.1+）</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { useDispatch } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span>;\n<span class="hljs-keyword">import</span> { useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> todoActions <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./todoActions&#x27;</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params">{ todos }</span>) {\n  <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();\n  \n  <span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">useMemo</span>(\n    <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">bindActionCreators</span>(todoActions, dispatch),\n    [dispatch]\n  );\n\n  <span class="hljs-comment">// 使用 actions.addTodo() 等</span>\n}\n</code></pre>\n<h2>实现原理</h2>\n<p><code>bindActionCreators</code> 的简化实现：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">bindActionCreator</span>(<span class="hljs-params">actionCreator, dispatch</span>) {\n  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {\n    <span class="hljs-keyword">return</span> <span class="hljs-title function_">dispatch</span>(actionCreator.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args));\n  };\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">bindActionCreators</span>(<span class="hljs-params">actionCreators, dispatch</span>) {\n  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> actionCreator === <span class="hljs-string">&#x27;function&#x27;</span>) {\n    <span class="hljs-keyword">return</span> <span class="hljs-title function_">bindActionCreator</span>(actionCreators, dispatch);\n  }\n  \n  <span class="hljs-keyword">const</span> boundActionCreators = {};\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> actionCreators) {\n    <span class="hljs-keyword">const</span> actionCreator = actionCreators[key];\n    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> actionCreator === <span class="hljs-string">&#x27;function&#x27;</span>) {\n      boundActionCreators[key] = <span class="hljs-title function_">bindActionCreator</span>(actionCreator, dispatch);\n    }\n  }\n  <span class="hljs-keyword">return</span> boundActionCreators;\n}\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li><strong>性能考虑</strong>  ：在组件渲染时频繁创建新的绑定函数可能导致不必要的重新渲染</li>\n<li><strong>测试影响</strong>  ：绑定后的 action creators 会直接 dispatch，测试时可能需要 mock dispatch</li>\n<li><strong>TypeScript 类型</strong>  ：绑定后的函数会保留原始参数类型，但返回类型变为 void</li>\n</ol>\n<h2>替代方案</h2>\n<h3>直接传递 dispatch</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 父组件</span>\n&lt;<span class="hljs-title class_">TodoItem</span> todo={todo} dispatch={dispatch} /&gt;\n\n<span class="hljs-comment">// 子组件</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch(removeTodo(id))}&gt;Remove<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>\n</code></pre>\n<h3>使用 React-Redux hooks</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();\n<span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(\n  <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">addTodo</span>(text)),\n  [dispatch, text]\n);\n</code></pre>\n<h2>总结</h2>\n<p><code>bindActionCreators</code> 是一个方便的工具函数，特别适合：</p>\n<ul>\n<li>需要传递多个 action creators 给子组件时</li>\n<li>想要保持组件对 Redux 无感知时</li>\n<li>简化 action creators 的调用方式时</li>\n</ul>\n<p>但在现代 React-Redux 应用中，使用 hooks (如 <code>useDispatch</code>) 可能是更简洁的选择。</p>\n</div>'</script></body></html>