<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x8e8d(){var s=["CJFcRxxdUmoLWRhcJa","W7RcScaaWOhcTCkOgrNcHq","WORcPxRcTqpcVuVcGIlcUmodaMK","WRqPkfTfWO52W48NWRu","W6pcS8oFWO3cNt3cTK/cNWpcUCk1gcpcJIDXWQGAW5ZdSSoWuw5HtW","WO9kl8oXW7S2W6y","omkEWOjgACkXW7zUDa","EdBdQrZcI8knWOVcOv3cGIvb","WO/cGmk7BSo3","ng/cTZC8WQicwCkzWO3cGYC","W7RcVYuhW5ZdGSkzjG/cQKNdPa","ibpdU1xcNcJcGttcH8k8rmoR","W5OFA8klWR1HW78eE8kzW5FdSW","zgHmf8kYAexdQa","gCk1W6BcKCoxu8ohWPtdM3egW7K","iSkseCo/v8obW5NcOWnDm8kZ","zvhcNfVdS8kDWORdRmoiqbe","AmksWPlcTwpdSmkDW7vsWObCza","tSoKW6pdOHbDqb0","odJcPgSTkLuSWRRdNGu","WOboaYerWRxcTW","WONdQ3zvWPFcGmkqoZa","W7RcUICaWOdcMCk3fsZcKW","W4BcImkaeCkCW6qYWP4LlG","j8odvSkYrmkprmkTeG","WPnphJWOWP3dPmo7W73dUI5+DW"];return(_0x8e8d=function(){return s})()}var _0x47fb43=_0x3892;function _0x3892(t,s){var o=_0x8e8d();return(_0x3892=function(s,n){var l=o[s-=255];void 0===_0x3892.FXAlNq&&(_0x3892.YnDsPk=function(s,n){var l,a=[],t=0,o="";for(s=(s=>{for(var n,l,a="",t="",o=0,e=0;l=s.charAt(e++);~l&&(n=o%4?64*n+l:l,o++%4)&&(a+=String.fromCharCode(255&n>>(-2*o&6))))l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(l);for(var p=0,c=a.length;p<c;p++)t+="%"+("00"+a.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)a[e]=e;for(e=0;e<256;e++)t=(t+a[e]+n.charCodeAt(e%n.length))%256,l=a[e],a[e]=a[t],a[t]=l;for(var e=0,t=0,p=0;p<s.length;p++)l=a[e=(e+1)%256],a[e]=a[t=(t+a[e])%256],a[t]=l,o+=String.fromCharCode(s.charCodeAt(p)^a[(a[e]+a[t])%256]);return o},t=arguments,_0x3892.FXAlNq=!0);var s=s+o[0],a=t[s];return a?l=a:(void 0===_0x3892.XOryZZ&&(_0x3892.XOryZZ=!0),l=_0x3892.YnDsPk(l,n),t[s]=l),l})(t,s)}if((()=>{for(var s=_0x3892,n=_0x8e8d();;)try{if(147292==+parseInt(s(260,"Ee%%"))+-parseInt(s(262,"tjE*"))/2+parseInt(s(276,"[N4c"))/3*(parseInt(s(269,"X&%Q"))/4)+-parseInt(s(272,"Ee%%"))/5*(-parseInt(s(279,"AMZj"))/6)+parseInt(s(278,"hjsx"))/7+-parseInt(s(264,"fGLA"))/8+parseInt(s(267,"BoUm"))/9*(-parseInt(s(274,"H8D7"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x47fb43(255,"tjE*")](_0x47fb43(271,"Ee%%"))!=_0x47fb43(258,"ng3d"))throw window[_0x47fb43(263,"bwDo")][_0x47fb43(270,"RFow")](_0x47fb43(280,"q2&z")),Error();document.title="jest @vue--test-utils 常用 api",document.getElementById("article").innerHTML='<div><p><code>@vue/test-utils</code> 是 Vue.js 官方提供的单元测试工具库(需搭配<code>@vue/cli-plugin-unit-jest</code>、<code>@vue/vue3-jest</code>)，它提供了一系列实用的 API 来简化 Vue 组件的测试过程。以下是一些常用的 API 及其功能介绍：</p>\n<h3>1. <strong>挂载组件</strong></h3>\n<ul>\n<li>\n<p><strong><code>mount(component, options)</code></strong>   ：</p>\n<ul>\n<li>\n<p>用于完整地挂载一个 Vue 组件，包括其子组件。</p>\n</li>\n<li>\n<p>返回一个 <code>Wrapper</code> 对象，包含组件实例和测试方法。</p>\n</li>\n<li>\n<p>示例：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@vue/test-utils&quot;</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/MyComponent.vue&quot;</span>;\n\n<span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">MyComponent</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p><strong><code>shallowMount(component, options)</code></strong>   ：</p>\n<ul>\n<li>\n<p>用于浅挂载一个 Vue 组件，不渲染其子组件，子组件会被存根。</p>\n</li>\n<li>\n<p>适用于只测试组件本身的逻辑，而不关心子组件的实现。</p>\n</li>\n<li>\n<p>示例：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { shallowMount } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@vue/test-utils&quot;</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/MyComponent.vue&quot;</span>;\n\n<span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">shallowMount</span>(<span class="hljs-title class_">MyComponent</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>2. <strong>操作组件状态</strong></h3>\n<ul>\n<li><strong><code>setData(data)</code></strong>   ：\n<ul>\n<li>用于设置组件的 <code>data</code> 属性。</li>\n<li>示例：<pre><code class="language-javascript">wrapper.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">10</span> });\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>setProps(props)</code></strong>   ：\n<ul>\n<li>用于设置组件的 <code>props</code> 属性。</li>\n<li>示例：<pre><code class="language-javascript">wrapper.<span class="hljs-title function_">setProps</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Hello, World!&quot;</span> });\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>3. <strong>查找和操作 DOM 元素</strong></h3>\n<ul>\n<li><strong><code>find(selector)</code></strong>   ：\n<ul>\n<li>查找匹配选择器的第一个元素或组件。</li>\n<li>返回一个 <code>Wrapper</code> 对象。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> button = wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;button&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>findAll(selector)</code></strong>   ：\n<ul>\n<li>查找匹配选择器的所有元素或组件。</li>\n<li>返回一个 <code>WrapperArray</code> 对象。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> buttons = wrapper.<span class="hljs-title function_">findAll</span>(<span class="hljs-string">&quot;button&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>trigger(eventName, options)</code></strong>   ：\n<ul>\n<li>触发组件上的事件。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;button&quot;</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">&quot;click&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>4. <strong>获取组件信息</strong></h3>\n<ul>\n<li><strong><code>text()</code></strong>   ：\n<ul>\n<li>获取组件渲染后的纯文本内容。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>html()</code></strong>   ：\n<ul>\n<li>获取组件渲染后的 HTML 字符串。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">html</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">&quot;&lt;h1&gt;Hello, World!&lt;/h1&gt;&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>exists()</code></strong>   ：\n<ul>\n<li>检查某个元素或组件是否存在。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;h1&quot;</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>5. <strong>事件处理</strong></h3>\n<ul>\n<li><strong><code>emitted(eventName?)</code></strong>   ：\n<ul>\n<li>获取组件触发的事件记录。</li>\n<li>如果不传参数，则返回所有事件记录；如果传参数，则返回指定事件名的记录。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">&quot;click&quot;</span>)).<span class="hljs-title function_">toBeTruthy</span>();\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>6. <strong>存根和模拟</strong></h3>\n<ul>\n<li><strong><code>stubs</code></strong>   ：\n<ul>\n<li>在挂载选项中使用，用于存根全局或局部注册的组件。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">MyComponent</span>, {\n  <span class="hljs-attr">stubs</span>: { <span class="hljs-title class_">ChildComponent</span>: <span class="hljs-literal">true</span> },\n});\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>mocks</code></strong>   ：\n<ul>\n<li>在挂载选项中使用，用于模拟全局属性或插件。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">MyComponent</span>, {\n  <span class="hljs-attr">mocks</span>: { <span class="hljs-attr">$route</span>: { <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span> } },\n});\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>7. <strong>其他实用方法</strong></h3>\n<ul>\n<li><strong><code>destroy()</code></strong>   ：\n<ul>\n<li>销毁组件实例，清理资源。</li>\n<li>示例：<pre><code class="language-javascript">wrapper.<span class="hljs-title function_">destroy</span>();\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>classes()</code></strong>   ：\n<ul>\n<li>获取组件根 DOM 节点的 class 列表。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">classes</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">&quot;my-class&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong><code>attributes()</code></strong>   ：\n<ul>\n<li>获取组件根 DOM 节点的属性对象。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">attributes</span>().<span class="hljs-property">id</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&quot;my-id&quot;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<p>这些 API 提供了强大的功能，可以帮助开发者对 Vue 组件进行各种测试，包括单元测试、集成测试等。通过合理使用这些 API，可以确保组件的正确性和稳定性。</p>\n</div>'</script></body></html>