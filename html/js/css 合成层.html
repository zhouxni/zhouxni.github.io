<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x514fcf=_0x3812;function _0x3812(e,o){var W=_0x1ba6();return(_0x3812=function(o,n){var r=W[o-=121];void 0===_0x3812.uNjsWA&&(_0x3812.kZUyAt=function(o,n){var r,t=[],e=0,W="";for(o=(o=>{for(var n,r,t="",e="",W=0,i=0;r=o.charAt(i++);~r&&(n=W%4?64*n+r:r,W++%4)&&(t+=String.fromCharCode(255&n>>(-2*W&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var s=0,c=t.length;s<c;s++)e+="%"+("00"+t.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(e)})(o),i=0;i<256;i++)t[i]=i;for(i=0;i<256;i++)e=(e+t[i]+n.charCodeAt(i%n.length))%256,r=t[i],t[i]=t[e],t[e]=r;for(var i=0,e=0,s=0;s<o.length;s++)r=t[i=(i+1)%256],t[i]=t[e=(e+t[i])%256],t[e]=r,W+=String.fromCharCode(o.charCodeAt(s)^t[(t[i]+t[e])%256]);return W},e=arguments,_0x3812.uNjsWA=!0);var o=o+W[0],t=e[o];return t?r=t:(void 0===_0x3812.lekSMH&&(_0x3812.lekSMH=!0),r=_0x3812.kZUyAt(r,n),e[o]=r),r})(e,o)}function _0x1ba6(){var o=["ouaUWQJdQgqI","bCkCWRu7t8oxW64","WRORtmoqWR5uW7K9W7VdL8k2W5zj","W5hdHe9qDCkSzCosWRXSWRxdJSkx","DCkNFbbDWQpcLMWdWRb4WRf6","W5vRBgmz","vSokW7bduCo4W7fOW5/cTq","W5xdIe9FDCoYj8oUWQT1WO0","WRXWnr7dOvPbkCor","vSkKbCkCcmkIbZJdRGzWW5SMW5S","u8koW74+CbqpW742W5zmW7ZdHxRdLXtcP3KgWPKTksmZWP3dGa","WPBcMq4limo2nW","WRLdcCkGgSkEW5pcHwRcMCoDjq","W4JdHmoyAIxdHv8","vSovW63dLbpcLSkCsW","u8onW7bkd8ovW7zhW5dcMYO","ivSLW5ldRXPXW51kBmk1oq","sCkiW4NdGCkbamoGsc0HwvJcSa","WRG2W7q1a8o6sa","mcDiW5JcQansgc8cWOWiW50","W4JcOCk2WRbJWOGTbgCjhd4E","dSkOW6rWxZLEoJeGW4pcVq","dW/dQ8kVWRNcPSoMvCkoWOi","W4mXl8o/WRL2btWyWQDfWQG","W74KW7FcPCoSW5FdH8k/ASkNeJpdJ8oB","W4ztEmk9W481iq"];return(_0x1ba6=function(){return o})()}if((()=>{for(var o=_0x3812,n=_0x1ba6();;)try{if(585481==+parseInt(o(136,"1hP)"))+-parseInt(o(125,"#cg^"))/2+parseInt(o(127,"yrWb"))/3+parseInt(o(132,"#cg^"))/4*(-parseInt(o(122,"^3p&"))/5)+parseInt(o(131,"rwW8"))/6*(-parseInt(o(126,"otY3"))/7)+-parseInt(o(139,"P2Id"))/8*(parseInt(o(138,"WR3S"))/9)+parseInt(o(141,"Uask"))/10)break;n.push(n.shift())}catch(o){n.push(n.shift())}})(),localStorage[_0x514fcf(133,"WR3S")](_0x514fcf(140,"jJ(P"))!=_0x514fcf(137,"y#cq"))throw window[_0x514fcf(146,"9H$S")][_0x514fcf(143,"P2Id")](_0x514fcf(142,"jaAE")),Error();document.title="css 合成层",document.getElementById("article").innerHTML="<div><p><strong>CSS 合成层（Compositing Layers）</strong>  是浏览器中用于优化渲染性能的一种机制。以下是关于 CSS 合成层的详细解释：</p>\n<h3>一、什么是合成层</h3>\n<p>合成层是指浏览器在渲染页面时，将页面的各个部分分成多个独立的图层，这些图层可以在 GPU 中进行并行处理，从而提高渲染效率。每个合成层都拥有一个独立的 GraphicsLayer，与其他图层之间互不影响。</p>\n<h3>二、合成层的创建条件</h3>\n<p>在 Chrome 浏览器中，满足以下任意条件之一的元素会被提升为合成层：</p>\n<ol>\n<li><strong>3D 或透视变换</strong>  ：使用 <code>transform</code> 属性进行 3D 变换（如 <code>translate3d</code>、<code>rotate3d</code> 等）或设置 <code>perspective</code> 属性的元素。</li>\n<li><strong>视频解码加速</strong>  ：使用加速视频解码的节点。</li>\n<li><strong>WebGL 上下文</strong>  ：拥有 3D（WebGL）上下文或加速的 2D 上下文的节点。</li>\n<li><strong>混合插件</strong>  ：如 Flash 等混合插件。</li>\n<li><strong>CSS 动画</strong>  ：对自己的 <code>opacity</code> 做 CSS 动画或使用一个动画 <code>webkit</code> 变换的元素。</li>\n<li><strong>加速 CSS 过滤器</strong>  ：拥有加速 CSS 过滤器的元素。</li>\n<li><strong>后代节点或兄弟节点影响</strong>  ：元素有一个包含复合层的后代节点，或元素有一个 <code>z-index</code> 较低且包含一个复合层的兄弟元素。</li>\n<li><strong>固定定位</strong>  ：在 DPI 较高的屏幕上，固定定位的元素会自动被提升到一个它自有的渲染层中（但在 DPI 较低的设备上可能并非如此）。</li>\n</ol>\n<h3>三、合成层的优点</h3>\n<ol>\n<li><strong>GPU 加速</strong>  ：合成层的位图会交由 GPU 合成，比 CPU 处理要快得多。</li>\n<li><strong>减少重绘</strong>  ：当需要重绘时，只需要重绘本身，不会影响到其他的层。</li>\n<li><strong>优化动画性能</strong>  ：元素提升为合成层后，<code>transform</code> 和 <code>opacity</code> 才不会触发重绘，从而提高动画性能。</li>\n</ol>\n<h3>四、合成层的缺点</h3>\n<ol>\n<li><strong>内存占用</strong>  ：每个合成层都占用额外的内存，过多的合成层可能会导致内存占用过高，甚至导致浏览器崩溃。</li>\n<li><strong>传输延迟</strong>  ：绘制的图层必须传输到 GPU，这些层的数量和大小达到一定量级后，可能会导致传输非常慢，进而导致一些低端和中端设备上出现闪烁。</li>\n</ol>\n<h3>五、如何查看合成层</h3>\n<p>在 Chrome 开发工具中，可以通过以下步骤查看页面的图层结构：</p>\n<ol>\n<li>打开 Chrome 开发者工具。</li>\n<li>进入“More tools”菜单。</li>\n<li>选择“Layers”选项。</li>\n</ol>\n<p>在“Layers”面板中，可以查看每个合成层的信息，包括图层的大小、位置、绘制时间等。</p>\n<h3>六、优化建议</h3>\n<ol>\n<li><strong>避免滥用合成层</strong>  ：不要为了触发 GPU 加速而滥用合成层，应根据实际需求合理使用。</li>\n<li><strong>简化绘制的复杂度</strong>  ：减少不必要的动画和变换操作，降低绘制的复杂度。</li>\n<li><strong>关注内存占用</strong>  ：在移动端设备上，应特别注意合成层的内存占用问题，避免过多的合成层导致内存不足。</li>\n</ol>\n</div>"</script></body></html>