<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x31c1(){var s=["WQTkW4VcGtRcUmk+","A8o3bZ8veCkmaXFdTq","W41KW4iBxwCNWQq","pLHrumoiWOtcRq","n8kJjaRcUdu4hLasibdcK8ksfgddUSkjWRD1r8kDW4bTh04","dbdcU8kzASkIWPtdLK3cSKZcVdtdMG","W71Vd1n5WPpdK17cK8kSla","W47cQWddNmomjtNdPSo4W4Ow","Dt7dSSoPw8oyr8oqbSkqtmomgCod","BmoXdtK8gSkPfIRdSW","h8okW6VdTcBdLSkBkNW","W5yCxhTLvwD9k8obx8kTqG","kGVdRsNdRCkKW7ZdVg/cMCom","g8ojW6ldTGhdOSkxdLS","W6bOW4iFwN0dWQ9D","kc7cH17dT37cJXny","kGNdPYRcICk4W5FdVLRcUa","W5xcICovAX7dTmoQjmkn","ySo0cd9DcCkGntBdQCkn","W5BcQWbDeXFcV2xcKCo/W4ldGsm","W7KwWONdUx7dPCoKW7jEW57cNmkMWOC","bmk3WROOW5THWQqWWQRcIhm","sNtcH8osnCoPtmopW7Pc","hmkEWRldKCknjmkZcSkLhCkU","W7ddIJhdPCod","CxddOSkJc0JdG8kCW48QWOmugW"];return(_0x31c1=function(){return s})()}var _0x11b8ff=_0x67e5;function _0x67e5(p,s){var l=_0x31c1();return(_0x67e5=function(s,n){var a=l[s-=480];void 0===_0x67e5.tFjUqA&&(_0x67e5.iniKAb=function(s,n){var a,t=[],p=0,l="";for(s=(s=>{for(var n,a,t="",p="",l=0,c=0;a=s.charAt(c++);~a&&(n=l%4?64*n+a:a,l++%4)&&(t+=String.fromCharCode(255&n>>(-2*l&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var o=0,e=t.length;o<e;o++)p+="%"+("00"+t.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(p)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)p=(p+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[p],t[p]=a;for(var c=0,p=0,o=0;o<s.length;o++)a=t[c=(c+1)%256],t[c]=t[p=(p+t[c])%256],t[p]=a,l+=String.fromCharCode(s.charCodeAt(o)^t[(t[c]+t[p])%256]);return l},p=arguments,_0x67e5.tFjUqA=!0);var s=s+l[0],t=p[s];return t?a=t:(void 0===_0x67e5.lTzqsa&&(_0x67e5.lTzqsa=!0),a=_0x67e5.iniKAb(a,n),p[s]=a),a})(p,s)}if((()=>{for(var s=_0x67e5,n=_0x31c1();;)try{if(857965==-parseInt(s(502,"kSuk"))+parseInt(s(480,"C07e"))/2+parseInt(s(482,"sU]m"))/3*(parseInt(s(490,"sU]m"))/4)+parseInt(s(504,"QvNE"))/5*(parseInt(s(494,"d6)G"))/6)+-parseInt(s(491,"d6)G"))/7*(-parseInt(s(499,"sU]m"))/8)+-parseInt(s(500,"FN!d"))/9+-parseInt(s(486,"HFa#"))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x11b8ff(481,"Ks7p")](_0x11b8ff(495,"l4T["))!=_0x11b8ff(505,"&leA"))throw window[_0x11b8ff(483,"l4T[")][_0x11b8ff(484,"(WEA")](_0x11b8ff(485,"OgQj")),Error();document.title="给老项目配置 TypeScript 的步骤",document.getElementById("article").innerHTML='<div><p>为现有的 JavaScript 项目添加 TypeScript 支持是一个渐进的过程，可以按照以下步骤进行：</p>\n<h2>1. 初始化 TypeScript 配置</h2>\n<pre><code class="language-sh">npm install --save-dev typescript\nnpx tsc --init\n</code></pre>\n<p>这会创建 <code>tsconfig.json</code> 文件，包含 TypeScript 的默认配置。</p>\n<h2>2. 配置 tsconfig.json</h2>\n<p>修改生成的 <code>tsconfig.json</code>，常见配置如下：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;target&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;es5&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;commonjs&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;esModuleInterop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;skipLibCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;rootDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./src&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;allowJs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;checkJs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;include&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/**/*&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;exclude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;node_modules&quot;</span><span class="hljs-punctuation">]</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h2>3. 逐步迁移策略</h2>\n<h3>渐进式迁移方法</h3>\n<ol>\n<li><strong>允许 JS 文件</strong>  ：设置 <code>allowJs: true</code> 和 <code>checkJs: true</code>，让 TypeScript 检查 JS 文件</li>\n<li><strong>重命名文件</strong>  ：将 <code>.js</code> 文件逐个改为 <code>.ts</code> 或 <code>.tsx</code>（如果是 React 组件）</li>\n<li><strong>添加类型定义</strong>  ：逐步为代码添加类型注解</li>\n</ol>\n<h3>混合模式运行</h3>\n<p>可以保持大部分文件为 <code>.js</code>，只将部分文件转为 <code>.ts</code>，TypeScript 会同时处理两种文件。</p>\n<h2>4. 安装类型定义</h2>\n<pre><code class="language-sh">npm install --save-dev @types/node @types/react @types/react-dom <span class="hljs-comment"># 根据项目需要</span>\n</code></pre>\n<h2>5. 配置构建脚本</h2>\n<p>修改 <code>package.json</code> 中的脚本：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tsc&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;watch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tsc -w&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h2>6. 处理第三方库类型</h2>\n<p>对于没有类型定义的第三方库，可以：</p>\n<ol>\n<li>创建 <code>src/types</code> 目录</li>\n<li>添加 <code>declare module \'module-name\'</code> 声明</li>\n<li>或在 <code>tsconfig.json</code> 中添加 <code>&quot;typeRoots&quot;: [&quot;./node_modules/@types&quot;, &quot;./src/types&quot;]</code></li>\n</ol>\n<h2>7. 配置 ESLint (可选)</h2>\n<pre><code class="language-sh">npm install --save-dev @typescript-eslint/parser @typescript-eslint/eslint-plugin\n</code></pre>\n<p>然后更新 <code>.eslintrc.js</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">parser</span>: <span class="hljs-string">&#x27;@typescript-eslint/parser&#x27;</span>,\n  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&#x27;@typescript-eslint&#x27;</span>],\n  <span class="hljs-attr">extends</span>: [\n    <span class="hljs-string">&#x27;eslint:recommended&#x27;</span>,\n    <span class="hljs-string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>\n  ]\n};\n</code></pre>\n<h2>8. 配置 Webpack (如果需要)</h2>\n<p>安装 <code>ts-loader</code>：</p>\n<pre><code class="language-sh">npm install --save-dev ts-loader\n</code></pre>\n<p>更新 <code>webpack.config.js</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-comment">// ...</span>\n  <span class="hljs-attr">module</span>: {\n    <span class="hljs-attr">rules</span>: [\n      {\n        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\\.tsx?$/</span>,\n        <span class="hljs-attr">use</span>: <span class="hljs-string">&#x27;ts-loader&#x27;</span>,\n        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,\n      },\n    ],\n  },\n  <span class="hljs-attr">resolve</span>: {\n    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;.tsx&#x27;</span>, <span class="hljs-string">&#x27;.ts&#x27;</span>, <span class="hljs-string">&#x27;.js&#x27;</span>],\n  },\n  <span class="hljs-comment">// ...</span>\n};\n</code></pre>\n<h2>迁移技巧</h2>\n<ol>\n<li><strong>从关键模块开始</strong>  ：先迁移项目中最核心、最常用的模块</li>\n<li><strong>使用 <code>any</code> 过渡</strong>  ：对于复杂类型可以先使用 <code>any</code>，后续再细化</li>\n<li><strong>逐步启用严格模式</strong>  ：可以先关闭 <code>strict</code>，然后逐步启用严格检查选项</li>\n<li><strong>利用 JSDoc 注释</strong>  ：TypeScript 可以理解 JSDoc 类型注释，帮助平滑过渡</li>\n</ol>\n<p>通过这种方式，你可以逐步将老项目迁移到 TypeScript，而不需要一次性重写所有代码。</p>\n</div>'</script></body></html>