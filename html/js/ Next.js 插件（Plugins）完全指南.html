<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x316591=_0x1bc1;if((()=>{for(var s=_0x1bc1,n=_0x1ebf();;)try{if(613290==-parseInt(s(131,"P%fc"))*(parseInt(s(137,"aUuL"))/2)+-parseInt(s(151,"TwUe"))/3+-parseInt(s(153,"QSqj"))/4+-parseInt(s(133,"ONen"))/5*(parseInt(s(148,"le]V"))/6)+-parseInt(s(150,"#tw1"))/7*(-parseInt(s(142,"Jnp#"))/8)+parseInt(s(141,"ha&O"))/9*(parseInt(s(139,"wRsC"))/10)+-parseInt(s(149,"a2#^"))/11*(-parseInt(s(155,"QSqj"))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x316591(128,"s#Hm")](_0x316591(130,"T%(2"))!=_0x316591(156,"le]V"))throw window[_0x316591(140,"T4bc")][_0x316591(138,"l63V")](_0x316591(144,"Od9^")),Error();function _0x1bc1(l,s){var p=_0x1ebf();return(_0x1bc1=function(s,n){var a=p[s-=127];void 0===_0x1bc1.IcmaMD&&(_0x1bc1.ICEkoY=function(s,n){var a,t=[],l=0,p="";for(s=(s=>{for(var n,a,t="",l="",p=0,e=0;a=s.charAt(e++);~a&&(n=p%4?64*n+a:a,p++%4)&&(t+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,o=t.length;c<o;c++)l+="%"+("00"+t.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(s),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)l=(l+t[e]+n.charCodeAt(e%n.length))%256,a=t[e],t[e]=t[l],t[l]=a;for(var e=0,l=0,c=0;c<s.length;c++)a=t[e=(e+1)%256],t[e]=t[l=(l+t[e])%256],t[l]=a,p+=String.fromCharCode(s.charCodeAt(c)^t[(t[e]+t[l])%256]);return p},l=arguments,_0x1bc1.IcmaMD=!0);var s=s+p[0],t=l[s];return t?a=t:(void 0===_0x1bc1.CcAuMG&&(_0x1bc1.CcAuMG=!0),a=_0x1bc1.ICEkoY(a,n),l[s]=a),a})(l,s)}function _0x1ebf(){var s=["Cd5nW6fLWOBcJW","omoBW43dGCokWRmMDGxdIeNdNW","ecFdOmowofyCtW","WPqsuu0dWPenovihWRagCG","W5LLWPhdPCksWP0nWP0","WPqsx09HW49he1qg","fg1NBCoH","bmoJCSooWQFcTSk1wIBdIsVcQ8oH","iCkdWRpdKmoaWOBdVa","W6GSuMVcH8kdWO5MWRGblW","WQ1OWRNcSSolW54rW6BcVW","DCoAW58TW7RcMCoVmG","W5TtWO7cGCoQW4yt","WRBdUmkBW6RdJ1yvW7rXc8kJWRO","oKVcKfOma8kxkCo/W6vOWO/cUq","n3iUW6nEW6yWW70","cmklWRX/zYWJW7vjh8kkWOy","yg0VWQddMJxcPXitiCkD","t8kXe8kMW6tdT8oF","W6NdJdXpW7hdP8k+W5W","W6ucW5FdLc3dVg7cLG","W6NdKSkWW5JdUaxdSmonoN7dUxlcGG","c3WcW4XEwYRdHmkGWQmPt8ox","W4eZa8oGudDlAL3cKeDUwq","yCoyWQT5gdPOWP7cG8kKW6iPWPKSu8kFWPfmgGD5mSogheuj","imkXwCkSW7WFWOqkWQqnFW","WQlcLCk2WR7dR8k8xGy/Fani","WRTFWOZcHqpdVxVcLZ8d","vY5cw8o+qY3cQW","W7BcLSkzWOyclmoGqSkgWRhdNG"];return(_0x1ebf=function(){return s})()}document.title=" Next.js æ’ä»¶ï¼ˆPluginsï¼‰å®Œå…¨æŒ‡å—",document.getElementById("article").innerHTML='<div><p>Next.js çš„â€œæ’ä»¶â€å¹¶ä¸æ˜¯æŒ‡ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ npm åŒ…ï¼Œè€Œæ˜¯<strong>é€šè¿‡é…ç½®æˆ–æ–‡ä»¶çº¦å®šæ‰©å±•æ¡†æ¶èƒ½åŠ›</strong>   çš„æœºåˆ¶ã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š</p>\n<hr>\n<h2>ğŸ”§ 1. é…ç½®æ–‡ä»¶æ’ä»¶ï¼ˆnext.config.jsï¼‰</h2>\n<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„æ’ä»¶ç³»ç»Ÿï¼Œé€šè¿‡è‡ªå®šä¹‰é…ç½®å‡½æ•°å®ç°ã€‚<code>next.config.js</code>æ–‡ä»¶å¿…é¡»å¯¼å‡ºä¸€ä¸ª â€‹é…ç½®å¯¹è±¡â€‹ æˆ–è€…ä¸€ä¸ª â€‹è¿”å›é…ç½®å¯¹è±¡çš„å‡½æ•°ã€‚</p>\n<h3>ğŸ“¦ å®˜æ–¹æ’ä»¶ç¤ºä¾‹</h3>\n<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>\n<span class="hljs-keyword">const</span> withPWA = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;next-pwa&quot;</span>)({\n  <span class="hljs-attr">dest</span>: <span class="hljs-string">&quot;public&quot;</span>,\n});\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">withPWA</span>({\n  <span class="hljs-attr">reactStrictMode</span>: <span class="hljs-literal">true</span>,\n  <span class="hljs-attr">swcMinify</span>: <span class="hljs-literal">true</span>,\n});\n</code></pre>\n<h3>ğŸ” å¸¸è§å®˜æ–¹æ’ä»¶</h3>\n<table>\n<thead>\n<tr>\n<th>æ’ä»¶</th>\n<th>åŠŸèƒ½</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>@next/mdx</code></td>\n<td>MDX æ”¯æŒ</td>\n</tr>\n<tr>\n<td><code>@next/bundle-analyzer</code></td>\n<td>æ‰“åŒ…åˆ†æ</td>\n</tr>\n<tr>\n<td><code>next-pwa</code></td>\n<td>PWA æ”¯æŒ</td>\n</tr>\n<tr>\n<td><code>next-transpile-modules</code></td>\n<td>è½¬è¯‘ node_modules</td>\n</tr>\n</tbody>\n</table>\n<h3>ğŸ¯ è‡ªå®šä¹‰æ’ä»¶</h3>\n<p>æ’ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ª<strong>é«˜é˜¶å‡½æ•°</strong>   ï¼Œæ¥æ”¶ <code>NextConfig</code> è¿”å›æ–°é…ç½®ï¼š</p>\n<pre><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">withCustomPlugin</span> = (<span class="hljs-params">config = {}</span>) =&gt; {\n  <span class="hljs-keyword">return</span> {\n    ...config,\n    <span class="hljs-attr">webpack</span>: <span class="hljs-function">(<span class="hljs-params">webpackConfig, options</span>) =&gt;</span> {\n      <span class="hljs-comment">// è‡ªå®šä¹‰ webpack é…ç½®</span>\n      webpackConfig.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyWebpackPlugin</span>());\n      <span class="hljs-keyword">return</span> webpackConfig;\n    },\n  };\n};\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">withCustomPlugin</span>({\n  <span class="hljs-comment">/* å…¶ä»–é…ç½® */</span>\n});\n</code></pre>\n<hr>\n<h2>ğŸ¯ 2. ESLint æ’ä»¶ï¼ˆ@next/eslint-plugin-nextï¼‰</h2>\n<p>Next.js æä¾›çš„ ESLint è§„åˆ™é›†ï¼š</p>\n<pre><code class="language-bash">npm install -D eslint @next/eslint-plugin-next\n</code></pre>\n<pre><code class="language-js"><span class="hljs-comment">// .eslintrc.js</span>\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">extends</span>: [\n    <span class="hljs-string">&quot;next/core-web-vitals&quot;</span>,\n    <span class="hljs-string">&quot;next/typescript&quot;</span>, <span class="hljs-comment">// å¦‚æœä½¿ç”¨ TS</span>\n  ],\n};\n</code></pre>\n<hr>\n<h2>ğŸ¨ 3. æ ·å¼æ’ä»¶</h2>\n<h3>TailwindCSS æ’ä»¶</h3>\n<pre><code class="language-bash">npm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n</code></pre>\n<pre><code class="language-js"><span class="hljs-comment">// tailwind.config.js</span>\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">content</span>: [<span class="hljs-string">&quot;./src/**/*.{js,ts,jsx,tsx}&quot;</span>],\n  <span class="hljs-attr">plugins</span>: [<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@tailwindcss/forms&quot;</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@tailwindcss/typography&quot;</span>)],\n};\n</code></pre>\n<h3>Styled Components</h3>\n<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">compiler</span>: {\n    <span class="hljs-attr">styledComponents</span>: <span class="hljs-literal">true</span>,\n  },\n};\n</code></pre>\n<hr>\n<h2>ğŸ—ï¸ 4. è¿è¡Œæ—¶æ’ä»¶ï¼ˆRuntime Pluginsï¼‰</h2>\n<h3>App Router çš„ <code>instrumentation.ts</code></h3>\n<pre><code class="language-ts"><span class="hljs-comment">// src/instrumentation.ts</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&quot;production&quot;</span>) {\n    <span class="hljs-comment">// åˆå§‹åŒ– APMã€æ—¥å¿—ç­‰</span>\n    <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./lib/sentry&quot;</span>);\n  }\n}\n</code></pre>\n<h3>è‡ªå®šä¹‰ Documentï¼ˆpages/_document.jsï¼‰</h3>\n<pre><code class="language-js"><span class="hljs-comment">// pages/_document.js</span>\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">Document</span>, { <span class="hljs-title class_">Html</span>, <span class="hljs-title class_">Head</span>, <span class="hljs-title class_">Main</span>, <span class="hljs-title class_">NextScript</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;next/document&quot;</span>;\n\n<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDocument</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Document</span> {\n  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> (\n      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">Head</span>&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/custom.css&quot;</span> /&gt;</span>\n        <span class="hljs-tag">&lt;/<span class="hljs-name">Head</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">Main</span> /&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">NextScript</span> /&gt;</span>\n        <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n      <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span>\n    );\n  }\n}\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyDocument</span>;\n</code></pre>\n<hr>\n<h2>ğŸ”Œ 5. ç¬¬ä¸‰æ–¹æ’ä»¶ç”Ÿæ€</h2>\n<h3>æ•°æ®åº“æ’ä»¶</h3>\n<table>\n<thead>\n<tr>\n<th>æ’ä»¶</th>\n<th>åŠŸèƒ½</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>@prisma/nextjs-monorepo-workaround-plugin</code></td>\n<td>Prisma æ”¯æŒ</td>\n</tr>\n<tr>\n<td><code>@next-auth/prisma-adapter</code></td>\n<td>NextAuth é€‚é…å™¨</td>\n</tr>\n</tbody>\n</table>\n<h3>æ€§èƒ½ä¼˜åŒ–æ’ä»¶</h3>\n<ul>\n<li><code>next-optimized-images</code>ï¼šå›¾ç‰‡ä¼˜åŒ–</li>\n<li><code>next-compose-plugins</code>ï¼šæ’ä»¶ç»„åˆå·¥å…·</li>\n</ul>\n<hr>\n<h2>ğŸ§© 6. æ’ä»¶ç»„åˆæŠ€å·§</h2>\n<h3>ä½¿ç”¨ <code>next-compose-plugins</code></h3>\n<pre><code class="language-bash">npm install next-compose-plugins\n</code></pre>\n<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>\n<span class="hljs-keyword">const</span> withPlugins = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;next-compose-plugins&quot;</span>);\n<span class="hljs-keyword">const</span> withPWA = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;next-pwa&quot;</span>);\n<span class="hljs-keyword">const</span> withBundleAnalyzer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@next/bundle-analyzer&quot;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">withPlugins</span>(\n  [\n    [withPWA, { <span class="hljs-attr">dest</span>: <span class="hljs-string">&quot;public&quot;</span> }],\n    [withBundleAnalyzer, { <span class="hljs-attr">enabled</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">ANALYZE</span> === <span class="hljs-string">&quot;true&quot;</span> }],\n  ],\n  {\n    <span class="hljs-attr">reactStrictMode</span>: <span class="hljs-literal">true</span>,\n    <span class="hljs-attr">swcMinify</span>: <span class="hljs-literal">true</span>,\n  },\n);\n</code></pre>\n<hr>\n<h2>ğŸš¨ 7. å¸¸è§é™·é˜±</h2>\n<table>\n<thead>\n<tr>\n<th>é—®é¢˜</th>\n<th>è§£å†³æ–¹æ¡ˆ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æ’ä»¶é¡ºåºå½±å“</td>\n<td>ç”¨ <code>compose-plugins</code> æˆ–æ‰‹åŠ¨åµŒå¥—</td>\n</tr>\n<tr>\n<td>æ’ä»¶å†²çª</td>\n<td>æ£€æŸ¥ webpack é…ç½®åˆå¹¶</td>\n</tr>\n<tr>\n<td>ç±»å‹ä¸¢å¤±</td>\n<td>ä½¿ç”¨ <code>@types/next</code> æˆ–è‡ªå®šä¹‰ç±»å‹å£°æ˜</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2>ğŸ“‹ 8. å®Œæ•´é…ç½®ç¤ºä¾‹</h2>\n<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>\n<span class="hljs-keyword">const</span> withPWA = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;next-pwa&quot;</span>);\n<span class="hljs-keyword">const</span> withBundleAnalyzer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;@next/bundle-analyzer&quot;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">phase, { defaultConfig }</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> plugins = [\n    <span class="hljs-title function_">withPWA</span>({ <span class="hljs-attr">dest</span>: <span class="hljs-string">&quot;public&quot;</span> }),\n    <span class="hljs-title function_">withBundleAnalyzer</span>({ <span class="hljs-attr">enabled</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">ANALYZE</span> === <span class="hljs-string">&quot;true&quot;</span> }),\n  ];\n\n  <span class="hljs-keyword">return</span> plugins.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, plugin</span>) =&gt;</span> <span class="hljs-title function_">plugin</span>(acc), {\n    ...defaultConfig,\n    <span class="hljs-attr">reactStrictMode</span>: <span class="hljs-literal">true</span>,\n    <span class="hljs-attr">swcMinify</span>: <span class="hljs-literal">true</span>,\n    <span class="hljs-attr">images</span>: {\n      <span class="hljs-attr">domains</span>: [<span class="hljs-string">&quot;example.com&quot;</span>],\n    },\n    <span class="hljs-keyword">async</span> <span class="hljs-title function_">rewrites</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-keyword">return</span> [\n        {\n          <span class="hljs-attr">source</span>: <span class="hljs-string">&quot;/api/old/:path*&quot;</span>,\n          <span class="hljs-attr">destination</span>: <span class="hljs-string">&quot;/api/new/:path*&quot;</span>,\n        },\n      ];\n    },\n  });\n};\n</code></pre>\n<hr>\n<h2>ğŸ¯ æ€»ç»“</h2>\n<table>\n<thead>\n<tr>\n<th>æ’ä»¶ç±»å‹</th>\n<th>é…ç½®ä½ç½®</th>\n<th>ç¤ºä¾‹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>å®˜æ–¹æ’ä»¶</td>\n<td><code>next.config.js</code></td>\n<td><code>@next/mdx</code>, <code>next-pwa</code></td>\n</tr>\n<tr>\n<td>è‡ªå®šä¹‰æ’ä»¶</td>\n<td><code>next.config.js</code></td>\n<td>é«˜é˜¶å‡½æ•°</td>\n</tr>\n<tr>\n<td>ESLint</td>\n<td><code>.eslintrc.js</code></td>\n<td><code>@next/eslint-plugin-next</code></td>\n</tr>\n<tr>\n<td>æ ·å¼æ’ä»¶</td>\n<td>ç‹¬ç«‹é…ç½®æ–‡ä»¶</td>\n<td><code>tailwind.config.js</code></td>\n</tr>\n<tr>\n<td>è¿è¡Œæ—¶æ’ä»¶</td>\n<td><code>instrumentation.ts</code></td>\n<td>APM åˆå§‹åŒ–</td>\n</tr>\n<tr>\n<td>Document æ’ä»¶</td>\n<td><code>pages/_document.js</code></td>\n<td>å…¨å±€ HTML æ¨¡æ¿</td>\n</tr>\n</tbody>\n</table>\n<p><strong>è®°ä½æ ¸å¿ƒæ€æƒ³ï¼šNext.js çš„æ’ä»¶ = é€šè¿‡é…ç½®/çº¦å®šæ‰©å±•æ¡†æ¶ï¼Œè€Œéä¼ ç»Ÿ npm æ’ä»¶ï¼</strong></p>\n</div>'</script></body></html>