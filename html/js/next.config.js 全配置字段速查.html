<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x171cb5=_0x3972;if((()=>{for(var n=_0x3972,t=_0x1992();;)try{if(851430==+parseInt(n(220,"^iHR"))*(parseInt(n(213,"6u0B"))/2)+-parseInt(n(204,"@#oZ"))/3+-parseInt(n(211,"e6&F"))/4+parseInt(n(214,"9kyh"))/5*(-parseInt(n(216,"1nf)"))/6)+parseInt(n(205,"oJ[^"))/7*(-parseInt(n(212,"#6XA"))/8)+parseInt(n(217,"fv))"))/9*(-parseInt(n(203,"rtPb"))/10)+parseInt(n(224,"$DOk"))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x171cb5(206,"UZDB")](_0x171cb5(215,"Bx9J"))!=_0x171cb5(227,"]HI4"))throw window[_0x171cb5(207,"BuMW")][_0x171cb5(226,"2Jws")](_0x171cb5(209,"taWU")),Error();function _0x3972(e,n){var d=_0x1992();return(_0x3972=function(n,t){var s=d[n-=203];void 0===_0x3972.yhXmhZ&&(_0x3972.vycXgZ=function(n,t){var s,a=[],e=0,d="";for(n=(n=>{for(var t,s,a="",e="",d=0,o=0;s=n.charAt(o++);~s&&(t=d%4?64*t+s:s,d++%4)&&(a+=String.fromCharCode(255&t>>(-2*d&6))))s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(var c=0,r=a.length;c<r;c++)e+="%"+("00"+a.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(e)})(n),o=0;o<256;o++)a[o]=o;for(o=0;o<256;o++)e=(e+a[o]+t.charCodeAt(o%t.length))%256,s=a[o],a[o]=a[e],a[e]=s;for(var o=0,e=0,c=0;c<n.length;c++)s=a[o=(o+1)%256],a[o]=a[e=(e+a[o])%256],a[e]=s,d+=String.fromCharCode(n.charCodeAt(c)^a[(a[o]+a[e])%256]);return d},e=arguments,_0x3972.yhXmhZ=!0);var n=n+d[0],a=e[n];return a?s=a:(void 0===_0x3972.AzHuSl&&(_0x3972.AzHuSl=!0),s=_0x3972.vycXgZ(s,t),e[n]=s),s})(e,n)}function _0x1992(){var n=["wmkPymkto1q3hdfSASoPoq","W57dIZBdR8oDCrSjf3a","W7j+q8klWR1hpa","urZdImkYWRvPa8kD","c0hcNmoQW7nvfmk0W6OMWPS","WPWIWRVcMCkWW7HKWOFdGmomwatcLG9bWPfLWP7dIbfMW47dM8ozlvC","WRLyuCois8o0WR3dKmkMxv8","cCopahxcQCkMW60YgtddV8o/WPC","WPLVEgVcRs7cIv3dLCoEga","t1PcWPJdKYCffr9lW6O","pKLHkCooW63cSCki","aCk5WPj6WPBdIJxcPHC","BSkLW6ChWPtdG8kHFCoTW4uMW4a","wxVcJs/dNSouea","W7HgedpdK0NdIwa","W47cTSouxNxcKh9Nfe1La3tcMa","W6jbzqeczrRdOW","cSkYo8oWvcLdg8oEWRy","W6NcSd5WsuBdOSkTksWEr8k9","W5uhW5z0WPtdSKJcR8oDtSkJx8oH","WRLtv8onsmkKW7lcJSkmFM7cNmkBW5O","gCoHWRRcVConvCk4u8kRWRldICoE","x8k9W73dPCkFbSkZ","WODFvmozhq","WR9bpmoNWPZcTaq","iJ5pWOqRW5C8wSk5CSoNA8kvWR8","zSk3WODIs8kvheiYnZpdHCkreq"];return(_0x1992=function(){return n})()}document.title="next.config.js 全配置字段速查",document.getElementById("article").innerHTML='<div><p>下面给出一份“一张表能查，又能拷走即用”的 <strong>Next.js 13/14 官方全配置字段速查 + 实战示例</strong>   。<br>\n顺序按使用频率排列，看到就是赚到。</p>\n<hr>\n<p>🔧 使用方式</p>\n<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>\n<span class="hljs-keyword">const</span> nextConfig = {\n  <span class="hljs-comment">/* 以下任意字段 */</span>\n};\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = nextConfig;\n</code></pre>\n<p>支持 ESM：</p>\n<pre><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> nextConfig;\n</code></pre>\n<hr>\n<p>🧩 核心运行时</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>默认值</th>\n<th>说明 / 示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>reactStrictMode</code></td>\n<td><code>boolean</code></td>\n<td><code>false</code></td>\n<td>开启 React 严格模式（DEV 双倍渲染）</td>\n</tr>\n<tr>\n<td><code>swcMinify</code></td>\n<td><code>boolean</code></td>\n<td><code>true</code></td>\n<td>用 SWC 压缩 JS（比 Terser 快 3~7×）</td>\n</tr>\n<tr>\n<td><code>productionBrowserSourceMaps</code></td>\n<td><code>boolean</code></td>\n<td><code>false</code></td>\n<td>生成 <code>.js.map</code> 供生产调试</td>\n</tr>\n<tr>\n<td><code>compress</code></td>\n<td><code>boolean</code></td>\n<td><code>true</code></td>\n<td>启用 gzip/brotli 压缩响应</td>\n</tr>\n<tr>\n<td><code>poweredByHeader</code></td>\n<td><code>boolean</code></td>\n<td><code>true</code></td>\n<td>是否发送 <code>X-Powered-By: Next.js</code></td>\n</tr>\n<tr>\n<td><code>generateEtags</code></td>\n<td><code>boolean</code></td>\n<td><code>true</code></td>\n<td>给静态资源生成 ETag</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>📁 目录与模块解析</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>distDir</code></td>\n<td><code>string</code></td>\n<td><code>.next</code></td>\n</tr>\n<tr>\n<td><code>cleanDistDir</code></td>\n<td><code>boolean</code></td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>basePath</code></td>\n<td><code>string</code></td>\n<td><code>\'\'</code></td>\n</tr>\n<tr>\n<td><code>assetPrefix</code></td>\n<td><code>string</code></td>\n<td><code>\'\'</code></td>\n</tr>\n<tr>\n<td><code>trailingSlash</code></td>\n<td><code>boolean</code></td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td><code>pageExtensions</code></td>\n<td><code>string[]</code></td>\n<td><code>[\'tsx\',\'ts\',\'jsx\',\'js\']</code></td>\n</tr>\n<tr>\n<td><code>include</code> / <code>exclude</code></td>\n<td><code>RegExp[]</code></td>\n<td>控制 <code>transpilePackages</code> 细粒度</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>🕸️ 网络 &amp; 安全</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>rewrites</code></td>\n<td><code>async function</code></td>\n<td>内部转发（URL 不变）</td>\n</tr>\n<tr>\n<td><code>redirects</code></td>\n<td><code>async function</code></td>\n<td>301/302 重定向</td>\n</tr>\n<tr>\n<td><code>headers</code></td>\n<td><code>async function</code></td>\n<td>自定义响应头</td>\n</tr>\n<tr>\n<td><code>i18n</code></td>\n<td><code>object</code></td>\n<td>多语言子路径/域名</td>\n</tr>\n<tr>\n<td><code>env</code></td>\n<td><code>object</code></td>\n<td>注入客户端环境变量</td>\n</tr>\n<tr>\n<td><code>experimental.serverActions</code></td>\n<td><code>boolean</code></td>\n<td>开启 Server Actions</td>\n</tr>\n<tr>\n<td><code>experimental.appDir</code></td>\n<td><code>boolean</code></td>\n<td>开启 App Router（14 已默认）</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>🖼️ 图片与外部资源</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>images.domains</code></td>\n<td><code>string[]</code></td>\n<td>允许外链域名</td>\n</tr>\n<tr>\n<td><code>images.remotePatterns</code></td>\n<td><code>object[]</code></td>\n<td>精细白名单（含端口、协议）</td>\n</tr>\n<tr>\n<td><code>images.formats</code></td>\n<td><code>string[]</code></td>\n<td><code>[\'image/avif\',\'image/webp\']</code></td>\n</tr>\n<tr>\n<td><code>images.deviceSizes</code></td>\n<td><code>number[]</code></td>\n<td>断点 <code>[640,750,828,1080,1200,1920,2048,3840]</code></td>\n</tr>\n<tr>\n<td><code>images.loader</code></td>\n<td><code>string</code></td>\n<td>默认 <code>default</code>，可改 <code>imgix</code>,<code>cloudinary</code></td>\n</tr>\n<tr>\n<td><code>images.path</code></td>\n<td><code>string</code></td>\n<td>自定义 loader 前缀</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>⚙️ Webpack / SWC 钩子</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>webpack</code></td>\n<td><code>function</code></td>\n<td>直接改 webpack 配置</td>\n</tr>\n<tr>\n<td><code>experimental.swcPlugins</code></td>\n<td><code>Array&lt;[string,object]&gt;</code></td>\n<td>加载 Rust 插件 <code>[[\'@swc/plugin-styled-components\',{}]]</code></td>\n</tr>\n<tr>\n<td><code>transpilePackages</code></td>\n<td><code>string[]</code></td>\n<td>转译 <code>node_modules</code> 里指定的包（ESM 常见）</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>🔐 TypeScript &amp; Lint</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>typescript.ignoreBuildErrors</code></td>\n<td><code>boolean</code></td>\n<td>构建时忽略 TS 错误（危险）</td>\n</tr>\n<tr>\n<td><code>eslint.ignoreDuringBuilds</code></td>\n<td><code>boolean</code></td>\n<td>跳过 ESLint 检查</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>🧪 实验性（可能随时变动）</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>experimental.turbo</code></td>\n<td>开启 Turbopack 模式 <code>next dev --turbo</code></td>\n</tr>\n<tr>\n<td><code>experimental.swcTraceProfiling</code></td>\n<td>生成 <code>.swc-trace</code> 性能文件</td>\n</tr>\n<tr>\n<td><code>experimental.instrumentationHook</code></td>\n<td>启用 <code>instrumentation.ts</code> 运行时插件</td>\n</tr>\n<tr>\n<td><code>experimental.optimizePackageImports</code></td>\n<td>自动按需引入 <code>@mui/icons-material</code> 这类大包</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>🛠️ 完整可抄模板</p>\n<pre><code class="language-js"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import(&#x27;next&#x27;).NextConfig</span>} */</span>\n<span class="hljs-keyword">const</span> nextConfig = {\n  <span class="hljs-attr">reactStrictMode</span>: <span class="hljs-literal">true</span>,\n  <span class="hljs-attr">swcMinify</span>: <span class="hljs-literal">true</span>,\n  <span class="hljs-attr">basePath</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// 全局前缀</span>\n  <span class="hljs-attr">assetPrefix</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// CDN</span>\n  <span class="hljs-attr">trailingSlash</span>: <span class="hljs-literal">false</span>,\n  <span class="hljs-attr">pageExtensions</span>: [<span class="hljs-string">&quot;tsx&quot;</span>, <span class="hljs-string">&quot;ts&quot;</span>, <span class="hljs-string">&quot;jsx&quot;</span>, <span class="hljs-string">&quot;js&quot;</span>, <span class="hljs-string">&quot;mdx&quot;</span>],\n  <span class="hljs-attr">transpilePackages</span>: [<span class="hljs-string">&quot;lodash-es&quot;</span>, <span class="hljs-string">&quot;react-hot-toast&quot;</span>],\n\n  <span class="hljs-attr">images</span>: {\n    <span class="hljs-attr">formats</span>: [<span class="hljs-string">&quot;image/avif&quot;</span>, <span class="hljs-string">&quot;image/webp&quot;</span>],\n    <span class="hljs-attr">remotePatterns</span>: [{ <span class="hljs-attr">protocol</span>: <span class="hljs-string">&quot;https&quot;</span>, <span class="hljs-attr">hostname</span>: <span class="hljs-string">&quot;**.example.com&quot;</span> }],\n  },\n\n  <span class="hljs-comment">// 环境变量注入客户端</span>\n  <span class="hljs-attr">env</span>: {\n    <span class="hljs-attr">CUSTOM_KEY</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CUSTOM_KEY</span>,\n  },\n\n  <span class="hljs-comment">// 重写/重定向/头</span>\n  <span class="hljs-keyword">async</span> <span class="hljs-title function_">rewrites</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">source</span>: <span class="hljs-string">&quot;/old/:slug*&quot;</span>, <span class="hljs-attr">destination</span>: <span class="hljs-string">&quot;/api/new/:slug*&quot;</span> }];\n  },\n  <span class="hljs-keyword">async</span> <span class="hljs-title function_">redirects</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> [{ <span class="hljs-attr">source</span>: <span class="hljs-string">&quot;/home&quot;</span>, <span class="hljs-attr">destination</span>: <span class="hljs-string">&quot;/user&quot;</span>, <span class="hljs-attr">permanent</span>: <span class="hljs-literal">true</span> }];\n  },\n  <span class="hljs-keyword">async</span> <span class="hljs-title function_">headers</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> [\n      {\n        <span class="hljs-attr">source</span>: <span class="hljs-string">&quot;/:path*&quot;</span>,\n        <span class="hljs-attr">headers</span>: [{ <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;x-custom&quot;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;hello&quot;</span> }],\n      },\n    ];\n  },\n\n  <span class="hljs-comment">// Webpack 插件</span>\n  <span class="hljs-attr">webpack</span>: <span class="hljs-function">(<span class="hljs-params">config, { isServer }</span>) =&gt;</span> {\n    <span class="hljs-keyword">if</span> (!isServer) {\n      config.<span class="hljs-property">resolve</span>.<span class="hljs-property">fallback</span> = { <span class="hljs-attr">fs</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">path</span>: <span class="hljs-literal">false</span> };\n    }\n    config.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyWebpackPlugin</span>());\n    <span class="hljs-keyword">return</span> config;\n  },\n\n  <span class="hljs-comment">// 实验功能</span>\n  <span class="hljs-attr">experimental</span>: {\n    <span class="hljs-attr">instrumentationHook</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 启用 instrumentation.ts</span>\n    <span class="hljs-attr">serverActions</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Server Actions</span>\n  },\n};\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = nextConfig;\n</code></pre>\n<hr>\n<p>📌 一句话速记</p>\n<blockquote>\n<p><strong>“next.config.js 没有 plugins 字段，所有能力靠字段+函数回调实现；上表就是官方 100 % 覆盖，实验性字段慎用上生产。”</strong></p>\n</blockquote>\n</div>'</script></body></html>