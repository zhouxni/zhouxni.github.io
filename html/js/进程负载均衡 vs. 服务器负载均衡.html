<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x3064b7=_0x4b5f;function _0x4b5f(a,n){var o=_0x3a0b();return(_0x4b5f=function(n,s){var t=o[n-=147];void 0===_0x4b5f.DAmisi&&(_0x4b5f.IaoDXD=function(n,s){var t,r=[],a=0,o="";for(n=(n=>{for(var s,t,r="",a="",o=0,e=0;t=n.charAt(e++);~t&&(s=o%4?64*s+t:t,o++%4)&&(r+=String.fromCharCode(255&s>>(-2*o&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var d=0,p=r.length;d<p;d++)a+="%"+("00"+r.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(a)})(n),e=0;e<256;e++)r[e]=e;for(e=0;e<256;e++)a=(a+r[e]+s.charCodeAt(e%s.length))%256,t=r[e],r[e]=r[a],r[a]=t;for(var e=0,a=0,d=0;d<n.length;d++)t=r[e=(e+1)%256],r[e]=r[a=(a+r[e])%256],r[a]=t,o+=String.fromCharCode(n.charCodeAt(d)^r[(r[e]+r[a])%256]);return o},a=arguments,_0x4b5f.DAmisi=!0);var n=n+o[0],r=a[n];return r?t=r:(void 0===_0x4b5f.wMgKBG&&(_0x4b5f.wMgKBG=!0),t=_0x4b5f.IaoDXD(t,s),a[n]=t),t})(a,n)}function _0x3a0b(){var n=["BSo3W6e5pI7cQWjIWRi9walcLfxdSdSPWOJcVWdcPWrtW5a/","c8oUWQafWOBdMcldPq","WQ8PomksW4TVW5NdLJxcRdydWOGh","lCkLW4/dTSknWQpcS1fp","WR02W7eyWRn4amoCtbddOcZcSa","WRbPWQjIW4yjrG","WPxcI1RdLCoYWRhdOXaUW60nW5S","xefyWPbgravOAIy","WRpcNmontf3dPWtcIcy","WRLRENK2tmoecq","rMBdSmkrW7WJecrheqldOc4J","exJcLSklWPRdMt/dTW","W7DAkmojW5O4jmoWsG","W4NdUHVcHcPjC8oorq","xCo3WPxcPSogW6hdJar5W7OTESk0kW","EWW+f1fkWRpcHSkw","gSkCkmojWPy8WQmiW64D","rMpdUCkxW7qRE0zEpXddQq","gHiEW41xFGm","imome8k/WOq","tJ7cQSoVWOLBuG","WO/dOmk/nX45WOL1CgTOfSko","cmkhW7yhW7uZWOlcMCoWW5VdQ35q","cmoVW5/dPCo/pSoCC2dcJMOFW7q","c8kpW78cW7uZWOFdUCoOW7hdGg9jaq","W7xdGxWgWO7cTCkkybNcLIP/","c8oKW5FdPmo+n8k0C2hcRfaa","WQpdUSoziSkVWQXX"];return(_0x3a0b=function(){return n})()}if((()=>{for(var n=_0x4b5f,s=_0x3a0b();;)try{if(672878==+parseInt(n(161,"$9n3"))*(parseInt(n(169,"7sBy"))/2)+parseInt(n(148,"]*N("))/3+parseInt(n(158,"ivTn"))/4+parseInt(n(151,"NHz2"))/5*(-parseInt(n(165,"$^XH"))/6)+-parseInt(n(152,"#eqB"))/7*(parseInt(n(166,"SaG@"))/8)+parseInt(n(159,"ivTn"))/9*(parseInt(n(150,"]*N("))/10)+-parseInt(n(156,"hQ6["))/11)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x3064b7(153,"6&ko")](_0x3064b7(157,"lkQ%"))!=_0x3064b7(173,"uxwB"))throw window[_0x3064b7(163,"zvBC")][_0x3064b7(172,"$9n3")](_0x3064b7(154,"s9BZ")),Error();document.title="进程负载均衡 vs. 服务器负载均衡",document.getElementById("article").innerHTML='<div><h2><strong>1. 进程负载均衡（单机多进程）</strong></h2>\n<p><strong>适用场景</strong>  ：单台服务器上运行多个进程（如 Node.js 集群模式）<br>\n<strong>目标</strong>  ：充分利用多核 CPU，提高单机并发能力</p>\n<table>\n<thead>\n<tr>\n<th>特点</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>实现方式</strong></td>\n<td><code>cluster</code> 模块、PM2 <code>-i max</code></td>\n</tr>\n<tr>\n<td><strong>适用语言</strong></td>\n<td>Node.js、Python（Gunicorn）、Java（多线程）</td>\n</tr>\n<tr>\n<td><strong>优点</strong></td>\n<td>简单、无需额外服务器</td>\n</tr>\n<tr>\n<td><strong>缺点</strong></td>\n<td>单点故障（服务器挂了全挂）</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例（Node.js 集群模式）</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> cluster = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cluster&#x27;</span>);\n<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;os&#x27;</span>);\n\n<span class="hljs-keyword">if</span> (cluster.<span class="hljs-property">isMaster</span>) {\n  <span class="hljs-comment">// 主进程负责 fork 子进程</span>\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span>; i++) {\n    cluster.<span class="hljs-title function_">fork</span>();\n  }\n} <span class="hljs-keyword">else</span> {\n  <span class="hljs-comment">// 子进程运行实际服务</span>\n  <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./app.js&#x27;</span>);\n}\n</code></pre>\n<p><strong>PM2 实现（更简单）</strong>  ：</p>\n<pre><code class="language-sh">pm2 start app.js -i max  <span class="hljs-comment"># 自动按 CPU 核心数启动进程</span>\n</code></pre>\n<hr>\n<h2><strong>2. 服务器负载均衡（多机分布式）</strong></h2>\n<p><strong>适用场景</strong>  ：多台服务器共同提供服务（高并发、高可用）<br>\n<strong>目标</strong>  ：避免单点故障，提高系统容错能力</p>\n<table>\n<thead>\n<tr>\n<th>特点</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>实现方式</strong></td>\n<td>Nginx、HAProxy、AWS ALB</td>\n</tr>\n<tr>\n<td><strong>适用场景</strong></td>\n<td>微服务、大型 Web 应用</td>\n</tr>\n<tr>\n<td><strong>优点</strong></td>\n<td>高可用、可扩展性强</td>\n</tr>\n<tr>\n<td><strong>缺点</strong></td>\n<td>配置复杂、成本高</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例（Nginx 负载均衡）</strong>  ：</p>\n<pre><code class="language-nginx"><span class="hljs-section">http</span> {\n  <span class="hljs-section">upstream</span> myapp {\n    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.1.100:3000</span>;  <span class="hljs-comment"># 服务器 1</span>\n    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.1.101:3000</span>;  <span class="hljs-comment"># 服务器 2</span>\n    <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.1.102:3000</span>;  <span class="hljs-comment"># 服务器 3</span>\n  }\n\n  <span class="hljs-section">server</span> {\n    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;\n    <span class="hljs-section">location</span> / {\n      <span class="hljs-attribute">proxy_pass</span> http://myapp;  <span class="hljs-comment"># 请求转发到上游服务器</span>\n    }\n  }\n}\n</code></pre>\n<hr>\n<h2><strong>📌 对比总结</strong></h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th><strong>进程负载均衡</strong></th>\n<th><strong>服务器负载均衡</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>层级</strong></td>\n<td>单机（进程级）</td>\n<td>多机（服务器级）</td>\n</tr>\n<tr>\n<td><strong>工具</strong></td>\n<td>PM2、Cluster</td>\n<td>Nginx、HAProxy</td>\n</tr>\n<tr>\n<td><strong>适用规模</strong></td>\n<td>中小型应用</td>\n<td>大型分布式系统</td>\n</tr>\n<tr>\n<td><strong>高可用性</strong></td>\n<td>❌（单机故障全挂）</td>\n<td>✅（多机容错）</td>\n</tr>\n<tr>\n<td><strong>扩展性</strong></td>\n<td>有限（受限于单机 CPU）</td>\n<td>无限（可加服务器）</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>🚀 最佳实践</strong></h2>\n<ol>\n<li><strong>开发/小型项目</strong>   → <strong>PM2 多进程</strong>  （简单够用）</li>\n<li><strong>生产环境</strong>   → <strong>PM2 + Nginx</strong>  （单机多进程 + 多机负载均衡）</li>\n<li><strong>超大规模</strong>   → <strong>Kubernetes + 云负载均衡器</strong>  （自动扩缩容）</li>\n</ol>\n<p><strong>示例架构（PM2 + Nginx）</strong>  ：</p>\n<pre><code>用户请求 → Nginx（负载均衡） → 多台服务器 → 每台服务器运行 PM2 多进程\n</code></pre>\n</div>'</script></body></html>