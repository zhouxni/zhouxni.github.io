<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1657be=_0x40a1;if((()=>{for(var n=_0x40a1,t=_0x1e6e();;)try{if(501997==-parseInt(n(247,"JMAt"))*(parseInt(n(248,"Xgc8"))/2)+parseInt(n(244,"Rc)$"))/3*(-parseInt(n(250,"Zr4X"))/4)+-parseInt(n(245,"fBWt"))/5+-parseInt(n(242,"IV*g"))/6+parseInt(n(253,"WmJB"))/7*(-parseInt(n(240,"m)0F"))/8)+parseInt(n(230,"u7Wd"))/9+parseInt(n(237,"!^@o"))/10)break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x1657be(252,"QDpk")](_0x1657be(241,"p5gG"))!=_0x1657be(243,"8YpG"))throw window[_0x1657be(246,"!^@o")][_0x1657be(235,"Q23N")](_0x1657be(238,"dkz9")),Error();function _0x40a1(a,n){var o=_0x1e6e();return(_0x40a1=function(n,t){var s=o[n-=230];void 0===_0x40a1.nXtnXo&&(_0x40a1.bHMnAE=function(n,t){var s,e=[],a=0,o="";for(n=(n=>{for(var t,s,e="",a="",o=0,r=0;s=n.charAt(r++);~s&&(t=o%4?64*t+s:s,o++%4)&&(e+=String.fromCharCode(255&t>>(-2*o&6))))s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(var c=0,d=e.length;c<d;c++)a+="%"+("00"+e.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(a)})(n),r=0;r<256;r++)e[r]=r;for(r=0;r<256;r++)a=(a+e[r]+t.charCodeAt(r%t.length))%256,s=e[r],e[r]=e[a],e[a]=s;for(var r=0,a=0,c=0;c<n.length;c++)s=e[r=(r+1)%256],e[r]=e[a=(a+e[r])%256],e[a]=s,o+=String.fromCharCode(n.charCodeAt(c)^e[(e[r]+e[a])%256]);return o},a=arguments,_0x40a1.nXtnXo=!0);var n=n+o[0],e=a[n];return e?s=e:(void 0===_0x40a1.sraTLW&&(_0x40a1.sraTLW=!0),s=_0x40a1.bHMnAE(s,t),a[n]=s),s})(a,n)}function _0x1e6e(){var n=["ns3cVSkGgLVdVG","lw4TD8kCxmkgW516gM8","W5yoog/dSSodssyrrmkCWOzv","ASkSW4tdMbTcW4GB","vHldJCkEW4BcHSoz","WPzvWO/dU8ooy8oji28dqce","iCo+WQvDceNcK8ozWR/cM8kHWRdcKmo7","CMnszmkClXtdRt/dMGtcNCkugsCAEHBcV8oLW4b8dCkkW700","W5GFWPW5WQKwtmoaa8kaWQC/hSkR","WRHmWQFdGHpcH8oXE8kIW4VdLLBdIa","jCo8WOmFW6/dIG/dOsC","W5OBWP47WQ4FsmkCh8k/WRWQlG","lSkpwSotWRC","WOpcM2GvdGpcOMVdO8kxsSkT","BGxcMYyJECo7W6uqWRtcRJi","FmkMW7aosbhdImkh","dSk4ffldIqvQfG","j0xcPCkwW50RW5FcPCkwW6zh","E8kmWQRdTYensG","WRfRW4NcGhddS08","W5VcNCk0WOdcSCkYW7xcU3JcR3LYAW","wmk/kN9Gvha","WQvVW5VcHSkLWPGU","W4Hkwmo3qhJcMgRdLSk2mWm"];return(_0x1e6e=function(){return n})()}document.title="WebSocket 是有跨域限制的",document.getElementById("article").innerHTML='<div><p>是的，<strong>WebSocket 是有跨域限制的</strong>   ，但它和传统的 HTTP 跨域（CORS）机制不同。</p>\n<hr>\n<h3>✅ WebSocket 的跨域机制简述：</h3>\n<p>WebSocket 的跨域限制由<strong>浏览器</strong>   和<strong>服务器共同决定</strong>   ：</p>\n<ul>\n<li><strong>浏览器</strong>   ：在建立 WebSocket 连接时，浏览器会发送一个 <strong>Origin 头</strong>   ，表明请求来源。</li>\n<li><strong>服务器</strong>   ：可以选择是否接受这个来源的连接。</li>\n</ul>\n<hr>\n<h3>🔍 和 CORS 的区别：</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>HTTP CORS</th>\n<th>WebSocket</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>是否受同源策略限制</td>\n<td>✅ 是</td>\n<td>✅ 是</td>\n</tr>\n<tr>\n<td>是否需要服务器明确允许</td>\n<td>✅ 需要设置 <code>Access-Control-Allow-Origin</code></td>\n<td>✅ 需要服务器手动检查 <code>Origin</code> 头</td>\n</tr>\n<tr>\n<td>是否有预检请求</td>\n<td>✅ 有（如 <code>OPTIONS</code>）</td>\n<td>❌ 没有预检，直接握手</td>\n</tr>\n<tr>\n<td>是否支持凭据</td>\n<td>✅ 支持</td>\n<td>✅ 支持（通过 <code>origin</code> 和 cookies）</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3>✅ 服务器如何处理跨域 WebSocket？</h3>\n<p>服务器在握手阶段可以检查 <code>Origin</code> 头：</p>\n<pre><code class="language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/chat</span> <span class="hljs-meta">HTTP/1.1</span>\n<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>server.example.com\n<span class="hljs-attribute">Upgrade</span><span class="hljs-punctuation">: </span>websocket\n<span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>Upgrade\n<span class="hljs-attribute">Origin</span><span class="hljs-punctuation">: </span>http://client.example.com\n</code></pre>\n<p>服务器可以根据 <code>Origin</code> 决定是否接受连接：</p>\n<pre><code class="language-python"><span class="hljs-comment"># 伪代码示例</span>\n<span class="hljs-keyword">if</span> request.headers.get(<span class="hljs-string">&quot;Origin&quot;</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> allowed_origins:\n    <span class="hljs-keyword">return</span> <span class="hljs-number">403</span> Forbidden\n</code></pre>\n<hr>\n<h3>✅ 总结一句话：</h3>\n<blockquote>\n<p><strong>WebSocket 有跨域限制，但不像 HTTP 那样有自动的 CORS 机制，需要服务器手动检查 <code>Origin</code> 头来决定是否允许连接。</strong></p>\n</blockquote>\n<p>如果你有具体的使用场景（比如 Node.js、Spring、Nginx），我可以给你更具体的配置建议。</p>\n</div>'</script></body></html>