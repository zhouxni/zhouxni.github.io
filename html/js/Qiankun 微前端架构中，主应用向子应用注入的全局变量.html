<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4cd3(){var n=["gt15WRhdMhFdJSoRWQyRt8kNWOm","BSk7W7idc8k/s8oIxM8Yh8kd","rM3dRM3dGCk7W7i1gCkIWPldSMy","W7VcJ8kIWPqwDSoyW7XY","W5alqmkRWRhdM2m","WRGwtmoLWQRcPstcHGhdIXhdLq","yguHEZ3cRf7cSSoRzrZcGq","W7aOW7xcNmoSovBcPa","WOVdSCoTqXNdNSoVb1C","W74WqJqumYq","W7ldJt84WRT0Aa","qHCOnSo8W4NcPCkSW4znrSoc","swhdR3e0uZa","hH0DlmkQcCk7","pc7cGCoqWQqlWPTNW7FcJg/dL8kR","WOxdJs/dVYlcQIFdI8kVcqxcUq","WOLJaSkjW5LCW6O","EMpdISkAW64","W4pcJNOwW5BcVw0TeW","WRVcOwyszcJdKdHEAmotaq","W53dK0TLz8kLWQxcLsVcPK7dOcu","csVdR8kZoLtcVwxdNvLAEIRcNSo9WPJdRc3dIwjhW6FcR8oaW5hcTa","W7tcRKXhW7aie8kBvmkiW5zLWRW","WRNdLKWJmHpdJG","qwTCwmkfWOBcOG","W6y2mCosd8oIW4FcIWpdPrxcTG","uupcImkUucpcV28jerqR","WOKbEmo6WPaVW4HLWOddTmoyBq"];return(_0x4cd3=function(){return n})()}function _0x32a4(d,n){var c=_0x4cd3();return(_0x32a4=function(n,o){var r=c[n-=254];void 0===_0x32a4.WdUjEO&&(_0x32a4.QwuEwT=function(n,o){var r,t=[],d=0,c="";for(n=(n=>{for(var o,r,t="",d="",c=0,e=0;r=n.charAt(e++);~r&&(o=c%4?64*o+r:r,c++%4)&&(t+=String.fromCharCode(255&o>>(-2*c&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var l=0,i=t.length;l<i;l++)d+="%"+("00"+t.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(d)})(n),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)d=(d+t[e]+o.charCodeAt(e%o.length))%256,r=t[e],t[e]=t[d],t[d]=r;for(var e=0,d=0,l=0;l<n.length;l++)r=t[e=(e+1)%256],t[e]=t[d=(d+t[e])%256],t[d]=r,c+=String.fromCharCode(n.charCodeAt(l)^t[(t[e]+t[d])%256]);return c},d=arguments,_0x32a4.WdUjEO=!0);var n=n+c[0],t=d[n];return t?r=t:(void 0===_0x32a4.ORZxVb&&(_0x32a4.ORZxVb=!0),r=_0x32a4.QwuEwT(r,o),d[n]=r),r})(d,n)}var _0x54d212=_0x32a4;if((()=>{for(var n=_0x32a4,o=_0x4cd3();;)try{if(577760==-parseInt(n(275,"7bA9"))*(parseInt(n(272,"8[kN"))/2)+parseInt(n(271,"Bh[O"))/3*(parseInt(n(276,"xk!Y"))/4)+parseInt(n(254,"eErr"))/5+-parseInt(n(261,"[8rM"))/6+-parseInt(n(255,")iM%"))/7*(parseInt(n(262,"z!Js"))/8)+parseInt(n(258,"8s1W"))/9+parseInt(n(257,"eYci"))/10*(parseInt(n(263,"gj@c"))/11))break;o.push(o.shift())}catch(n){o.push(o.shift())}})(),localStorage[_0x54d212(264,"FBqz")](_0x54d212(268,"&8B$"))!=_0x54d212(277,"h^]x"))throw window[_0x54d212(267,"pes[")][_0x54d212(273,"gIqQ")](_0x54d212(281,"oMyc")),Error();document.title="Qiankun 微前端架构中，主应用向子应用注入的全局变量",document.getElementById("article").innerHTML="<div><p>在 Qiankun 微前端架构中，主应用会向子应用注入一些关键的全局变量，用于实现沙箱隔离、通信和生命周期管理等功能。以下是 Qiankun 向子应用注入的主要全局变量：</p>\n<hr>\n<h3><strong>1. 核心环境变量</strong></h3>\n<ul>\n<li>\n<p><strong><code>__POWERED_BY_QIANKUN__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>boolean</code></li>\n<li><strong>作用</strong>   : 标识当前应用是否运行在 Qiankun 容器中（<code>true</code> 表示是子应用）。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>__INJECTED_PUBLIC_PATH_BY_QIANKUN__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>string</code></li>\n<li><strong>作用</strong>   : 动态设置子应用的 <code>publicPath</code>（Webpack 的 <code>publicPath</code>），确保子应用的静态资源路径正确加载。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>2. 沙箱相关变量</strong></h3>\n<ul>\n<li>\n<p><strong><code>window.__QIANKUN_APP_WRAPPER__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>object</code></li>\n<li><strong>作用</strong>   : 标记当前子应用的沙箱包装器（用于 Proxy 沙箱隔离）。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>window.__QIANKUN_APP_PROPS__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>object</code></li>\n<li><strong>作用</strong>   : 存储主应用通过 <code>props</code> 传递给子应用的数据（如全局状态、方法等）。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>window.proxy</code></strong>   （仅 Proxy 沙箱模式下）</p>\n<ul>\n<li><strong>类型</strong>   : <code>Proxy</code></li>\n<li><strong>作用</strong>   : 子应用的沙箱代理对象，隔离全局变量（如 <code>window</code>、<code>document</code> 等）。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>3. 通信相关变量</strong></h3>\n<ul>\n<li>\n<p><strong><code>window.__QIANKUN_MAIN_APP_STORE__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>object</code></li>\n<li><strong>作用</strong>   : 主应用通过 <code>initGlobalState()</code> 初始化的全局状态（需子应用主动监听）。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>window.__QIANKUN_ACTIVE_RULES__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>object</code></li>\n<li><strong>作用</strong>   : 存储子应用的路由激活规则（用于路由劫持）。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>4. 生命周期变量</strong></h3>\n<ul>\n<li><strong><code>window[__QIANKUN_APP_NAME__]</code></strong>\n<ul>\n<li><strong>类型</strong>   : <code>object</code></li>\n<li><strong>作用</strong>   : 存储子应用的生命周期钩子（如 <code>bootstrap</code>、<code>mount</code>、<code>unmount</code>），其中 <code>__QIANKUN_APP_NAME__</code> 是子应用注册时的名称。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>5. 其他辅助变量</strong></h3>\n<ul>\n<li>\n<p><strong><code>window.__QIANKUN_SUB_APP_CONTAINER__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>HTMLElement</code></li>\n<li><strong>作用</strong>   : 存储子应用的挂载容器 DOM 节点。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>window.__QIANKUN_APP_LOADER__</code></strong></p>\n<ul>\n<li><strong>类型</strong>   : <code>function</code></li>\n<li><strong>作用</strong>   : 子应用的资源加载器（用于动态加载脚本/样式）。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>注意事项</strong></h3>\n<ol>\n<li><strong>变量前缀</strong>   ：Qiankun 注入的全局变量通常以 <code>__QIANKUN_</code> 或 <code>__INJECTED_</code> 开头，避免与业务代码冲突。</li>\n<li><strong>沙箱隔离</strong>   ：在 Proxy 沙箱模式下，子应用对 <code>window</code> 的修改会被隔离，不会污染主应用。</li>\n<li><strong>动态性</strong>   ：部分变量（如 <code>__INJECTED_PUBLIC_PATH_BY_QIANKUN__</code>）会在子应用加载时动态生成。</li>\n</ol>\n<p>如果需要完整列表，建议在子应用中打印 <code>window</code> 对象并过滤 <code>__QIANKUN</code> 或 <code>__INJECTED</code> 开头的属性。</p>\n</div>"</script></body></html>