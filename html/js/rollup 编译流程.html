<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x5907ce=_0x1812;if((()=>{for(var n=_0x1812,s=_0x559d();;)try{if(670679==-parseInt(n(170,"h4wN"))*(parseInt(n(177,"vo[X"))/2)+parseInt(n(162,"5]0O"))/3+parseInt(n(158,"Txmz"))/4+parseInt(n(175,")]Cz"))/5+parseInt(n(174,"Yb#N"))/6+-parseInt(n(180,"h4wN"))/7*(parseInt(n(160,"vo[X"))/8)+parseInt(n(166,"0%w8"))/9)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x5907ce(178,"Yb#N")](_0x5907ce(179,"YEAo"))!=_0x5907ce(176,"@8[u"))throw window[_0x5907ce(165,"$*T#")][_0x5907ce(163,"ZA38")](_0x5907ce(161,"q(g8")),Error();function _0x1812(a,n){var r=_0x559d();return(_0x1812=function(n,s){var l=r[n-=158];void 0===_0x1812.nyVxhN&&(_0x1812.GzpnNj=function(n,s){var l,o=[],a=0,r="";for(n=(n=>{for(var s,l,o="",a="",r=0,t=0;l=n.charAt(t++);~l&&(s=r%4?64*s+l:l,r++%4)&&(o+=String.fromCharCode(255&s>>(-2*r&6))))l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(l);for(var p=0,c=o.length;p<c;p++)a+="%"+("00"+o.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(a)})(n),t=0;t<256;t++)o[t]=t;for(t=0;t<256;t++)a=(a+o[t]+s.charCodeAt(t%s.length))%256,l=o[t],o[t]=o[a],o[a]=l;for(var t=0,a=0,p=0;p<n.length;p++)l=o[t=(t+1)%256],o[t]=o[a=(a+o[t])%256],o[a]=l,r+=String.fromCharCode(n.charCodeAt(p)^o[(o[t]+o[a])%256]);return r},a=arguments,_0x1812.nyVxhN=!0);var n=n+r[0],o=a[n];return o?l=o:(void 0===_0x1812.pTDZfp&&(_0x1812.pTDZfp=!0),l=_0x1812.GzpnNj(l,s),a[n]=l),l})(a,n)}function _0x559d(){var n=["WOZcGSkxWP1gWQ4hW5as","WPKCW6vHW7ldKmkEgajpqSkRWQi","W77dTrNdGSkvEabGamohnte","W4vMDIiCW7C0W6RcVHyG","vmkaWPhcSxhcT8oG","EhHvlJJcGtZdPCoilsKgl8kzfCkrBHu6WPhcVhxcRwqRFW","aumlWPXUbCkZWRbDiCo6W5bS","m8koW57dK8oeaSoa","vCogW7ddLIeIWPKBWP0Fg8k4WPG","WPeXixvyW6W3W48","s8o7WRlcLYhcM0WunwihiSoR","DrSNlfmFW5BcMmo4WPdcHSk+","A8kSWP7cQ8oCW7ZcRSk9ffxdTCk3kW","WQFcNx5gpCkrdKJdKb/cVG","WP8zWQ85WO/cVSoTpa","W5iSgIOmW5iobCo+WQeRW6am","ECkkW63dHSoMj8o1","WQddTYraWOBdNCo0WRJdSmoVW67cUSog","AmoypYZcMmkgWQK/WOCXWQSDjq","WOVdMfZdRCoAAuhcN8kAW7tcOW","pvLIBr0","xSoqW6RdSadcHmosW5xcRrqC","o8kpEfZdMmotW7y"];return(_0x559d=function(){return n})()}document.title="rollup 编译流程",document.getElementById("article").innerHTML='<div><p>Rollup 是一个 JavaScript 模块打包器，专注于将小块代码编译成大块复杂的代码，如库或应用程序。其编译流程可以详细解析如下：</p>\n<h3>1. 初始化阶段</h3>\n<ul>\n<li><strong>解析命令行参数和配置文件</strong>  ：Rollup 会首先解析命令行参数和配置文件（如 <code>rollup.config.js</code>），以获取打包所需的输入、输出、插件等信息。</li>\n<li><strong>设置插件和加载器</strong>  ：根据配置，Rollup 会加载所需的插件和加载器，以便在后续的处理过程中使用。</li>\n</ul>\n<h3>2. 构建阶段</h3>\n<ul>\n<li><strong>解析入口文件</strong>  ：Rollup 从指定的入口文件开始，解析该文件及其所有依赖项。</li>\n<li><strong>构建模块依赖图</strong>  ：通过解析入口文件及其依赖项，Rollup 会构建一个模块依赖图，该图描述了模块之间的依赖关系。</li>\n</ul>\n<h3>3. 打包阶段</h3>\n<ul>\n<li><strong>遍历和连接模块</strong>  ：根据模块依赖图，Rollup 会遍历所有模块，并将它们连接在一起，形成最终的输出代码。</li>\n<li><strong>代码优化</strong>  ：在打包过程中，Rollup 会进行一系列优化操作，如 Tree Shaking（移除未使用的代码）等，以减小输出文件的大小。</li>\n</ul>\n<h3>4. 输出阶段</h3>\n<ul>\n<li><strong>写入文件系统</strong>  ：Rollup 会将打包后的代码写入到指定的输出文件中。输出文件的格式可以是 ES 模块、CommonJS、UMD 等，具体取决于配置。</li>\n</ul>\n<h3>5. 插件支持</h3>\n<ul>\n<li><strong>灵活的插件系统</strong>  ：Rollup 提供了灵活的插件系统，允许用户通过插件来扩展其功能。例如，可以使用插件来支持额外的模块格式、进行代码转换、优化等。</li>\n</ul>\n<h3>6. 示例配置</h3>\n<p>以下是一个简单的 Rollup 配置文件示例：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> commonjs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-commonjs&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>, <span class="hljs-comment">// 入口文件</span>\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;dist/bundle.js&#x27;</span>, <span class="hljs-comment">// 输出文件</span>\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;umd&#x27;</span>, <span class="hljs-comment">// 输出格式</span>\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;MyBundle&#x27;</span> <span class="hljs-comment">// 全局变量名（对于 UMD 和 IIFE 格式）</span>\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">commonjs</span>() <span class="hljs-comment">// 使用 commonjs 插件来支持 CommonJS 模块</span>\n  ]\n};\n</code></pre>\n<h3>7. 编译流程总结</h3>\n<ul>\n<li><strong>初始化</strong>  ：解析命令行参数和配置文件，设置插件和加载器。</li>\n<li><strong>构建</strong>  ：解析入口文件，构建模块依赖图。</li>\n<li><strong>打包</strong>  ：遍历和连接模块，进行代码优化。</li>\n<li><strong>输出</strong>  ：将打包后的代码写入文件系统。</li>\n<li><strong>插件</strong>  ：通过插件扩展 Rollup 的功能。</li>\n</ul>\n<p>Rollup 的编译流程高效且灵活，特别适合用于打包 JavaScript 库和应用程序。通过合理的配置和插件使用，可以轻松地实现代码的优化和打包。</p>\n</div>'</script></body></html>