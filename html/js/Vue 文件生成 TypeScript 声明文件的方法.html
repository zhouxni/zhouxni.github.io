<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x47ae(){var s=["W6v4m8kVWQVdOJGRWOW","WO5YW5/dP8o/W4zGW59DW4JdUHu","WRHwW5xdNfa","eLy1CJ/dMKhdJ8oHva","WQpdJCkeBSkwgmoIrsCIeI8G","W73dRSowWQNdU8kdWOzBWPXBq8oGW5OyW71eW7VdKxJdMYNdHupcJ8oOWRq","WQZcR8kwW6RcVmoGW4OHWQn3Da","W6NdRmkSf0bqt8kqWOVdSW","wSkyhSkgxmkmsqxdH8k2W7FcPdy","fGjZW4SRW7i9uM3dQcdcOCo7","W6FdP8kQgJ8glmk9WQ/dGSkHshy","kmkHW4bNW4pdRei2p3SWWRm","uCo5ACkwwNdcUmkcdSkFl8o0","gmo3EXJdPdPEomoL","jLbrWPNdSxNcKa","iNvDg8oaWQvQi8obW6JcH2y","W7WaWQiyC8klvmoU","E2pcKeJdLSkuW6FdISoDDx4jWQu","WPpcJSo+bmogtCkYfa","uCo/zmkCxHhcOCkHi8k/ja","WO9ZW5NdRCo0W4aKW5vYW7JdVJvR","WQKEWO7dNmkkWQXHW4RdMq","WQiwW67dQmkaWQnlW5m","W5BcKNpcMmkXkCkb"];return(_0x47ae=function(){return s})()}function _0x5de3(l,s){var p=_0x47ae();return(_0x5de3=function(s,n){var a=p[s-=213];void 0===_0x5de3.qAgdbC&&(_0x5de3.ulBynR=function(s,n){var a,t=[],l=0,p="";for(s=(s=>{for(var n,a,t="",l="",p=0,e=0;a=s.charAt(e++);~a&&(n=p%4?64*n+a:a,p++%4)&&(t+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,o=t.length;c<o;c++)l+="%"+("00"+t.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(s),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)l=(l+t[e]+n.charCodeAt(e%n.length))%256,a=t[e],t[e]=t[l],t[l]=a;for(var e=0,l=0,c=0;c<s.length;c++)a=t[e=(e+1)%256],t[e]=t[l=(l+t[e])%256],t[l]=a,p+=String.fromCharCode(s.charCodeAt(c)^t[(t[e]+t[l])%256]);return p},l=arguments,_0x5de3.qAgdbC=!0);var s=s+p[0],t=l[s];return t?a=t:(void 0===_0x5de3.kHPfNB&&(_0x5de3.kHPfNB=!0),a=_0x5de3.ulBynR(a,n),l[s]=a),a})(l,s)}var _0x8d13d0=_0x5de3;if((()=>{for(var s=_0x5de3,n=_0x47ae();;)try{if(358406==+parseInt(s(226,"2vHo"))+-parseInt(s(222,"o2yw"))/2+parseInt(s(223,"3LvV"))/3*(-parseInt(s(232,"2kdG"))/4)+-parseInt(s(235,"86oO"))/5+parseInt(s(227,"2kdG"))/6+-parseInt(s(234,"rD(s"))/7*(parseInt(s(228,"^t&S"))/8)+parseInt(s(217,"&aeS"))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x8d13d0(221,"6dCv")](_0x8d13d0(231,"&*%Y"))!=_0x8d13d0(233,"#BT^"))throw window[_0x8d13d0(225,"A#r0")][_0x8d13d0(230,"HIVU")](_0x8d13d0(236,"uOzt")),Error();document.title="Vue 文件生成 TypeScript 声明文件的方法",document.getElementById("article").innerHTML='<div><p>对于 Vue 单文件组件（<code>.vue</code> 文件），生成 TypeScript 声明文件（<code>.d.ts</code>）需要特殊处理，因为 Vue SFC 不是标准的 TypeScript 文件。以下是几种实现方式：</p>\n<h2>1. 使用 Volar 和 <code>vue-tsc</code></h2>\n<p>这是 Vue 3 官方推荐的方式：</p>\n<ol>\n<li>安装依赖：</li>\n</ol>\n<pre><code class="language-sh">npm install -D vue-tsc\n</code></pre>\n<ol start="2">\n<li>在 <code>tsconfig.json</code> 中添加配置：</li>\n</ol>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;types&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;vite/client&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;vue/ref-macros&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;declaration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;emitDeclarationOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist/types&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;include&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/**/*.ts&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;src/**  /*.d.ts&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;src/**/*.tsx&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;src/**  /*.vue&quot;</span><span class="hljs-punctuation">]</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<ol start="3">\n<li>运行命令生成声明文件：</li>\n</ol>\n<pre><code class="language-sh">vue-tsc --declaration --emitDeclarationOnly\n</code></pre>\n<h2>2. 使用 Vite 插件</h2>\n<p>在 <code>vite.config.ts</code> 中配置：</p>\n<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span>\n<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-vue&#x27;</span>\n<span class="hljs-keyword">import</span> dts <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-dts&#x27;</span>\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">vue</span>(),\n    <span class="hljs-title function_">dts</span>({\n      <span class="hljs-attr">include</span>: [<span class="hljs-string">&#x27;src/**/*.ts&#x27;</span>, <span class="hljs-string">&#x27;src/**  /*.d.ts&#x27;</span>, <span class="hljs-string">&#x27;src/**/*.tsx&#x27;</span>, <span class="hljs-string">&#x27;src/**  /*.vue&#x27;</span>],\n      <span class="hljs-attr">outDir</span>: <span class="hljs-string">&#x27;dist/types&#x27;</span>\n    })\n  ]\n})\n</code></pre>\n<h2>3. 手动声明文件</h2>\n<p>对于简单的组件，可以手动创建 <code>.d.ts</code> 文件：</p>\n<pre><code class="language-typescript"><span class="hljs-comment">// src/components/MyComponent.vue.d.ts</span>\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DefineComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>\n\n<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">MyComponent</span>: <span class="hljs-title class_">DefineComponent</span>&lt;\n  {\n    <span class="hljs-attr">msg</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-title class_">StringConstructor</span>\n      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>\n    }\n  },\n  {},\n  <span class="hljs-built_in">any</span>\n&gt;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyComponent</span>\n</code></pre>\n<h2>4. 使用 <code>@vuedx/typecheck</code></h2>\n<ol>\n<li>安装：</li>\n</ol>\n<pre><code class="language-sh">npm install -D @vuedx/typecheck\n</code></pre>\n<ol start="2">\n<li>运行：</li>\n</ol>\n<pre><code class="language-sh">npx @vuedx/typecheck --declaration --emitDeclarationOnly --outDir dist/types\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li><strong>Vue 版本</strong>  ：\n<ul>\n<li>Vue 3 使用 <code>DefineComponent</code> 类型</li>\n<li>Vue 2 需要 <code>@vue/composition-api</code> 或 <code>vue-property-decorator</code></li>\n</ul>\n</li>\n<li><strong>模板类型推断</strong>  ：\n<ul>\n<li>确保在 <code>tsconfig.json</code> 中包含 <code>&quot;vue/ref-macros&quot;</code> 类型</li>\n</ul>\n</li>\n<li><strong>CSS/SCSS 模块</strong>  ：\n对于样式模块，需要额外的类型声明：<pre><code class="language-typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;*.module.css&#x27;</span> {\n  <span class="hljs-keyword">const</span> <span class="hljs-attr">classes</span>: { <span class="hljs-keyword">readonly</span> [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> }\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> classes\n}\n</code></pre>\n</li>\n<li><strong>Props 类型</strong>  ：\n<ul>\n<li>使用 <code>defineProps</code> 时，确保类型能被正确提取</li>\n</ul>\n</li>\n</ol>\n<h2>示例</h2>\n<h3>输入 (MyButton.vue)</h3>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript">\ndefineProps&lt;{\n  variant?: <span class="hljs-string">&#x27;primary&#x27;</span> | <span class="hljs-string">&#x27;secondary&#x27;</span>\n  size?: <span class="hljs-string">&#x27;sm&#x27;</span> | <span class="hljs-string">&#x27;md&#x27;</span> | <span class="hljs-string">&#x27;lg&#x27;</span>\n  disabled?: boolean\n}&gt;()\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<h3>输出 (MyButton.d.ts)</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DefineComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>\n\n<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">_default</span>: <span class="hljs-title class_">DefineComponent</span>&lt;\n  {\n    <span class="hljs-attr">variant</span>?: <span class="hljs-string">&#x27;primary&#x27;</span> | <span class="hljs-string">&#x27;secondary&#x27;</span>\n    <span class="hljs-attr">size</span>?: <span class="hljs-string">&#x27;sm&#x27;</span> | <span class="hljs-string">&#x27;md&#x27;</span> | <span class="hljs-string">&#x27;lg&#x27;</span>\n    <span class="hljs-attr">disabled</span>?: <span class="hljs-built_in">boolean</span>\n  },\n  {},\n  <span class="hljs-built_in">any</span>\n&gt;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> _default\n</code></pre>\n<h2>总结</h2>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>适用场景</th>\n<th>特点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>vue-tsc</code></td>\n<td>Vue 3 项目</td>\n<td>官方推荐，支持 <code>&lt;script setup&gt;</code></td>\n</tr>\n<tr>\n<td>Vite 插件</td>\n<td>Vite 项目</td>\n<td>集成构建流程</td>\n</tr>\n<tr>\n<td>手动声明</td>\n<td>简单组件</td>\n<td>完全控制类型定义</td>\n</tr>\n<tr>\n<td><code>@vuedx</code></td>\n<td>复杂项目</td>\n<td>提供更多类型检查功能</td>\n</tr>\n</tbody>\n</table>\n<p>选择适合你项目的方法，确保 Vue 组件能提供完整的类型支持。</p>\n</div>'</script></body></html>