<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x5939c4=_0x207c;function _0x360f(){var s=["WRFcHmoyWPxdI8kmoSoBWRddKW","WQNcTSoxW57dU8kdW7tdHXJcLCoiW7vu","EIdcHwtdVuCf","gthcS8ocw8o3DCoIlmknwc9r","rKJcLSoyWOtcOmk4W5G","fCoymIxcUhFcVCk0AHKwW4FcHq","WQWFn8oaq0bEWP/dGq","hWZcR8oEWRtdVmowWQBcM8ouoK5XW4qxBConWQ7cRSkFW4zczSkYa1a","WQpdTJjtA8kmW7yHWONcTmoWWRi","vLKCW5ii","W63dVhvIWP3cUCoacSksW4HfWR/cQCo6","nK1/W4OOWP/dUa","aCkjW6JcSmobW49CCmogW6jqfq","xdBdI8oCWQxdGsSaoG","WQGMA8oOW7VdSSofiCoTWOJcOfi","Ar7cV3a4wSodWR/dL8o4r8k7","C8opW503tqW9DSogruHN","EmkYWRb0q8oVW4PJqdxcIZ7dVK8","s8o1W7RcUXf1r3zyW5y","WORdQSkVt8oEAfnKjmoc","WPZcNN0vq3RdPa","u8olsCkQgSktWPBdOZC","fXldMZDBa8ogmG","WQlcS3aJf8o2W5a","hJ3cSmodwmo3FCo8iCkjzHvU","ESokW5iZlfy4qmo6sa","W5FdIJ9nfYNdGhzlWPJdLNm","tCoJW67dNmkInL3cKW"];return(_0x360f=function(){return s})()}function _0x207c(e,s){var t=_0x360f();return(_0x207c=function(s,n){var a=t[s-=203];void 0===_0x207c.TpVvgj&&(_0x207c.bJyfiB=function(s,n){var a,l=[],e=0,t="";for(s=(s=>{for(var n,a,l="",e="",t=0,o=0;a=s.charAt(o++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,p=l.length;c<p;c++)e+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(e)})(s),o=0;o<256;o++)l[o]=o;for(o=0;o<256;o++)e=(e+l[o]+n.charCodeAt(o%n.length))%256,a=l[o],l[o]=l[e],l[e]=a;for(var o=0,e=0,c=0;c<s.length;c++)a=l[o=(o+1)%256],l[o]=l[e=(e+l[o])%256],l[e]=a,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[o]+l[e])%256]);return t},e=arguments,_0x207c.TpVvgj=!0);var s=s+t[0],l=e[s];return l?a=l:(void 0===_0x207c.fwmBAt&&(_0x207c.fwmBAt=!0),a=_0x207c.bJyfiB(a,n),e[s]=a),a})(e,s)}if((()=>{for(var s=_0x207c,n=_0x360f();;)try{if(343133==+parseInt(s(206,"s(Px"))*(-parseInt(s(216,"*MwE"))/2)+parseInt(s(204,"t@gs"))/3+-parseInt(s(211,"yJYl"))/4*(-parseInt(s(214,"Z(s8"))/5)+parseInt(s(217,"rVM4"))/6+parseInt(s(209,"YJK]"))/7*(-parseInt(s(228,"^HwN"))/8)+-parseInt(s(221,"5j!8"))/9+-parseInt(s(210,"i)r^"))/10*(-parseInt(s(226,"PBYp"))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x5939c4(218,"*Y^h")](_0x5939c4(222,"dS$W"))!=_0x5939c4(225,"OyKO"))throw window[_0x5939c4(215,"(Q9g")][_0x5939c4(208,"Z(s8")](_0x5939c4(223,"DX5p")),Error();document.title="File API",document.getElementById("article").innerHTML='<div><p>JavaScript 的 File API 提供了处理文件和文件夹的功能，使开发者能够在浏览器中直接操作文件，而无需依赖服务器。以下是关于 JavaScript File API 的一些关键功能和用法的详细介绍：</p>\n<h3>1. <code>File</code> 对象</h3>\n<ul>\n<li><strong>概述</strong>  ：<code>File</code> 对象代表用户选择的文件，或者通过拖放操作获得的文件。它继承自 <code>Blob</code> 对象，因此具有 <code>Blob</code> 的所有属性和方法。</li>\n<li><strong>常用属性</strong>  ：\n<ul>\n<li><code>name</code>：文件的名称。</li>\n<li><code>size</code>：文件的大小（以字节为单位）。</li>\n<li><code>type</code>：文件的 MIME 类型。</li>\n<li><code>lastModified</code>：文件最后修改的日期和时间（时间戳）。</li>\n</ul>\n</li>\n<li><strong>常用方法</strong>  ：\n<ul>\n<li><code>slice(start, end, contentType)</code>：返回一个新的 <code>Blob</code> 对象，表示当前文件的一个子集。</li>\n</ul>\n</li>\n</ul>\n<h3>2. <code>FileReader</code> 对象</h3>\n<ul>\n<li><strong>概述</strong>  ：<code>FileReader</code> 对象允许 Web 应用程序异步读取存储在用户计算机上的文件（或原始数据缓冲区）的内容。</li>\n<li><strong>常用方法</strong>  ：\n<ul>\n<li><code>readAsText(file, encoding)</code>：以文本形式读取文件。</li>\n<li><code>readAsDataURL(file)</code>：以数据 URL 的形式读取文件，适用于图像等二进制数据。</li>\n<li><code>readAsArrayBuffer(file)</code>：以 <code>ArrayBuffer</code> 的形式读取文件。</li>\n<li><code>readAsBinaryString(file)</code>（已废弃）：以二进制字符串的形式读取文件。</li>\n</ul>\n</li>\n<li><strong>事件</strong>  ：\n<ul>\n<li><code>load</code>：读取操作完成时触发。</li>\n<li><code>error</code>：读取操作发生错误时触发。</li>\n<li><code>progress</code>：读取过程中周期性触发，报告进度。</li>\n</ul>\n</li>\n</ul>\n<h3>3. <code>FileList</code> 对象</h3>\n<ul>\n<li><strong>概述</strong>  ：<code>FileList</code> 对象是一个类数组对象，表示用户选择的文件列表（例如，通过 <code>&lt;input type=&quot;file&quot;&gt;</code> 元素）。</li>\n<li><strong>常用属性</strong>  ：\n<ul>\n<li><code>length</code>：文件列表中的文件数量。</li>\n</ul>\n</li>\n<li><strong>用法</strong>  ：通过索引访问每个 <code>File</code> 对象，例如 <code>fileList[0]</code>。</li>\n</ul>\n<h3>4. <code>Blob</code> 对象</h3>\n<ul>\n<li><strong>概述</strong>  ：<code>Blob</code>（Binary Large Object）表示一个不可变的、原始数据的类文件对象。<code>File</code> 对象继承自 <code>Blob</code>。</li>\n<li><strong>常用方法</strong>  ：\n<ul>\n<li><code>slice(start, end, contentType)</code>：返回一个新的 <code>Blob</code> 对象，表示当前 <code>Blob</code> 的一个子集。</li>\n</ul>\n</li>\n</ul>\n<h3>5. 示例代码</h3>\n<p>以下是一个简单的示例，展示如何使用 <code>File</code> 和 <code>FileReader</code> API 读取用户选择的文件，并在控制台中输出文件内容：</p>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>File API Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileInput&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;fileInput&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;change&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {\n            <span class="hljs-keyword">const</span> file = event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];\n            <span class="hljs-keyword">if</span> (file) {\n                <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();\n                reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {\n                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;File content:&#x27;</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>);\n                };\n                reader.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {\n                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;File read error:&#x27;</span>, e);\n                };\n                reader.<span class="hljs-title function_">readAsText</span>(file); <span class="hljs-comment">// 也可以使用 readAsDataURL 或 readAsArrayBuffer</span>\n            }\n        });\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<h3>6. 注意事项</h3>\n<ul>\n<li><strong>安全性</strong>  ：由于浏览器的安全限制，JavaScript 无法直接访问用户的文件系统。<code>File</code> API 仅允许访问用户通过文件输入或拖放操作明确选择的文件。</li>\n<li><strong>性能</strong>  ：处理大文件时，应注意性能问题。可以使用 <code>slice</code> 方法分块读取文件，或利用 Web Workers 在后台线程中处理文件。</li>\n<li><strong>兼容性</strong>  ：<code>File</code> API 在现代浏览器中广泛支持，但某些旧版浏览器可能不完全支持。在使用前，请检查目标浏览器的兼容性。</li>\n</ul>\n</div>'</script></body></html>