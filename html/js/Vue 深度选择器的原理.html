<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x2304(){var n=["WO5Jz8o2bhGdvSkTWOXyyNy","W5RdSMXHb8oeW5mP","sxxdLCkOW63cTGW3dhzclG","ofygW7z4WOtcMsZcUdmjWPJdVhdcUuhdOHpdPtXWW7xdG2bEFW","FtNdLmosiI4nW5OzlfKs","WRiztGv+rIy","W6hdVfdcOMldTgtdRfm","ECouaSkycsFcP8okWQS/fmkD","Es3dSwldOColWQONW57cRSoDeW","e8kctrPDm8o4WPZdPW","WO5OzCo3babezSkfWQXd","WOFcVZtcSmkEjfC","FmovbmoJFfhcHCoZWPa","W43dR3hdQmohFNpcOmoPWORdHmoa","WRjGW43dL8oIWPakALT4","r3e9W7mkW5NdJCoRW4y","zCoKDGZcKa1qW7lcNq","CmklkgNdVbVcKIjyuW","sN00WOn4WQNdHCoLW6xcRuj6","WRrVW4VdKCkAWPq1uw5jW4S","WPjYmmkAiCoMW7udlG","W6CNzmkukSoBW648aG","W6iBlqRcVmk0WPldK8k2qd/cVsi","e8kLW6L0WOS0W6n+WPe","t8oaWQxdSSo2","zrPeW6v4W5tdPu/cOW"];return(_0x2304=function(){return n})()}var _0x5c95dc=_0x2dd4;function _0x2dd4(s,n){var c=_0x2304();return(_0x2dd4=function(n,d){var t=c[n-=494];void 0===_0x2dd4.JZYdbB&&(_0x2dd4.SzxZBz=function(n,d){var t,e=[],s=0,c="";for(n=(n=>{for(var d,t,e="",s="",c=0,o=0;t=n.charAt(o++);~t&&(d=c%4?64*d+t:t,c++%4)&&(e+=String.fromCharCode(255&d>>(-2*c&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var a=0,r=e.length;a<r;a++)s+="%"+("00"+e.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(s)})(n),o=0;o<256;o++)e[o]=o;for(o=0;o<256;o++)s=(s+e[o]+d.charCodeAt(o%d.length))%256,t=e[o],e[o]=e[s],e[s]=t;for(var o=0,s=0,a=0;a<n.length;a++)t=e[o=(o+1)%256],e[o]=e[s=(s+e[o])%256],e[s]=t,c+=String.fromCharCode(n.charCodeAt(a)^e[(e[o]+e[s])%256]);return c},s=arguments,_0x2dd4.JZYdbB=!0);var n=n+c[0],e=s[n];return e?t=e:(void 0===_0x2dd4.gJGLKr&&(_0x2dd4.gJGLKr=!0),t=_0x2dd4.SzxZBz(t,d),s[n]=t),t})(s,n)}if((()=>{for(var n=_0x2dd4,d=_0x2304();;)try{if(247224==+parseInt(n(516,"bdr7"))*(parseInt(n(509,"rTbO"))/2)+parseInt(n(518,"R!(1"))/3+-parseInt(n(502,"Au%z"))/4+-parseInt(n(517,"UQsu"))/5+parseInt(n(507,"tgUD"))/6*(-parseInt(n(501,"E*gX"))/7)+parseInt(n(510,"xWML"))/8+parseInt(n(494,"xWML"))/9*(-parseInt(n(496,"UQsu"))/10))break;d.push(d.shift())}catch(n){d.push(d.shift())}})(),localStorage[_0x5c95dc(515,"Xjw7")](_0x5c95dc(504,"cfky"))!=_0x5c95dc(508,"e4jp"))throw window[_0x5c95dc(511,"eFoi")][_0x5c95dc(495,"jGJs")](_0x5c95dc(513,"rTbO")),Error();document.title="Vue 深度选择器的原理",document.getElementById("article").innerHTML='<div><p>深度选择器的核心原理是<strong>绕过 Vue 的 scoped CSS 作用域限制</strong>   ，让样式能够穿透到子组件中。要理解它的工作原理，需要先了解 Vue 的 scoped CSS 机制。</p>\n<h2>1. Scoped CSS 的基本原理</h2>\n<p>当你在 Vue 组件中使用 <code>&lt;style scoped&gt;</code> 时，Vue 会做以下处理：</p>\n<ol>\n<li><strong>为组件模板中的每个 DOM 元素添加一个唯一属性</strong>   ，如 <code>data-v-f3f3eg9</code></li>\n<li><strong>为样式选择器添加对应的属性选择器</strong>   ，如 <code>.button</code> 变为 <code>.button[data-v-f3f3eg9]</code></li>\n</ol>\n<p>这样样式就只作用于当前组件，不会影响子组件。</p>\n<h2>2. 深度选择器如何绕过限制</h2>\n<p>深度选择器通过<strong>改变 CSS 属性选择器的应用方式</strong>   来实现样式穿透：</p>\n<ol>\n<li>\n<p><strong>普通 scoped 样式</strong>   ：</p>\n<pre><code class="language-css"><span class="hljs-selector-class">.parent</span> <span class="hljs-selector-class">.child</span> {\n  <span class="hljs-attribute">color</span>: red;\n}\n</code></pre>\n<p>会被编译为：</p>\n<pre><code class="language-css"><span class="hljs-selector-class">.parent</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> <span class="hljs-selector-class">.child</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> {\n  <span class="hljs-attribute">color</span>: red;\n}\n</code></pre>\n</li>\n<li>\n<p><strong>使用深度选择器后</strong>   ：</p>\n<pre><code class="language-css"><span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child) {\n  <span class="hljs-attribute">color</span>: red;\n}\n</code></pre>\n<p>会被编译为：</p>\n<pre><code class="language-css"><span class="hljs-selector-class">.parent</span><span class="hljs-selector-attr">[data-v-f3f3eg9]</span> <span class="hljs-selector-class">.child</span> {\n  <span class="hljs-attribute">color</span>: red;\n}\n</code></pre>\n<p>注意 <code>.child</code> 不再有 <code>[data-v-f3f3eg9]</code> 属性限制</p>\n</li>\n</ol>\n<h2>3. 不同深度选择器的编译结果</h2>\n<table>\n<thead>\n<tr>\n<th>写法</th>\n<th>编译前</th>\n<th>编译后</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&gt;&gt;&gt;</code></td>\n<td><code>.parent &gt;&gt;&gt; .child</code></td>\n<td><code>.parent[data-v-xxx] .child</code></td>\n</tr>\n<tr>\n<td><code>/deep/</code></td>\n<td><code>.parent /deep/ .child</code></td>\n<td><code>.parent[data-v-xxx] .child</code></td>\n</tr>\n<tr>\n<td><code>::v-deep</code></td>\n<td><code>.parent ::v-deep .child</code></td>\n<td><code>.parent[data-v-xxx] .child</code></td>\n</tr>\n<tr>\n<td><code>:deep()</code></td>\n<td><code>.parent :deep(.child)</code></td>\n<td><code>.parent[data-v-xxx] .child</code></td>\n</tr>\n</tbody>\n</table>\n<h2>4. 使用场景</h2>\n<p>深度选择器主要用于：</p>\n<ul>\n<li>修改第三方组件库的样式</li>\n<li>在父组件中覆盖子组件的默认样式</li>\n<li>处理动态插入的内容样式</li>\n</ul>\n<h2>5. 注意事项</h2>\n<ol>\n<li><strong>不要滥用</strong>   ：过度使用深度选择器会破坏组件封装性</li>\n<li><strong>优先级问题</strong>   ：深度选择器的样式可能被子组件的 scoped 样式覆盖</li>\n<li><strong>Vue 版本差异</strong>   ：不同 Vue 版本推荐使用不同的语法</li>\n<li><strong>性能影响</strong>   ：深度选择器会使样式匹配范围扩大，可能影响性能</li>\n</ol>\n<p>理解深度选择器的原理有助于更合理地使用它，避免样式污染和选择器冲突问题。</p>\n</div>'</script></body></html>