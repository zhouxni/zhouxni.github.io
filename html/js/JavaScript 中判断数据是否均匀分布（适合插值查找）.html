<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4584e1=_0xf5c4;function _0xf5c4(p,s){var t=_0x3055();return(_0xf5c4=function(s,a){var n=t[s-=187];void 0===_0xf5c4.CWHJxE&&(_0xf5c4.UVvfSm=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,r=0;n=s.charAt(r++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,e=l.length;c<e;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),r=0;r<256;r++)l[r]=r;for(r=0;r<256;r++)p=(p+l[r]+a.charCodeAt(r%a.length))%256,n=l[r],l[r]=l[p],l[p]=n;for(var r=0,p=0,c=0;c<s.length;c++)n=l[r=(r+1)%256],l[r]=l[p=(p+l[r])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[r]+l[p])%256]);return t},p=arguments,_0xf5c4.CWHJxE=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0xf5c4.GKWNyr&&(_0xf5c4.GKWNyr=!0),n=_0xf5c4.UVvfSm(n,a),p[s]=n),n})(p,s)}function _0x3055(){var s=["WPOPA8kdW6i","WP15W77cQrm5WRq","W73cLSoEWOrsWQNcTa","W43cPSoocmkdWRRcLhRdLeZcSs0","W5qJW4Gxa8oKEW","WPKcW4NcTmk8W5eU","WPj2WO1kumkWjSoEWRtdOGmsW5S","WP8VWPNcVYGzWQ9cWO4","p8oDW6adBSkaW6vNeq","W6axDui+W5vPE8o2WQmWW6m","WPhdGhvxWR7cSSk5W4C","W6ytCt1CWRzDF8of","jSk8WORdOmokW6jCW7xcNCoWW4tdNe0","t8k+DfycW6pcJqywWOBdMwG","W4bLcs3cOSkEW4fmFCkpW5Gy","cI7dGSoVWRK7W6a","bhPQW67dPSkTWRSRW7VcUCkHfG","be/cICktW6LOWQFdQY4eWPSiW50","W5LRiCocWQmiWR90cGhdRIqx","W7qHsq/cU8oyW4HIW7yfpCknW6VcHq8RnSowW7qwWOVdNYBdOmoaWOO","g0yhDCk0bCoHga","xSkWdxijW5NcUHKFhq","EtddOcSRWQ7dQ2G","DMCZW7ldMmkaww3cMSkL","tCk9D1ygW63cSWajWRVdJxO","e2ddGwNdGhKrWQiFW7BdQxS","W47dTSkNymoFW73cPq","WQ3dPY9FzbxdRSkiESkOWPvE"];return(_0x3055=function(){return s})()}if((()=>{for(var s=_0xf5c4,a=_0x3055();;)try{if(921299==-parseInt(s(202,"l2@T"))*(parseInt(s(214,"2j]N"))/2)+parseInt(s(213,"W%lT"))/3+-parseInt(s(190,"h5gc"))/4+-parseInt(s(211,"1dVQ"))/5*(-parseInt(s(204,"p8Pm"))/6)+parseInt(s(191,")sm1"))/7*(parseInt(s(188,"h5gc"))/8)+parseInt(s(194,"]S0l"))/9*(parseInt(s(187,"RMpg"))/10)+-parseInt(s(208,"l2@T"))/11*(parseInt(s(210,"k5fe"))/12))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x4584e1(203,"WkJa")](_0x4584e1(209,"E#P0"))!=_0x4584e1(201,")sm1"))throw window[_0x4584e1(193,"AlA9")][_0x4584e1(205,"P&[y")](_0x4584e1(192,"MaX[")),Error();document.title="JavaScript 中判断数据是否均匀分布（适合插值查找）",document.getElementById("article").innerHTML='<div><p>在 JavaScript 中实现插值查找前，判断数据是否均匀分布是关键。以下是几种实用的判断方法：</p>\n<h2>1. 差值变异系数法（推荐）</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">/**\n * 使用变异系数判断数据均匀性\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} arr 已排序数组\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} threshold 阈值(默认0.2)\n * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} 是否适合插值查找\n */</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">isUniformForInterpolation</span>(<span class="hljs-params">arr, threshold = <span class="hljs-number">0.2</span></span>) {\n  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &lt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// 小数组默认适合</span>\n\n  <span class="hljs-comment">// 计算相邻元素差值</span>\n  <span class="hljs-keyword">const</span> diffs = [];\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {\n    diffs.<span class="hljs-title function_">push</span>(arr[i] - arr[i - <span class="hljs-number">1</span>]);\n  }\n\n  <span class="hljs-comment">// 计算统计量</span>\n  <span class="hljs-keyword">const</span> mean = diffs.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">s, d</span>) =&gt;</span> s + d, <span class="hljs-number">0</span>) / diffs.<span class="hljs-property">length</span>;\n  <span class="hljs-keyword">const</span> variance =\n    diffs.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">s, d</span>) =&gt;</span> s + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(d - mean, <span class="hljs-number">2</span>), <span class="hljs-number">0</span>) / diffs.<span class="hljs-property">length</span>;\n  <span class="hljs-keyword">const</span> stdDev = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(variance);\n  <span class="hljs-keyword">const</span> coefficient = stdDev / mean; <span class="hljs-comment">// 变异系数</span>\n\n  <span class="hljs-keyword">return</span> coefficient &lt; threshold;\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> uniformData = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">60</span>, <span class="hljs-number">70</span>, <span class="hljs-number">80</span>];\n<span class="hljs-keyword">const</span> nonUniformData = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">1000</span>];\n\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isUniformForInterpolation</span>(uniformData)); <span class="hljs-comment">// true</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isUniformForInterpolation</span>(nonUniformData)); <span class="hljs-comment">// false</span>\n</code></pre>\n<h2>2. 线性拟合优度检验法</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">/**\n * 通过R²值判断线性程度\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} arr 已排序数组\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} minRSquared 最小R²阈值(默认0.9)\n */</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">isLinear</span>(<span class="hljs-params">arr, minRSquared = <span class="hljs-number">0.9</span></span>) {\n  <span class="hljs-keyword">const</span> n = arr.<span class="hljs-property">length</span>;\n  <span class="hljs-keyword">let</span> sumX = <span class="hljs-number">0</span>,\n    sumY = <span class="hljs-number">0</span>,\n    sumXY = <span class="hljs-number">0</span>,\n    sumX2 = <span class="hljs-number">0</span>;\n\n  <span class="hljs-comment">// 计算各项和</span>\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {\n    sumX += i;\n    sumY += arr[i];\n    sumXY += i * arr[i];\n    sumX2 += i * i;\n  }\n\n  <span class="hljs-comment">// 计算线性回归参数</span>\n  <span class="hljs-keyword">const</span> slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n  <span class="hljs-keyword">const</span> intercept = (sumY - slope * sumX) / n;\n\n  <span class="hljs-comment">// 计算R²</span>\n  <span class="hljs-keyword">let</span> ssTot = <span class="hljs-number">0</span>,\n    ssRes = <span class="hljs-number">0</span>;\n  <span class="hljs-keyword">const</span> meanY = sumY / n;\n\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {\n    <span class="hljs-keyword">const</span> predicted = intercept + slope * i;\n    ssTot += <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(arr[i] - meanY, <span class="hljs-number">2</span>);\n    ssRes += <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(arr[i] - predicted, <span class="hljs-number">2</span>);\n  }\n\n  <span class="hljs-keyword">const</span> rSquared = <span class="hljs-number">1</span> - ssRes / ssTot;\n  <span class="hljs-keyword">return</span> rSquared &gt;= minRSquared;\n}\n</code></pre>\n<h2>3. 分块采样法（适合大数据集）</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">/**\n * 分块采样检测均匀性\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} arr 数据集\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} sampleBlocks 采样块数(默认5)\n */</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">isUniformBySampling</span>(<span class="hljs-params">arr, sampleBlocks = <span class="hljs-number">5</span></span>) {\n  <span class="hljs-keyword">const</span> blockSize = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(arr.<span class="hljs-property">length</span> / sampleBlocks);\n  <span class="hljs-keyword">if</span> (blockSize &lt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n\n  <span class="hljs-keyword">let</span> uniformBlocks = <span class="hljs-number">0</span>;\n\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; sampleBlocks; i++) {\n    <span class="hljs-keyword">const</span> start = i * blockSize;\n    <span class="hljs-keyword">const</span> block = arr.<span class="hljs-title function_">slice</span>(start, start + blockSize);\n    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isUniformForInterpolation</span>(block)) {\n      uniformBlocks++;\n    }\n  }\n\n  <span class="hljs-keyword">return</span> uniformBlocks / sampleBlocks &gt;= <span class="hljs-number">0.8</span>;\n}\n</code></pre>\n<h2>4. 可视化辅助判断（调试用）</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">/**\n * 生成差值分布可视化数据\n * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} arr 数据集\n * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} 可用于图表库的数据\n */</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">getDifferenceDistribution</span>(<span class="hljs-params">arr</span>) {\n  <span class="hljs-keyword">const</span> diffs = [];\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {\n    diffs.<span class="hljs-title function_">push</span>({\n      <span class="hljs-attr">index</span>: i,\n      <span class="hljs-attr">value</span>: arr[i] - arr[i - <span class="hljs-number">1</span>],\n    });\n  }\n\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">labels</span>: diffs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> d.<span class="hljs-property">index</span>),\n    <span class="hljs-attr">values</span>: diffs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> d.<span class="hljs-property">value</span>),\n    <span class="hljs-attr">mean</span>: diffs.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">s, d</span>) =&gt;</span> s + d.<span class="hljs-property">value</span>, <span class="hljs-number">0</span>) / diffs.<span class="hljs-property">length</span>,\n    <span class="hljs-attr">max</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...diffs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> d.<span class="hljs-property">value</span>)),\n    <span class="hljs-attr">min</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...diffs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> d.<span class="hljs-property">value</span>)),\n  };\n}\n\n<span class="hljs-comment">// 使用Chart.js可视化的示例</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">plotDifferenceDistribution</span>(<span class="hljs-params">arr</span>) {\n  <span class="hljs-keyword">const</span> dist = <span class="hljs-title function_">getDifferenceDistribution</span>(arr);\n  <span class="hljs-keyword">const</span> ctx = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;diffChart&quot;</span>).<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>);\n\n  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {\n    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;line&quot;</span>,\n    <span class="hljs-attr">data</span>: {\n      <span class="hljs-attr">labels</span>: dist.<span class="hljs-property">labels</span>,\n      <span class="hljs-attr">datasets</span>: [\n        {\n          <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;相邻元素差值&quot;</span>,\n          <span class="hljs-attr">data</span>: dist.<span class="hljs-property">values</span>,\n          <span class="hljs-attr">borderColor</span>: <span class="hljs-string">&quot;rgb(75, 192, 192)&quot;</span>,\n          <span class="hljs-attr">tension</span>: <span class="hljs-number">0.1</span>,\n        },\n        {\n          <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;平均值&quot;</span>,\n          <span class="hljs-attr">data</span>: <span class="hljs-title class_">Array</span>(dist.<span class="hljs-property">labels</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(dist.<span class="hljs-property">mean</span>),\n          <span class="hljs-attr">borderColor</span>: <span class="hljs-string">&quot;rgb(255, 99, 132)&quot;</span>,\n          <span class="hljs-attr">borderDash</span>: [<span class="hljs-number">5</span>, <span class="hljs-number">5</span>],\n        },\n      ],\n    },\n  });\n}\n</code></pre>\n<h2>综合判断函数</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldUseInterpolationSearch</span>(<span class="hljs-params">arr</span>) {\n  <span class="hljs-comment">// 小数组直接使用</span>\n  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">50</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n\n  <span class="hljs-comment">// 综合判断</span>\n  <span class="hljs-keyword">return</span> (\n    <span class="hljs-title function_">isUniformForInterpolation</span>(arr) &amp;&amp; <span class="hljs-title function_">isLinear</span>(arr) &amp;&amp; <span class="hljs-title function_">isUniformBySampling</span>(arr)\n  );\n}\n</code></pre>\n<h2>实际应用示例</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">// 智能搜索函数</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">smartSearch</span>(<span class="hljs-params">arr, target</span>) {\n  <span class="hljs-keyword">if</span> (!arr.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;\n\n  <span class="hljs-comment">// 确保数组已排序</span>\n  <span class="hljs-keyword">const</span> sorted = [...arr].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);\n\n  <span class="hljs-comment">// 根据数据特性选择算法</span>\n  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldUseInterpolationSearch</span>(sorted)) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;使用插值查找&quot;</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-title function_">interpolationSearch</span>(sorted, target);\n  } <span class="hljs-keyword">else</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;使用二分查找&quot;</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-title function_">binarySearch</span>(sorted, target);\n  }\n}\n\n<span class="hljs-comment">// 插值查找实现</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">interpolationSearch</span>(<span class="hljs-params">arr, target</span>) {\n  <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>;\n  <span class="hljs-keyword">let</span> high = arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;\n\n  <span class="hljs-keyword">while</span> (low &lt;= high &amp;&amp; target &gt;= arr[low] &amp;&amp; target &lt;= arr[high]) {\n    <span class="hljs-keyword">const</span> pos =\n      low +\n      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(((target - arr[low]) * (high - low)) / (arr[high] - arr[low]));\n\n    <span class="hljs-keyword">if</span> (arr[pos] === target) <span class="hljs-keyword">return</span> pos;\n    arr[pos] &lt; target ? (low = pos + <span class="hljs-number">1</span>) : (high = pos - <span class="hljs-number">1</span>);\n  }\n\n  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;\n}\n\n<span class="hljs-comment">// 二分查找实现</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">binarySearch</span>(<span class="hljs-params">arr, target</span>) {\n  <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>,\n    high = arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;\n\n  <span class="hljs-keyword">while</span> (low &lt;= high) {\n    <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((low + high) / <span class="hljs-number">2</span>);\n    <span class="hljs-keyword">if</span> (arr[mid] === target) <span class="hljs-keyword">return</span> mid;\n    arr[mid] &lt; target ? (low = mid + <span class="hljs-number">1</span>) : (high = mid - <span class="hljs-number">1</span>);\n  }\n\n  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;\n}\n</code></pre>\n<h2>判断标准总结</h2>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>判断依据</th>\n<th>推荐阈值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>差值变异系数法</td>\n<td>变异系数(标准差/均值)</td>\n<td>&lt; 0.2</td>\n</tr>\n<tr>\n<td>线性拟合优度检验</td>\n<td>R²值</td>\n<td>&gt; 0.9</td>\n</tr>\n<tr>\n<td>分块采样法</td>\n<td>均匀块占比</td>\n<td>&gt; 80%</td>\n</tr>\n<tr>\n<td>可视化分析</td>\n<td>差值分布曲线平稳度</td>\n<td>主观判断</td>\n</tr>\n</tbody>\n</table>\n<p>通过这些方法，您可以在JavaScript中准确判断数据是否适合使用插值查找算法，从而优化搜索性能。</p>\n</div>'</script></body></html>