<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x408ec7=_0x3cad;function _0x3cad(o,n){var e=_0x3c44();return(_0x3cad=function(n,s){var a=e[n-=150];void 0===_0x3cad.fegxVM&&(_0x3cad.IocCfm=function(n,s){var a,t=[],o=0,e="";for(n=(n=>{for(var s,a,t="",o="",e=0,l=0;a=n.charAt(l++);~a&&(s=e%4?64*s+a:a,e++%4)&&(t+=String.fromCharCode(255&s>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,c=t.length;r<c;r++)o+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(o)})(n),l=0;l<256;l++)t[l]=l;for(l=0;l<256;l++)o=(o+t[l]+s.charCodeAt(l%s.length))%256,a=t[l],t[l]=t[o],t[o]=a;for(var l=0,o=0,r=0;r<n.length;r++)a=t[l=(l+1)%256],t[l]=t[o=(o+t[l])%256],t[o]=a,e+=String.fromCharCode(n.charCodeAt(r)^t[(t[l]+t[o])%256]);return e},o=arguments,_0x3cad.fegxVM=!0);var n=n+e[0],t=o[n];return t?a=t:(void 0===_0x3cad.XZfhpK&&(_0x3cad.XZfhpK=!0),a=_0x3cad.IocCfm(a,s),o[n]=a),a})(o,n)}if((()=>{for(var n=_0x3cad,s=_0x3c44();;)try{if(345029==+parseInt(n(156,"pWmL"))*(parseInt(n(159,"HYQ("))/2)+parseInt(n(157,"ns[6"))/3*(-parseInt(n(177,"ns[6"))/4)+parseInt(n(163,"mhcP"))/5+-parseInt(n(174,"*AYk"))/6*(-parseInt(n(167,"Nr4u"))/7)+-parseInt(n(171,"UILi"))/8*(parseInt(n(170,"wB$X"))/9)+-parseInt(n(151,"Y^(w"))/10+parseInt(n(164,"g[MH"))/11)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x408ec7(168,"jUt6")](_0x408ec7(160,"eENI"))!=_0x408ec7(153,"3695"))throw window[_0x408ec7(150,"feHa")][_0x408ec7(166,"^0$M")](_0x408ec7(152,"u%TD")),Error();function _0x3c44(){var n=["WR4ipthdNsK4iCoz","FWxcGmkym8kBlW","q8kJWOyTW63dVb8","WPRdICkBpYW3tNZdVWRcULNdTG","W5ldLmotW5ldKZhdLCovqSkZWQW","gSk5CvCVx8kJCwtcUCkcnuC","W4L4uCkMW4hcN8kh","W7lcLhrdw8oyE8kEfh9h","WRddJCoQWRxdM2/cSG","wt0mWRRdG8kjaSo4tw7dOIdcPG","fszrWQWEnvm","W6qPgN87W5/dUmkiiZrUW7ZdMq","efmmi2HcwdOpW5ZcQq","m8kZW53dL8oofg0","WPDHW41iWPhcQ8kxW5uy","wCo3WOFdS8k7vxzMxmoPua","aJtdHxn1W4bKW79u","wtiiWRZdImkjamofxvVdJWpcLG","wSomW4eyvazUW6q","W59WWOu8rmkOWQ3cUqX4rvNdTW","xNNcIuf8WRqhWOLAo8ovgCoNnhZcU8oitCkKWONdVCowscy6DG","ESksW5VdKCov","WPjHW4u8W5ldKSoPW54iWOldMSkgW7a","FSopW5pdRSo1W6RcTYTbWPVdTG","rZy0WOqwqYdcPexdICkZ","w2vvW4VcGSovwq","qSo1W55CWQBcOeeGdSkxWPLpW6i","ECkMWQ7cHmkCW4NcTG"];return(_0x3c44=function(){return n})()}document.title="navigator 对象详解",document.getElementById("article").innerHTML='<div><p><code>navigator</code> 是 JavaScript 中 <code>window</code> 对象的一个属性，它提供了与浏览器和用户设备相关的信息，常用于检测浏览器特性、用户代理（UA）、设备类型等。由于隐私和安全限制，现代浏览器对 <code>navigator</code> 对象的部分属性进行了限制或标准化。</p>\n<hr>\n<h2><strong>1. <code>navigator</code> 对象的主要属性</strong></h2>\n<p><code>navigator</code> 对象包含大量属性，用于获取浏览器、操作系统、设备等信息。以下是常用属性：</p>\n<h3><strong>(1) 用户代理（User Agent）相关</strong></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><code>userAgent</code></strong></td>\n<td>返回浏览器的用户代理字符串（UA），可用于检测浏览器类型和版本。<br><strong>示例</strong>   ：<code>&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&quot;</code></td>\n</tr>\n<tr>\n<td><strong><code>appVersion</code></strong></td>\n<td>返回浏览器版本信息（已废弃，不推荐使用）。</td>\n</tr>\n<tr>\n<td><strong><code>platform</code></strong></td>\n<td>返回操作系统平台（如 <code>&quot;Win32&quot;</code>、<code>&quot;MacIntel&quot;</code>、<code>&quot;Linux x86_64&quot;</code>）。</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例：</strong></p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">userAgent</span>); <span class="hljs-comment">// 输出用户代理字符串</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">platform</span>); <span class="hljs-comment">// 输出操作系统平台</span>\n</code></pre>\n<hr>\n<h3><strong>(2) 浏览器特性检测</strong></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><code>cookieEnabled</code></strong></td>\n<td>返回 <code>true</code> 如果浏览器启用了 Cookie。</td>\n</tr>\n<tr>\n<td><strong><code>onLine</code></strong></td>\n<td>返回 <code>true</code> 如果浏览器在线（可通过 <code>navigator.onLine</code> 检测网络状态）。</td>\n</tr>\n<tr>\n<td><strong><code>language</code></strong>   / <strong><code>languages</code></strong></td>\n<td>返回浏览器首选语言（如 <code>&quot;en-US&quot;</code>）或支持的语言列表（数组）。</td>\n</tr>\n<tr>\n<td><strong><code>doNotTrack</code></strong></td>\n<td>返回 <code>&quot;1&quot;</code> 如果用户启用了 &quot;Do Not Track&quot;（隐私保护），否则返回 <code>&quot;0&quot;</code> 或 <code>null</code>。</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例：</strong></p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">cookieEnabled</span>); <span class="hljs-comment">// 是否启用 Cookie</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">onLine</span>); <span class="hljs-comment">// 是否在线</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">language</span>); <span class="hljs-comment">// 首选语言</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">languages</span>); <span class="hljs-comment">// 支持的语言列表</span>\n</code></pre>\n<hr>\n<h3><strong>(3) 设备与硬件相关</strong></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><code>hardwareConcurrency</code></strong></td>\n<td>返回 CPU 核心数（如 <code>4</code> 表示 4 核）。</td>\n</tr>\n<tr>\n<td><strong><code>deviceMemory</code></strong></td>\n<td>返回设备内存（以 GB 为单位，如 <code>8</code> 表示 8GB）。</td>\n</tr>\n<tr>\n<td><strong><code>maxTouchPoints</code></strong></td>\n<td>返回设备支持的最大触摸点数（用于检测触摸屏设备）。</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例：</strong></p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">hardwareConcurrency</span>); <span class="hljs-comment">// CPU 核心数</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">deviceMemory</span>); <span class="hljs-comment">// 设备内存（GB）</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(navigator.<span class="hljs-property">maxTouchPoints</span>); <span class="hljs-comment">// 触摸点数</span>\n</code></pre>\n<hr>\n<h3><strong>(4) 媒体与插件相关</strong></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><code>mimeTypes</code></strong></td>\n<td>返回浏览器支持的 MIME 类型列表（已废弃，不推荐使用）。</td>\n</tr>\n<tr>\n<td><strong><code>plugins</code></strong></td>\n<td>返回浏览器安装的插件列表（已废弃，现代浏览器不再支持 NPAPI 插件）。</td>\n</tr>\n<tr>\n<td><strong><code>mediaDevices</code></strong></td>\n<td>返回 <code>MediaDevices</code> 对象，用于访问摄像头、麦克风等媒体设备（需用户授权）。</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例：</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 检测摄像头和麦克风权限</span>\nnavigator.<span class="hljs-property">mediaDevices</span>\n  .<span class="hljs-title function_">getUserMedia</span>({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span> })\n  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">stream</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;摄像头和麦克风已授权&quot;</span>))\n  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;权限被拒绝:&quot;</span>, err));\n</code></pre>\n<hr>\n<h3><strong>(5) 地理位置与隐私</strong></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong><code>geolocation</code></strong></td>\n<td>返回 <code>Geolocation</code> 对象，用于获取用户地理位置（需用户授权）。</td>\n</tr>\n<tr>\n<td><strong><code>permissions</code></strong></td>\n<td>返回 <code>Permissions</code> 对象，用于查询和管理浏览器权限（如摄像头、地理位置）。</td>\n</tr>\n</tbody>\n</table>\n<p><strong>示例：</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 获取用户地理位置</span>\nnavigator.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">getCurrentPosition</span>(\n  <span class="hljs-function">(<span class="hljs-params">position</span>) =&gt;</span>\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;位置:&quot;</span>, position.<span class="hljs-property">coords</span>.<span class="hljs-property">latitude</span>, position.<span class="hljs-property">coords</span>.<span class="hljs-property">longitude</span>),\n  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;定位失败:&quot;</span>, err),\n);\n</code></pre>\n<hr>\n<h2><strong>2. <code>navigator</code> 对象的主要方法</strong></h2>\n<p><code>navigator</code> 对象提供了一些方法用于检测浏览器功能或获取特定信息：</p>\n<h3><strong>(1) <code>registerProtocolHandler(scheme, url, title)</code></strong></h3>\n<ul>\n<li><strong>功能</strong>   ：注册自定义协议处理器（如让浏览器用你的网站处理 <code>mailto:</code> 链接）。</li>\n<li><strong>示例</strong>   ：<pre><code class="language-javascript">navigator.<span class="hljs-title function_">registerProtocolHandler</span>(\n  <span class="hljs-string">&quot;web+example&quot;</span>,\n  <span class="hljs-string">&quot;https://example.com/?uri=%s&quot;</span>,\n  <span class="hljs-string">&quot;Example Handler&quot;</span>,\n);\n</code></pre>\n</li>\n</ul>\n<h3><strong>(2) <code>sendBeacon(url, data)</code></strong></h3>\n<ul>\n<li><strong>功能</strong>   ：在页面卸载（如关闭或跳转）时异步发送数据到服务器（适用于日志上报）。</li>\n<li><strong>示例</strong>   ：<pre><code class="language-javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;unload&quot;</span>, <span class="hljs-function">() =&gt;</span> {\n  navigator.<span class="hljs-title function_">sendBeacon</span>(<span class="hljs-string">&quot;/log&quot;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">event</span>: <span class="hljs-string">&quot;page_unload&quot;</span> }));\n});\n</code></pre>\n</li>\n</ul>\n<h3><strong>(3) <code>requestMediaKeySystemAccess(keySystem, supportedConfigurations)</code></strong></h3>\n<ul>\n<li><strong>功能</strong>   ：请求访问加密媒体（如 DRM 保护的内容），用于高级视频播放（如 Widevine、PlayReady）。</li>\n</ul>\n<hr>\n<h2><strong>3. 实际应用场景</strong></h2>\n<h3><strong>(1) 浏览器检测（不推荐，但有时必要）</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 检测是否是 Chrome</span>\n<span class="hljs-keyword">const</span> isChrome =\n  <span class="hljs-regexp">/Chrome/</span>.<span class="hljs-title function_">test</span>(navigator.<span class="hljs-property">userAgent</span>) &amp;&amp; !<span class="hljs-regexp">/Edge|Edg/</span>.<span class="hljs-title function_">test</span>(navigator.<span class="hljs-property">userAgent</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;是否是 Chrome:&quot;</span>, isChrome);\n</code></pre>\n<h3><strong>(2) 离线检测</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;offline&quot;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;网络已断开&quot;</span>));\n<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;online&quot;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;网络已恢复&quot;</span>));\n</code></pre>\n<h3><strong>(3) 设备适配</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">maxTouchPoints</span> &gt; <span class="hljs-number">0</span>) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;这是一个触摸屏设备&quot;</span>);\n} <span class="hljs-keyword">else</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;这是一个非触摸屏设备&quot;</span>);\n}\n</code></pre>\n<h3><strong>(4) 权限管理</strong></h3>\n<pre><code class="language-javascript">navigator.<span class="hljs-property">permissions</span>\n  .<span class="hljs-title function_">query</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;geolocation&quot;</span> })\n  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">permissionStatus</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;地理位置权限状态:&quot;</span>, permissionStatus.<span class="hljs-property">state</span>);\n  });\n</code></pre>\n<hr>\n<h2><strong>4. 注意事项</strong></h2>\n<ol>\n<li>\n<p><strong>用户代理（UA）不可靠</strong>   ：</p>\n<ul>\n<li><code>navigator.userAgent</code> 可以被篡改，现代前端开发更推荐使用 <strong>特性检测</strong>   （如 <code>Modernizr</code>）而非 UA 检测。</li>\n</ul>\n</li>\n<li>\n<p><strong>隐私限制</strong>   ：</p>\n<ul>\n<li>部分属性（如 <code>geolocation</code>、<code>mediaDevices</code>）需要用户授权才能访问。</li>\n<li>浏览器可能限制 <code>navigator.plugins</code> 等敏感信息。</li>\n</ul>\n</li>\n<li>\n<p><strong>兼容性</strong>   ：</p>\n<ul>\n<li>某些属性（如 <code>hardwareConcurrency</code>、<code>deviceMemory</code>）在旧浏览器中可能不支持。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2><strong>5. 总结</strong></h2>\n<table>\n<thead>\n<tr>\n<th>功能分类</th>\n<th>关键属性/方法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>用户代理</strong></td>\n<td><code>userAgent</code>, <code>platform</code></td>\n</tr>\n<tr>\n<td><strong>浏览器特性</strong></td>\n<td><code>cookieEnabled</code>, <code>onLine</code>, <code>language</code></td>\n</tr>\n<tr>\n<td><strong>设备硬件</strong></td>\n<td><code>hardwareConcurrency</code>, <code>deviceMemory</code>, <code>maxTouchPoints</code></td>\n</tr>\n<tr>\n<td><strong>媒体设备</strong></td>\n<td><code>mediaDevices</code>, <code>geolocation</code></td>\n</tr>\n<tr>\n<td><strong>网络状态</strong></td>\n<td><code>onLine</code></td>\n</tr>\n<tr>\n<td><strong>权限管理</strong></td>\n<td><code>permissions</code></td>\n</tr>\n<tr>\n<td><strong>协议处理</strong></td>\n<td><code>registerProtocolHandler</code></td>\n</tr>\n<tr>\n<td><strong>数据发送</strong></td>\n<td><code>sendBeacon</code></td>\n</tr>\n</tbody>\n</table>\n<p><code>navigator</code> 对象是 Web 开发中用于获取浏览器和设备信息的核心 API，合理使用可以实现兼容性检测、设备适配、权限管理等功能。</p>\n</div>'</script></body></html>