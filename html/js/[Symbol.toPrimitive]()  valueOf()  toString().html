<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x1d3b(l,s){var e=_0x145c();return(_0x1d3b=function(s,n){var a=e[s-=220];void 0===_0x1d3b.AeJcRC&&(_0x1d3b.DcTNiu=function(s,n){var a,o=[],l=0,e="";for(s=(s=>{for(var n,a,o="",l="",e=0,t=0;a=s.charAt(t++);~a&&(n=e%4?64*n+a:a,e++%4)&&(o+=String.fromCharCode(255&n>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,r=o.length;c<r;c++)l+="%"+("00"+o.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(s),t=0;t<256;t++)o[t]=t;for(t=0;t<256;t++)l=(l+o[t]+n.charCodeAt(t%n.length))%256,a=o[t],o[t]=o[l],o[l]=a;for(var t=0,l=0,c=0;c<s.length;c++)a=o[t=(t+1)%256],o[t]=o[l=(l+o[t])%256],o[l]=a,e+=String.fromCharCode(s.charCodeAt(c)^o[(o[t]+o[l])%256]);return e},l=arguments,_0x1d3b.AeJcRC=!0);var s=s+e[0],o=l[s];return o?a=o:(void 0===_0x1d3b.qGPBpI&&(_0x1d3b.qGPBpI=!0),a=_0x1d3b.DcTNiu(a,n),l[s]=a),a})(l,s)}var _0x1dd44d=_0x1d3b;if((()=>{for(var s=_0x1d3b,n=_0x145c();;)try{if(100076==+parseInt(s(242,"t1R@"))*(-parseInt(s(243,"pFFW"))/2)+parseInt(s(226,"vZCR"))/3+-parseInt(s(233,"vZCR"))/4*(parseInt(s(234,"pFFW"))/5)+parseInt(s(223,"^4It"))/6+parseInt(s(240,"h1fW"))/7+-parseInt(s(227,"hcN9"))/8+parseInt(s(221,"j1NG"))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x1dd44d(235,"Psy2")](_0x1dd44d(237,"K$%S"))!=_0x1dd44d(222,"h6Pg"))throw window[_0x1dd44d(241,"@6Hu")][_0x1dd44d(224,"6tY6")](_0x1dd44d(236,"l6By")),Error();function _0x145c(){var s=["tSkWW6DIWRy5W57dUW","gddcUq15pmoQEq","dCk8WOeHWQWhW7tdUYie","DCkSWORcTmomDtmX","zSoqkr3dJfe5WRdcShNdMfe","WO/dPYCYaq","WRaFo8oiACoaB8osx8oJWPBcMW","WP3cGmk/W6Sny0e","W47cOgiuB0lcKftdMMa","W652fHZdLmkFgSk+W57dKCkeka","AH7dSXGJB8o4W5JcLSkjW6lcHW","f8oRWRm2W7PNW5ZdMJCCW6BcGG","W64JWRRcHmkmW5hdN8k4gSogWPRcIW","vhmxW4/dS3BcIbm","W7m0cCkFkYz3scNdLSoxW50","D8kOW7FdGmkZsZqCWP3cHGS","W69ZfHNdLmoSaSkgW7NdK8kd","a8k8W7ntWQKkW6NdPq","rHiwuCkEgmkA","CMiPBK8hgKnefbiPWRbhW4CxsCksW6bYWPZcPKRdNv/cOq","aSo6WQpcLCo4FaOoWO8","ksrRjWOfDabXnaWM","W4xcPwWrgWZcPxxdKhG4W5K","ebTFpmo0uszfW45uW5dcNW"];return(_0x145c=function(){return s})()}document.title="[Symbol.toPrimitive]()  valueOf()  toString()",document.getElementById("article").innerHTML='<div><p><strong>Symbol.toPrimitive、valueOf 和 toString 是 JavaScript 中用于对象类型转换的三个重要方法。</strong></p>\n<h3>1. Symbol.toPrimitive</h3>\n<ul>\n<li><strong>定义</strong>  ：<code>Symbol.toPrimitive</code> 是一个内置的 Symbol 属性，用于指定对象在被转换为原始类型值（如字符串、数字）时的行为。</li>\n<li><strong>使用场景</strong>  ：当对象需要被转换为原始类型时（例如在算术运算或字符串拼接中），JavaScript 引擎会调用 <code>Symbol.toPrimitive</code> 方法。</li>\n<li><strong>参数</strong>  ：<code>Symbol.toPrimitive</code> 方法接受一个字符串参数 <code>hint</code>，表示转换的偏好类型。<code>hint</code> 的值可以是 <code>&quot;number&quot;</code>、<code>&quot;string&quot;</code> 或 <code>&quot;default&quot;</code>。</li>\n<li><strong>返回值</strong>  ：根据 <code>hint</code> 的值，返回相应的原始类型值。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">let</span> obj = {\n  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toPrimitive</span>](hint) {\n    <span class="hljs-keyword">switch</span> (hint) {\n      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;number&#x27;</span>:\n        <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>;\n      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;string&#x27;</span>:\n        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;str&#x27;</span>;\n      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;default&#x27;</span>:\n        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;default&#x27;</span>;\n      <span class="hljs-attr">default</span>:\n        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();\n    }\n  }\n};\n\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span> * obj); <span class="hljs-comment">// 输出: 246，因为 2 * obj 调用了 Symbol.toPrimitive(&#x27;number&#x27;)</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj + <span class="hljs-string">&#x27;&#x27;</span>); <span class="hljs-comment">// 输出: &#x27;str&#x27;，因为 obj + &#x27;&#x27; 调用了 Symbol.toPrimitive(&#x27;string&#x27;)</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj == <span class="hljs-string">&#x27;default&#x27;</span>); <span class="hljs-comment">// 输出: true，因为 obj == &#x27;default&#x27; 调用了 Symbol.toPrimitive(&#x27;default&#x27;)</span>\n</code></pre>\n</li>\n</ul>\n<h3>2. valueOf</h3>\n<ul>\n<li><strong>定义</strong>  ：<code>valueOf</code> 是 Object 原型链上的一个方法，用于返回对象的原始值。</li>\n<li><strong>使用场景</strong>  ：在需要将对象转换为原始类型（特别是数字类型）时，JavaScript 引擎会优先调用 <code>valueOf</code> 方法。</li>\n<li><strong>返回值</strong>  ：默认情况下，<code>valueOf</code> 返回对象本身。但许多内置对象（如 <code>Number</code>、<code>String</code> 等）会覆盖此方法以返回合理的原始值。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">let</span> obj = {\n  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;\n  }\n};\n\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj + <span class="hljs-number">1</span>); <span class="hljs-comment">// 输出: 43，因为 obj + 1 调用了 obj.valueOf()</span>\n</code></pre>\n</li>\n</ul>\n<h3>3. toString</h3>\n<ul>\n<li><strong>定义</strong>  ：<code>toString</code> 是 Object 原型链上的一个方法，用于返回对象的字符串表示。</li>\n<li><strong>使用场景</strong>  ：在需要将对象转换为字符串时，JavaScript 引擎会调用 <code>toString</code> 方法。</li>\n<li><strong>返回值</strong>  ：默认情况下，<code>toString</code> 返回 <code>[object Object]</code>。但许多内置对象（如 <code>Array</code>、<code>Date</code> 等）会覆盖此方法以返回更有意义的字符串表示。</li>\n<li><strong>示例</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">let</span> obj = {\n  <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, world!&#x27;</span>;\n  }\n};\n\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">String</span>(obj)); <span class="hljs-comment">// 输出: &#x27;Hello, world!&#x27;，因为 String(obj) 调用了 obj.toString()</span>\n</code></pre>\n</li>\n</ul>\n<h3>三者之间的区别与联系</h3>\n<ul>\n<li><strong>区别</strong>  ：\n<ul>\n<li><code>Symbol.toPrimitive</code> 提供了更灵活的转换机制，可以根据不同的转换场景返回不同的原始类型值。</li>\n<li><code>valueOf</code> 主要用于返回对象的数字原始值。</li>\n<li><code>toString</code> 主要用于返回对象的字符串表示。</li>\n</ul>\n</li>\n<li><strong>联系</strong>  ：\n<ul>\n<li>在需要将对象转换为原始类型时，JavaScript 引擎会按照一定的优先级调用这些方法。通常，<code>valueOf</code> 的优先级高于 <code>toString</code>，但具体行为还取决于 <code>Symbol.toPrimitive</code> 的实现。</li>\n<li>如果对象实现了 <code>Symbol.toPrimitive</code> 方法，那么该方法将优先于 <code>valueOf</code> 和 <code>toString</code> 被调用。</li>\n</ul>\n</li>\n</ul>\n<h3>总结</h3>\n<p><code>Symbol.toPrimitive</code>、<code>valueOf</code> 和 <code>toString</code> 是 JavaScript 中用于对象类型转换的三个重要方法。它们各自有不同的使用场景和返回值，但共同构成了 JavaScript 对象类型转换的灵活机制。在开发过程中，可以根据需要覆盖这些方法，以定制对象在类型转换时的行为。</p>\n</div>'</script></body></html>