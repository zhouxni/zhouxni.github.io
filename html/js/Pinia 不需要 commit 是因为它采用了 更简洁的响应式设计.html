<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2e33aa=_0x3c66;function _0x3985(){var n=["lSoyW4ywWQSOjW","mGNdTbJdJSoUuMW","W7/dV8oTW7ezj8kbiavGggXR","hSo1WQqJbmo2WPJcLa","W4S/bvVcVCodW7i","mhZdIrhdQCouFa","W7W1W4NcSvnsE8oVrCkQW4NcTmo1W7y","zSoioqBcM8oAFW3cVCoJatapW7G","WRX/CYPLe8oe","W6RdNfyubvBcIuhdS8ooB35EuCo+pCktW5pcH8kNdmkHBbOXEW","W5xcL8oubuj2W7hcMSk4","W4BdPCo4WRGojSkUu8ozWQ3dVgCmWRG","W7W+W4BcTvfwESoHrCkgW6RcOmoDW58","a8kQW7ZcH8ogiCkTW68XrCkiW5FcNq","qLVdUZFdR8okB0CC","bmkVW7lcG8oguCowW7uqCCkU","d8oOW58qpLnSWRn/r8kg","WONdNCk6W79GkvvZaCoupbW","WPBdRehdGa9zhq","W5XhW4DMiCkMW40uWQWGW6lcNG","WRpcMbbvr1tcKL7dQ8olvw1awW","W75iWQddHHijeq","r8o/WRVdMCkEDSo9","WOVdQL98WO0dW54i","WP/cGc3cShW4wCkjzaxdQtNdK8ks","cJTVlJiPW6G","W7LPWQNdTmkgd0NdGw5/rSotdG","W6WLbH9ylmoyW7JcO196WObT","wbOgqwhcPSkSd8oI","WOFcOmk5W7Pg"];return(_0x3985=function(){return n})()}function _0x3c66(o,n){var c=_0x3985();return(_0x3c66=function(n,t){var a=c[n-=123];void 0===_0x3c66.XAEgUU&&(_0x3c66.ZjkepJ=function(n,t){var a,s=[],o=0,c="";for(n=(n=>{for(var t,a,s="",o="",c=0,e=0;a=n.charAt(e++);~a&&(t=c%4?64*t+a:a,c++%4)&&(s+=String.fromCharCode(255&t>>(-2*c&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,i=s.length;r<i;r++)o+="%"+("00"+s.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(o)})(n),e=0;e<256;e++)s[e]=e;for(e=0;e<256;e++)o=(o+s[e]+t.charCodeAt(e%t.length))%256,a=s[e],s[e]=s[o],s[o]=a;for(var e=0,o=0,r=0;r<n.length;r++)a=s[e=(e+1)%256],s[e]=s[o=(o+s[e])%256],s[o]=a,c+=String.fromCharCode(n.charCodeAt(r)^s[(s[e]+s[o])%256]);return c},o=arguments,_0x3c66.XAEgUU=!0);var n=n+c[0],s=o[n];return s?a=s:(void 0===_0x3c66.IKNYtU&&(_0x3c66.IKNYtU=!0),a=_0x3c66.ZjkepJ(a,t),o[n]=a),a})(o,n)}if((()=>{for(var n=_0x3c66,t=_0x3985();;)try{if(725041==-parseInt(n(149,"VRdd"))*(parseInt(n(145,"m5v$"))/2)+-parseInt(n(143,"O#7p"))/3*(-parseInt(n(126,"xHVd"))/4)+parseInt(n(124,"NNmP"))/5+parseInt(n(123,"rXk*"))/6*(parseInt(n(130,"NppO"))/7)+parseInt(n(136,"@&]("))/8*(parseInt(n(140,"VRdd"))/9)+-parseInt(n(148,"dCL^"))/10+parseInt(n(129,"3mlE"))/11*(-parseInt(n(134,"VRdd"))/12))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x2e33aa(132,"%3q[")](_0x2e33aa(142,"3mlE"))!=_0x2e33aa(127,"%ufq"))throw window[_0x2e33aa(151,"KeFg")][_0x2e33aa(150,"O#7p")](_0x2e33aa(137,"dCL^")),Error();document.title="Pinia 不需要 commit 是因为它采用了 更简洁的响应式设计",document.getElementById("article").innerHTML='<div><p>Pinia 不需要 <code>commit</code> 是因为它采用了 <strong>更简洁的响应式设计</strong>   ，基于 Vue 3 的 Composition API，而 Vuex 的 <code>commit</code> 是出于其 Flux 架构的设计约束。以下是具体原因和对比：</p>\n<hr>\n<h3>1. <strong>设计理念不同</strong></h3>\n<ul>\n<li><strong>Vuex</strong>   遵循 Flux 模式，要求通过 <code>commit(mutation)</code> 来修改状态，目的是为了 <strong>追踪状态变化</strong>   （如调试工具、时间旅行等）。</li>\n<li><strong>Pinia</strong>   放弃了 Flux 的严格模式，直接允许通过 <code>store.xxx = newValue</code> 修改状态，利用 Vue 3 的响应式系统自动跟踪变化。</li>\n</ul>\n<hr>\n<h3>2. <strong>Pinia 的简化操作</strong></h3>\n<p>Pinia 的 Store 是普通的响应式对象，修改状态就像操作一个 <code>reactive()</code> 对象：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useStore</span>();\nstore.<span class="hljs-property">count</span>++; <span class="hljs-comment">// 直接修改，无需 commit</span>\n</code></pre>\n<p>而 Vuex 必须：</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;increment&quot;</span>); <span class="hljs-comment">// 需要通过 mutation</span>\n</code></pre>\n<hr>\n<h3>3. <strong>Mutation 的移除</strong></h3>\n<ul>\n<li>Vuex 中 <code>mutation</code> 是唯一能修改状态的方式，目的是为了同步且可追踪。</li>\n<li>Pinia 认为这种设计过于繁琐，<strong>直接通过 Action 或组件修改状态</strong>   ，同时仍支持 DevTools 调试（通过底层 Proxy 拦截变化）。</li>\n</ul>\n<hr>\n<h3>4. <strong>Actions 的灵活性</strong></h3>\n<p>Pinia 的 Action 既可以包含异步逻辑，也可以直接修改状态：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// Pinia Action</span>\n<span class="hljs-attr">actions</span>: {\n  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">getData</span>(); <span class="hljs-comment">// 直接赋值，无需 mutation</span>\n  }\n}\n</code></pre>\n<p>而在 Vuex 中，异步操作需在 <code>action</code> 中调用 <code>commit</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// Vuex Action</span>\n<span class="hljs-attr">actions</span>: {\n  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params">{ commit }</span>) {\n    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">getData</span>();\n    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;SET_DATA&#x27;</span>, data); <span class="hljs-comment">// 必须通过 mutation</span>\n  }\n}\n</code></pre>\n<hr>\n<h3>5. <strong>DevTools 支持</strong></h3>\n<p>Pinia 虽然移除了 <code>commit</code>，但通过 Vue 3 的响应式系统依然能追踪状态变化，<strong>兼容 Vue DevTools</strong>   （记录 Action 和状态变化）。</p>\n<hr>\n<h3>为什么 Pinia 能这样做？</h3>\n<ul>\n<li><strong>Vue 3 的响应式系统</strong>   （Proxy）可以精确追踪状态变更，无需手动 <code>commit</code>。</li>\n<li><strong>简化开发体验</strong>   ：减少模板代码（如 mutation 的定义），同时保持可维护性。</li>\n</ul>\n<hr>\n<h3>总结</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>Vuex</th>\n<th>Pinia</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>修改状态</td>\n<td><code>commit(mutation)</code></td>\n<td>直接赋值 (<code>store.xxx = y</code>)</td>\n</tr>\n<tr>\n<td>异步操作</td>\n<td><code>action</code> 中调用 <code>commit</code></td>\n<td><code>action</code> 中直接修改状态</td>\n</tr>\n<tr>\n<td>调试支持</td>\n<td>依赖 mutation 记录</td>\n<td>通过响应式系统自动追踪</td>\n</tr>\n<tr>\n<td>代码简洁度</td>\n<td>高冗余</td>\n<td>更简洁直观</td>\n</tr>\n</tbody>\n</table>\n<p>Pinia 的设计更符合现代 Vue 3 的开发习惯，减少了心智负担，同时保持了状态管理的核心能力。</p>\n</div>'</script></body></html>