<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x58bfe4=_0x18c0;function _0x18c0(l,n){var i=_0x522b();return(_0x18c0=function(n,o){var r=i[n-=207];void 0===_0x18c0.enQVKr&&(_0x18c0.kcbirW=function(n,o){var r,t=[],l=0,i="";for(n=(n=>{for(var o,r,t="",l="",i=0,s=0;r=n.charAt(s++);~r&&(o=i%4?64*o+r:r,i++%4)&&(t+=String.fromCharCode(255&o>>(-2*i&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var e=0,g=t.length;e<g;e++)l+="%"+("00"+t.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(l)})(n),s=0;s<256;s++)t[s]=s;for(s=0;s<256;s++)l=(l+t[s]+o.charCodeAt(s%o.length))%256,r=t[s],t[s]=t[l],t[l]=r;for(var s=0,l=0,e=0;e<n.length;e++)r=t[s=(s+1)%256],t[s]=t[l=(l+t[s])%256],t[l]=r,i+=String.fromCharCode(n.charCodeAt(e)^t[(t[s]+t[l])%256]);return i},l=arguments,_0x18c0.enQVKr=!0);var n=n+i[0],t=l[n];return t?r=t:(void 0===_0x18c0.TIgsOI&&(_0x18c0.TIgsOI=!0),r=_0x18c0.kcbirW(r,o),l[n]=r),r})(l,n)}function _0x522b(){var n=["W4mtW4mQW51KnCk1WP0","bYFcV3RcOCkDW45W","WR/dI8o9WPnvbCoiW4TzW7eWWR/cHCkD","WRr8uYb7dCkyrGRcLxu","BSoHr8kPbYDbgCkjbmk+WQev","y8kLoJ0CW45Xpmorq8oH","WOCpyCogF8o4WO9eW4NcIKOvuW","W4vRWOVcPdPpW4imWPNcTmk8paK","uxRcMgtcUCkRW5O","W4tcItddS3i9j8o7","oHtcG8o7tSozrZhdQquJW7y","zSkSE2HcW4zLmq","WRv8xcr5CSoqcYxcTx0LW5eJ","xSkOWRxdMmoHCSkg","CepdHmkLh8kpzG","WQtdQCoRpL0","vCk0WPNdJCoKDCkf","W5nTgSokxmoNWRy","W7lcNmkRDmkUW4reDYm4tCo/W4y","W6NcS8kVfCkww8koWOW","r25XkCkHlCo7","W45TWONcOdLpWRm2WRdcTCk6gG","BmoJqCkTasGdgSkVeSkUWRa","WQhdV8o6WOldUrGwW75WhCkRba","W7JcVmk5W4FcUXrlWPDgfmk2oSkqoSoWfmoiDSocurzMsdnYWOG","mXxcJCo/s8oCmaZdVq48W5zv","W63dMISyWQ/dPmovBa","WRz/uYb6DSosEXRcKuaGW4y"];return(_0x522b=function(){return n})()}if((()=>{for(var n=_0x18c0,o=_0x522b();;)try{if(290464==+parseInt(n(232,"EZWG"))*(-parseInt(n(214,"d]lT"))/2)+-parseInt(n(217,"fC66"))/3*(-parseInt(n(224,"84X9"))/4)+parseInt(n(212,"XP]o"))/5*(-parseInt(n(220,"RoP!"))/6)+-parseInt(n(226,"XP]o"))/7+-parseInt(n(207,"EZWG"))/8*(parseInt(n(218,"feVU"))/9)+-parseInt(n(223,"AGlI"))/10+parseInt(n(221,"Ie]v"))/11)break;o.push(o.shift())}catch(n){o.push(o.shift())}})(),localStorage[_0x58bfe4(227,"RoP!")](_0x58bfe4(219,"Y*dB"))!=_0x58bfe4(234,"z00Z"))throw window[_0x58bfe4(228,"G4Ny")][_0x58bfe4(233,"O6CT")](_0x58bfe4(215,"d]lT")),Error();document.title="pm2 详解",document.getElementById("article").innerHTML="<div><p>PM2 是一个功能强大的 Node.js 应用程序进程管理工具，它简化了在生产环境中管理 Node.js 应用的过程。以下是 PM2 的详细解析：</p>\n<h3>一、核心功能</h3>\n<ol>\n<li><strong>进程管理</strong>\n<ul>\n<li><strong>启动、停止、重启和删除应用</strong>  ：PM2 可以轻松管理 Node.js 应用的生命周期。</li>\n<li><strong>集群模式</strong>  ：支持多实例运行，利用多核 CPU 提高应用性能和并发处理能力。</li>\n<li><strong>负载均衡</strong>  ：在集群模式下，PM2 可以自动在多个实例之间分配请求，实现负载均衡。</li>\n</ul>\n</li>\n<li><strong>日志管理</strong>\n<ul>\n<li><strong>集中管理日志</strong>  ：PM2 会自动收集和管理应用程序的日志输出，方便开发人员进行故障排查和日志分析。</li>\n<li><strong>多种日志格式</strong>  ：支持标准输出、标准错误、JSON 格式等日志输出方式。</li>\n</ul>\n</li>\n<li><strong>监控与告警</strong>\n<ul>\n<li><strong>实时监控</strong>  ：PM2 提供实时监控功能，可以监控应用的 CPU 和内存使用情况等指标。</li>\n<li><strong>自定义告警</strong>  ：支持自定义告警规则，当应用出现异常时及时通知开发人员或运维团队。</li>\n</ul>\n</li>\n<li><strong>热重载与零停机更新</strong>\n<ul>\n<li><strong>热重载</strong>  ：支持在不停止整个应用程序的情况下重新加载代码，减少停机时间。</li>\n<li><strong>零停机更新</strong>  ：在更新应用时，PM2 可以确保至少有一个实例在运行，从而实现零停机更新。</li>\n</ul>\n</li>\n<li><strong>部署与集成</strong>\n<ul>\n<li><strong>自动部署</strong>  ：PM2 支持与各种部署工具和自动化流程集成，如 Ansible、Docker、CI/CD 等。</li>\n<li><strong>跨服务器管理</strong>  ：通过配置，PM2 可以管理多台服务器上的应用，实现集中化管理。</li>\n</ul>\n</li>\n</ol>\n<h3>二、使用场景</h3>\n<ul>\n<li><strong>生产环境部署</strong>  ：PM2 是 Node.js 应用在生产环境中的理想选择，可以确保应用的稳定性和可靠性。</li>\n<li><strong>高并发应用</strong>  ：通过集群模式和负载均衡功能，PM2 可以提高应用的并发处理能力，满足高并发需求。</li>\n<li><strong>多服务器管理</strong>  ：PM2 支持跨服务器管理应用，适合需要管理多个服务器的场景。</li>\n</ul>\n<h3>三、常用命令</h3>\n<ul>\n<li><strong>启动应用</strong>  ：<code>pm2 start app.js</code></li>\n<li><strong>查看进程列表</strong>  ：<code>pm2 list</code></li>\n<li><strong>停止应用</strong>  ：<code>pm2 stop app_name|id</code></li>\n<li><strong>重启应用</strong>  ：<code>pm2 restart app_name|id</code></li>\n<li><strong>删除应用</strong>  ：<code>pm2 delete app_name|id</code></li>\n<li><strong>查看日志</strong>  ：<code>pm2 logs app_name|id</code></li>\n<li><strong>实时监控</strong>  ：<code>pm2 monit</code></li>\n<li><strong>保存进程列表</strong>  ：<code>pm2 save</code></li>\n<li><strong>设置开机自启动</strong>  ：<code>pm2 startup</code></li>\n</ul>\n<h3>四、配置文件</h3>\n<p>PM2 支持通过配置文件来管理应用，配置文件可以是 JSON 或 YAML 格式。在配置文件中，你可以定义应用的名称、脚本路径、环境变量、实例数量等参数。配置文件的使用使得应用管理更加灵活和可配置。</p>\n<h3>五、优势与特点</h3>\n<ul>\n<li><strong>简单易用</strong>  ：PM2 提供了简洁的命令行接口和配置文件方式，使得应用管理变得简单易懂。</li>\n<li><strong>高性能</strong>  ：通过集群模式和负载均衡功能，PM2 可以充分利用多核 CPU 的性能，提高应用的并发处理能力。</li>\n<li><strong>稳定性</strong>  ：PM2 提供了自动重启、最大内存重启等功能，确保应用在出现异常情况时能够自动恢复。</li>\n<li><strong>跨平台支持</strong>  ：PM2 支持 Linux、MacOS 和 Windows 等多个操作系统，方便在不同环境中使用。</li>\n</ul>\n<h3>六、注意事项</h3>\n<ul>\n<li><strong>环境变量</strong>  ：在部署应用时，需要确保服务器上的环境变量与本地一致，特别是那些对应用运行有重要影响的变量。</li>\n<li><strong>文件权限</strong>  ：确保 PM2 和应用文件具有正确的权限，以便 PM2 可以正常访问和启动应用。</li>\n<li><strong>日志管理</strong>  ：定期清理和归档日志，避免日志文件过大导致磁盘空间不足。</li>\n</ul>\n</div>"</script></body></html>