<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x166bc3=_0x4a9a;function _0x4a9a(l,s){var p=_0x16a1();return(_0x4a9a=function(s,n){var a=p[s-=393];void 0===_0x4a9a.eDclAI&&(_0x4a9a.cOsbEd=function(s,n){var a,t=[],l=0,p="";for(s=(s=>{for(var n,a,t="",l="",p=0,c=0;a=s.charAt(c++);~a&&(n=p%4?64*n+a:a,p++%4)&&(t+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var e=0,o=t.length;e<o;e++)l+="%"+("00"+t.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(l)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)l=(l+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[l],t[l]=a;for(var c=0,l=0,e=0;e<s.length;e++)a=t[c=(c+1)%256],t[c]=t[l=(l+t[c])%256],t[l]=a,p+=String.fromCharCode(s.charCodeAt(e)^t[(t[c]+t[l])%256]);return p},l=arguments,_0x4a9a.eDclAI=!0);var s=s+p[0],t=l[s];return t?a=t:(void 0===_0x4a9a.FmlDFo&&(_0x4a9a.FmlDFo=!0),a=_0x4a9a.cOsbEd(a,n),l[s]=a),a})(l,s)}function _0x16a1(){var s=["WPPtWRxcRCorr8olfJRdR8k1WR8b","WPtcGCk7W4jUW5hcUSkEW63cJHPsdW","lYBdGSodCCkAkxO","W4RcLfNdSZJcMKz4","cSkCWRO1W7/dPvJdIG","k8oaWP8uW5W","WPFcH8kZW4nRW5lcUSkYW5/cVdDvpW","t8kdWPLJvZDhWOmjWPxcNunEW7K","xfhcJZVcK8kSwIBdImoUW690W6a","W7lcUNDZWQFdJthdNSkXWPz5bg4","W7JcSs5JcCoaW5quaG","WOJdTmoVg8oGW7WpWQZdHN8W","BuxcUbXJW67cOhymwta","W4lcOmowyCk8fmknW583qqlcMSk6a8oWrSo1tSorW6vHqmkzsh8l","A0pcUXXMWRBdV14yrZOUW4O","WOxdRCobW4KUqffNW6FdRmoHW4G","tmkcWQNcS8kLWPi9","FH7dQxldVwtcMW","W4/dOa5pWRmLWRhdTaWFFSoNvW","W5n8WP5LW40oyuWNgmkpi8oi","tqb3WRldMCkujmoLE8o7WQOZhmkb","WO7cLSoXWPFdLCoMqIRcRCopW7DT"];return(_0x16a1=function(){return s})()}if((()=>{for(var s=_0x4a9a,n=_0x16a1();;)try{if(341735==-parseInt(s(409,"V]9y"))*(parseInt(s(402,"wOGp"))/2)+-parseInt(s(406,"HJAt"))/3+parseInt(s(397,"hfsJ"))/4+-parseInt(s(394,"V0Cq"))/5+-parseInt(s(398,"95WX"))/6+-parseInt(s(404,"EeLr"))/7+parseInt(s(396,"cLyD"))/8)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x166bc3(414,"Er9n")](_0x166bc3(408,"KfL6"))!=_0x166bc3(403,"lfxy"))throw window[_0x166bc3(401,"YNUC")][_0x166bc3(393,"fMjt")](_0x166bc3(411,"&@F&")),Error();document.title="Vuex.Store 实例方法详解",document.getElementById("article").innerHTML='<div><h1>Vuex.Store 实例方法详解</h1>\n<p>Vuex.Store 实例提供了多种方法来管理状态、触发变更和处理异步操作。以下是主要实例方法的详细说明：</p>\n<h2>1. 核心方法</h2>\n<h3><code>commit(mutationName, payload)</code></h3>\n<p>提交 mutation 来修改 state</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;increment&#x27;</span>, <span class="hljs-number">10</span>)\n\n<span class="hljs-comment">// 对象风格提交</span>\nstore.<span class="hljs-title function_">commit</span>({\n  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;increment&#x27;</span>,\n  <span class="hljs-attr">amount</span>: <span class="hljs-number">10</span>\n})\n</code></pre>\n<p><strong>参数说明</strong>  ：</p>\n<ul>\n<li><code>mutationName</code>：要触发的 mutation 名称</li>\n<li><code>payload</code>：传递给 mutation 的额外数据（可选）</li>\n</ul>\n<h3><code>dispatch(actionName, payload)</code></h3>\n<p>分发 action 来处理异步操作</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&#x27;incrementAsync&#x27;</span>, <span class="hljs-number">5</span>)\n\n<span class="hljs-comment">// 返回 Promise</span>\nstore.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&#x27;actionA&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-comment">// action 完成后的处理</span>\n})\n</code></pre>\n<p><strong>参数说明</strong>  ：</p>\n<ul>\n<li><code>actionName</code>：要触发的 action 名称</li>\n<li><code>payload</code>：传递给 action 的额外数据（可选）</li>\n</ul>\n<h2>2. 状态访问方法</h2>\n<h3><code>state</code></h3>\n<p>直接访问根状态</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> count = store.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>\n</code></pre>\n<h3><code>getters</code></h3>\n<p>访问 store 的计算属性</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> doubleCount = store.<span class="hljs-property">getters</span>.<span class="hljs-property">doubleCount</span>\n</code></pre>\n<h2>3. 监听方法</h2>\n<h3><code>subscribe(handler)</code></h3>\n<p>订阅 store 的 mutation</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> unsubscribe = store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mutation.<span class="hljs-property">type</span>)\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mutation.<span class="hljs-property">payload</span>)\n})\n\n<span class="hljs-comment">// 取消订阅</span>\n<span class="hljs-title function_">unsubscribe</span>()\n</code></pre>\n<p><strong>回调参数</strong>  ：</p>\n<ul>\n<li><code>mutation</code>：包含 <code>type</code> 和 <code>payload</code> 的对象</li>\n<li><code>state</code>：变更后的状态</li>\n</ul>\n<h3><code>subscribeAction(handler)</code></h3>\n<p>订阅 store 的 action</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">subscribeAction</span>(<span class="hljs-function">(<span class="hljs-params">action, state</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(action.<span class="hljs-property">type</span>)\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(action.<span class="hljs-property">payload</span>)\n})\n</code></pre>\n<p><strong>回调参数</strong>  ：</p>\n<ul>\n<li><code>action</code>：包含 <code>type</code> 和 <code>payload</code> 的对象</li>\n<li><code>state</code>：当前状态</li>\n</ul>\n<h2>4. 替换与热更新方法</h2>\n<h3><code>replaceState(state)</code></h3>\n<p>替换 store 的根状态</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">replaceState</span>({\n  <span class="hljs-attr">count</span>: <span class="hljs-number">10</span>,\n  <span class="hljs-attr">todos</span>: []\n})\n</code></pre>\n<p><strong>使用场景</strong>  ：</p>\n<ul>\n<li>状态持久化后恢复</li>\n<li>测试时模拟特定状态</li>\n</ul>\n<h3><code>hotUpdate(newOptions)</code></h3>\n<p>热替换新的 mutations、actions 和 getters</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">hotUpdate</span>({\n  <span class="hljs-attr">mutations</span>: {\n    <span class="hljs-title function_">reset</span>(<span class="hljs-params">state</span>) {\n      state.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>\n    }\n  },\n  <span class="hljs-attr">actions</span>: {\n    <span class="hljs-comment">// 新 actions</span>\n  },\n  <span class="hljs-attr">getters</span>: {\n    <span class="hljs-comment">// 新 getters</span>\n  }\n})\n</code></pre>\n<p><strong>使用场景</strong>  ：</p>\n<ul>\n<li>开发时热重载模块</li>\n<li>动态添加功能</li>\n</ul>\n<h2>5. 模块注册方法</h2>\n<h3><code>registerModule(path, module)</code></h3>\n<p>动态注册模块</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 注册模块</span>\nstore.<span class="hljs-title function_">registerModule</span>(<span class="hljs-string">&#x27;dynamic&#x27;</span>, {\n  <span class="hljs-attr">state</span>: { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> },\n  <span class="hljs-attr">mutations</span>: {\n    <span class="hljs-title function_">increment</span>(<span class="hljs-params">state</span>) {\n      state.<span class="hljs-property">count</span>++\n    }\n  }\n})\n\n<span class="hljs-comment">// 访问模块状态</span>\nstore.<span class="hljs-property">state</span>.<span class="hljs-property">dynamic</span>.<span class="hljs-property">count</span>\n</code></pre>\n<p><strong>参数说明</strong>  ：</p>\n<ul>\n<li><code>path</code>：模块路径（字符串或数组）</li>\n<li><code>module</code>：模块定义对象</li>\n</ul>\n<h3><code>unregisterModule(path)</code></h3>\n<p>动态卸载模块</p>\n<pre><code class="language-javascript">store.<span class="hljs-title function_">unregisterModule</span>(<span class="hljs-string">&#x27;dynamic&#x27;</span>)\n</code></pre>\n<h2>6. 辅助方法</h2>\n<h3><code>watch(getter, callback, options)</code></h3>\n<p>响应式地监测 getter 的返回值</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> unwatch = store.<span class="hljs-title function_">watch</span>(\n  <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span>,\n  <span class="hljs-function">(<span class="hljs-params">newCount, oldCount</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${oldCount}</span> to <span class="hljs-subst">${newCount}</span>`</span>)\n  }\n)\n\n<span class="hljs-comment">// 停止监测</span>\n<span class="hljs-title function_">unwatch</span>()\n</code></pre>\n<p><strong>参数说明</strong>  ：</p>\n<ul>\n<li><code>getter</code>：返回要监测值的函数</li>\n<li><code>callback</code>：值变化时的回调</li>\n<li><code>options</code>：可选配置（如 <code>deep</code>、<code>immediate</code>）</li>\n</ul>\n<h2>7. 完整示例</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span>\n\n<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)\n\n<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({\n  <span class="hljs-attr">state</span>: {\n    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>\n  },\n  <span class="hljs-attr">mutations</span>: {\n    <span class="hljs-title function_">increment</span>(<span class="hljs-params">state, payload</span>) {\n      state.<span class="hljs-property">count</span> += payload.<span class="hljs-property">amount</span>\n    }\n  },\n  <span class="hljs-attr">actions</span>: {\n    <span class="hljs-title function_">incrementAsync</span>(<span class="hljs-params">{ commit }, payload</span>) {\n      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {\n        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {\n          <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;increment&#x27;</span>, payload)\n          <span class="hljs-title function_">resolve</span>()\n        }, <span class="hljs-number">1000</span>)\n      })\n    }\n  },\n  <span class="hljs-attr">getters</span>: {\n    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>\n  }\n})\n\n<span class="hljs-comment">// 提交 mutation</span>\nstore.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;increment&#x27;</span>, { <span class="hljs-attr">amount</span>: <span class="hljs-number">5</span> })\n\n<span class="hljs-comment">// 分发 action</span>\nstore.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&#x27;incrementAsync&#x27;</span>, { <span class="hljs-attr">amount</span>: <span class="hljs-number">3</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Action completed&#x27;</span>)\n})\n\n<span class="hljs-comment">// 订阅 mutations</span>\n<span class="hljs-keyword">const</span> unsubscribe = store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Mutation <span class="hljs-subst">${mutation.type}</span> with payload:`</span>, mutation.<span class="hljs-property">payload</span>)\n})\n\n<span class="hljs-comment">// 动态注册模块</span>\nstore.<span class="hljs-title function_">registerModule</span>(<span class="hljs-string">&#x27;dynamic&#x27;</span>, {\n  <span class="hljs-attr">state</span>: { <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello&#x27;</span> },\n  <span class="hljs-attr">mutations</span>: {\n    <span class="hljs-title function_">updateMessage</span>(<span class="hljs-params">state, payload</span>) {\n      state.<span class="hljs-property">message</span> = payload\n    }\n  }\n})\n\n<span class="hljs-comment">// 访问模块状态</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(store.<span class="hljs-property">state</span>.<span class="hljs-property">dynamic</span>.<span class="hljs-property">message</span>)\n\n<span class="hljs-comment">// 热更新</span>\nstore.<span class="hljs-title function_">hotUpdate</span>({\n  <span class="hljs-attr">mutations</span>: {\n    <span class="hljs-title function_">decrement</span>(<span class="hljs-params">state</span>) {\n      state.<span class="hljs-property">count</span>--\n    }\n  }\n})\n\n<span class="hljs-comment">// 取消订阅</span>\n<span class="hljs-title function_">unsubscribe</span>()\n</code></pre>\n<h2>8. 方法使用场景总结</h2>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>典型使用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>commit()</code></td>\n<td>同步修改状态</td>\n</tr>\n<tr>\n<td><code>dispatch()</code></td>\n<td>异步操作后修改状态</td>\n</tr>\n<tr>\n<td><code>subscribe()</code></td>\n<td>日志记录、持久化</td>\n</tr>\n<tr>\n<td><code>subscribeAction()</code></td>\n<td>跟踪异步操作流程</td>\n</tr>\n<tr>\n<td><code>replaceState()</code></td>\n<td>状态初始化或恢复</td>\n</tr>\n<tr>\n<td><code>registerModule()</code></td>\n<td>按需加载功能模块</td>\n</tr>\n<tr>\n<td><code>watch()</code></td>\n<td>响应特定状态变化</td>\n</tr>\n</tbody>\n</table>\n<p>通过合理使用这些实例方法，可以构建出灵活且强大的状态管理系统。</p>\n</div>'</script></body></html>