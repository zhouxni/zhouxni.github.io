<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x2fc3(){var n=["nCosWQhdRCkJwmkBW57dPW","WOTZW5iOW63cTSk7zZ8pmsDF","dIZdISkoWRhcTSouax5zW5vbW7e","W54/gCkZCSo7d3lcISkglx8","WObLtmoQpSkRox4","WOjaWQWIWQmnWR8","rHJcVmkPWR7dKCkp","WPSHph53","W7hcVvxdLZRdGSoDWRa6W6xcTeTZ","WOfmW5tdHuhdV08","W59LFt84qSkwnmoYW4OBEfu","W504DSoJkCkdffe","wCkbW6uXW7CckqKLuhjFWOC","q1zKymkvl8kou8kJW4tcHHHr","mSoFwConfbScWOa9WQe9jdKr","rJuaghBcV8kxAcGQha","WO9AWRS2ss/cRq","WOuLCXFcOs3dSW","f8krWQxcP0CTW5iLWP/dV2W","W6ZcMSkum8kOdCkZwCoCCtBdI8od","W6RcL8krp8kGaCozsCo3wYJdUq","WOtcM03cMY1QtSovmKjPW4qMiMJcRJDxD8o8W4JdRSklsuVcPW","rCkaW7pcUmkcrSkjW6JdUc0","lmkaW7xdPSojn1iQ","EZelWQVcH8orgvjHiW","WOCmWRtcTIdcMY7dOMGDW4zdoJa","W57dTSoFW5NdKv7cSrvCiIBcOci","WOnfW6FdLfNdH1y"];return(_0x2fc3=function(){return n})()}var _0x3bdd45=_0x5518;function _0x5518(e,n){var l=_0x2fc3();return(_0x5518=function(n,s){var o=l[n-=488];void 0===_0x5518.gylOqn&&(_0x5518.wvSXYN=function(n,s){var o,a=[],e=0,l="";for(n=(n=>{for(var s,o,a="",e="",l=0,r=0;o=n.charAt(r++);~o&&(s=l%4?64*s+o:o,l++%4)&&(a+=String.fromCharCode(255&s>>(-2*l&6))))o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var t=0,c=a.length;t<c;t++)e+="%"+("00"+a.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(e)})(n),r=0;r<256;r++)a[r]=r;for(r=0;r<256;r++)e=(e+a[r]+s.charCodeAt(r%s.length))%256,o=a[r],a[r]=a[e],a[e]=o;for(var r=0,e=0,t=0;t<n.length;t++)o=a[r=(r+1)%256],a[r]=a[e=(e+a[r])%256],a[e]=o,l+=String.fromCharCode(n.charCodeAt(t)^a[(a[r]+a[e])%256]);return l},e=arguments,_0x5518.gylOqn=!0);var n=n+l[0],a=e[n];return a?o=a:(void 0===_0x5518.DIVclk&&(_0x5518.DIVclk=!0),o=_0x5518.wvSXYN(o,s),e[n]=o),o})(e,n)}if((()=>{for(var n=_0x5518,s=_0x2fc3();;)try{if(827684==+parseInt(n(493,"3Us5"))*(-parseInt(n(513,"N*aN"))/2)+parseInt(n(509,"pnGz"))/3+-parseInt(n(498,"r))K"))/4+parseInt(n(495,"AE%%"))/5*(-parseInt(n(503,"GWnb"))/6)+parseInt(n(499,"LL^*"))/7*(parseInt(n(488,"S$JR"))/8)+parseInt(n(504,"F)v]"))/9+-parseInt(n(514,"F9S["))/10*(-parseInt(n(508,"BCiP"))/11))break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x3bdd45(506,"T#Cu")](_0x3bdd45(490,"iHoo"))!=_0x3bdd45(497,"qi@y"))throw window[_0x3bdd45(494,"3Us5")][_0x3bdd45(507,"Zgt0")](_0x3bdd45(511,"^G65")),Error();document.title="webpack IgnorePlugin",document.getElementById("article").innerHTML='<div><p><code>IgnorePlugin</code> 是 Webpack 中的一个插件，用于在打包过程中忽略特定的模块或文件，从而优化打包结果。这在处理一些不需要在特定环境中使用的模块时特别有用，比如开发环境下的调试工具或测试代码。</p>\n<hr>\n<h3><strong>1. 基本原理</strong></h3>\n<p><code>IgnorePlugin</code> 的工作原理是：</p>\n<ul>\n<li><strong>匹配模块</strong>  ：通过正则表达式或特定的条件匹配需要忽略的模块。</li>\n<li><strong>阻止打包</strong>  ：在 Webpack 打包过程中，阻止匹配到的模块被打包到最终的 bundle 中。</li>\n</ul>\n<hr>\n<h3><strong>2. 使用场景</strong></h3>\n<ul>\n<li><strong>环境区分</strong>  ：在开发环境和生产环境中使用不同的模块。例如，忽略生产环境中的调试工具（如 <code>debug</code> 模块）。</li>\n<li><strong>减少打包体积</strong>  ：移除不必要的模块，减少最终的 bundle 大小。</li>\n<li><strong>条件加载</strong>  ：根据构建配置，动态地决定是否包含某些模块。</li>\n</ul>\n<hr>\n<h3><strong>3. 配置方法</strong></h3>\n<h4><strong>基本配置</strong></h4>\n<p>在 <code>webpack.config.js</code> 中配置 <code>IgnorePlugin</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;webpack&#x27;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-comment">// ...其他配置</span>\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">IgnorePlugin</span>({\n      <span class="hljs-attr">resourceRegExp</span>: <span class="hljs-regexp">/^\\.\\/locale$/</span>, <span class="hljs-comment">// 匹配要忽略的模块路径</span>\n      <span class="hljs-attr">contextRegExp</span>: <span class="hljs-regexp">/moment$/</span>, <span class="hljs-comment">// 匹配模块上下文（通常是模块名）</span>\n    }),\n  ],\n};\n</code></pre>\n<h4><strong>参数说明</strong></h4>\n<ul>\n<li><strong><code>resourceRegExp</code></strong>  ：用于匹配模块资源路径的正则表达式。</li>\n<li><strong><code>contextRegExp</code></strong>  ：用于匹配模块上下文（通常是模块所在的目录或包名）的正则表达式。</li>\n</ul>\n<hr>\n<h3><strong>4. 示例</strong></h3>\n<h4><strong>忽略 <code>moment.js</code> 的本地化文件</strong></h4>\n<p><code>moment.js</code> 是一个流行的日期处理库，它包含了许多本地化文件。在大多数情况下，我们只需要使用其中的一种语言，因此可以忽略其他本地化文件以减少打包体积。</p>\n<p><strong><code>webpack.config.js</code></strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);\n<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;webpack&#x27;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,\n    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">IgnorePlugin</span>({\n      <span class="hljs-attr">resourceRegExp</span>: <span class="hljs-regexp">/^\\.\\/locale$/</span>, <span class="hljs-comment">// 忽略 moment.js 的本地化文件</span>\n      <span class="hljs-attr">contextRegExp</span>: <span class="hljs-regexp">/moment$/</span>, <span class="hljs-comment">// 匹配 moment.js 模块</span>\n    }),\n  ],\n};\n</code></pre>\n<p><strong>解释</strong>  ：</p>\n<ul>\n<li><strong><code>resourceRegExp: /^\\.\\/locale$/</code></strong>  ：匹配 <code>moment.js</code> 中的 <code>locale</code> 目录。</li>\n<li><strong><code>contextRegExp: /moment$/</code></strong>  ：确保只匹配 <code>moment.js</code> 模块。</li>\n</ul>\n<h4><strong>在代码中使用 <code>moment.js</code></strong></h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> moment <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;moment&#x27;</span>;\n<span class="hljs-comment">// 手动加载需要的语言</span>\n<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;moment/locale/zh-cn&#x27;</span>;\n\nmoment.<span class="hljs-title function_">locale</span>(<span class="hljs-string">&#x27;zh-cn&#x27;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">moment</span>().<span class="hljs-title function_">format</span>(<span class="hljs-string">&#x27;LLLL&#x27;</span>));\n</code></pre>\n<hr>\n<h3><strong>5. 注意事项</strong></h3>\n<ul>\n<li><strong>正则表达式的准确性</strong>  ：确保 <code>resourceRegExp</code> 和 <code>contextRegExp</code> 的正则表达式准确匹配需要忽略的模块，避免误伤其他模块。</li>\n<li><strong>动态加载的影响</strong>  ：如果忽略的模块是通过动态加载（如 <code>require.context</code>）引入的，确保在代码中正确处理这些模块的缺失。</li>\n<li><strong>环境区分</strong>  ：通常结合 <code>DefinePlugin</code> 或环境变量，在不同的构建环境中使用不同的 <code>IgnorePlugin</code> 配置。</li>\n</ul>\n<hr>\n<h3><strong>6. 与其他插件的结合使用</strong></h3>\n<ul>\n<li><strong><code>DefinePlugin</code></strong>  ：通过定义全局变量，控制代码中的条件逻辑，与 <code>IgnorePlugin</code> 结合使用，实现更灵活的环境区分。</li>\n<li><strong><code>TerserPlugin</code></strong>  ：在打包过程中进一步压缩代码，与 <code>IgnorePlugin</code> 结合使用，可以显著减少最终的 bundle 大小。</li>\n</ul>\n<hr>\n<h3><strong>7. 实际应用中的建议</strong></h3>\n<ul>\n<li><strong>明确需求</strong>  ：在使用 <code>IgnorePlugin</code> 之前，明确哪些模块需要被忽略，以及忽略这些模块对应用的影响。</li>\n<li><strong>测试验证</strong>  ：在忽略模块后，进行全面的测试，确保应用的功能不受影响。</li>\n<li><strong>文档记录</strong>  ：记录 <code>IgnorePlugin</code> 的配置和使用原因，方便后续维护和团队协作。</li>\n</ul>\n<hr>\n<h3><strong>8. 总结</strong></h3>\n<ul>\n<li><strong><code>IgnorePlugin</code></strong>   是 Webpack 中用于忽略特定模块的插件，通过正则表达式匹配模块路径和上下文。</li>\n<li><strong>优化打包结果</strong>  ：通过忽略不必要的模块，减少打包体积，提高加载速度。</li>\n<li><strong>灵活配置</strong>  ：结合正则表达式和环境变量，实现灵活的条件加载和模块忽略。</li>\n<li><strong>注意事项</strong>  ：确保正则表达式的准确性，避免误伤其他模块，并在忽略模块后进行充分的测试验证。</li>\n</ul>\n<p>通过合理使用 <code>IgnorePlugin</code>，可以优化 Webpack 的打包结果，提高应用的性能和加载速度。</p>\n</div>'</script></body></html>