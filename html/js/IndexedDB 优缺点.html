<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x238e(l,n){var s=_0x2f4c();return(_0x238e=function(n,o){var r=s[n-=384];void 0===_0x238e.JsKTxX&&(_0x238e.wveEBZ=function(n,o){var r,t=[],l=0,s="";for(n=(n=>{for(var o,r,t="",l="",s=0,e=0;r=n.charAt(e++);~r&&(o=s%4?64*o+r:r,s++%4)&&(t+=String.fromCharCode(255&o>>(-2*s&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var g=0,i=t.length;g<i;g++)l+="%"+("00"+t.charCodeAt(g).toString(16)).slice(-2);return decodeURIComponent(l)})(n),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)l=(l+t[e]+o.charCodeAt(e%o.length))%256,r=t[e],t[e]=t[l],t[l]=r;for(var e=0,l=0,g=0;g<n.length;g++)r=t[e=(e+1)%256],t[e]=t[l=(l+t[e])%256],t[l]=r,s+=String.fromCharCode(n.charCodeAt(g)^t[(t[e]+t[l])%256]);return s},l=arguments,_0x238e.JsKTxX=!0);var n=n+s[0],t=l[n];return t?r=t:(void 0===_0x238e.EofsME&&(_0x238e.EofsME=!0),r=_0x238e.wveEBZ(r,o),l[n]=r),r})(l,n)}function _0x2f4c(){var n=["WRJcOmklW4ldGupcU0pdQmouWRGx","kCkIW5FdRSkAemkrguRdJCkO","xJBdOCotW65ZwMNcLxy9DG","W7viWRT8W6bXW6VdIYldSCk6WQrC","n8ohjq5mWOKCfum3hxhdQa","l8kMW5ZcK8oAhSkBhK8","W4JdSKTfWPVcHmoowZLZ","mH1HWPS3Dt8/x3SYsq","l8kKW57cOSoBhCkGigS","WPBcKSorWOb9p8kUq8oEWQ3dNa","WO84kMFdG8kbiG","oSoWBSoOfWW8WP9NqSkXEa","W5ldMCkrj8ketSouASkV","ua95W6xdL8k1WQ7dQHrDWRtdM8kw","WRZcGmkSFmknW5GPFvvcvahdUfddNmotCCk6W6ldOSk8WRNcVCkvWRpdGa","W5bOAHZdUmkZcKTVgW","W6FdPmoWx8kXW7jJWPhcSq","yCk/WQhcRxmqBcRcIKmtncC","W488W5RcJWJdR8kHWQq","WQK+puVdHmkxbefc","W6/cR1JcMfldRxhdPSkDCthcK2i","WP3cJCoGW7LJ","C0WIW4bHjbm","y8omW7PAzCoWuSoju8kEr8omDq"];return(_0x2f4c=function(){return n})()}var _0x504f33=_0x238e;if((()=>{for(var n=_0x238e,o=_0x2f4c();;)try{if(201524==-parseInt(n(401,"M7RY"))+-parseInt(n(400,"jcoK"))/2*(-parseInt(n(386,"Do&F"))/3)+parseInt(n(396,"8ARN"))/4+-parseInt(n(387,"m%@L"))/5+parseInt(n(403,"aJmf"))/6*(parseInt(n(402,"Wv#P"))/7)+-parseInt(n(407,"FsjH"))/8+parseInt(n(397,"SB^z"))/9)break;o.push(o.shift())}catch(n){o.push(o.shift())}})(),localStorage[_0x504f33(404,"(Vx8")](_0x504f33(389,"(Vx8"))!=_0x504f33(391,"rpoz"))throw window[_0x504f33(388,"[HJ0")][_0x504f33(392,"M7RY")](_0x504f33(384,"g66$")),Error();document.title="IndexedDB 优缺点",document.getElementById("article").innerHTML="<div><p>IndexedDB 作为浏览器端的本地数据库解决方案，在客户端数据存储领域有着独特的定位，其优缺点可以从功能特性、开发体验、适用场景等多个维度详细分析：</p>\n<h3><strong>优点详解</strong></h3>\n<h4>1. <strong>大容量存储能力</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：存储容量通常在几十 MB 到数 GB 之间（不同浏览器策略不同，如 Chrome 会根据设备存储空间动态分配，通常远大于 <code>localStorage</code> 的 5-10MB 限制）。</li>\n<li><strong>实际价值</strong>   ：可存储大量结构化数据（如用户历史记录、离线文档、图片缓存等），满足复杂应用（如离线编辑器、地图应用）的本地存储需求。</li>\n</ul>\n<h4>2. <strong>异步非阻塞特性</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：所有操作（打开数据库、增删改查、事务处理）均通过异步回调或 Promise 执行，不会阻塞主线程。</li>\n<li><strong>实际价值</strong>   ：避免因数据处理耗时导致页面卡顿，尤其适合处理大规模数据（如批量导入、复杂查询）时保持 UI 响应性。</li>\n</ul>\n<h4>3. <strong>完善的查询与索引机制</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：\n<ul>\n<li>支持对对象存储空间（Object Store）的特定字段创建索引（Index），实现高效查询。</li>\n<li>可通过游标（Cursor）遍历数据，支持范围查询（如 <code>IDBKeyRange</code>）、排序和过滤。</li>\n</ul>\n</li>\n<li><strong>实际价值</strong>   ：相比 <code>localStorage</code> 只能通过键名查询，IndexedDB 能实现类似数据库的复杂查询（如“查询年龄大于 18 的用户”“按时间戳排序的最近 10 条记录”），且查询效率随数据量增长优势更明显。</li>\n</ul>\n<h4>4. <strong>事务安全保障</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：支持事务（Transaction）机制，所有操作需在事务中执行，事务具有原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）等特性。</li>\n<li><strong>实际价值</strong>   ：确保多步操作的完整性（如“转账时扣减余额+增加对方余额”需同时成功或失败），避免数据中间状态导致的不一致问题。</li>\n</ul>\n<h4>5. <strong>丰富的数据类型支持</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：可直接存储 JavaScript 原生类型，包括对象、数组、字符串、数字、布尔值，以及二进制数据（Blob、ArrayBuffer、File 等）。</li>\n<li><strong>实际价值</strong>   ：无需像 <code>localStorage</code> 那样手动序列化/反序列化（如 <code>JSON.stringify</code>/<code>parse</code>），简化二进制数据（如图片、音频）的存储流程。</li>\n</ul>\n<h4>6. <strong>离线数据持久化</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：数据存储在本地磁盘，即使浏览器关闭或网络断开，仍可访问。</li>\n<li><strong>实际价值</strong>   ：是“离线优先”（Offline-First）应用的核心组件，配合 Service Worker 可实现完全离线运行（如离线表单提交、本地文档编辑）。</li>\n</ul>\n<h4>7. <strong>同源安全策略</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：遵循浏览器同源策略，仅同一协议、域名、端口的页面可访问对应数据库。</li>\n<li><strong>实际价值</strong>   ：防止跨域恶意网站窃取数据，保障客户端数据安全。</li>\n</ul>\n<h3><strong>缺点详解</strong></h3>\n<h4>1. <strong>API 设计复杂，学习成本高</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：原生 API 基于事件驱动（如 <code>onsuccess</code>、<code>onerror</code>），操作流程繁琐（需手动处理数据库版本升级、对象存储空间创建、事务状态管理等）。</li>\n<li><strong>实际影响</strong>   ：直接使用原生 API 容易写出嵌套过深的“回调地狱”，开发效率低，需依赖封装库（如 <code>idb</code>、<code>localForage</code>）简化操作。</li>\n</ul>\n<h4>2. <strong>仅支持异步操作</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：没有同步 API，所有读写操作必须通过异步方式执行。</li>\n<li><strong>实际影响</strong>   ：对于简单场景（如读取一个配置项），代码复杂度高于 <code>localStorage</code> 的同步读写，且无法在同步逻辑中直接获取数据。</li>\n</ul>\n<h4>3. <strong>浏览器兼容性与实现差异</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：\n<ul>\n<li>现代浏览器（Chrome 23+、Firefox 10+、Safari 7.1+、Edge 12+）均支持，但旧浏览器（如 IE 9 及以下）完全不支持。</li>\n<li>不同浏览器对事务隔离级别、索引功能的实现存在细微差异（如 Safari 对某些索引类型支持有限）。</li>\n</ul>\n</li>\n<li><strong>实际影响</strong>   ：需处理兼容性代码，或通过工具库屏蔽差异，增加开发成本。</li>\n</ul>\n<h4>4. <strong>数据清理风险</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：浏览器可能在存储空间不足时，根据“LRU（最近最少使用）”等策略清理 IndexedDB 数据；用户也可手动通过“清除浏览数据”删除。</li>\n<li><strong>实际影响</strong>   ：无法保证数据永久留存，不适合存储不可丢失的关键数据（如用户凭证需配合服务器存储）。</li>\n</ul>\n<h4>5. <strong>不适合简单场景</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：对于仅需存储少量键值对（如用户偏好设置、主题配置）的场景，其初始化和操作成本远高于 <code>localStorage</code>。</li>\n<li><strong>实际影响</strong>   ：过度使用会导致代码冗余，降低开发效率。</li>\n</ul>\n<h4>6. <strong>跨域访问限制严格</strong></h4>\n<ul>\n<li><strong>具体表现</strong>   ：受同源策略限制，无法直接访问其他域名的 IndexedDB 数据，跨域共享需通过服务器中转。</li>\n<li><strong>实际影响</strong>   ：多域名的关联应用（如子域名站点）无法直接共享数据，需额外开发跨域数据同步机制。</li>\n</ul>\n<h3><strong>总结</strong></h3>\n<p>IndexedDB 是客户端大规模、结构化数据存储的最优解，尤其适合离线应用、数据密集型工具（如表格处理、图表分析）等场景。但其复杂性和异步特性使其在简单场景中显得冗余，实际开发中需根据数据量、查询需求和离线要求综合选择，并优先使用封装库简化操作。</p>\n</div>"</script></body></html>