<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2dddcb=_0x4250;function _0x4250(p,s){var o=_0x3d27();return(_0x4250=function(s,n){var l=o[s-=303];void 0===_0x4250.metbWq&&(_0x4250.JOOnWU=function(s,n){var l,a=[],p=0,o="";for(s=(s=>{for(var n,l,a="",p="",o=0,r=0;l=s.charAt(r++);~l&&(n=o%4?64*n+l:l,o++%4)&&(a+=String.fromCharCode(255&n>>(-2*o&6))))l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(l);for(var e=0,t=a.length;e<t;e++)p+="%"+("00"+a.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(p)})(s),r=0;r<256;r++)a[r]=r;for(r=0;r<256;r++)p=(p+a[r]+n.charCodeAt(r%n.length))%256,l=a[r],a[r]=a[p],a[p]=l;for(var r=0,p=0,e=0;e<s.length;e++)l=a[r=(r+1)%256],a[r]=a[p=(p+a[r])%256],a[p]=l,o+=String.fromCharCode(s.charCodeAt(e)^a[(a[r]+a[p])%256]);return o},p=arguments,_0x4250.metbWq=!0);var s=s+o[0],a=p[s];return a?l=a:(void 0===_0x4250.jbPqOc&&(_0x4250.jbPqOc=!0),l=_0x4250.JOOnWU(l,n),p[s]=l),l})(p,s)}function _0x3d27(){var s=["bCoUW5v/WPy0W5OUWO3cK8kciNi","WORdNCkWWOtdTCkhqW","W74KxCkIW7RdQmkVW4hcPSoW","nmk5sCkItudcGG","fXOTf39XWOJdVgBdImkiDCkb","WOPxhCoBjhVcJfhcKCoMgvJcVG","rGe2W48QBw5IWPOv","WPz8s3VcUq","Dmo/A8oCWOf6amkJuSkhnSoaWPe","WPHqgrpdT8o5WR5RWQu","W5XHWP3dKXZdJcG","xSkLFmkqW5pdKmk/lW","W7WrW4rllb/cGbZdTZ3cPXe","W5GgWOZdTeC1CHC","W78sW4belr7dK2VdHsRcSI8ypG","W7lcGb3dNmkJkc/dMsqEWQGj","W78AWPaZBfZcPrC","dKldRftdOmkIWPfEbZGTW6jrqW","W78rW4jlkb/cHrRdQbBcNXu","WOTug8oDj3ZdLwlcR8oLawy","W6RcOeFdLCo4xSkhhMhdKq","bvmXlCk9hSoRW6NdTLfNW5tdI8oJbNrFhSodEMuEW5ZcJmkDW6G","WQHGfCk/W5JdNrtcILejqXrB","WQ5LfmkWW5NdNXdcVxqsBavg","CxWPWRD8WO1i","F8k1r8oqtfuilmofCq"];return(_0x3d27=function(){return s})()}if((()=>{for(var s=_0x4250,n=_0x3d27();;)try{if(639061==+parseInt(s(305,"52B2"))*(-parseInt(s(311,"WnNY"))/2)+parseInt(s(315,"eSlG"))/3*(parseInt(s(312,"R80Y"))/4)+-parseInt(s(306,"r@07"))/5+-parseInt(s(321,"Z8MJ"))/6+-parseInt(s(317,"Nevc"))/7+-parseInt(s(318,"r@07"))/8+parseInt(s(303,"52B2"))/9*(parseInt(s(327,"52B2"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x2dddcb(314,"Z0UP")](_0x2dddcb(322,"@alU"))!=_0x2dddcb(320,"a*f1"))throw window[_0x2dddcb(324,"&Afd")][_0x2dddcb(316,"auwC")](_0x2dddcb(308,"[U!k")),Error();document.title="rollup 配置开发模式",document.getElementById("article").innerHTML='<div><h3><strong>Rollup 配置开发模式详解</strong></h3>\n<p>在开发过程中，使用 Rollup 配置开发模式可以显著提高开发效率。开发模式通常包括实时重载（Live Reloading）、模块热替换（Hot Module Replacement，HMR）以及源码映射（Source Maps）等功能。以下是配置 Rollup 开发模式的详细步骤和示例。</p>\n<hr>\n<h3><strong>1. 安装必要的依赖</strong></h3>\n<p>首先，确保安装了 Rollup 及其常用插件。对于开发模式，可能需要以下插件：</p>\n<ul>\n<li><strong><code>@rollup/plugin-node-resolve</code></strong>  ：用于解析 Node.js 模块。</li>\n<li><strong><code>@rollup/plugin-babel</code></strong>  ：用于将 ES6+ 代码转换为向后兼容的 JavaScript 版本。</li>\n<li><strong><code>rollup-plugin-serve</code></strong>   或 <strong><code>@rollup/plugin-dev</code></strong>  ：用于启动开发服务器，支持实时重载。</li>\n<li><strong><code>rollup-plugin-livereload</code></strong>  ：用于实现实时重载功能。</li>\n<li><strong><code>rollup-plugin-terser</code></strong>  （可选）：用于生产环境的代码压缩，开发模式通常不需要。</li>\n</ul>\n<pre><code class="language-sh">npm install --save-dev rollup @rollup/plugin-node-resolve @rollup/plugin-babel rollup-plugin-serve rollup-plugin-livereload\n</code></pre>\n<hr>\n<h3><strong>2. 配置 Rollup</strong></h3>\n<p>创建两个配置文件：一个用于开发模式（<code>rollup.config.dev.js</code>），另一个用于生产模式（<code>rollup.config.prod.js</code>）。以下是开发模式的配置示例：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> resolve <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-node-resolve&#x27;</span>;\n<span class="hljs-keyword">import</span> babel <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-babel&#x27;</span>;\n<span class="hljs-keyword">import</span> serve <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-serve&#x27;</span>;\n<span class="hljs-keyword">import</span> livereload <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-livereload&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>, <span class="hljs-comment">// 入口文件</span>\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;dist/bundle.js&#x27;</span>, <span class="hljs-comment">// 输出文件</span>\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;esm&#x27;</span>, <span class="hljs-comment">// 输出格式</span>\n    <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 生成源码映射，便于调试</span>\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">resolve</span>(), <span class="hljs-comment">// 解析 Node.js 模块</span>\n    <span class="hljs-title function_">babel</span>({\n      <span class="hljs-attr">exclude</span>: <span class="hljs-string">&#x27;node_modules/**&#x27;</span> <span class="hljs-comment">// 排除 node_modules</span>\n    }),\n    <span class="hljs-title function_">serve</span>({\n      <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 自动打开浏览器</span>\n      <span class="hljs-attr">contentBase</span>: <span class="hljs-string">&#x27;dist&#x27;</span>, <span class="hljs-comment">// 静态文件目录</span>\n      <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,\n      <span class="hljs-attr">port</span>: <span class="hljs-number">5000</span> <span class="hljs-comment">// 开发服务器端口</span>\n    }),\n    <span class="hljs-title function_">livereload</span>({\n      <span class="hljs-attr">watch</span>: <span class="hljs-string">&#x27;dist&#x27;</span>, <span class="hljs-comment">// 监听 dist 目录</span>\n      <span class="hljs-attr">delay</span>: <span class="hljs-number">300</span> <span class="hljs-comment">// 延迟时间，避免频繁刷新</span>\n    })\n  ]\n};\n</code></pre>\n<hr>\n<h3><strong>3. 添加 NPM 脚本</strong></h3>\n<p>在 <code>package.json</code> 中添加启动开发服务器的脚本：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rollup -w -c rollup.config.dev.js&quot;</span> <span class="hljs-comment">// 使用 -w 参数监听文件变化</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<hr>\n<h3><strong>4. 运行开发服务器</strong></h3>\n<p>执行以下命令启动开发服务器：</p>\n<pre><code class="language-sh">npm run dev\n</code></pre>\n<p>这将启动 Rollup 的开发模式，自动构建项目并在浏览器中打开。当源代码发生变化时，Rollup 会重新构建项目，并通过 Live Reload 刷新浏览器。</p>\n<hr>\n<h3><strong>5. 关键配置说明</strong></h3>\n<ul>\n<li><strong><code>@rollup/plugin-node-resolve</code></strong>  ：\n<ul>\n<li>允许 Rollup 解析 <code>node_modules</code> 中的模块。</li>\n</ul>\n</li>\n<li><strong><code>@rollup/plugin-babel</code></strong>  ：\n<ul>\n<li>将 ES6+ 代码转换为 ES5，确保兼容性。</li>\n</ul>\n</li>\n<li><strong><code>rollup-plugin-serve</code></strong>  ：\n<ul>\n<li>启动一个本地开发服务器，用于预览构建结果。</li>\n</ul>\n</li>\n<li><strong><code>rollup-plugin-livereload</code></strong>  ：\n<ul>\n<li>监听文件变化，自动刷新浏览器。</li>\n</ul>\n</li>\n<li><strong><code>sourcemap: true</code></strong>  ：\n<ul>\n<li>生成源码映射文件，便于在浏览器中调试。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>6. 生产模式与开发模式的区别</strong></h3>\n<ul>\n<li><strong>开发模式</strong>  ：\n<ul>\n<li>启用源码映射、实时重载等功能。</li>\n<li>输出未压缩的代码，便于调试。</li>\n</ul>\n</li>\n<li><strong>生产模式</strong>  ：\n<ul>\n<li>禁用源码映射、实时重载等功能。</li>\n<li>使用代码压缩插件（如 <code>rollup-plugin-terser</code>）减小文件大小。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3><strong>7. 生产模式配置示例</strong></h3>\n<p>以下是生产模式的配置示例，供参考：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> resolve <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-node-resolve&#x27;</span>;\n<span class="hljs-keyword">import</span> babel <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-babel&#x27;</span>;\n<span class="hljs-keyword">import</span> { terser } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-terser&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>,\n  <span class="hljs-attr">output</span>: {\n    <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;dist/bundle.min.js&#x27;</span>,\n    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;esm&#x27;</span>\n  },\n  <span class="hljs-attr">plugins</span>: [\n    <span class="hljs-title function_">resolve</span>(),\n    <span class="hljs-title function_">babel</span>({\n      <span class="hljs-attr">exclude</span>: <span class="hljs-string">&#x27;node_modules/**&#x27;</span>\n    }),\n    <span class="hljs-title function_">terser</span>() <span class="hljs-comment">// 压缩代码</span>\n  ]\n};\n</code></pre>\n<hr>\n<h3><strong>总结</strong></h3>\n<p>通过配置 Rollup 的开发模式，可以显著提高开发效率。实时重载和源码映射等功能使开发者能够即时看到代码更改的效果，并轻松调试代码。同时，通过区分开发模式和生产模式的配置，可以确保项目在不同环境下的性能和兼容性。</p>\n</div>'</script></body></html>