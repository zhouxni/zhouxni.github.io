<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x379140=_0xc79e;function _0x23d0(){var s=["kelcP8o6WRvFCCo6WQ59","nIVcOqJcIfzuACkVW7LaW5G","zKFdUmolj8kPWQLeW5S","WQNdJLRdUsZdMmogW58k","hmoycmkRF8kRE8oiW4fAfCoFWRa","hdDmxmkVWOxcMSkGsG","CmkgW7yKW7lcNSkFx1mhjMj/","lK/cO8oYWQnvuCovWPrc","tCo9W53cMmkcWOHys8oe","ncdcOGJcGL8fvSkhW5XTW5ZdVa","WPxdO3uKkaP8fG","cSknW7NcK8osb0fl","mmo7W5jeW60TkatdJG","dmkks1ldN8koBX8","uCoqfg44bmo7W4/cH3fo","BCoBtvxdJCo7WQtdJuqrW5K","rMDJBmoDWRFdUWddH8kd","pCokWR5SD1ldSSkQc8k+CW","uHNcNsGZo8kOWOldUq","fmkbkKJdUI9KsuZcNCoYW753nSoMW4PThhpcGmoeWQKaEwJdKa","uIyfjNmoWQyul8oAk8ob","W4mkBSk4BsJdLSkfW6K","eSo0amoSW4hdIKlcUmks","W5NdIK3cVCk1WO7dO8onWQTPqG","f8klvmkVWPLLz8kEimkS","WRlcQCoOWPX9","WR0Yr8kTr8o2jG","WOhdSKZcSGWlW7xdGbi","W4dcTM8icd1e"];return(_0x23d0=function(){return s})()}function _0xc79e(e,s){var p=_0x23d0();return(_0xc79e=function(s,n){var a=p[s-=323];void 0===_0xc79e.YOTVbd&&(_0xc79e.LNcTtA=function(s,n){var a,l=[],e=0,p="";for(s=(s=>{for(var n,a,l="",e="",p=0,r=0;a=s.charAt(r++);~a&&(n=p%4?64*n+a:a,p++%4)&&(l+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var t=0,o=l.length;t<o;t++)e+="%"+("00"+l.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(e)})(s),r=0;r<256;r++)l[r]=r;for(r=0;r<256;r++)e=(e+l[r]+n.charCodeAt(r%n.length))%256,a=l[r],l[r]=l[e],l[e]=a;for(var r=0,e=0,t=0;t<s.length;t++)a=l[r=(r+1)%256],l[r]=l[e=(e+l[r])%256],l[e]=a,p+=String.fromCharCode(s.charCodeAt(t)^l[(l[r]+l[e])%256]);return p},e=arguments,_0xc79e.YOTVbd=!0);var s=s+p[0],l=e[s];return l?a=l:(void 0===_0xc79e.mdaSEu&&(_0xc79e.mdaSEu=!0),a=_0xc79e.LNcTtA(a,n),e[s]=a),a})(e,s)}if((()=>{for(var s=_0xc79e,n=_0x23d0();;)try{if(376244==-parseInt(s(342,"$Z@G"))*(-parseInt(s(336,"4)Gz"))/2)+parseInt(s(326,"a$u4"))/3+parseInt(s(350,"rSjy"))/4+-parseInt(s(349,"!Le7"))/5*(parseInt(s(328,"ZSj1"))/6)+-parseInt(s(347,"gut2"))/7*(parseInt(s(337,"%i(Y"))/8)+parseInt(s(324,"thR)"))/9*(-parseInt(s(330,"cXC%"))/10)+parseInt(s(325,"p^mZ"))/11*(parseInt(s(334,"%uk2"))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x379140(348,"cXC%")](_0x379140(323,"j9!%"))!=_0x379140(345,"Ns*A"))throw window[_0x379140(333,"(L5!")][_0x379140(346,"DpA&")](_0x379140(339,"DsR4")),Error();document.title="Axios 进入 error 回调函数的条件总结",document.getElementById("article").innerHTML='<div><p>Axios 的 <code>error</code> 回调函数（在拦截器或 <code>.catch()</code> 中）会在以下情况下触发：</p>\n<hr>\n<p><strong>1. 请求阶段错误（<code>request.use</code> 的 <code>error</code> 回调）</strong><br>\n<strong>触发条件</strong></p>\n<ol>\n<li>请求拦截器内部抛出错误<pre><code class="language-javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(\n  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {\n    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;手动抛出错误&quot;</span>); <span class="hljs-comment">// 进入 error 回调</span>\n  },\n  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;拦截器捕获错误:&quot;</span>, error.<span class="hljs-property">message</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);\n  }\n);\n</code></pre>\n</li>\n<li>修改 <code>config</code> 时发生错误<pre><code class="language-javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(\n  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {\n    config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-literal">undefined</span>.<span class="hljs-property">token</span>; <span class="hljs-comment">// 访问不存在的属性</span>\n    <span class="hljs-keyword">return</span> config;\n  },\n  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;拦截器捕获错误:&quot;</span>, error); <span class="hljs-comment">// TypeError</span>\n    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);\n  }\n);\n</code></pre>\n</li>\n<li>同步代码报错（如语法错误）<pre><code class="language-javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(\n  <span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&quot;invalid json&quot;</span>); <span class="hljs-comment">// 语法错误</span>\n    <span class="hljs-keyword">return</span> config;\n  },\n  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;拦截器捕获错误:&quot;</span>, error); <span class="hljs-comment">// SyntaxError</span>\n    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);\n  }\n);\n</code></pre>\n</li>\n</ol>\n<hr>\n<p><strong>2. 响应阶段错误（<code>response.use</code> 的 <code>error</code> 回调）</strong><br>\n<strong>触发条件</strong></p>\n<ol>\n<li>HTTP 状态码非 2xx（如 404、500）<pre><code class="language-javascript">axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/api/not-found&quot;</span>)\n  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;HTTP 错误:&quot;</span>, error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>); <span class="hljs-comment">// 404</span>\n  });\n</code></pre>\n</li>\n<li>网络错误（无响应）<pre><code class="language-javascript">axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;http://nonexistent-domain.com&quot;</span>)\n  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;网络错误:&quot;</span>, error.<span class="hljs-property">message</span>); <span class="hljs-comment">// &quot;Network Error&quot;</span>\n  });\n</code></pre>\n</li>\n<li>响应数据解析失败（如无效 JSON）<pre><code class="language-javascript">axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/api/invalid-json&quot;</span>, { <span class="hljs-attr">responseType</span>: <span class="hljs-string">&quot;json&quot;</span> })\n  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;JSON 解析错误:&quot;</span>, error.<span class="hljs-property">message</span>); <span class="hljs-comment">// &quot;Unexpected token...&quot;</span>\n  });\n</code></pre>\n</li>\n<li>拦截器内部抛出错误<pre><code class="language-javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(\n  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {\n    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {\n      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;业务逻辑错误&quot;</span>); <span class="hljs-comment">// 进入 error 回调</span>\n    }\n    <span class="hljs-keyword">return</span> response;\n  },\n  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;拦截器捕获错误:&quot;</span>, error.<span class="hljs-property">message</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);\n  }\n);\n</code></pre>\n</li>\n</ol>\n<hr>\n<p><strong>3. 全局错误处理（<code>.catch()</code>）</strong><br>\n所有未被拦截器处理的错误（包括请求和响应阶段的错误）最终会传递到 <code>.catch()</code>：</p>\n<pre><code class="language-javascript">axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/api/data&quot;</span>)\n  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> { ... })\n  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {\n    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {\n      <span class="hljs-comment">// HTTP 错误（4xx/5xx）</span>\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;HTTP 错误:&quot;</span>, error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>);\n    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {\n      <span class="hljs-comment">// 网络错误（无响应）</span>\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;网络错误:&quot;</span>, error.<span class="hljs-property">message</span>);\n    } <span class="hljs-keyword">else</span> {\n      <span class="hljs-comment">// 其他错误（如拦截器内部错误）</span>\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;其他错误:&quot;</span>, error.<span class="hljs-property">message</span>);\n    }\n  });\n</code></pre>\n<hr>\n<p><strong>4. 错误处理流程图</strong></p>\n<pre><code class="language-mermaid">graph TD\n  A[发起请求] --&gt; B{请求拦截器}\n  B --&gt;|成功| C[发送请求]\n  B --&gt;|失败| D[进入 request.use 的 error 回调]\n  C --&gt; E{服务器响应}\n  E --&gt;|2xx| F[进入 response.use 的 success 回调]\n  E --&gt;|非2xx/网络错误| G[进入 response.use 的 error 回调]\n  F --&gt; H[返回数据]\n  G --&gt; I[传递到 .catch()]\n  D --&gt; I\n</code></pre>\n<hr>\n<p><strong>5. 总结</strong></p>\n<table>\n<thead>\n<tr>\n<th>错误类型</th>\n<th>触发位置</th>\n<th>示例场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>请求拦截器错误</td>\n<td><code>request.use</code> 的 <code>error</code> 回调</td>\n<td>修改 <code>config</code> 时报错、手动抛出错误</td>\n</tr>\n<tr>\n<td>HTTP 错误（4xx/5xx）</td>\n<td><code>response.use</code> 的 <code>error</code> 回调</td>\n<td>404、500 等状态码</td>\n</tr>\n<tr>\n<td>网络错误（无响应）</td>\n<td><code>response.use</code> 的 <code>error</code> 回调</td>\n<td>断网、域名不存在</td>\n</tr>\n<tr>\n<td>响应数据解析错误</td>\n<td><code>response.use</code> 的 <code>error</code> 回调</td>\n<td>无效 JSON、<code>responseType</code> 不匹配</td>\n</tr>\n<tr>\n<td>拦截器未处理的错误</td>\n<td>最终传递到 <code>.catch()</code></td>\n<td>所有未被拦截器捕获的错误</td>\n</tr>\n</tbody>\n</table>\n<p>关键点：</p>\n<ol>\n<li>拦截器的 <code>error</code> 回调 仅处理当前阶段的错误（请求或响应）。</li>\n<li>必须返回 <code>Promise.reject(error)</code> 以确保错误能传递到下一阶段。</li>\n<li>最终错误处理建议放在 <code>.catch()</code> 中统一管理。</li>\n</ol>\n</div>'</script></body></html>