<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2d083c=_0x4d3a;function _0x4d3a(a,n){var d=_0x38e1();return(_0x4d3a=function(n,e){var o=d[n-=254];void 0===_0x4d3a.omAlwx&&(_0x4d3a.igqQtT=function(n,e){var o,s=[],a=0,d="";for(n=(n=>{for(var e,o,s="",a="",d=0,c=0;o=n.charAt(c++);~o&&(e=d%4?64*e+o:o,d++%4)&&(s+=String.fromCharCode(255&e>>(-2*d&6))))o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var t=0,l=s.length;t<l;t++)a+="%"+("00"+s.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(a)})(n),c=0;c<256;c++)s[c]=c;for(c=0;c<256;c++)a=(a+s[c]+e.charCodeAt(c%e.length))%256,o=s[c],s[c]=s[a],s[a]=o;for(var c=0,a=0,t=0;t<n.length;t++)o=s[c=(c+1)%256],s[c]=s[a=(a+s[c])%256],s[a]=o,d+=String.fromCharCode(n.charCodeAt(t)^s[(s[c]+s[a])%256]);return d},a=arguments,_0x4d3a.omAlwx=!0);var n=n+d[0],s=a[n];return s?o=s:(void 0===_0x4d3a.GgZnHy&&(_0x4d3a.GgZnHy=!0),o=_0x4d3a.igqQtT(o,e),a[n]=o),o})(a,n)}if((()=>{for(var n=_0x4d3a,e=_0x38e1();;)try{if(993585==-parseInt(n(267,"*oHs"))*(-parseInt(n(254,"yCbB"))/2)+parseInt(n(261,"^xR$"))/3+parseInt(n(257,"%H7)"))/4+-parseInt(n(264,"sMcY"))/5+parseInt(n(266,"d6s4"))/6+parseInt(n(260,"PT$a"))/7+parseInt(n(262,"mw7g"))/8*(-parseInt(n(265,"LMJj"))/9))break;e.push(e.shift())}catch(n){e.push(e.shift())}})(),localStorage[_0x2d083c(263,"Dwgr")](_0x2d083c(269,"o@7m"))!=_0x2d083c(275,"4b[j"))throw window[_0x2d083c(255,"sMcY")][_0x2d083c(276,"mc(V")](_0x2d083c(273,"mw7g")),Error();function _0x38e1(){var n=["WODqW4jQqbiT","C3nscSkXBXVcSv1sW47dMmob","FSontSktWQHgW7BcSCo3W7mCW5e","W4f/W5H4WRZcRcfJDSkWWRtcOcG","WR7cR0ddOgqJtcRdIG","ECo0WPtcOCoGW4ZdS2JcICosW70/W4C","egyotCkGlWe","WPZdHa9bWRJcJGGTy8oMWPVcGmoa","WOVdVeVcSJH5FCkKkSkJrrBdQ8omCCo4W6/dJCoHWQFcMftcPCofW7/cOa","xmo+WRdcMJqBWRK","W4tdMI/dHa8","mmo8W5dcKYhdTSo3","WPe8W4ZcIbldJvqzWPlcKmoIWQS","wSoUWPpcM8ktW5Xh","W4HMWPJdMLlcKemU","W7yOaetdOrlcS8okWQnSgXm","fgpdTCk1qG5etmkhWQ7cUCo5","W6JdRM/dSSk+WPuJWQRdPv/dV18b","e27dTmk+rqKkzSkJWQhcMmoUW7i","W6ZdQMNdSSk2WPmSWQZdQe3dU3qH","W5BcQWueWOrBfapdRSoVCcFdGW","W5xcUaRdSh1YzmoUjmkdEa3dVW","DCkNnJhdGmo5WQq","WPm4W47cIH/dGbWzWRtcVSo+WQFcQq"];return(_0x38e1=function(){return n})()}document.title="使用 --module-path 参数控制 Webpack 模块解析",document.getElementById("article").innerHTML='<div><p><code>--module-path</code> 是 Node.js 的参数（而非 Webpack 专属参数），它允许你指定 Node.js 模块的查找路径。在 Webpack 构建中使用这个参数可以强制让 Webpack 及其 loader/plugin 从指定位置加载依赖。</p>\n<h2>基本用法</h2>\n<pre><code class="language-sh">node --module-path /path/to/project/node_modules webpack --config webpack.config.js\n</code></pre>\n<h2>对 Webpack 的影响</h2>\n<h3>1. 控制核心模块解析</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># 强制使用特定位置的 webpack 包</span>\nnode --module-path /projects/core/node_modules webpack\n</code></pre>\n<h3>2. 控制 loader/plugin 解析</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># 确保所有依赖从项目 node_modules 加载</span>\nnode --module-path ./node_modules webpack\n</code></pre>\n<h2>实际应用场景</h2>\n<h3>1. 多项目共享 node_modules</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># 共享一个公共的 node_modules 目录</span>\nnode --module-path /shared/node_modules webpack\n</code></pre>\n<h3>2. 强制使用特定版本</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># 使用指定版本的 webpack 和 loader</span>\nnode --module-path ./node_modules_v4 webpack\n</code></pre>\n<h3>3. 与 npx 配合使用</h3>\n<pre><code class="language-sh">npx --node-arg=--module-path --node-arg=./node_modules webpack\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li><strong>路径解析规则</strong>  ：\n<ul>\n<li>会完全替换默认的 <code>node_modules</code> 查找逻辑</li>\n<li>多个路径可以用 <code>:</code>(Linux/Mac) 或 <code>;</code>(Windows) 分隔</li>\n</ul>\n</li>\n<li><strong>与 Webpack 配置的关系</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// webpack.config.js</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-built_in">require</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;webpack&#x27;</span>)); <span class="hljs-comment">// 会显示 --module-path 指定的路径</span>\n</code></pre>\n</li>\n<li><strong>与 <code>NODE_PATH</code> 的区别</strong>  ：\n<ul>\n<li><code>--module-path</code> 优先级高于 <code>NODE_PATH</code></li>\n<li><code>--module-path</code> 会完全替换默认查找路径</li>\n</ul>\n</li>\n</ol>\n<h2>高级用法</h2>\n<h3>1. 多路径配置</h3>\n<pre><code class="language-sh">node --module-path ./first_node_modules:./second_node_modules webpack\n</code></pre>\n<h3>2. 调试模块解析</h3>\n<pre><code class="language-sh">node --module-path ./node_modules -e <span class="hljs-string">&quot;console.log(require.resolve(&#x27;webpack&#x27;))&quot;</span>\n</code></pre>\n<h3>3. 在 package.json 中使用</h3>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node --module-path ./node_modules webpack&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h2>替代方案比较</h2>\n<table>\n<thead>\n<tr>\n<th>方案</th>\n<th>作用范围</th>\n<th>优先级</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--module-path</code></td>\n<td>整个 Node.js 进程</td>\n<td>最高</td>\n</tr>\n<tr>\n<td><code>NODE_PATH</code></td>\n<td>整个 Node.js 进程</td>\n<td>中等</td>\n</tr>\n<tr>\n<td><code>resolve.modules</code></td>\n<td>仅 Webpack 构建</td>\n<td>最低</td>\n</tr>\n</tbody>\n</table>\n<h2>常见问题解决</h2>\n<p><strong>问题</strong>  ：<code>Cannot find module \'webpack\'</code></p>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-sh"><span class="hljs-comment"># 确保路径包含 webpack</span>\nnode --module-path ./node_modules:./node_modules/webpack webpack\n</code></pre>\n<p><strong>问题</strong>  ：与某些 CLI 工具冲突</p>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-sh"><span class="hljs-comment"># 使用 NODE_OPTIONS 环境变量</span>\nNODE_OPTIONS=<span class="hljs-string">&quot;--module-path ./node_modules&quot;</span> webpack\n</code></pre>\n<h2>最佳实践建议</h2>\n<ol>\n<li>在 Docker 或 CI 环境中明确指定路径</li>\n<li>对于 monorepo 项目，使用绝对路径</li>\n<li>关键项目应在 package.json 中固化该配置</li>\n<li>配合 <code>require.resolve</code> 进行验证</li>\n</ol>\n<p>这个参数在需要严格控制依赖来源的环境中特别有用，特别是在企业级多项目共享依赖或需要严格版本控制的场景中。</p>\n</div>'</script></body></html>