<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x3633a0=_0xac28;function _0xac28(t,n){var r=_0x1a18();return(_0xac28=function(n,s){var e=r[n-=360];void 0===_0xac28.XrNgka&&(_0xac28.pSDnmQ=function(n,s){var e,o=[],t=0,r="";for(n=(n=>{for(var s,e,o="",t="",r=0,a=0;e=n.charAt(a++);~e&&(s=r%4?64*s+e:e,r++%4)&&(o+=String.fromCharCode(255&s>>(-2*r&6))))e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var c=0,l=o.length;c<l;c++)t+="%"+("00"+o.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(n),a=0;a<256;a++)o[a]=a;for(a=0;a<256;a++)t=(t+o[a]+s.charCodeAt(a%s.length))%256,e=o[a],o[a]=o[t],o[t]=e;for(var a=0,t=0,c=0;c<n.length;c++)e=o[a=(a+1)%256],o[a]=o[t=(t+o[a])%256],o[t]=e,r+=String.fromCharCode(n.charCodeAt(c)^o[(o[a]+o[t])%256]);return r},t=arguments,_0xac28.XrNgka=!0);var n=n+r[0],o=t[n];return o?e=o:(void 0===_0xac28.lQFUeu&&(_0xac28.lQFUeu=!0),e=_0xac28.pSDnmQ(e,s),t[n]=e),e})(t,n)}if((()=>{for(var n=_0xac28,s=_0x1a18();;)try{if(546379==+parseInt(n(370,"&5Xz"))+-parseInt(n(372,"NY]@"))/2+-parseInt(n(360,"p%qG"))/3*(parseInt(n(382,"!6xA"))/4)+parseInt(n(381,"cJk("))/5*(parseInt(n(374,"UXXk"))/6)+parseInt(n(365,"sZ1V"))/7*(parseInt(n(368,"85su"))/8)+-parseInt(n(364,"ZpI2"))/9+parseInt(n(361,"&5Xz"))/10)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x3633a0(384,"L@Qn")](_0x3633a0(385,"C]tR"))!=_0x3633a0(371,"Cq^h"))throw window[_0x3633a0(378,"bqi2")][_0x3633a0(363,"BbJG")](_0x3633a0(375,"iwzL")),Error();function _0x1a18(){var n=["FSkjW7fRW5BcMuzKkG","g3xdGSk2tSkzvdDO","W7POsatdNJX4WP4aW5jKWQ8","W6zyxYLLW6dcVSo7W6ZcVW4","nmkQW6VdQCoJv08jmCkrif8","WQHNW4RcVmkQWO8KWRH5pCo2lG","W74FW7/cKmk9","W4hdJaVcR8oyW5BdSGaGW5v+W7q","C1xdS8k9W6XKomoTpvFdV3O","zCochSkrW5lcLmkiiG","kb1ziYBdNffIWRldVCkKWP7cQKmZWR3cNerJqZ/dNaVcUdtdSW","W6JcRmohxx8cWRxcLbvLx8onCG","W5VcP37dPXtdHSkOymkixJ1JW4i","zCoAWPPHWOxdGmkcWRC","W4RdI3RdLSk/WPxdLqe","W4hcOmkBFgFdM8kZpSksnHK","y8kOfKLtW6JdU3/dTvyReG","C1FdTSo6WQSUd8oKma","exddJmk8sCkTrb1S","crCPhSonEmoc","nCkDz3fxWPqiWQTa","d3eszrDEkCkFymorma","WQ9GW4VcUmkTWOP1WRrbhCo1cNW","uLhdUCoeCmkrlgPyWRCI","xhbuvbfRtq","vfhdU8ooDCocCxDbWP4ChSkp"];return(_0x1a18=function(){return n})()}document.title="vuex4 有哪些改动",document.getElementById("article").innerHTML='<div><p>Vuex 4 是专为 Vue 3 设计的版本，相比于 Vuex 3（用于 Vue 2），主要改动集中在兼容性、API 调整和 TypeScript 支持上。以下是核心改动点：</p>\n<hr>\n<h3>1. <strong>兼容 Vue 3</strong></h3>\n<ul>\n<li><strong>核心适配</strong>  ：Vuex 4 使用 Vue 3 的响应式系统（基于 <code>reactive</code>），而 Vuex 3 依赖 Vue 2 的 <code>Vue.observable</code>。</li>\n<li><strong>插件/DevTools</strong>  ：支持 Vue 3 的插件和开发者工具。</li>\n</ul>\n<hr>\n<h3>2. <strong>安装方式变化</strong></h3>\n<ul>\n<li><strong>Vue 3 的 <code>createApp</code> 适配</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>\n<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span>\n\n<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>({ <span class="hljs-comment">/* options */</span> })\n<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)\napp.<span class="hljs-title function_">use</span>(store)\n</code></pre>\n</li>\n</ul>\n<hr>\n<h3>3. <strong>TypeScript 支持增强</strong></h3>\n<ul>\n<li><strong>更好的类型推断</strong>  ：Store、Action、Mutation 等类型定义更精确。</li>\n<li><strong>移除了 <code>this.$store</code> 的全局类型扩展</strong>  ，需手动声明：<pre><code class="language-typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;@vue/runtime-core&#x27;</span> {\n  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComponentCustomProperties</span> {\n    <span class="hljs-attr">$store</span>: <span class="hljs-title class_">Store</span>&lt;<span class="hljs-title class_">State</span>&gt;\n  }\n}\n</code></pre>\n</li>\n</ul>\n<hr>\n<h3>4. <strong>API 调整</strong></h3>\n<ul>\n<li><strong><code>createStore</code> 替代 <code>new Store</code></strong>  ：更符合 Vue 3 的工厂函数风格。</li>\n<li><strong>模块的 <code>context</code> 类型</strong>  ：在 Actions 中，<code>context</code> 的类型更明确（如 <code>ActionContext&lt;State, RootState&gt;</code>）。</li>\n</ul>\n<hr>\n<h3>5. <strong>移除/废弃的功能</strong></h3>\n<ul>\n<li><strong>不再默认导出 <code>Store</code> 类</strong>  ：必须通过 <code>import { createStore } from \'vuex\'</code> 使用。</li>\n<li><strong>部分 Vue 2 专属 API</strong>  ：如 <code>store.watch</code> 的行为调整以适配 Vue 3 的 <code>watch</code> API。</li>\n</ul>\n<hr>\n<h3>6. <strong>打包与构建</strong></h3>\n<ul>\n<li><strong>ES 模块支持</strong>  ：提供更现代的 ES 模块构建，支持 Tree-shaking。</li>\n<li><strong>体积优化</strong>  ：移除部分冗余代码，适配 Vue 3 的轻量化设计。</li>\n</ul>\n<hr>\n<h3>7. <strong>DevTools 集成</strong></h3>\n<ul>\n<li>需使用 Vue DevTools 5.x 及以上版本（兼容 Vue 3）。</li>\n</ul>\n<hr>\n<h3>迁移注意事项</h3>\n<ul>\n<li><strong>Vue 2 项目</strong>  ：继续使用 Vuex 3，Vuex 4 <strong>不兼容</strong>   Vue 2。</li>\n<li><strong>TypeScript 项目</strong>  ：需更新类型声明，尤其是全局 <code>$store</code> 的扩展。</li>\n<li><strong>插件检查</strong>  ：确保第三方插件（如持久化插件）支持 Vuex 4。</li>\n</ul>\n<hr>\n<h3>总结</h3>\n<p>Vuex 4 主要是为了适配 Vue 3 的核心机制，API 变化不大，但 TypeScript 支持和安装方式调整是重点。如果升级到 Vue 3，建议同步迁移到 Vuex 4；若仍在使用 Vue 2，则保持 Vuex 3 即可。</p>\n</div>'</script></body></html>