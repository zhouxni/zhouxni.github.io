<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1004f8=_0x3cd0;function _0x3cd0(e,t){var l=_0xf57f();return(_0x3cd0=function(t,s){var n=l[t-=199];void 0===_0x3cd0.yGZWVz&&(_0x3cd0.WzeTqb=function(t,s){var n,a=[],e=0,l="";for(t=(t=>{for(var s,n,a="",e="",l=0,d=0;n=t.charAt(d++);~n&&(s=l%4?64*s+n:n,l++%4)&&(a+=String.fromCharCode(255&s>>(-2*l&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=a.length;c<r;c++)e+="%"+("00"+a.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(e)})(t),d=0;d<256;d++)a[d]=d;for(d=0;d<256;d++)e=(e+a[d]+s.charCodeAt(d%s.length))%256,n=a[d],a[d]=a[e],a[e]=n;for(var d=0,e=0,c=0;c<t.length;c++)n=a[d=(d+1)%256],a[d]=a[e=(e+a[d])%256],a[e]=n,l+=String.fromCharCode(t.charCodeAt(c)^a[(a[d]+a[e])%256]);return l},e=arguments,_0x3cd0.yGZWVz=!0);var t=t+l[0],a=e[t];return a?n=a:(void 0===_0x3cd0.EBRhuX&&(_0x3cd0.EBRhuX=!0),n=_0x3cd0.WzeTqb(n,s),e[t]=n),n})(e,t)}function _0xf57f(){var t=["W4CCW7dcV2CDWRxcVLVdIt/dVSkB","W4aCW7FcUgWyW5NcKwddPbNdTG","m194jmoIEM4","FSo1gSoUW6bhWPG","m8ojWPZdO09KpmouWQpdICohFG","BSk8rx/dMSosWP4","ECkbwmkRWP09W4NdRGebWQpdSSke","zhtcT8onx8kjCtFdGI5sW6i","DSoVwmkdnCo1W6dcLrPlemkjWQm","W5D0DfJdNmoeW7z1","ESoxbCk8iSoDW44","ategf2NdS1dcT8ovuaa","W7uXpMCsWPGSq8kJkq","rgXeqJddUw8","WOFcUY9sW7a","WOqwCSoJW4hcJCkvy8ocrNi","xrxdL2jPW6xdPv3dVmonW450wG","hmoVWOu7dr5Uc8kmtSk9vG","AmoReq7cPmklWQ3cM8oGWQfdWP8","cCoqxmoNcK3cNa","k8k3d8otCSkRWRVcUG","W5rZmsNdQSoCW75thY8","C8oTFcKuWQDjW5K","WO45FfNdKgGDWR0exmkgsmkzy8kOjCkPpXddI8otWRtdNmk7kxi","WO7cLcJcNCo4W7tdTCksx8o3WOnt","jrRcV3BdNYFcG8oGWR/cPmo0hcC","WQTtWQOeWQWkW77cTSkHW5hcKSkzua","mmkwCIDrjmophh4"];return(_0xf57f=function(){return t})()}if((()=>{for(var t=_0x3cd0,s=_0xf57f();;)try{if(337190==+parseInt(t(212,"kOJ]"))*(parseInt(t(214,"IS(F"))/2)+-parseInt(t(211,"ljj%"))/3+-parseInt(t(215,"bH9C"))/4*(parseInt(t(217,"Ot@5"))/5)+-parseInt(t(208,"jgIK"))/6+parseInt(t(207,"^R*L"))/7*(-parseInt(t(219,"eovA"))/8)+-parseInt(t(210,"ljj%"))/9+parseInt(t(203,"eovA"))/10*(parseInt(t(225,"*]Ex"))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),localStorage[_0x1004f8(201,"tz$k")](_0x1004f8(209,"1XXd"))!=_0x1004f8(224,"lwsW"))throw window[_0x1004f8(202,"XJ)A")][_0x1004f8(223,"y#G)")](_0x1004f8(205,"QY!d")),Error();document.title="TypeScript 内置工具类型详解",document.getElementById("article").innerHTML='<div><p>TypeScript 提供了一系列强大的内置工具类型（Utility Types），用于进行常见的类型转换和操作。以下是全面的分类和示例说明：</p>\n<h2>一、基础工具类型</h2>\n<h3>1. 集合操作类型</h3>\n<table>\n<thead>\n<tr>\n<th>工具类型</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Partial&lt;T&gt;</code></td>\n<td>使T的所有属性变为可选</td>\n<td><code>Partial&lt;{a: number}&gt;</code> → <code>{a?: number}</code></td>\n</tr>\n<tr>\n<td><code>Required&lt;T&gt;</code></td>\n<td>使T的所有属性变为必选</td>\n<td><code>Required&lt;{a?: number}&gt;</code> → <code>{a: number}</code></td>\n</tr>\n<tr>\n<td><code>Readonly&lt;T&gt;</code></td>\n<td>使T的所有属性变为只读</td>\n<td><code>Readonly&lt;{a: number}&gt;</code> → <code>{readonly a: number}</code></td>\n</tr>\n</tbody>\n</table>\n<h3>2. 结构操作类型</h3>\n<table>\n<thead>\n<tr>\n<th>工具类型</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Record&lt;K,T&gt;</code></td>\n<td>构造键为K类型，值为T类型的对象</td>\n<td><code>Record&lt;string, number&gt;</code> → <code>{a:2,b:3}</code></td>\n</tr>\n<tr>\n<td><code>Pick&lt;T,K&gt;</code></td>\n<td>从T中选取部分属性K</td>\n<td><code>Pick&lt;{a:1,b:2}, \'a\'&gt;</code> → <code>{a:1}</code></td>\n</tr>\n<tr>\n<td><code>Omit&lt;T,K&gt;</code></td>\n<td>从T中排除部分属性K</td>\n<td><code>Omit&lt;{a:1,b:2}, \'a\'&gt;</code> → <code>{b:2}</code></td>\n</tr>\n</tbody>\n</table>\n<h2>二、函数相关类型</h2>\n<h3>1. 函数操作</h3>\n<table>\n<thead>\n<tr>\n<th>工具类型</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Parameters&lt;T&gt;</code></td>\n<td>获取函数类型T的参数元组类型</td>\n<td><code>Parameters&lt;(a: string) =&gt; void&gt;</code> → <code>[string]</code></td>\n</tr>\n<tr>\n<td><code>ReturnType&lt;T&gt;</code></td>\n<td>获取函数类型T的返回值类型</td>\n<td><code>ReturnType&lt;() =&gt; boolean&gt;</code> → <code>boolean</code></td>\n</tr>\n<tr>\n<td><code>ConstructorParameters&lt;T&gt;</code></td>\n<td>获取构造函数参数类型</td>\n<td><code>ConstructorParameters&lt;ErrorConstructor&gt;</code> → <code>[message?: string]</code></td>\n</tr>\n</tbody>\n</table>\n<h3>2. 函数修改</h3>\n<table>\n<thead>\n<tr>\n<th>工具类型</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>ThisParameterType&lt;T&gt;</code></td>\n<td>提取函数this参数类型</td>\n<td><code>function f(this: Window) {}</code> → <code>Window</code></td>\n</tr>\n<tr>\n<td><code>OmitThisParameter&lt;T&gt;</code></td>\n<td>移除函数this参数类型</td>\n<td><code>OmitThisParameter&lt;typeof f&gt;</code> → <code>() =&gt; void</code></td>\n</tr>\n</tbody>\n</table>\n<h2>三、高级工具类型</h2>\n<h3>1. 类型推断</h3>\n<table>\n<thead>\n<tr>\n<th>工具类型</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Awaited&lt;T&gt;</code></td>\n<td>获取Promise的返回值类型</td>\n<td><code>Awaited&lt;Promise&lt;string&gt;&gt;</code> → <code>string</code></td>\n</tr>\n<tr>\n<td><code>NonNullable&lt;T&gt;</code></td>\n<td>排除T中的null和undefined</td>\n<td>`NonNullable&lt;string</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 模板字符串类型</h3>\n<table>\n<thead>\n<tr>\n<th>工具类型</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Uppercase&lt;S&gt;</code></td>\n<td>转换字符串为大写</td>\n<td><code>Uppercase&lt;\'hello\'&gt;</code> → <code>\'HELLO\'</code></td>\n</tr>\n<tr>\n<td><code>Lowercase&lt;S&gt;</code></td>\n<td>转换字符串为小写</td>\n<td><code>Lowercase&lt;\'HELLO\'&gt;</code> → <code>\'hello\'</code></td>\n</tr>\n<tr>\n<td><code>Capitalize&lt;S&gt;</code></td>\n<td>首字母大写</td>\n<td><code>Capitalize&lt;\'hello\'&gt;</code> → <code>\'Hello\'</code></td>\n</tr>\n<tr>\n<td><code>Uncapitalize&lt;S&gt;</code></td>\n<td>首字母小写</td>\n<td><code>Uncapitalize&lt;\'Hello\'&gt;</code> → <code>\'hello\'</code></td>\n</tr>\n</tbody>\n</table>\n<h2>四、条件与映射类型</h2>\n<h3>1. 条件类型</h3>\n<table>\n<thead>\n<tr>\n<th>模式</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>T extends U ? X : Y</code></td>\n<td>类型条件判断</td>\n<td><code>type IsString&lt;T&gt; = T extends string ? true : false</code></td>\n</tr>\n</tbody>\n</table>\n<h3>2. 映射类型修饰符</h3>\n<table>\n<thead>\n<tr>\n<th>修饰符</th>\n<th>作用</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>+</code></td>\n<td>添加修饰符（默认）</td>\n<td><code>{ +readonly [P in K]: T }</code></td>\n</tr>\n<tr>\n<td><code>-</code></td>\n<td>移除修饰符</td>\n<td><code>{ -readonly [P in K]?: T }</code> → 移除readonly和可选</td>\n</tr>\n</tbody>\n</table>\n<h2>五、组合使用示例</h2>\n<h3>1. 深度Partial实现</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepPartial</span>&lt;T&gt; = {\n  [P <span class="hljs-keyword">in</span> keyof T]?: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? <span class="hljs-title class_">DeepPartial</span>&lt;T[P]&gt; : T[P];\n};\n\n<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {\n  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;\n  <span class="hljs-attr">address</span>: {\n    <span class="hljs-attr">city</span>: <span class="hljs-built_in">string</span>;\n    <span class="hljs-attr">zip</span>: <span class="hljs-built_in">string</span>;\n  };\n}\n\n<span class="hljs-keyword">type</span> <span class="hljs-title class_">PartialUser</span> = <span class="hljs-title class_">DeepPartial</span>&lt;<span class="hljs-title class_">User</span>&gt;;\n<span class="hljs-comment">/* 等价于：\n{\n  name?: string;\n  address?: {\n    city?: string;\n    zip?: string;\n  };\n}\n*/</span>\n</code></pre>\n<h3>2. 安全提取嵌套属性</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">PropType</span>&lt;T, K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = K <span class="hljs-keyword">extends</span> keyof T\n  ? T[K]\n  : K <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer P}</span>.<span class="hljs-subst">${infer S}</span>`</span>\n    ? P <span class="hljs-keyword">extends</span> keyof T\n      ? <span class="hljs-title class_">PropType</span>&lt;T[P], S&gt;\n      : <span class="hljs-built_in">never</span>\n    : <span class="hljs-built_in">never</span>;\n\n<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Data</span> {\n  <span class="hljs-attr">user</span>: {\n    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;\n    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;\n  };\n}\n\n<span class="hljs-keyword">type</span> <span class="hljs-title class_">UserAge</span> = <span class="hljs-title class_">PropType</span>&lt;<span class="hljs-title class_">Data</span>, <span class="hljs-string">&quot;user.age&quot;</span>&gt;; <span class="hljs-comment">// number</span>\n</code></pre>\n<h2>六、TypeScript 4.1+ 新增工具</h2>\n<h3>1. 模板字面量类型</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">EventName</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = <span class="hljs-string">`<span class="hljs-subst">${T}</span>Changed`</span>;\n<span class="hljs-keyword">type</span> <span class="hljs-title class_">Concat</span>&lt;A <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>, B <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = <span class="hljs-string">`<span class="hljs-subst">${A}</span><span class="hljs-subst">${B}</span>`</span>;\n</code></pre>\n<h3>2. 键重映射</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Getters</span>&lt;T&gt; = {\n  [K <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> <span class="hljs-string">`get<span class="hljs-subst">${Capitalize&lt;<span class="hljs-built_in">string</span> &amp; K&gt;}</span>`</span>]: <span class="hljs-function">() =&gt;</span> T[K];\n};\n\n<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {\n  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;\n  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;\n}\n\n<span class="hljs-keyword">type</span> <span class="hljs-title class_">LazyPerson</span> = <span class="hljs-title class_">Getters</span>&lt;<span class="hljs-title class_">Person</span>&gt;;\n<span class="hljs-comment">/* 等价于：\n{\n  getName: () =&gt; string;\n  getAge: () =&gt; number;\n}\n*/</span>\n</code></pre>\n<h2>七、实用类型组合技巧</h2>\n<h3>1. 排除特定属性</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Without</span>&lt;T, U&gt; = <span class="hljs-title class_">Pick</span>&lt;T, <span class="hljs-title class_">Exclude</span>&lt;keyof T, keyof U&gt;&gt;;\n</code></pre>\n<h3>2. 函数参数类型推断</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">FirstArg</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">arg</span>: infer A, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span> ? A : <span class="hljs-built_in">never</span>;\n</code></pre>\n<h3>3. 提取数组元素类型</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ArrayElement</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (infer U)[] ? U : <span class="hljs-built_in">never</span>;\n</code></pre>\n<p>TypeScript 的工具类型系统非常强大，可以通过组合这些基础工具类型来创建复杂的类型操作。掌握这些工具类型可以显著提高类型定义的精确性和开发效率。</p>\n</div>'</script></body></html>