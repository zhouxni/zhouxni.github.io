<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x48b942=_0x5e8e;function _0x7624(){var s=["W6pdH8oRW6ddTSkVW6G","bSo3W4FcPmkgW4bK","W6yGWQffBSk9W412hdlcQSotW5y","ESo4Dw8IW7zyWO8","j8kHygeGW61oWOS","WPX/AL7cJCk9fNeoWR/dKmodWR8","WRpdHSkaDmkUWQ8bWOvZq8obvG","W6uNWQmZhSoQWQD1bG","u8kAWONcHcr/WRddNSoklmknWPldQ8kPnCkpWPhdMSkTkfCFW67dHmkAgq","l8owWOxcKY3dSw/dGdi","Fe/dISkPWO1gW70R","WRaEW6ekWRtcRSk2i8oOW5vGcG","W4LjW4z9aSknCSoBWQyYabBcJa","AI1zjvRdNSoxeSozqmkLeY8","W41nW4L9d8kdCmoHWOiDpr/cSW","W5TaW5BcVmokWPvdtW0ICtJdSW","gXTgW6BcIqRcKZKkWQK","WQJcJZBdISklqSksWPxcLG","qufeWRTCW6WeW6VcVNide8ki","W7xdKqzyW6tdTCkJ","xhqdW6bFDgJdLSkJ","B8k1dtBcISonb8oCAh5/W7BdLa","WQHeW6XWihDm","W41mW4H7a8kfCmomWPORdsFcLG","W44ZEmoZjq","CmkpoSksWOlcOui","W6CGWQvaoSo4WRr4hYG","lcvzWRqvpHxdG8kJW7afaSk7","wZBdUSktW6RdHCk0WOZcLa","g1ZcKuJcGKRdNa"];return(_0x7624=function(){return s})()}function _0x5e8e(e,s){var p=_0x7624();return(_0x5e8e=function(s,n){var a=p[s-=267];void 0===_0x5e8e.UiqsDO&&(_0x5e8e.UqQwEW=function(s,n){var a,t=[],e=0,p="";for(s=(s=>{for(var n,a,t="",e="",p=0,l=0;a=s.charAt(l++);~a&&(n=p%4?64*n+a:a,p++%4)&&(t+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,o=t.length;r<o;r++)e+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)})(s),l=0;l<256;l++)t[l]=l;for(l=0;l<256;l++)e=(e+t[l]+n.charCodeAt(l%n.length))%256,a=t[l],t[l]=t[e],t[e]=a;for(var l=0,e=0,r=0;r<s.length;r++)a=t[l=(l+1)%256],t[l]=t[e=(e+t[l])%256],t[e]=a,p+=String.fromCharCode(s.charCodeAt(r)^t[(t[l]+t[e])%256]);return p},e=arguments,_0x5e8e.UiqsDO=!0);var s=s+p[0],t=e[s];return t?a=t:(void 0===_0x5e8e.PAQLNp&&(_0x5e8e.PAQLNp=!0),a=_0x5e8e.UqQwEW(a,n),e[s]=a),a})(e,s)}if((()=>{for(var s=_0x5e8e,n=_0x7624();;)try{if(417981==+parseInt(s(279,"6B*6"))*(parseInt(s(291,"@I#@"))/2)+parseInt(s(294,"HtdS"))/3*(-parseInt(s(268,"wLuI"))/4)+parseInt(s(281,"zgBM"))/5*(parseInt(s(288,"%@z4"))/6)+parseInt(s(276,"R83T"))/7*(-parseInt(s(273,"Hf&H"))/8)+-parseInt(s(278,"NH4I"))/9+-parseInt(s(277,"amaV"))/10+-parseInt(s(274,"Z*u#"))/11*(-parseInt(s(272,"VWOE"))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x48b942(292,"$if[")](_0x48b942(283,"6MkA"))!=_0x48b942(287,"!B2l"))throw window[_0x48b942(267,"v])h")][_0x48b942(285,"%A5U")](_0x48b942(271,"^i1m")),Error();document.title="小程序 css 安全区域变量",document.getElementById("article").innerHTML='<div><p>在小程序中，可以使用 <strong>CSS 环境变量（Environment Variables）</strong>   来适配刘海屏、圆角屏、底部安全区域等特殊屏幕布局。这些变量由小程序底层自动提供，无需手动配置 <code>viewport</code>（小程序没有 <code>&lt;meta&gt;</code> 标签概念）。</p>\n<hr>\n<h2><strong>📌 小程序 CSS 安全区域变量</strong></h2>\n<h3><strong>1. <code>env(safe-area-inset-*)</code> 系列变量</strong></h3>\n<p>这些变量会自动计算屏幕的安全区域（避开刘海、圆角、底部 Home Bar 等）：</p>\n<table>\n<thead>\n<tr>\n<th>变量名</th>\n<th>说明</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>env(safe-area-inset-top)</code></td>\n<td>顶部安全区域高度（状态栏 + 刘海）</td>\n<td>适配顶部刘海屏</td>\n</tr>\n<tr>\n<td><code>env(safe-area-inset-right)</code></td>\n<td>右侧安全区域宽度</td>\n<td>适配右侧圆角屏</td>\n</tr>\n<tr>\n<td><code>env(safe-area-inset-bottom)</code></td>\n<td>底部安全区域高度（如 iPhone Home Bar）</td>\n<td>防止内容被底部遮挡</td>\n</tr>\n<tr>\n<td><code>env(safe-area-inset-left)</code></td>\n<td>左侧安全区域宽度</td>\n<td>适配左侧圆角屏</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>2. 如何使用？</strong></h3>\n<h4><strong>方法 1：直接在 WXSS 中使用</strong></h4>\n<pre><code class="language-css"><span class="hljs-selector-class">.page</span> {\n  <span class="hljs-comment">/* 顶部避开刘海 */</span>\n  <span class="hljs-attribute">padding-top</span>: <span class="hljs-built_in">env</span>(safe-area-inset-top, <span class="hljs-number">20px</span>); <span class="hljs-comment">/* 20px 是兼容旧设备的默认值 */</span>\n\n  <span class="hljs-comment">/* 底部避开 Home Bar */</span>\n  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-built_in">env</span>(safe-area-inset-bottom, <span class="hljs-number">0</span>);\n\n  <span class="hljs-comment">/* 左右避开圆角 */</span>\n  <span class="hljs-attribute">padding-left</span>: <span class="hljs-built_in">env</span>(safe-area-inset-left, <span class="hljs-number">0</span>);\n  <span class="hljs-attribute">padding-right</span>: <span class="hljs-built_in">env</span>(safe-area-inset-right, <span class="hljs-number">0</span>);\n}\n</code></pre>\n<ul>\n<li><code>env(safe-area-inset-top, 20px)</code> 表示：\n<ul>\n<li>如果支持 <code>safe-area-inset-top</code>，则使用它的值；</li>\n<li>如果不支持，则使用 <code>20px</code>（兼容旧设备）。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4><strong>方法 2：结合 JS 动态获取安全区域</strong></h4>\n<p>如果 CSS 变量在某些设备上不生效，可以结合 <code>wx.getSystemInfoSync()</code> 获取安全区域数据：</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">Page</span>({\n  <span class="hljs-attr">data</span>: {\n    <span class="hljs-attr">safeAreaInsets</span>: {\n      <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,\n      <span class="hljs-attr">bottom</span>: <span class="hljs-number">0</span>,\n      <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,\n      <span class="hljs-attr">right</span>: <span class="hljs-number">0</span>,\n    },\n  },\n  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> systemInfo = wx.<span class="hljs-title function_">getSystemInfoSync</span>();\n    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({\n      <span class="hljs-attr">safeAreaInsets</span>: {\n        <span class="hljs-attr">top</span>: systemInfo.<span class="hljs-property">safeArea</span>?.<span class="hljs-property">top</span> || systemInfo.<span class="hljs-property">statusBarHeight</span> || <span class="hljs-number">20</span>,\n        <span class="hljs-attr">bottom</span>: systemInfo.<span class="hljs-property">windowHeight</span> - systemInfo.<span class="hljs-property">safeArea</span>?.<span class="hljs-property">bottom</span> || <span class="hljs-number">0</span>,\n        <span class="hljs-attr">left</span>: systemInfo.<span class="hljs-property">safeArea</span>?.<span class="hljs-property">left</span> || <span class="hljs-number">0</span>,\n        <span class="hljs-attr">right</span>: systemInfo.<span class="hljs-property">screenWidth</span> - systemInfo.<span class="hljs-property">safeArea</span>?.<span class="hljs-property">right</span> || <span class="hljs-number">0</span>,\n      },\n    });\n  },\n});\n</code></pre>\n<p><strong>WXML 中使用：</strong></p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>\n  <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding-top: {{safeAreaInsets.top}}px; padding-bottom: {{safeAreaInsets.bottom}}px&quot;</span>\n&gt;</span>\n  内容区域\n<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n</code></pre>\n<hr>\n<h3><strong>3. 兼容性说明</strong></h3>\n<table>\n<thead>\n<tr>\n<th><strong>平台</strong></th>\n<th><strong>支持情况</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>iOS</strong></td>\n<td>✅ 全系支持 <code>env(safe-area-inset-*)</code>（iPhone X 及以上）</td>\n</tr>\n<tr>\n<td><strong>Android</strong></td>\n<td>⚠️ 部分机型支持（如华为、小米刘海屏），建议结合 <code>wx.getSystemInfoSync()</code> 判断</td>\n</tr>\n<tr>\n<td><strong>开发工具</strong></td>\n<td>❌ 模拟器可能不生效，需真机测试</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>4. 最佳实践</strong></h3>\n<h4><strong>全局安全区域适配（推荐）</strong></h4>\n<p>在 <code>app.wxss</code> 中定义全局安全区域样式：</p>\n<pre><code class="language-css"><span class="hljs-comment">/* 基础安全区域适配 */</span>\n<span class="hljs-selector-class">.safe-area</span> {\n  <span class="hljs-attribute">padding-top</span>: <span class="hljs-built_in">env</span>(safe-area-inset-top, <span class="hljs-number">20px</span>);\n  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-built_in">env</span>(safe-area-inset-bottom, <span class="hljs-number">0</span>);\n  <span class="hljs-attribute">padding-left</span>: <span class="hljs-built_in">env</span>(safe-area-inset-left, <span class="hljs-number">0</span>);\n  <span class="hljs-attribute">padding-right</span>: <span class="hljs-built_in">env</span>(safe-area-inset-right, <span class="hljs-number">0</span>);\n}\n\n<span class="hljs-comment">/* 单独适配顶部（如导航栏） */</span>\n<span class="hljs-selector-class">.safe-area-top</span> {\n  <span class="hljs-attribute">padding-top</span>: <span class="hljs-built_in">env</span>(safe-area-inset-top, <span class="hljs-number">20px</span>);\n}\n\n<span class="hljs-comment">/* 单独适配底部（如悬浮按钮） */</span>\n<span class="hljs-selector-class">.safe-area-bottom</span> {\n  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-built_in">env</span>(safe-area-inset-bottom, <span class="hljs-number">0</span>);\n}\n</code></pre>\n<p><strong>WXML 使用示例：</strong></p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;safe-area&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span>导航栏<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>页面内容<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;footer safe-area-bottom&quot;</span>&gt;</span>底部按钮<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n</code></pre>\n<hr>\n<h3><strong>5. 特殊情况处理</strong></h3>\n<h4><strong>iPhone 底部 Home Bar 适配</strong></h4>\n<pre><code class="language-css"><span class="hljs-selector-class">.footer</span> {\n  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-built_in">calc</span>(\n    <span class="hljs-built_in">env</span>(safe-area-inset-bottom) + <span class="hljs-number">20px</span>\n  ); <span class="hljs-comment">/* 额外增加 20px 间距 */</span>\n}\n</code></pre>\n<h4><strong>Android 刘海屏判断</strong></h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { model, safeArea } = wx.<span class="hljs-title function_">getSystemInfoSync</span>();\n<span class="hljs-keyword">const</span> isHuaweiNotch = model.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;HUAWEI&quot;</span>) &amp;&amp; safeArea.<span class="hljs-property">top</span> &gt; <span class="hljs-number">30</span>;\n<span class="hljs-keyword">const</span> isXiaomiNotch = model.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;Mi&quot;</span>) &amp;&amp; safeArea.<span class="hljs-property">top</span> &gt; <span class="hljs-number">30</span>;\n</code></pre>\n<hr>\n<h2><strong>🎯 总结</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>方案</strong></th>\n<th><strong>适用场景</strong></th>\n<th><strong>备注</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>env(safe-area-inset-*)</code></td>\n<td>大部分 iOS 和部分 Android 设备</td>\n<td>最简单、推荐优先使用</td>\n</tr>\n<tr>\n<td><code>wx.getSystemInfoSync()</code></td>\n<td>需要精确控制安全区域的情况</td>\n<td>兼容性更好，但代码稍复杂</td>\n</tr>\n<tr>\n<td>全局样式类 <code>.safe-area</code></td>\n<td>整个项目的统一适配</td>\n<td>减少重复代码，推荐</td>\n</tr>\n</tbody>\n</table>\n<p>如果你的小程序主要面向 iOS 用户，直接使用 <code>env(safe-area-inset-*)</code> 即可；如果是 Android 占比高，建议结合 JS 判断机型做特殊适配。</p>\n</div>'</script></body></html>