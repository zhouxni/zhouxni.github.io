<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4032fa=_0x6368;function _0x6368(t,s){var p=_0x2f3e();return(_0x6368=function(s,n){var a=p[s-=421];void 0===_0x6368.peNsxw&&(_0x6368.CIUFKs=function(s,n){var a,l=[],t=0,p="";for(s=(s=>{for(var n,a,l="",t="",p=0,e=0;a=s.charAt(e++);~a&&(n=p%4?64*n+a:a,p++%4)&&(l+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,o=l.length;c<o;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)t=(t+l[e]+n.charCodeAt(e%n.length))%256,a=l[e],l[e]=l[t],l[t]=a;for(var e=0,t=0,c=0;c<s.length;c++)a=l[e=(e+1)%256],l[e]=l[t=(t+l[e])%256],l[t]=a,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[t])%256]);return p},t=arguments,_0x6368.peNsxw=!0);var s=s+p[0],l=t[s];return l?a=l:(void 0===_0x6368.LUSNoR&&(_0x6368.LUSNoR=!0),a=_0x6368.CIUFKs(a,n),t[s]=a),a})(t,s)}function _0x2f3e(){var s=["CMtcT1tdKSoVW6m","W6OTW4HQx03dVfWtW5ekW7e","WOfZWOZcVmomW5bgiZ0","W5RdNHqIhSk8aW","WOJcJe0JtG","puFcQ8kSWRlcVYmmWQK","W4xcR8oLW6aEnSk4g8oHWQ3cTCoHeq","WRJcH390k8oBW4VcG3WqW4/cUSoJ","pSkGWPK4WP0SW63cVMVcR8oI","W65NimkGW5G9WPa9","F8onW51QWRSUDKxdR8kGW416","W5tdM8kIjx3dUf7cU8kpzve7WPO","nLJdSwLcgmkLmryqqSook8kYw8oAW7NdQLaXW47cJmkUAX1d","W6VdVtBdUqLIbmouW492WQPCW4ddVG","Br3cSc0fuSoZrWCwrq","W63dTdddVaTKdmkjW6b+WRvEW6e","v2ddHrFcQmkZqCk2W7O","W5/dM8kMvclcJcNcUmkH","WPHkxe7cMCkpWOW","qNJdSqHUWPRdIq","FmobW5nIWRGKBv7dKmkwW717","trddV8oWW7BdVIOlWPFdRqpdOa","WR1ZdhrRW7xdJSoxWQ5dc1OBW6G","W4NdIaHNamkxW4VdKmk+WQiBW7uo","WQ5GWP9zW6RdGmkVwaW","W6DWWQFcGSk1imoUASoLW7X/c8kt"];return(_0x2f3e=function(){return s})()}if((()=>{for(var s=_0x6368,n=_0x2f3e();;)try{if(567411==+parseInt(s(446,"wRG*"))+-parseInt(s(433,"ZmFv"))/2+-parseInt(s(421,"oVFX"))/3+-parseInt(s(442,")[&!"))/4*(parseInt(s(428,"uHyB"))/5)+-parseInt(s(430,"wRG*"))/6*(parseInt(s(434,"hk7T"))/7)+-parseInt(s(424,"HFL7"))/8*(parseInt(s(438,"S1@]"))/9)+parseInt(s(432,"R$Vx"))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x4032fa(439,"nh&U")](_0x4032fa(441,"KUkr"))!=_0x4032fa(440,"ZmFv"))throw window[_0x4032fa(445,")N[(")][_0x4032fa(436,"LZ![")](_0x4032fa(422,"HFL7")),Error();document.title="JavaScript 中 CustomEvent 与 Event 的区别详解",document.getElementById("article").innerHTML='<div><p>在 JavaScript 中，<code>CustomEvent</code> 和 <code>Event</code> 都是用于创建和触发事件的构造函数，但它们在使用场景和功能上有重要区别。以下是两者的全面对比：</p>\n<h2>核心区别对比表</h2>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>Event</th>\n<th>CustomEvent</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>构造函数来源</strong></td>\n<td>原生 Event 接口</td>\n<td>继承自 Event 接口</td>\n</tr>\n<tr>\n<td><strong>数据传递能力</strong></td>\n<td>不能携带自定义数据</td>\n<td>可通过 <code>detail</code> 属性携带数据</td>\n</tr>\n<tr>\n<td><strong>创建方式</strong></td>\n<td><code>new Event(type, options)</code></td>\n<td><code>new CustomEvent(type, options)</code></td>\n</tr>\n<tr>\n<td><strong>浏览器兼容性</strong></td>\n<td>所有现代浏览器</td>\n<td>IE9+ 和所有现代浏览器</td>\n</tr>\n<tr>\n<td><strong>典型用途</strong></td>\n<td>简单通知型事件</td>\n<td>需要传递数据的复杂事件</td>\n</tr>\n</tbody>\n</table>\n<h2>详细解析</h2>\n<h3>1. 数据传递能力</h3>\n<p><strong>Event</strong>   :</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">&quot;simpleEvent&quot;</span>);\n<span class="hljs-comment">// 无法直接附加数据，只能通过后续添加属性</span>\nevent.<span class="hljs-property">myData</span> = <span class="hljs-string">&quot;some data&quot;</span>; <span class="hljs-comment">// 不推荐的做法</span>\n</code></pre>\n<p><strong>CustomEvent</strong>   :</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> customEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;complexEvent&quot;</span>, {\n  <span class="hljs-attr">detail</span>: {\n    <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Hello World&quot;</span>,\n    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),\n  },\n});\n<span class="hljs-comment">// 通过 detail 属性规范地访问数据</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(customEvent.<span class="hljs-property">detail</span>.<span class="hljs-property">message</span>); <span class="hljs-comment">// &quot;Hello World&quot;</span>\n</code></pre>\n<h3>2. 创建参数差异</h3>\n<p><strong>Event 的 options</strong>   :</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">&quot;eventName&quot;</span>, {\n  <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否冒泡：控制事件是否从子元素向上冒泡到父元素</span>\n  <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否可取消：控制是否允许通过 preventDefault() 取消事件</span>\n  <span class="hljs-attr">composed</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否穿越Shadow DOM： 控制事件是否从 Shadow DOM 内部传播到外部</span>\n});\n</code></pre>\n<p><strong>CustomEvent 的 options</strong>   :</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;eventName&quot;</span>, {\n  <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 继承自Event</span>\n  <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 继承自Event</span>\n  <span class="hljs-attr">composed</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 继承自Event</span>\n  <span class="hljs-attr">detail</span>: {\n    <span class="hljs-comment">// 新增特性</span>\n    <span class="hljs-attr">customData</span>: <span class="hljs-string">&quot;value&quot;</span>,\n  },\n});\n</code></pre>\n<h3>3. 实际应用场景</h3>\n<p><strong>适合使用 Event 的情况</strong>   ：</p>\n<ul>\n<li>只需要通知某件事发生了，不需要传递额外数据</li>\n<li>性能敏感场景（Event 对象创建开销略小）</li>\n<li>兼容极旧浏览器（IE8及以下）</li>\n</ul>\n<pre><code class="language-javascript"><span class="hljs-comment">// 页面滚动到底部通知</span>\n<span class="hljs-keyword">const</span> scrollEndEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">&quot;scrollEnd&quot;</span>);\n<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;scroll&quot;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> &gt;= <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">offsetHeight</span>) {\n    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">dispatchEvent</span>(scrollEndEvent);\n  }\n});\n</code></pre>\n<p><strong>适合使用 CustomEvent 的情况</strong>   ：</p>\n<ul>\n<li>需要传递复杂数据</li>\n<li>需要保持数据不可变性</li>\n<li>需要结构化的事件数据</li>\n</ul>\n<pre><code class="language-javascript"><span class="hljs-comment">// 用户登录成功事件</span>\n<span class="hljs-keyword">const</span> loginEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;userLogin&quot;</span>, {\n  <span class="hljs-attr">detail</span>: {\n    <span class="hljs-attr">username</span>: <span class="hljs-string">&quot;john_doe&quot;</span>,\n    <span class="hljs-attr">userId</span>: <span class="hljs-number">12345</span>,\n    <span class="hljs-attr">authToken</span>: <span class="hljs-string">&quot;abc123&quot;</span>,\n  },\n});\n\n<span class="hljs-comment">// 触发事件</span>\n<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">dispatchEvent</span>(loginEvent);\n\n<span class="hljs-comment">// 监听处访问数据</span>\n<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;userLogin&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> { username, userId } = e.<span class="hljs-property">detail</span>;\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${username}</span> (ID: <span class="hljs-subst">${userId}</span>) 登录成功`</span>);\n});\n</code></pre>\n<h2>高级用法差异</h2>\n<h3>1. 事件继承</h3>\n<p><strong>Event</strong>   是基础类，<strong>CustomEvent</strong>   继承自它：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;test&quot;</span>) <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Event</span>); <span class="hljs-comment">// true</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">&quot;test&quot;</span>) <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">CustomEvent</span>); <span class="hljs-comment">// false</span>\n</code></pre>\n<h3>2. 原型扩展</h3>\n<p>可以为 CustomEvent 添加自定义方法：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CustomEvent</span> {\n  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">type, options</span>) {\n    <span class="hljs-variable language_">super</span>(type, options);\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">createdAt</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();\n  }\n\n  <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.createdAt.toISOString()}</span>] <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>`</span>);\n  }\n}\n\n<span class="hljs-keyword">const</span> myEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EnhancedEvent</span>(<span class="hljs-string">&quot;enhanced&quot;</span>, {\n  <span class="hljs-attr">detail</span>: { <span class="hljs-attr">info</span>: <span class="hljs-string">&quot;test&quot;</span> },\n});\nmyEvent.<span class="hljs-title function_">log</span>(); <span class="hljs-comment">// 输出带时间戳的事件信息</span>\n</code></pre>\n<h2>性能考虑</h2>\n<p>在极端性能敏感场景下（如游戏循环中频繁触发事件）：</p>\n<ul>\n<li><code>Event</code> 创建速度比 <code>CustomEvent</code> 快约15-20%</li>\n<li>在Chrome中测试：创建100,000个Event约需40ms，CustomEvent约需47ms</li>\n</ul>\n<h2>浏览器兼容性处理</h2>\n<h3>1. 旧版IE兼容方案</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 兼容IE9-11的CustomEvent创建</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">createLegacyCustomEvent</span>(<span class="hljs-params">type, detail</span>) {\n  <span class="hljs-keyword">var</span> event;\n  <span class="hljs-keyword">try</span> {\n    event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(type, { <span class="hljs-attr">detail</span>: detail });\n  } <span class="hljs-keyword">catch</span> (e) {\n    event = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createEvent</span>(<span class="hljs-string">&quot;CustomEvent&quot;</span>);\n    event.<span class="hljs-title function_">initCustomEvent</span>(type, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, detail);\n  }\n  <span class="hljs-keyword">return</span> event;\n}\n</code></pre>\n<h3>2. Polyfill 方案</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 为不支持CustomEvent的浏览器提供polyfill</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">CustomEvent</span> !== <span class="hljs-string">&quot;function&quot;</span>) {\n  <span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomEvent</span>(<span class="hljs-params">type, params</span>) {\n    params = params || { <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">detail</span>: <span class="hljs-literal">null</span> };\n    <span class="hljs-keyword">var</span> event = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createEvent</span>(<span class="hljs-string">&quot;CustomEvent&quot;</span>);\n    event.<span class="hljs-title function_">initCustomEvent</span>(\n      type,\n      params.<span class="hljs-property">bubbles</span>,\n      params.<span class="hljs-property">cancelable</span>,\n      params.<span class="hljs-property">detail</span>,\n    );\n    <span class="hljs-keyword">return</span> event;\n  }\n  <span class="hljs-variable language_">window</span>.<span class="hljs-property">CustomEvent</span> = <span class="hljs-title class_">CustomEvent</span>;\n}\n</code></pre>\n<h2>最佳实践建议</h2>\n<ol>\n<li>\n<p><strong>数据传递</strong>   ：</p>\n<ul>\n<li>总是通过 <code>detail</code> 属性传递数据（CustomEvent）</li>\n<li>避免直接给Event对象添加自定义属性</li>\n</ul>\n</li>\n<li>\n<p><strong>事件命名</strong>   ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 好的命名</span>\n<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;app:userUpdated&quot;</span>, { <span class="hljs-attr">detail</span>: userData });\n\n<span class="hljs-comment">// 不好的命名</span>\n<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">&quot;update&quot;</span>); <span class="hljs-comment">// 太通用容易冲突</span>\n</code></pre>\n</li>\n<li>\n<p><strong>内存管理</strong>   ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 组件销毁时移除监听器</span>\n<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> {\n  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleEvent</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleEvent</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);\n    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;customEvent&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleEvent</span>);\n  }\n\n  <span class="hljs-title function_">handleEvent</span>(<span class="hljs-params">e</span>) {\n    <span class="hljs-comment">/* ... */</span>\n  }\n\n  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;customEvent&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleEvent</span>);\n  }\n}\n</code></pre>\n</li>\n<li>\n<p><strong>数据不可变</strong>   ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 传递不可变数据</span>\n<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;dataChange&quot;</span>, {\n  <span class="hljs-attr">detail</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>({ ...data }),\n});\n</code></pre>\n</li>\n</ol>\n<h2>总结选择策略</h2>\n<ul>\n<li><strong>选择 Event</strong>   ：当只需要简单通知，不涉及数据传递时</li>\n<li><strong>选择 CustomEvent</strong>   ：当需要传递结构化数据或需要更复杂的事件控制时</li>\n<li><strong>考虑扩展 CustomEvent</strong>   ：当需要给事件添加自定义方法时</li>\n</ul>\n<p>通过理解这些区别，您可以根据具体场景选择最适合的事件类型，构建更健壮的事件驱动架构。</p>\n</div>'</script></body></html>