<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x42aef6=_0xc49b;function _0x170f(){var s=["BCkTsmoDWOq","W5ddRCokWPyhWO3dLG","qSo2W6OKW5b0WR/cPLC","u8kMWOxcVCkqvSoGruO","uXPlswDoWPnEkSkIzaSW","lmogWQVcUvdcRSkkW7iAg8oRDa","aCkwtgj3r8kUbMz8WP5qBYW","lSoPcCkCW40OW4aPlfWR","DvNdVSkVbbSQW6pdLK7dQM4","hmkpusNcMmkkW5BdNSoD","WRiyW7hdUGZdGG/cPSoPvmoJW4m","FSoTW4eAoCoevCouta","WOlcLSoKvJnrcxyOA8kaW7K","WQdcU0SFqmk/W7y3WQjzi8kyhCoOWOH9W5eeqKDDFCoEW410qq","W7uxWPZcV8kfWOrfB8kCW61mza","aerVAN/dHCos","aSkjW43dPsmhoCkMcSoHhwf7","W47dNSkrvCkTW5PLv1nJtW","gczgWO1toGZcR8owu8k5gCkhCa","WQHiW4VdPSodW5LeuW","EN4csf5WbCk0WQC","W78oWRyQWOa2o1iyv8kGW7e","xSoMbmkKmCkKALiC","aCkvs2HZs8o0zxXnWOrz","WO0+z8k6iSoBCq","smkcvSonB8kvWRddIwG","vCkGWOBdPSoidSooq3pcLZ/dIG","kSonimkDWOSExa"];return(_0x170f=function(){return s})()}function _0xc49b(e,s){var p=_0x170f();return(_0xc49b=function(s,n){var a=p[s-=161];void 0===_0xc49b.ZJEufU&&(_0xc49b.tiHBSD=function(s,n){var a,l=[],e=0,p="";for(s=(s=>{for(var n,a,l="",e="",p=0,o=0;a=s.charAt(o++);~a&&(n=p%4?64*n+a:a,p++%4)&&(l+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,t=l.length;c<t;c++)e+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(e)})(s),o=0;o<256;o++)l[o]=o;for(o=0;o<256;o++)e=(e+l[o]+n.charCodeAt(o%n.length))%256,a=l[o],l[o]=l[e],l[e]=a;for(var o=0,e=0,c=0;c<s.length;c++)a=l[o=(o+1)%256],l[o]=l[e=(e+l[o])%256],l[e]=a,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[o]+l[e])%256]);return p},e=arguments,_0xc49b.ZJEufU=!0);var s=s+p[0],l=e[s];return l?a=l:(void 0===_0xc49b.RGSgPb&&(_0xc49b.RGSgPb=!0),a=_0xc49b.tiHBSD(a,n),e[s]=a),a})(e,s)}if((()=>{for(var s=_0xc49b,n=_0x170f();;)try{if(551287==+parseInt(s(186,"kvU5"))+-parseInt(s(173,"iPW9"))/2+-parseInt(s(164,"oca1"))/3*(-parseInt(s(181,"3oap"))/4)+parseInt(s(185,"nK0V"))/5*(parseInt(s(177,"UVYS"))/6)+-parseInt(s(168,"CBu2"))/7*(parseInt(s(179,"HOYU"))/8)+parseInt(s(176,"$e51"))/9*(parseInt(s(182,"#B2H"))/10)+-parseInt(s(183,"(0N0"))/11)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x42aef6(161,"uQEy")](_0x42aef6(187,"DP&c"))!=_0x42aef6(165,"DhJu"))throw window[_0x42aef6(184,"HOYU")][_0x42aef6(180,"6@2p")](_0x42aef6(178,"X[@G")),Error();document.title="vite 定义全局变量",document.getElementById("article").innerHTML='<div><p>在 Vite 中定义全局变量可以通过多种方式实现，具体取决于你的需求和应用场景。以下是几种常见的方法：</p>\n<h3>1. 使用环境变量（<code>.env</code> 文件）</h3>\n<p>Vite 支持通过 <code>.env</code> 文件定义环境变量，这些变量可以通过 <code>import.meta.env</code> 访问。你可以创建 <code>.env</code>、<code>.env.local</code>、<code>.env.development</code>、<code>.env.production</code> 等文件来定义不同环境下的变量。</p>\n<ul>\n<li><strong>步骤</strong>  ：\n<ol>\n<li>在项目根目录下创建一个 <code>.env</code> 文件。</li>\n<li>定义变量，例如：<pre><code>VITE_API_URL=https://api.example.com\nVITE_APP_NAME=MyApp\n</code></pre>\n</li>\n<li>在代码中使用：<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_URL</span>); <span class="hljs-comment">// 输出: https://api.example.com</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_NAME</span>); <span class="hljs-comment">// 输出: MyApp</span>\n</code></pre>\n</li>\n</ol>\n</li>\n<li><strong>注意</strong>  ：环境变量名必须以 <code>VITE_</code> 为前缀，这是 Vite 的约定，以确保它们不会被客户端意外暴露。</li>\n</ul>\n<h3>2. 在 <code>vite.config.js</code> 中定义全局常量</h3>\n<p>你可以通过 Vite 插件或直接在配置中注入全局常量。</p>\n<ul>\n<li><strong>使用 <code>define</code> 选项</strong>  ：\nVite 提供了一个 <code>define</code> 选项，可以在构建时替换代码中的全局变量。<pre><code class="language-javascript"><span class="hljs-comment">// vite.config.js</span>\n<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({\n  <span class="hljs-attr">define</span>: {\n    <span class="hljs-attr">__APP_VERSION__</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-string">&#x27;1.0.0&#x27;</span>),\n    <span class="hljs-attr">__API_BASE_URL__</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-string">&#x27;https://api.example.com&#x27;</span>)\n  }\n});\n</code></pre>\n<ul>\n<li>在代码中使用：<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(__APP_VERSION__); <span class="hljs-comment">// 输出: 1.0.0</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(__API_BASE_URL__); <span class="hljs-comment">// 输出: https://api.example.com</span>\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3>3. 使用插件注入全局变量</h3>\n<p>你可以编写或使用现有的 Vite 插件来注入全局变量。</p>\n<ul>\n<li><strong>自定义插件</strong>  ：\n如果你需要更复杂的逻辑，可以编写一个 Vite 插件。不过，对于简单的全局变量定义，使用 <code>define</code> 选项通常就足够了。</li>\n</ul>\n<h3>4. 在 HTML 中通过 <code>&lt;script&gt;</code> 标签定义</h3>\n<p>如果你需要在浏览器环境中全局访问某个变量，可以在 <code>index.html</code> 中通过 <code>&lt;script&gt;</code> 标签定义。</p>\n<ul>\n<li><strong>步骤</strong>  ：\n<ol>\n<li>在 <code>index.html</code> 中添加：<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-variable language_">window</span>.<span class="hljs-property">globalVar</span> = <span class="hljs-string">&#x27;This is a global variable&#x27;</span>;\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n</li>\n<li>在代码中使用：<pre><code class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">globalVar</span>); <span class="hljs-comment">// 输出: This is a global variable</span>\n</code></pre>\n</li>\n</ol>\n</li>\n</ul>\n<h3>5. 使用 ES 模块导出和导入</h3>\n<p>对于需要在多个模块中共享的变量，可以使用 ES 模块的导出和导入机制。</p>\n<ul>\n<li><strong>定义模块</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// src/globals.js</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> appVersion = <span class="hljs-string">&#x27;1.0.0&#x27;</span>;\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apiBaseUrl = <span class="hljs-string">&#x27;https://api.example.com&#x27;</span>;\n</code></pre>\n</li>\n<li><strong>导入使用</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// src/main.js</span>\n<span class="hljs-keyword">import</span> { appVersion, apiBaseUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./globals&#x27;</span>;\n\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(appVersion); <span class="hljs-comment">// 输出: 1.0.0</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(apiBaseUrl); <span class="hljs-comment">// 输出: https://api.example.com</span>\n</code></pre>\n</li>\n</ul>\n<h3>总结</h3>\n<p>选择哪种方法取决于你的具体需求：</p>\n<ul>\n<li>如果变量是构建时确定的，并且与环境相关，使用环境变量或 <code>define</code> 选项。</li>\n<li>如果变量需要在客户端全局访问，考虑在 HTML 中定义或通过插件注入。</li>\n<li>如果变量需要在多个模块中共享，使用 ES 模块的导出和导入。</li>\n</ul>\n<p>希望这些方法能帮助你在 Vite 项目中有效地定义和使用全局变量。</p>\n</div>'</script></body></html>