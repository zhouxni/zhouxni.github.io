<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x53dda6=_0x13a3;function _0x13a3(l,s){var p=_0x35eb();return(_0x13a3=function(s,a){var n=p[s-=467];void 0===_0x13a3.qNVdcM&&(_0x13a3.wYKntB=function(s,a){var n,t=[],l=0,p="";for(s=(s=>{for(var a,n,t="",l="",p=0,c=0;n=s.charAt(c++);~n&&(a=p%4?64*a+n:n,p++%4)&&(t+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var o=0,e=t.length;o<e;o++)l+="%"+("00"+t.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(l)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)l=(l+t[c]+a.charCodeAt(c%a.length))%256,n=t[c],t[c]=t[l],t[l]=n;for(var c=0,l=0,o=0;o<s.length;o++)n=t[c=(c+1)%256],t[c]=t[l=(l+t[c])%256],t[l]=n,p+=String.fromCharCode(s.charCodeAt(o)^t[(t[c]+t[l])%256]);return p},l=arguments,_0x13a3.qNVdcM=!0);var s=s+p[0],t=l[s];return t?n=t:(void 0===_0x13a3.iSUnDy&&(_0x13a3.iSUnDy=!0),n=_0x13a3.wYKntB(n,a),l[s]=n),n})(l,s)}if((()=>{for(var s=_0x13a3,a=_0x35eb();;)try{if(828314==+parseInt(s(492,"Vo4l"))*(parseInt(s(484,"3DsY"))/2)+-parseInt(s(467,"7Gcs"))/3+parseInt(s(480,"501V"))/4*(parseInt(s(487,"hbAA"))/5)+parseInt(s(482,"99)4"))/6+parseInt(s(481,"xLYi"))/7*(-parseInt(s(486,"AXwx"))/8)+-parseInt(s(474,"D9Xj"))/9+-parseInt(s(475,"*TL9"))/10*(-parseInt(s(493,"65[I"))/11))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x53dda6(471,"65[I")](_0x53dda6(470,"vcyA"))!=_0x53dda6(468,"NW%q"))throw window[_0x53dda6(477,"AXwx")][_0x53dda6(483,"Kvmh")](_0x53dda6(472,")l9u")),Error();function _0x35eb(){var s=["yGXyrSkjkCk0w1e","amkjx27cRmoJha","z8kMWR3cOCkfW5OdWOS","wqhdGSk8a0NcQCoTW77dNvZdOai","iSowDSoulKjr","F8kDW6tcUmk7WOPgWO9QeeRcTW","ygfCW6T4dIa7kdaAWQLQ","WPL/WP94vtldImkOWRS5amohkq","DWRdU2/cK8kGWOm","W5xdNCoaW4ONzve","xWldHSk5a07cQCoWW7xdHx3dUWS","m8k9WQBcMmkPW6a6","edPcW4hdVre7","jSkenmoQlfXrDCo+","WQCYWRpcK8kRstm","WR8Wy2VdGexdVSoiW73dJ8k/uG","BmkEuCkYW5OrWPpcLa9EW6xdQKu","WP3dU8kuWONdPSocW4JdHCktu8kgWPC","ymoDW6ldJSouv8kSjK/cRSoufq","c8k9WQnHWRldTSkWlmkkW5dcUSoD","W4GmxIuRp8oaW60KWRtcJmkJWPW","xGu+W5iY","dMXUWRHmWP3cG8oOWRHRB8ki","l1BcKCoUrGZdLmoaW58","m8kpWQhcSCkybmkd","W4pdP3ldPCoUWQW2WQqSW6tdHun5W7FdLr96k8osW4JcGhddIrWjaW","WOhcNGBdUJKsW6FdSg3cTmkrWOZcIa","WO0yCNz6e3NdOCoKW6XyWO98"];return(_0x35eb=function(){return s})()}document.title=" Vue 3 中，v-on=$attrs 和 v-bind=$attrs",document.getElementById("article").innerHTML='<div><p>在 Vue 3 中，<code>v-on=&quot;$attrs&quot;</code> 和 <code>v-bind=&quot;$attrs&quot;</code> 是用于处理组件属性（<code>attrs</code>）透传的两个重要指令，它们有不同的用途和行为。下面详细解释它们的区别和用法：</p>\n<hr>\n<h2><strong>1. <code>v-bind=&quot;$attrs&quot;</code></strong></h2>\n<h3><strong>作用</strong></h3>\n<ul>\n<li><strong>绑定所有未被 <code>props</code> 接收的属性</strong>   （非 <code>props</code> 的 <code>attrs</code>）到目标元素或组件。</li>\n<li>通常用于<strong>透传 HTML 原生属性</strong>   （如 <code>class</code>、<code>style</code>、<code>id</code>、<code>aria-*</code> 等）或<strong>未声明的自定义属性</strong>   。</li>\n</ul>\n<h3><strong>示例</strong></h3>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- Parent.vue --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-class&quot;</span> <span class="hljs-attr">data-test</span>=<span class="hljs-string">&quot;123&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- Child.vue --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;</span>\n    <span class="hljs-comment">&lt;!-- 透传所有未接收的 attrs --&gt;</span>\n    Content\n  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 阻止自动绑定到根元素</span>\n  };\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<p><strong>渲染结果</strong>   ：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-class&quot;</span> <span class="hljs-attr">data-test</span>=<span class="hljs-string">&quot;123&quot;</span>&gt;</span>Content<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n</code></pre>\n<p>✅ <strong>适用场景</strong>   ：</p>\n<ul>\n<li>需要手动控制 <code>attrs</code> 绑定到特定元素（而不是默认绑定到根元素）。</li>\n<li>需要透传 <code>class</code>、<code>style</code>、<code>data-*</code> 等 HTML 属性。</li>\n</ul>\n<hr>\n<h2><strong>2. <code>v-on=&quot;$attrs&quot;</code></strong></h2>\n<h3><strong>作用</strong></h3>\n<ul>\n<li><strong>绑定所有未被 <code>emits</code> 声明的事件监听器</strong>   （如 <code>@click</code>、<code>@input</code> 等）。</li>\n<li>通常用于<strong>透传原生 DOM 事件</strong>   或<strong>未声明为自定义事件的事件</strong>   。</li>\n</ul>\n<h3><strong>示例</strong></h3>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- Parent.vue --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleClick&quot;</span> @<span class="hljs-attr">custom-event</span>=<span class="hljs-string">&quot;handleCustom&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-comment">&lt;!-- Child.vue --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on</span>=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;</span>Click Me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n    <span class="hljs-attr">emits</span>: [<span class="hljs-string">&quot;custom-event&quot;</span>], <span class="hljs-comment">// 声明 custom-event 是自定义事件</span>\n  };\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<p><strong>行为</strong>   ：</p>\n<ul>\n<li><code>@click</code> <strong>未被声明为 <code>emits</code></strong>   ，所以会被 <code>v-on=&quot;$attrs&quot;</code> 绑定到 <code>&lt;button&gt;</code>。</li>\n<li><code>@custom-event</code> <strong>已被声明</strong>   ，所以不会被 <code>$attrs</code> 包含，需要手动 <code>$emit</code>。</li>\n</ul>\n<p>✅ <strong>适用场景</strong>   ：</p>\n<ul>\n<li>需要透传<strong>未被 <code>emits</code> 声明的事件</strong>   （如原生 <code>click</code>、<code>keydown</code> 等）。</li>\n<li>需要手动控制事件绑定到特定元素（而不是默认绑定到根元素）。</li>\n</ul>\n<hr>\n<h2><strong>3. 关键区别</strong></h2>\n<table>\n<thead>\n<tr>\n<th>指令</th>\n<th>作用</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>v-bind=&quot;$attrs&quot;</code></td>\n<td>绑定<strong>非 <code>props</code> 属性</strong>   （如 <code>class</code>、<code>style</code>、<code>data-*</code>）</td>\n<td>透传 HTML 属性</td>\n</tr>\n<tr>\n<td><code>v-on=&quot;$attrs&quot;</code></td>\n<td>绑定<strong>非 <code>emits</code> 事件</strong>   （如 <code>@click</code>、<code>@keydown</code>）</td>\n<td>透传 DOM 事件</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>4. 组合使用</strong></h2>\n<p>可以同时使用 <code>v-bind</code> 和 <code>v-on</code> 实现完整的属性+事件透传：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&quot;$attrs&quot;</span> <span class="hljs-attr">v-on</span>=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;</span>Click Me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 阻止自动绑定到根元素</span>\n  };\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<p><strong>效果</strong>   ：</p>\n<ul>\n<li>所有未声明的 <code>props</code> 和 <code>attrs</code> 会绑定到 <code>&lt;button&gt;</code>。</li>\n<li>所有未声明的 <code>emits</code> 事件会绑定到 <code>&lt;button&gt;</code>。</li>\n</ul>\n<hr>\n<h2><strong>5. 注意事项</strong></h2>\n<ol>\n<li>\n<p><strong><code>inheritAttrs: false</code></strong></p>\n<ul>\n<li>如果不设置，Vue 默认会将 <code>$attrs</code> 绑定到<strong>根元素</strong>   。</li>\n<li>设置后，可以手动控制 <code>$attrs</code> 绑定位置。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>emits</code> 声明的影响</strong></p>\n<ul>\n<li>如果事件被声明为 <code>emits</code>，则<strong>不会</strong>   被 <code>v-on=&quot;$attrs&quot;</code> 包含。</li>\n<li>例如：<pre><code class="language-js"><span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;click&#x27;</span>], <span class="hljs-comment">// 这样 @click 不会进入 $attrs</span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p><strong><code>props</code> 声明的影响</strong></p>\n<ul>\n<li>如果属性被声明为 <code>props</code>，则<strong>不会</strong>   被 <code>v-bind=&quot;$attrs&quot;</code> 包含。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2><strong>6. 实际应用场景</strong></h2>\n<h3><strong>场景 1：封装可透传属性的按钮组件</strong></h3>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- MyButton.vue --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&quot;$attrs&quot;</span> <span class="hljs-attr">v-on</span>=<span class="hljs-string">&quot;$attrs&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-button&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> /&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>,\n  };\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<p><strong>使用方式</strong>   ：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">MyButton</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;extra-class&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleClick&quot;</span> <span class="hljs-attr">data-test</span>=<span class="hljs-string">&quot;123&quot;</span>&gt;</span>\n  Click Me\n<span class="hljs-tag">&lt;/<span class="hljs-name">MyButton</span>&gt;</span>\n</code></pre>\n<p><strong>渲染结果</strong>   ：</p>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-button extra-class&quot;</span> <span class="hljs-attr">data-test</span>=<span class="hljs-string">&quot;123&quot;</span>&gt;</span>Click Me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n</code></pre>\n<p>（<code>@click</code> 也会绑定到按钮）</p>\n<hr>\n<h3><strong>场景 2：高阶组件（HOC）透传所有属性和事件</strong></h3>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- Wrapper.vue --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrapper&quot;</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&quot;$attrs&quot;</span> <span class="hljs-attr">v-on</span>=<span class="hljs-string">&quot;$attrs&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>,\n  };\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<p>这样，所有传递给 <code>Wrapper</code> 的属性和事件都会透传给 <code>Child</code>。</p>\n<hr>\n<h2><strong>总结</strong></h2>\n<ul>\n<li><strong><code>v-bind=&quot;$attrs&quot;</code></strong>   → 透传<strong>属性</strong>   （<code>class</code>、<code>style</code>、<code>data-*</code> 等）。</li>\n<li><strong><code>v-on=&quot;$attrs&quot;</code></strong>   → 透传<strong>事件</strong>   （未被 <code>emits</code> 声明的 <code>@click</code>、<code>@keydown</code> 等）。</li>\n<li><strong>组合使用</strong>   可实现完整的属性和事件透传。</li>\n<li><strong><code>inheritAttrs: false</code></strong>   可阻止自动绑定到根元素，改为手动控制。</li>\n</ul>\n<p>这样，你可以更灵活地控制组件的属性和事件传递行为！ 🚀</p>\n</div>'</script></body></html>