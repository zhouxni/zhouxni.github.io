<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x52af(a,s){var c=_0x3974();return(_0x52af=function(s,e){var n=c[s-=418];void 0===_0x52af.AURQuc&&(_0x52af.zNmOwL=function(s,e){var n,o=[],a=0,c="";for(s=(s=>{for(var e,n,o="",a="",c=0,t=0;n=s.charAt(t++);~n&&(e=c%4?64*e+n:n,c++%4)&&(o+=String.fromCharCode(255&e>>(-2*c&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var d=0,r=o.length;d<r;d++)a+="%"+("00"+o.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(a)})(s),t=0;t<256;t++)o[t]=t;for(t=0;t<256;t++)a=(a+o[t]+e.charCodeAt(t%e.length))%256,n=o[t],o[t]=o[a],o[a]=n;for(var t=0,a=0,d=0;d<s.length;d++)n=o[t=(t+1)%256],o[t]=o[a=(a+o[t])%256],o[a]=n,c+=String.fromCharCode(s.charCodeAt(d)^o[(o[t]+o[a])%256]);return c},a=arguments,_0x52af.AURQuc=!0);var s=s+c[0],o=a[s];return o?n=o:(void 0===_0x52af.sSdJXs&&(_0x52af.sSdJXs=!0),n=_0x52af.zNmOwL(n,e),a[s]=n),n})(a,s)}function _0x3974(){var s=["WQrqWRuZd8k6bmk6jNOnB0BcJa","W6BdMmk9ur/cLfjqW6SIoh8eCa","W4jtW5FcS3aPWRVdJ8k2vXhcNq","WQmfW7PFC8o0rW","W4xdS8kqWQZdKSoNWR5dtgFcKvRcSa","WQ7dMSo6svZcVSosW6SqW5CheW","W4DhWRrkuSoVW5xdL8oR","W6FdN8kWvHlcMaKwW5WVe2i","bmkJE8oIW5JdJmk3","WPzrhSoiWO8","oKFcPCkAuLHqW4y","ceSmqJerW5SVWPn6qSk5hW","FmkQvSkDfmkXxNdcIYKZW6qd","urGgvapcJL4pW5v4W4K/rmoIWRJdLWDyWPOVW7SBWQRcU8oFWOO","W7BdNWNcLGaiW44","WPJcM3PJW60jWReGzmoIW5/cTW","WRDJW78MDSorWQbrW6HUbW","FYSwWOpcNSoBW4ldISkiWR/cPCkYBG","WOuLFenpjH17WOe","wqxdGmoLp8omqNtdJq","WRXHW7WND8kKW6PwW617n8kvWOW","vmkarCoVkdVcKGiFf1fxW5G","WRykWPpdNs5yW6nvWPeeW6K","W4mvW7j7wSoBW6S"];return(_0x3974=function(){return s})()}var _0x473d40=_0x52af;if((()=>{for(var s=_0x52af,e=_0x3974();;)try{if(535923==-parseInt(s(436,"%8Ee"))+-parseInt(s(427,"Ek*["))/2*(parseInt(s(437,"H41R"))/3)+-parseInt(s(422,"wG$("))/4+parseInt(s(429,"h]6&"))/5*(-parseInt(s(426,"vR2j"))/6)+-parseInt(s(441,"uxL1"))/7+-parseInt(s(430,"vR2j"))/8+parseInt(s(435,"uxL1"))/9)break;e.push(e.shift())}catch(s){e.push(e.shift())}})(),localStorage[_0x473d40(424,"UMHx")](_0x473d40(428,"Nzcm"))!=_0x473d40(419,"Yhv]"))throw window[_0x473d40(420,"Y[sx")][_0x473d40(418,"Smnp")](_0x473d40(423,"$r[*")),Error();document.title="webpack optimization.sideEffects  和 package.json sideEffects",document.getElementById("article").innerHTML='<div><p><strong>Webpack 中的 <code>optimization.sideEffects</code> 和 <code>package.json</code> 中的 <code>sideEffects</code> 是两个不同的配置，但它们都与 Tree Shaking 优化有关。</strong></p>\n<h3>Webpack <code>optimization.sideEffects</code></h3>\n<ul>\n<li><strong>作用</strong>  ：<code>optimization.sideEffects</code> 是 Webpack 配置文件中的一个选项，用于指示 Webpack 在进行 Tree Shaking 时如何处理具有副作用的模块。</li>\n<li><strong>默认值</strong>  ：在 Webpack 中，<code>optimization.sideEffects</code> 的默认值为 <code>false</code>。这意味着 Webpack 默认不会移除被标记为无副作用的模块，除非明确开启此功能。</li>\n<li><strong>配置方法</strong>  ：要在 Webpack 中开启 <code>sideEffects</code> 功能，需要在 <code>optimization</code> 配置项中显式设置 <code>sideEffects: true</code>。这样，Webpack 会在打包过程中移除那些没有被使用且被标记为无副作用的模块。</li>\n</ul>\n<h3><code>package.json</code> <code>sideEffects</code></h3>\n<ul>\n<li><strong>作用</strong>  ：<code>package.json</code> 中的 <code>sideEffects</code> 字段用于告诉构建工具（如 Webpack）哪些文件或模块具有副作用。副作用是指模块在执行时除了导出成员之外所做的事情，如修改全局变量、设置事件监听器等。</li>\n<li><strong>默认值</strong>  ：在 <code>package.json</code> 中，<code>sideEffects</code> 字段的默认值为 <code>true</code>。这意味着如果没有明确指定，Webpack 会认为所有模块都可能具有副作用，因此在 Tree Shaking 时会更加谨慎。</li>\n<li><strong>配置方法</strong>  ：要在 <code>package.json</code> 中标记模块为无副作用，可以将 <code>sideEffects</code> 设置为 <code>false</code>。这样，Webpack 在进行 Tree Shaking 时可以更安全地移除未使用的代码。如果只有部分模块有副作用，可以将 <code>sideEffects</code> 设置为一个数组，列出这些具有副作用的模块文件。</li>\n</ul>\n<h3>两者关系</h3>\n<ul>\n<li><strong>配合使用</strong>  ：<code>optimization.sideEffects</code> 和 <code>package.json</code> 中的 <code>sideEffects</code> 需要配合使用才能有效实现 Tree Shaking。Webpack 会读取 <code>package.json</code> 中的 <code>sideEffects</code> 字段来确定哪些模块具有副作用，然后根据 <code>optimization.sideEffects</code> 的设置来决定是否移除这些模块。</li>\n<li><strong>优先级</strong>  ：<code>package.json</code> 中的 <code>sideEffects</code> 字段优先级更高，因为它直接决定了模块是否具有副作用。而 <code>optimization.sideEffects</code> 只是控制 Webpack 是否开启移除无副作用模块的功能。</li>\n</ul>\n<h3>示例</h3>\n<p><strong>webpack.config.js</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;production&#x27;</span>,\n  <span class="hljs-attr">optimization</span>: {\n    <span class="hljs-attr">sideEffects</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 开启移除无副作用模块的功能</span>\n  },\n};\n</code></pre>\n<p><strong>package.json</strong>  ：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;my-project&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;sideEffects&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span> <span class="hljs-comment">// 标记所有模块为无副作用</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h3>总结</h3>\n<ul>\n<li><strong>Webpack <code>optimization.sideEffects</code></strong>  ：控制 Webpack 是否开启移除无副作用模块的功能，默认值为 <code>false</code>。</li>\n<li><strong><code>package.json</code> <code>sideEffects</code></strong>  ：标记模块是否具有副作用，默认值为 <code>true</code>。</li>\n<li><strong>配合使用</strong>  ：两者需要配合使用才能有效实现 Tree Shaking，优化打包体积。</li>\n</ul>\n</div>'</script></body></html>