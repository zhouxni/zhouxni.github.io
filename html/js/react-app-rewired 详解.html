<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x535846=_0x5df4;function _0x1f03(){var s=["DSokkSogW5VcIdxdUq","W7FdP07cM2K+DZdcISkec8k8","W6RdLCoYbe9aDKxdHG","hSo7W787W7NcJCoPu8ksWOlcN3JdOG","fSkHW4TkFIRdQCkAWQ97WPuhWPS","nXHMyIpdHNOqWPm","W5qfW6ldKtruW4O","prRcJtRdTmotWRJcMmoRmJdcHG","g8o0W74+W73cJCoRfSkcWOxcSvhdTSkd","WPjWW4VcNHj8WOKPpWddLSko","Emo1W7JdQxHPW47dKCkLW5PC","W6VdJ8kvWPZcNu5hW7NdQCkkFSke","WQaKW4z5AdD0qmoSkCkqWRe","WPTlaJ7dL8krCG","ktLGWRRdK0RdJCkkFhRcNeu","WOzrWQFdMZf/W6q/WR0","wSk3WRT9WRi","DmoliSoHWPVdGddcNIjmW5LOW5dcKW","y8oAzvjAhZjPWR4sxSkeh8kGWP9CWP9qWQvnW5ddL2mVWQG9","W67cI8kiC23cUrtcGrvfna","cmkvWOVdV8o8W4CoWPBcTSoqW4tdIJ8"];return(_0x1f03=function(){return s})()}function _0x5df4(r,s){var e=_0x1f03();return(_0x5df4=function(s,a){var n=e[s-=127];void 0===_0x5df4.ZWnSMe&&(_0x5df4.ykYWhF=function(s,a){var n,p=[],r=0,e="";for(s=(s=>{for(var a,n,p="",r="",e=0,l=0;n=s.charAt(l++);~n&&(a=e%4?64*a+n:n,e++%4)&&(p+=String.fromCharCode(255&a>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var t=0,c=p.length;t<c;t++)r+="%"+("00"+p.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(r)})(s),l=0;l<256;l++)p[l]=l;for(l=0;l<256;l++)r=(r+p[l]+a.charCodeAt(l%a.length))%256,n=p[l],p[l]=p[r],p[r]=n;for(var l=0,r=0,t=0;t<s.length;t++)n=p[l=(l+1)%256],p[l]=p[r=(r+p[l])%256],p[r]=n,e+=String.fromCharCode(s.charCodeAt(t)^p[(p[l]+p[r])%256]);return e},r=arguments,_0x5df4.ZWnSMe=!0);var s=s+e[0],p=r[s];return p?n=p:(void 0===_0x5df4.cZGQes&&(_0x5df4.cZGQes=!0),n=_0x5df4.ykYWhF(n,a),r[s]=n),n})(r,s)}if((()=>{for(var s=_0x5df4,a=_0x1f03();;)try{if(623318==-parseInt(s(144,"w*^i"))+-parseInt(s(143,"v4MP"))/2+parseInt(s(133,"&JNU"))/3+parseInt(s(136,"&O5L"))/4+-parseInt(s(135,"UOE#"))/5+-parseInt(s(130,"ZU%6"))/6*(parseInt(s(147,"F3LP"))/7)+parseInt(s(128,"qYQ4"))/8)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x535846(138,"F3LP")](_0x535846(137,"yqL3"))!=_0x535846(127,"UOE#"))throw window[_0x535846(132,"skgy")][_0x535846(145,"Tb3D")](_0x535846(129,"9U@Q")),Error();document.title="react-app-rewired 详解",document.getElementById("article").innerHTML='<div><p><strong>react-app-rewired 是一个用于自定义 Create React App（CRA）项目配置的工具</strong>  。以下是关于 react-app-rewired 的详细解析：</p>\n<h3>一、核心功能</h3>\n<ol>\n<li><strong>无需弹出配置</strong>  ：react-app-rewired 允许开发者在不使用 CRA 的 <code>eject</code> 命令的情况下，修改默认的 Webpack 配置。这意味着开发者可以保留 CRA 的易用性和更新性，同时灵活地定制化开发环境。</li>\n<li><strong>自定义配置</strong>  ：通过创建 <code>config-overrides.js</code> 文件，开发者可以添加自定义的 Webpack 插件、loader 等，以满足特定需求。例如，可以添加 CSS Modules 支持、自定义 Babel 配置、修改启动 URL 等。</li>\n</ol>\n<h3>二、使用方法</h3>\n<ol>\n<li><strong>安装 react-app-rewired</strong>  ：<pre><code class="language-sh">npm install react-app-rewired --save-dev\n</code></pre>\n</li>\n<li><strong>创建配置文件</strong>  ：在项目根目录下创建一个名为 <code>config-overrides.js</code> 的文件，用于存放自定义的配置。例如：<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">override</span>(<span class="hljs-params">config, env</span>) {\n    <span class="hljs-comment">// 在这里修改 Webpack 配置</span>\n    <span class="hljs-keyword">return</span> config;\n}\n</code></pre>\n</li>\n<li><strong>修改 package.json</strong>  ：将 <code>react-scripts</code> 替换为 <code>react-app-rewired</code>，以便在启动和构建项目时使用自定义配置。<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;react-app-rewired start&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;react-app-rewired build&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;react-app-rewired test&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;eject&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;react-scripts eject&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n</li>\n</ol>\n<h3>三、应用案例</h3>\n<ol>\n<li><strong>添加 CSS Modules 支持</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { injectBabelPlugin } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;react-app-rewired&#x27;</span>);\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">override</span>(<span class="hljs-params">config</span>) {\n    config.<span class="hljs-property">module</span>.<span class="hljs-property">rules</span>.<span class="hljs-title function_">push</span>({\n        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\\.module\\.css$/</span>,\n        <span class="hljs-attr">use</span>: [\n            <span class="hljs-string">&#x27;style-loader&#x27;</span>,\n            {\n                <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;css-loader&#x27;</span>,\n                <span class="hljs-attr">options</span>: {\n                    <span class="hljs-attr">modules</span>: <span class="hljs-literal">true</span>,\n                    <span class="hljs-attr">localIdentName</span>: <span class="hljs-string">&#x27;[name]__[local]___[hash:base64:5]&#x27;</span>\n                }\n            }\n        ]\n    });\n    <span class="hljs-keyword">return</span> config;\n};\n</code></pre>\n</li>\n<li><strong>自定义 Babel 配置</strong>  ：<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { rewireBabelOptions } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;react-app-rewired&#x27;</span>);\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">override</span>(<span class="hljs-params">config</span>) {\n    config = <span class="hljs-title function_">rewireBabelOptions</span>(config, <span class="hljs-function">() =&gt;</span> ({\n        <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&#x27;@babel/plugin-proposal-class-properties&#x27;</span>]\n    }));\n    <span class="hljs-keyword">return</span> config;\n};\n</code></pre>\n</li>\n<li><strong>自定义启动 URL</strong>  ：<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">override</span>(<span class="hljs-params">config, env</span>) {\n    config.<span class="hljs-property">devServer</span> = {\n        ...config.<span class="hljs-property">devServer</span>,\n        <span class="hljs-attr">historyApiFallback</span>: {\n            <span class="hljs-attr">index</span>: <span class="hljs-string">&#x27;/myapp&#x27;</span>\n        }\n    };\n    <span class="hljs-keyword">return</span> config;\n};\n</code></pre>\n</li>\n</ol>\n<h3>四、注意事项</h3>\n<ol>\n<li><strong>兼容性</strong>  ：react-app-rewired 的版本需要与当前的 CRA 版本兼容。如果不兼容，可能会导致配置无法生效或出现错误。</li>\n<li><strong>维护性</strong>  ：自定义配置可能会增加项目的维护成本。因此，建议在必要时才使用 react-app-rewired 进行配置修改，并保持配置文件的清晰和简洁。</li>\n<li><strong>替代方案</strong>  ：除了 react-app-rewired，还有其他工具（如 craco）也可以用于自定义 CRA 的配置。开发者可以根据自己的需求和偏好选择合适的工具。</li>\n</ol>\n<h3>五、总结</h3>\n<p>react-app-rewired 是一个强大的工具，它允许开发者在不弹出 CRA 配置的情况下，灵活地定制化开发环境。通过创建 <code>config-overrides.js</code> 文件，开发者可以添加自定义的 Webpack 插件、loader 等，以满足特定需求。然而，在使用 react-app-rewired 时也需要注意兼容性、维护性等问题，并选择合适的替代方案。</p>\n</div>'</script></body></html>