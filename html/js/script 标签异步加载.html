<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x42c492=_0x6130;function _0x4e0d(){var s=["W4TjWOKktsqLja","kLxcUCo1WQ7cJ8oz","kcRdMmkWW6tdTSoEW7b7WPldTI0","WQ51W7XFW7RdJI8Qz8krDw88","WQtcSCoBoCozW79tpmkSWRxdNqi","fCkht0SRDq9DWOJcG8oxcG","W7LqW7JdRCoVW4C7WQDcW74/tW","WR7dH8oNumokWRlcKry","wLWZzCoStCkr","W4RcJMfpyCo+g8oBAmo3yMC","W6FcMmk1aSkpW6NcMttcM8kMC3C","tHnRfCo6WQ7dVmkp","imkGd3q6WQdcRmkNW4e","WQZdPedcPCkyW6/dPYPYuupdM2K","ASoFkCodymk/W4W","z8oDWO7cVhiFcaq7jmkfBJO","WP3cVhZdRd/dN21rWQrEW5Wp","W7lcJtu9W6y2W6/dPthcReadWQpdP8kBWQ1rWQRdGNm3BSorWOSRWPi","WQVdQ0hcQCkDW6RcLHrUEM/dJW","W604WRCyWRq","WP7cUZFcSepcGKbm","W6dcN8oGC8ozWRpcLH4","W5ldUmoFAmk6eHbZWQ7cU8o7W7ad","A8oAW7PmnxHM","lanhWO5bW4Kzf0tdMedcLW","z8oAWOlcU3iwyYy/bCkjrq"];return(_0x4e0d=function(){return s})()}function _0x6130(t,s){var p=_0x4e0d();return(_0x6130=function(s,a){var n=p[s-=350];void 0===_0x6130.aEgikZ&&(_0x6130.XCjzdz=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,c=0;n=s.charAt(c++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var e=0,h=l.length;e<h;e++)t+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)t=(t+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[t],l[t]=n;for(var c=0,t=0,e=0;e<s.length;e++)n=l[c=(c+1)%256],l[c]=l[t=(t+l[c])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[t])%256]);return p},t=arguments,_0x6130.aEgikZ=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x6130.nPKzFm&&(_0x6130.nPKzFm=!0),n=_0x6130.XCjzdz(n,a),t[s]=n),n})(t,s)}if((()=>{for(var s=_0x6130,a=_0x4e0d();;)try{if(372165==+parseInt(s(352,"tq$q"))+-parseInt(s(363,"tBcK"))/2+-parseInt(s(375,"7Acj"))/3*(-parseInt(s(353,"L63x"))/4)+-parseInt(s(368,")i8A"))/5*(parseInt(s(357,"kYT0"))/6)+parseInt(s(351,"m4ZZ"))/7+-parseInt(s(358,"8do)"))/8+-parseInt(s(369,"8do)"))/9*(-parseInt(s(373,"tBcK"))/10))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x42c492(371,"BJ*y")](_0x42c492(360,"76AM"))!=_0x42c492(367,"m4ZZ"))throw window[_0x42c492(355,"8do)")][_0x42c492(362,"xI3i")](_0x42c492(365,"%)sd")),Error();document.title="script 标签异步加载",document.getElementById("article").innerHTML='<div><p>在 HTML 中，<code>&lt;script&gt;</code> 标签用于嵌入或引用 JavaScript 代码。默认情况下，浏览器会同步加载和执行 <code>&lt;script&gt;</code> 标签中的代码，这可能会阻塞页面的渲染，尤其是当脚本较大或网络延迟较高时。为了解决这个问题，HTML5 引入了 <code>async</code> 和 <code>defer</code> 属性，允许脚本异步加载，从而改善页面的加载性能。</p>\n<h3>异步加载脚本的方式</h3>\n<h4>1. <code>async</code> 属性</h4>\n<ul>\n<li><strong>行为</strong>  ：\n<ul>\n<li>脚本异步下载，下载完成后立即执行。</li>\n<li>不保证脚本的执行顺序，多个带有 <code>async</code> 属性的脚本可能按任意顺序执行。</li>\n<li>适用于不依赖于其他脚本的独立脚本。</li>\n</ul>\n</li>\n<li><strong>用法</strong>  ：</li>\n</ul>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Async Script Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script1.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script2.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<ul>\n<li><strong>注意事项</strong>  ：\n<ul>\n<li>由于脚本可能在页面 DOM 完全加载之前执行，因此如果脚本需要操作 DOM 元素，应确保这些元素已经存在或使用事件监听器（如 <code>DOMContentLoaded</code>）来延迟执行。</li>\n</ul>\n</li>\n</ul>\n<h4>2. <code>defer</code> 属性</h4>\n<ul>\n<li><strong>行为</strong>  ：\n<ul>\n<li>脚本异步下载，但在 HTML 文档解析完成后，按照它们在页面中出现的顺序执行。</li>\n<li>保证脚本的执行顺序，适用于依赖于其他脚本或需要在 DOM 完全加载后执行的脚本。</li>\n</ul>\n</li>\n<li><strong>用法</strong>  ：</li>\n</ul>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Defer Script Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script1.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script2.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<ul>\n<li><strong>注意事项</strong>  ：\n<ul>\n<li><code>defer</code> 脚本会在 <code>DOMContentLoaded</code> 事件之前执行，但会等待 HTML 文档解析完成。</li>\n<li>适用于需要按顺序执行的脚本，如依赖关系的库或初始化代码。</li>\n</ul>\n</li>\n</ul>\n<h3>选择 <code>async</code> 还是 <code>defer</code>？</h3>\n<ul>\n<li><strong>使用 <code>async</code></strong>  ：\n<ul>\n<li>当你有一个或多个不依赖于其他脚本的独立脚本时。</li>\n<li>适用于第三方脚本，如分析工具、广告脚本等。</li>\n</ul>\n</li>\n<li><strong>使用 <code>defer</code></strong>  ：\n<ul>\n<li>当你需要确保脚本按特定顺序执行时。</li>\n<li>适用于需要等待 DOM 完全加载的脚本，如初始化代码或依赖于 DOM 结构的库。</li>\n</ul>\n</li>\n</ul>\n<h3>内联脚本与异步加载</h3>\n<ul>\n<li><strong>内联脚本</strong>  ：\n<ul>\n<li>默认情况下，内联脚本会阻塞 HTML 解析，因为它们直接嵌入在 HTML 中。</li>\n<li>可以通过将内联脚本包装在函数中，并使用 <code>DOMContentLoaded</code> 事件或其他方式延迟执行来减少阻塞。</li>\n</ul>\n</li>\n</ul>\n<h3>示例：结合使用</h3>\n<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Combined Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;library.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;analytics.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-comment">// 内联脚本，确保在 DOM 加载后执行</span>\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;DOM fully loaded and parsed&#x27;</span>);\n    });\n  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<h3>总结</h3>\n<ul>\n<li>使用 <code>async</code> 和 <code>defer</code> 属性可以有效减少脚本加载对页面渲染的影响。</li>\n<li>根据脚本的依赖关系和执行顺序要求，选择合适的异步加载方式。</li>\n<li>对于内联脚本，考虑使用事件监听器来延迟执行，以减少阻塞。</li>\n</ul>\n</div>'</script></body></html>