<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4fa10e=_0x5678;function _0x5678(e,n){var r=_0x3ef9();return(_0x5678=function(n,s){var a=r[n-=253];void 0===_0x5678.zxeRKI&&(_0x5678.vOOqAv=function(n,s){var a,l=[],e=0,r="";for(n=(n=>{for(var s,a,l="",e="",r=0,o=0;a=n.charAt(o++);~a&&(s=r%4?64*s+a:a,r++%4)&&(l+=String.fromCharCode(255&s>>(-2*r&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var t=0,c=l.length;t<c;t++)e+="%"+("00"+l.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(e)})(n),o=0;o<256;o++)l[o]=o;for(o=0;o<256;o++)e=(e+l[o]+s.charCodeAt(o%s.length))%256,a=l[o],l[o]=l[e],l[e]=a;for(var o=0,e=0,t=0;t<n.length;t++)a=l[o=(o+1)%256],l[o]=l[e=(e+l[o])%256],l[e]=a,r+=String.fromCharCode(n.charCodeAt(t)^l[(l[o]+l[e])%256]);return r},e=arguments,_0x5678.zxeRKI=!0);var n=n+r[0],l=e[n];return l?a=l:(void 0===_0x5678.UJGKTB&&(_0x5678.UJGKTB=!0),a=_0x5678.vOOqAv(a,s),e[n]=a),a})(e,n)}function _0x3ef9(){var n=["EqhdUSobEItcKG","WPhcGSoWW7xdQhhdSa","bmk3W5PNpSkgW73dG0VdV8kTu8oR","BmoPESoWW5/dG8odW78VW6tcMtddOq","Eh3dIe7dISo6d8kbyc3cNcW","uSoTW70ZAsWpWQfl","WOKijSoyWQCcmLHCluFcOW","tCkBW4hdI8kUWObPcaWOW5e","l8oLvdvaW7ldO8k2","W6/cUgddQ8kQu2BdOG","WOTwb2JdLW","dSkZW5jNmmkfWOFdS2BdK8kHxa","oCoDW7bCiSozW7DinSkzm3G","m8ozW7HClmoAWO14g8k1p3DT","tSoLWOhcRSoyWO5y","W41UW6/dQ2FdOtr/qZjnW6y","WRxdOxtdNCkBCwpdOG","W4OttcZcL8otWRvbvXS5W6qi","W40xtclcN8oqW5b8qaq1W5O","W75fWOuWD0ZdISkKWRhdIW","W54oW5aCW7xcQSo0qa","yCoRW646EZWH","rJ0dicidWPSNCCk1ea","xKSdbSkQBN3cLSkwWOldGmkw","W65aWO/cRSozWQ4rqNJdUv1ZnYeSvrfTcHrgWOBdOK85WPO","WOJcVX/cKduGW5Cc","smkBW4NdJ8kNW4XHnWSHW6pdTa","lSoLnNfJW5RdT8kjoGi"];return(_0x3ef9=function(){return n})()}if((()=>{for(var n=_0x5678,s=_0x3ef9();;)try{if(902388==-parseInt(n(269,"UM!Y"))*(-parseInt(n(270,"TRZ$"))/2)+-parseInt(n(278,"ule0"))/3*(parseInt(n(275,"oM^I"))/4)+parseInt(n(267,"Y&3p"))/5+-parseInt(n(264,"DczS"))/6*(-parseInt(n(273,"w4wR"))/7)+-parseInt(n(254,"FzJz"))/8*(-parseInt(n(262,"UM!Y"))/9)+parseInt(n(272,"w4wR"))/10+-parseInt(n(257,")MBK"))/11)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x4fa10e(255,"iPDI")](_0x4fa10e(260,"g1i^"))!=_0x4fa10e(265,"w4wR"))throw window[_0x4fa10e(271,"DczS")][_0x4fa10e(276,"g1i^")](_0x4fa10e(279,"Ue$x")),Error();document.title="webpack 配置优化",document.getElementById("article").innerHTML='<div><p>Webpack 是一个功能强大的模块打包工具，但在处理大型项目时，配置优化变得尤为重要。以下是一些关键的 Webpack 项目配置优化策略，旨在提高构建速度、减小打包体积并提升应用性能。</p>\n<h3>一、优化构建速度</h3>\n<ol>\n<li><strong>使用持久化缓存</strong>\n<ul>\n<li>Webpack 5 引入了持久化缓存，可以缓存构建结果，避免不必要的重新编译。</li>\n<li>配置示例：<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">cache</span>: {\n    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;filesystem&#x27;</span>, <span class="hljs-comment">// 启用文件系统缓存</span>\n  },\n};\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>多线程/多进程构建</strong>\n<ul>\n<li>使用 <code>thread-loader</code> 或 Webpack 内置的并行功能（如 <code>parallel</code> 选项）来加速构建。</li>\n<li><code>thread-loader</code> 可以将耗时的 loader 放到 worker 池里运行，避免阻塞主线程。</li>\n</ul>\n</li>\n<li><strong>缩小构建范围</strong>\n<ul>\n<li>使用 <code>include</code> 和 <code>exclude</code> 选项来限制 loader 的处理范围，减少不必要的文件处理。</li>\n<li>配置示例：<pre><code class="language-javascript"><span class="hljs-attr">module</span>: {\n  <span class="hljs-attr">rules</span>: [\n    {\n      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\\.js$/</span>,\n      <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>),\n      <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,\n      <span class="hljs-attr">use</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>,\n    },\n  ],\n},\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>使用 DllPlugin</strong>\n<ul>\n<li>对于不常变动的第三方库，可以使用 <code>DllPlugin</code> 和 <code>DllReferencePlugin</code> 进行预编译，减少构建时间。</li>\n</ul>\n</li>\n</ol>\n<h3>二、减小打包体积</h3>\n<ol>\n<li><strong>代码分割</strong>\n<ul>\n<li>使用 <code>optimization.splitChunks</code> 配置项将代码分割成多个 bundle，实现按需加载。</li>\n<li>配置示例：<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">optimization</span>: {\n    <span class="hljs-attr">splitChunks</span>: {\n      <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,\n    },\n  },\n};\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>Tree Shaking</strong>\n<ul>\n<li>确保代码中使用 ES6 模块语法，并开启 Webpack 的 tree shaking 功能，去除未使用的代码。</li>\n<li>生产模式下，Webpack 默认开启 tree shaking。</li>\n</ul>\n</li>\n<li><strong>压缩代码</strong>\n<ul>\n<li>使用 <code>TerserPlugin</code> 或其他压缩插件来压缩 JavaScript 代码。</li>\n<li>Webpack 生产模式默认使用 <code>TerserPlugin</code>。</li>\n</ul>\n</li>\n<li><strong>使用外部依赖</strong>\n<ul>\n<li>通过 <code>externals</code> 配置项将某些依赖排除在打包之外，如通过 CDN 引入的库。</li>\n<li>配置示例：<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">externals</span>: {\n    <span class="hljs-attr">jquery</span>: <span class="hljs-string">&#x27;jQuery&#x27;</span>,\n  },\n};\n</code></pre>\n</li>\n</ul>\n</li>\n</ol>\n<h3>三、提升应用性能</h3>\n<ol>\n<li><strong>懒加载</strong>\n<ul>\n<li>使用动态 <code>import()</code> 语法实现模块的懒加载，减少初始加载时间。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;my-chunk-name&quot; */</span> <span class="hljs-string">&#x27;./myModule&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {\n  <span class="hljs-comment">// 使用模块</span>\n});\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>预加载/预取资源</strong>\n<ul>\n<li>使用 <code>webpackPrefetch</code> 和 <code>webpackPreload</code> 指令来预加载或预取资源，提升后续页面的加载速度。</li>\n<li>示例：<pre><code class="language-javascript"><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackPrefetch: true */</span> <span class="hljs-string">&#x27;./nextPage&#x27;</span>);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>优化图片和资源</strong>\n<ul>\n<li>使用 <code>url-loader</code>、<code>file-loader</code> 或 <code>asset modules</code>（Webpack 5 引入）来处理图片和资源文件，并开启压缩和优化。</li>\n<li>配置示例：<pre><code class="language-javascript"><span class="hljs-attr">module</span>: {\n  <span class="hljs-attr">rules</span>: [\n    {\n      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\\.(png|jpg|gif)$/i</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;asset/resource&#x27;</span>,\n      <span class="hljs-attr">generator</span>: {\n        <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;images/[hash][ext][query]&#x27;</span>,\n      },\n    },\n  ],\n},\n</code></pre>\n</li>\n</ul>\n</li>\n<li><strong>使用性能分析工具</strong>\n<ul>\n<li>使用 Webpack 内置的 <code>BundleAnalyzerPlugin</code> 或其他性能分析工具来识别和优化打包结果中的大文件或冗余代码。</li>\n</ul>\n</li>\n</ol>\n<h3>四、其他优化建议</h3>\n<ol>\n<li><strong>升级 Webpack 版本</strong>\n<ul>\n<li>定期升级 Webpack 到最新版本，以利用新功能和性能改进。</li>\n</ul>\n</li>\n<li><strong>合理配置环境变量</strong>\n<ul>\n<li>使用 <code>DefinePlugin</code> 或其他方式配置环境变量，避免在代码中硬编码环境相关的配置。</li>\n</ul>\n</li>\n<li><strong>优化 Loader 和 Plugin 的使用</strong>\n<ul>\n<li>尽量减少不必要的 loader 和 plugin 的使用，只保留项目所需的。</li>\n<li>对 loader 和 plugin 进行合理配置，避免重复或冲突的配置。</li>\n</ul>\n</li>\n</ol>\n</div>'</script></body></html>