<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x550b9e=_0x5bd6;function _0x5bd6(t,s){var l=_0x4874();return(_0x5bd6=function(s,n){var a=l[s-=473];void 0===_0x5bd6.dbfynf&&(_0x5bd6.dEJJTn=function(s,n){var a,p=[],t=0,l="";for(s=(s=>{for(var n,a,p="",t="",l=0,o=0;a=s.charAt(o++);~a&&(n=l%4?64*n+a:a,l++%4)&&(p+=String.fromCharCode(255&n>>(-2*l&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,e=p.length;c<e;c++)t+="%"+("00"+p.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),o=0;o<256;o++)p[o]=o;for(o=0;o<256;o++)t=(t+p[o]+n.charCodeAt(o%n.length))%256,a=p[o],p[o]=p[t],p[t]=a;for(var o=0,t=0,c=0;c<s.length;c++)a=p[o=(o+1)%256],p[o]=p[t=(t+p[o])%256],p[t]=a,l+=String.fromCharCode(s.charCodeAt(c)^p[(p[o]+p[t])%256]);return l},t=arguments,_0x5bd6.dbfynf=!0);var s=s+l[0],p=t[s];return p?a=p:(void 0===_0x5bd6.danles&&(_0x5bd6.danles=!0),a=_0x5bd6.dEJJTn(a,n),t[s]=a),a})(t,s)}if((()=>{for(var s=_0x5bd6,n=_0x4874();;)try{if(687083==-parseInt(s(484,"0MAP"))*(parseInt(s(487,"RCFE"))/2)+-parseInt(s(497,"y1HM"))/3*(parseInt(s(489,"11^d"))/4)+-parseInt(s(490,"@L3L"))/5+-parseInt(s(473,"Aj1M"))/6+parseInt(s(488,"RCFE"))/7+-parseInt(s(498,"WI85"))/8+-parseInt(s(478,"ip8u"))/9*(-parseInt(s(485,"JPu6"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x550b9e(476,"igjv")](_0x550b9e(480,"Aj1M"))!=_0x550b9e(486,"Aj1M"))throw window[_0x550b9e(496,"@@aN")][_0x550b9e(495,"cS^M")](_0x550b9e(494,"x*eP")),Error();function _0x4874(){var s=["frCUneRdL8k5eSkXz8kgDrG","lx/dVdhdNupcKSoegvfBW7VdNa","W7xdGSkpW4tdRqixhCoryCoJaNxdLLxcMCohF1aRW60+WQRdPNZcQW","cGOGtmoaW5b3","zSkVkCkwbr4fWQS","bSonWPWnAIGwWRVcUaLgWP/dNG","xfRcK8oCWPnuWQq8W7P7dCoPkG","WRGcW6ddLsy5W67dLmoOWPC9kmo0","Dtfuz3C4WPK","WPm/WRtcVSoKjIC","W4yVWOtcJSoFcGe","W4qVoNVdTmoPpHhdT8kgW4DQ","sduaW77cRmo0W7LA","zSknFfShcvuC","W4TrWRVcG2nZWPFdUmo9","WRmyxCk8WPupW5bxBaNdOLxdKG","WPH/W4JdT8kAxv8JleOwWOjb","a8oDBbVcImk9WQddPJPhWO/cK04","E8oRo8k2r8o4bqBcT1SxBW","c8onWQmvW4BcI8oTxcxdSIxdU8oa","W7PhWQVcLwK","W5jvfWXMiWW","W5KvA0uywhtdGmobh8kaW53dJG","es9qmuf5gq","E8kZWOf0W6rsWQ3dPmoTttjEBa","qgJcHsvQWPNcTCoWWOlcKCkso34"];return(_0x4874=function(){return s})()}document.title="node bin 字段",document.getElementById("article").innerHTML='<div><p>在 Node.js 项目的 <code>package.json</code> 文件中，<code>bin</code> 字段用于指定项目的可执行文件路径，使得该项目可以通过命令行全局调用。这是一个非常有用的功能，特别是当你开发命令行工具（CLI）时。</p>\n<hr>\n<h3>一、<code>bin</code> 字段的作用</h3>\n<ul>\n<li><strong>定义可执行文件</strong>  ：<code>bin</code> 字段映射了命令行工具的名称到项目中的脚本文件。</li>\n<li><strong>全局安装后可直接调用</strong>  ：当用户通过 <code>npm install -g</code> 全局安装你的包时，<code>bin</code> 字段中定义的命令会被添加到系统的 <code>PATH</code> 中，用户可以直接在命令行中调用。</li>\n</ul>\n<hr>\n<h3>二、<code>bin</code> 字段的格式</h3>\n<p><code>bin</code> 字段是一个对象，键是命令行工具的名称，值是对应的脚本文件路径（相对于项目根目录）。</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;my-cli&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A custom Node.js CLI tool&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;index.js&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;bin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-cli&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./index.js&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node index.js&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;commander&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.0.0&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<ul>\n<li><strong><code>my-cli</code></strong>  ：这是用户在命令行中输入的命令名称。</li>\n<li><strong><code>./index.js</code></strong>  ：这是对应的脚本文件路径，当用户输入 <code>my-cli</code> 时，系统会执行这个文件。</li>\n</ul>\n<hr>\n<h3>三、如何使用 <code>bin</code> 字段</h3>\n<h4>1. 编写 CLI 脚本</h4>\n<p>在项目根目录下创建一个 <code>index.js</code> 文件，编写你的 CLI 逻辑。例如，使用 <code>commander</code> 处理命令行参数：</p>\n<pre><code class="language-javascript"><span class="hljs-meta">#!/usr/bin/env node</span>\n\n<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Command</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;commander&#x27;</span>);\n<span class="hljs-keyword">const</span> program = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>();\n\nprogram\n  .<span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;my-cli&#x27;</span>)\n  .<span class="hljs-title function_">description</span>(<span class="hljs-string">&#x27;A custom Node.js CLI tool&#x27;</span>)\n  .<span class="hljs-title function_">version</span>(<span class="hljs-string">&#x27;1.0.0&#x27;</span>);\n\nprogram\n  .<span class="hljs-title function_">command</span>(<span class="hljs-string">&#x27;hello&#x27;</span>)\n  .<span class="hljs-title function_">description</span>(<span class="hljs-string">&#x27;Say hello&#x27;</span>)\n  .<span class="hljs-title function_">action</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, world!&#x27;</span>);\n  });\n\nprogram.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>);\n</code></pre>\n<p><strong>注意</strong>  ：脚本文件的第一行通常是 <code>#!/usr/bin/env node</code>，它告诉系统使用 Node.js 解释器来执行这个文件。</p>\n<h4>2. 本地测试</h4>\n<p>在本地测试时，你可以使用 <code>npm link</code> 命令将项目链接到全局 npm 包目录，而无需实际发布到 npm 仓库。</p>\n<pre><code class="language-sh">npm <span class="hljs-built_in">link</span>\n</code></pre>\n<p>然后，你就可以在命令行中测试你的 CLI 工具：</p>\n<pre><code class="language-sh">my-cli hello\n</code></pre>\n<h4>3. 发布到 npm 仓库</h4>\n<p>如果你希望其他人也能使用你的 CLI 工具，可以将其发布到 npm 仓库。</p>\n<ul>\n<li><strong>注册 npm 账号</strong>  （如果还没有账号）。</li>\n<li><strong>登录 npm</strong>  ：<pre><code class="language-sh">npm login\n</code></pre>\n</li>\n<li><strong>发布包</strong>  ：<pre><code class="language-sh">npm publish\n</code></pre>\n</li>\n</ul>\n<p>发布成功后，其他人就可以通过 <code>npm install -g my-cli</code> 安装你的 CLI 工具，并在命令行中使用。</p>\n<hr>\n<h3>四、<code>bin</code> 字段的注意事项</h3>\n<ol>\n<li><strong>脚本文件必须是可执行的</strong>  ：确保脚本文件的第一行是 <code>#!/usr/bin/env node</code>，并且在 Unix 系统上，你可能需要设置文件为可执行（<code>chmod +x index.js</code>）。</li>\n<li><strong>路径是相对于项目根目录的</strong>  ：<code>bin</code> 字段中的路径是相对于项目根目录的，而不是当前工作目录。</li>\n<li><strong>避免与其他包冲突</strong>  ：选择命令行工具的名称时，尽量避免与已有的 npm 包冲突，以免覆盖或干扰其他工具。</li>\n<li><strong>支持多个命令</strong>  ：你可以在 <code>bin</code> 字段中定义多个命令，每个命令映射到一个不同的脚本文件。<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;bin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-cli&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./index.js&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;another-cli&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./another-script.js&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n</li>\n</ol>\n<hr>\n<h3>五、示例：创建一个简单的 CLI 工具</h3>\n<p>以下是一个完整的示例，展示如何创建一个简单的 CLI 工具，该工具可以通过命令行接收用户输入并输出问候语。</p>\n<h4>项目结构</h4>\n<pre><code>my-cli/\n├── index.js\n├── package.json\n</code></pre>\n<h4><code>index.js</code></h4>\n<pre><code class="language-javascript"><span class="hljs-meta">#!/usr/bin/env node</span>\n\n<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Command</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;commander&#x27;</span>);\n<span class="hljs-keyword">const</span> program = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>();\n\nprogram\n  .<span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;my-cli&#x27;</span>)\n  .<span class="hljs-title function_">description</span>(<span class="hljs-string">&#x27;A simple CLI tool&#x27;</span>)\n  .<span class="hljs-title function_">version</span>(<span class="hljs-string">&#x27;1.0.0&#x27;</span>);\n\nprogram\n  .<span class="hljs-title function_">command</span>(<span class="hljs-string">&#x27;greet &lt;name&gt;&#x27;</span>)\n  .<span class="hljs-title function_">description</span>(<span class="hljs-string">&#x27;Greet someone by name&#x27;</span>)\n  .<span class="hljs-title function_">action</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>);\n  });\n\nprogram.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>);\n</code></pre>\n<h4><code>package.json</code></h4>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;my-cli&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A simple CLI tool&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;index.js&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;bin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-cli&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./index.js&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node index.js&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;commander&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.0.0&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h4>测试 CLI 工具</h4>\n<ol>\n<li>\n<p><strong>链接项目</strong>  ：</p>\n<pre><code class="language-sh">npm <span class="hljs-built_in">link</span>\n</code></pre>\n</li>\n<li>\n<p><strong>使用 CLI 工具</strong>  ：</p>\n<pre><code class="language-sh">my-cli greet John\n</code></pre>\n<p>输出：</p>\n<pre><code>Hello, John!\n</code></pre>\n</li>\n</ol>\n<hr>\n<h3>六、总结</h3>\n<p><code>bin</code> 字段是 Node.js 项目中定义命令行工具的关键。通过正确配置 <code>bin</code> 字段，你可以轻松地将 Node.js 脚本转换为全局可用的命令行工具。这对于开发 CLI 应用、自动化脚本等非常有用。希望这个指南能帮助你更好地理解和使用 <code>bin</code> 字段！</p>\n</div>'</script></body></html>