<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0xdbcd(r,n){var o=_0x50b1();return(_0xdbcd=function(n,s){var t=o[n-=219];void 0===_0xdbcd.vbkuSw&&(_0xdbcd.FUBAQU=function(n,s){var t,a=[],r=0,o="";for(n=(n=>{for(var s,t,a="",r="",o=0,l=0;t=n.charAt(l++);~t&&(s=o%4?64*s+t:t,o++%4)&&(a+=String.fromCharCode(255&s>>(-2*o&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var e=0,d=a.length;e<d;e++)r+="%"+("00"+a.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(r)})(n),l=0;l<256;l++)a[l]=l;for(l=0;l<256;l++)r=(r+a[l]+s.charCodeAt(l%s.length))%256,t=a[l],a[l]=a[r],a[r]=t;for(var l=0,r=0,e=0;e<n.length;e++)t=a[l=(l+1)%256],a[l]=a[r=(r+a[l])%256],a[r]=t,o+=String.fromCharCode(n.charCodeAt(e)^a[(a[l]+a[r])%256]);return o},r=arguments,_0xdbcd.vbkuSw=!0);var n=n+o[0],a=r[n];return a?t=a:(void 0===_0xdbcd.UsPCnT&&(_0xdbcd.UsPCnT=!0),t=_0xdbcd.FUBAQU(t,s),r[n]=t),t})(r,n)}var _0xa88720=_0xdbcd;function _0x50b1(){var n=["B0tdS8oVW4pcSqpdKbCIaCkb","zu3dImoUW4zNnmkPzG","WPdcUmowpmoOW6/cUZZcJSkcWOVdVa","nXJdGCoHW6b4W4/cLKC","wSoCnM84fmoRpvjShZmyWRG","qCkcW5BcICkgW6alWRZcQ8o9WPddGCkPW7JcIfGLqmoQWO1seeJcPuNdGG","BSkOW54GCbpcSCoHqSkZW7G","imknAmodlIilo8k/","W5BdKmoSl8k9cxX0cq","rfRcOgRdI8oCWPBcKem0WRVdIq","hexdKKVcTmo4W5rnecRdHmoBEa","WRZdGsrDiSouBuxdIufRW7uosW","W7JdNmkCW7VdIdZcUmopWOnMW7BdGCk/WRW","WPpdI8kbcxffuMWwrIFcOgO7","WRSAASoiWQedWOZcUfZcI8o3eNC","qL7cRMJdJCkVWOtcMMy+WQe","W6SGyYSJgW8UCrJcSxJdUWS","W7b9W4iHWRzYWRVcHs4","greZqSkQAGW","WPpdJSkab3Xnu24pAclcNKqU","WP9Yog5p","WQxcV8oBjmkEr8kUlqOfW5BcHW","kCo9WPH8idFcSW","WOdcRaZcV8kCdGJcPq"];return(_0x50b1=function(){return n})()}if((()=>{for(var n=_0xdbcd,s=_0x50b1();;)try{if(953390==+parseInt(n(219,"OH7b"))+-parseInt(n(227,"3g@]"))/2*(-parseInt(n(240,"ede9"))/3)+-parseInt(n(234,"41Pn"))/4*(parseInt(n(242,"kh5v"))/5)+parseInt(n(229,"FWM3"))/6+-parseInt(n(220,"wEU&"))/7+parseInt(n(238,"dKmI"))/8+-parseInt(n(223,"FWM3"))/9)break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0xa88720(228,"l9V0")](_0xa88720(237,"YVfE"))!=_0xa88720(230,"dvu9"))throw window[_0xa88720(233,"dKn1")][_0xa88720(232,"ede9")](_0xa88720(239,"kK2c")),Error();document.title="微前端 核心思想",document.getElementById("article").innerHTML='<div><h3><strong>微前端（Micro Frontends）核心思想</strong></h3>\n<p>微前端是一种将<strong>前端应用拆分为独立模块</strong>   的架构模式，每个模块可由不同团队独立开发、测试、部署，最终组合成一个完整的应用。其核心思想借鉴了微服务的后端架构，旨在解决<strong>单体前端应用</strong>   的以下问题：</p>\n<hr>\n<h2><strong>1. 核心思想</strong></h2>\n<h3><strong>(1) 技术独立性</strong></h3>\n<ul>\n<li><strong>不同模块可使用不同技术栈</strong>   （React、Vue、Angular、Svelte 等）。</li>\n<li>适合渐进式迁移旧系统，避免全量重构。</li>\n<li>示例：电商平台中，商品页用 React，购物车用 Vue，结算页用 Angular。</li>\n</ul>\n<h3><strong>(2) 独立开发与部署</strong></h3>\n<ul>\n<li>每个微前端模块（Micro App）<strong>独立代码库、独立 CI/CD</strong>   。</li>\n<li>团队可并行开发，互不阻塞。</li>\n<li>部署时仅更新受影响模块，降低风险。</li>\n</ul>\n<h3><strong>(3) 运行时集成</strong></h3>\n<ul>\n<li>通过<strong>运行时动态加载</strong>   （而非编译时打包）组合模块。</li>\n<li>常见集成方式：\n<ul>\n<li><strong>iframe</strong>   （简单但隔离性强，通信受限）。</li>\n<li><strong>模块联邦（Module Federation）</strong>   （Webpack 5+，高效共享依赖）。</li>\n<li><strong>自定义加载器</strong>   （如 <code>single-spa</code>、<code>qiankun</code>）。</li>\n</ul>\n</li>\n</ul>\n<h3><strong>(4) 状态与样式隔离</strong></h3>\n<ul>\n<li><strong>CSS 隔离</strong>   ：避免样式污染（Shadow DOM、Scoped CSS、CSS-in-JS）。</li>\n<li><strong>JS 隔离</strong>   ：沙箱机制（如 <code>Proxy</code> 隔离全局变量）。</li>\n<li><strong>状态管理</strong>   ：模块间通信通过自定义事件或状态管理库（如 Redux、Pinia）。</li>\n</ul>\n<hr>\n<h2><strong>2. 实现方式</strong></h2>\n<h3><strong>(1) 基座模式（主应用 + 子应用）</strong></h3>\n<ul>\n<li><strong>主应用（Shell）</strong>   ：负责路由、登录、导航等公共逻辑。</li>\n<li><strong>子应用（Micro App）</strong>   ：独立功能模块，动态加载。</li>\n<li><strong>工具推荐</strong>   ：\n<ul>\n<li><code>qiankun</code>（阿里开源，基于 <code>single-spa</code>）。</li>\n<li><code>Module Federation</code>（Webpack 5 原生支持）。</li>\n</ul>\n</li>\n</ul>\n<p><strong>示例架构</strong>   ：</p>\n<pre><code>主应用（React）\n├─ 子应用A（Vue）：/product/*\n├─ 子应用B（Angular）：/order/*\n└─ 子应用C（Legacy jQuery）：/admin/*\n</code></pre>\n<h3><strong>(2) 去中心化模式（无主应用）</strong></h3>\n<ul>\n<li>每个模块完全独立，通过约定（如路由前缀）或服务端组合（SSI、Edge Includes）集成。</li>\n<li>适合高度自治的场景，但对基础设施要求高。</li>\n</ul>\n<hr>\n<h2><strong>3. 适用场景</strong></h2>\n<ul>\n<li><strong>大型企业级应用</strong>   ：多个团队协作开发。</li>\n<li><strong>渐进式迁移</strong>   ：逐步替换旧系统。</li>\n<li><strong>多技术栈共存</strong>   ：历史项目无法统一技术栈。</li>\n<li><strong>独立功能模块</strong>   ：如后台管理系统、电商平台。</li>\n</ul>\n<hr>\n<h2><strong>4. 优缺点</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>优点</strong></th>\n<th><strong>缺点</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>✅ 技术栈自由</td>\n<td>❌ 复杂度高（构建、部署、通信）</td>\n</tr>\n<tr>\n<td>✅ 独立开发、部署</td>\n<td>❌ 性能开销（运行时加载）</td>\n</tr>\n<tr>\n<td>✅ 渐进式升级</td>\n<td>❌ 共享依赖管理困难（如 React 版本冲突）</td>\n</tr>\n<tr>\n<td>✅ 故障隔离（单个模块出错不影响整体）</td>\n<td>❌ 调试困难（跨应用链路追踪）</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>5. 实践工具</strong></h2>\n<table>\n<thead>\n<tr>\n<th>工具</th>\n<th>特点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>qiankun</strong></td>\n<td>阿里开源，基于 <code>single-spa</code>，支持沙箱隔离、预加载。</td>\n</tr>\n<tr>\n<td><strong>single-spa</strong></td>\n<td>底层框架，灵活但需自行实现细节。</td>\n</tr>\n<tr>\n<td><strong>Module Federation</strong></td>\n<td>Webpack 5 原生支持，高效共享模块（如共享 React 避免重复加载）。</td>\n</tr>\n<tr>\n<td><strong>EMP</strong></td>\n<td>腾讯开源，增强版 Module Federation。</td>\n</tr>\n<tr>\n<td><strong>Piral</strong></td>\n<td>基于 React 的微前端框架，提供插件化架构。</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>6. 示例代码（qiankun）</strong></h2>\n<h3><strong>主应用（基座）</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { registerMicroApps, start } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;qiankun&quot;</span>;\n\n<span class="hljs-comment">// 注册子应用</span>\n<span class="hljs-title function_">registerMicroApps</span>([\n  {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;vue-app&quot;</span>,\n    <span class="hljs-attr">entry</span>: <span class="hljs-string">&quot;//localhost:7101&quot;</span>,\n    <span class="hljs-attr">container</span>: <span class="hljs-string">&quot;#subapp-container&quot;</span>,\n    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">&quot;/vue&quot;</span>,\n  },\n  {\n    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;react-app&quot;</span>,\n    <span class="hljs-attr">entry</span>: <span class="hljs-string">&quot;//localhost:7102&quot;</span>,\n    <span class="hljs-attr">container</span>: <span class="hljs-string">&quot;#subapp-container&quot;</span>,\n    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">&quot;/react&quot;</span>,\n  },\n]);\n\n<span class="hljs-comment">// 启动微前端</span>\n<span class="hljs-title function_">start</span>();\n</code></pre>\n<h3><strong>子应用（Vue）</strong></h3>\n<p>需暴露生命周期钩子：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Vue 子应用启动&quot;</span>);\n}\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">container</span>) {\n  <span class="hljs-comment">// 渲染到指定 DOM</span>\n  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({ <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>) }).$mount(container);\n}\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-comment">// 卸载清理</span>\n}\n</code></pre>\n<hr>\n<h2><strong>7. 关键挑战与解决方案</strong></h2>\n<table>\n<thead>\n<tr>\n<th>挑战</th>\n<th>解决方案</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>样式隔离</strong></td>\n<td>Shadow DOM / CSS Scope / 命名约定（如 BEM）。</td>\n</tr>\n<tr>\n<td><strong>JS 污染</strong></td>\n<td>沙箱机制（Proxy 隔离 <code>window</code>）。</td>\n</tr>\n<tr>\n<td><strong>依赖共享</strong></td>\n<td>Module Federation / 外部化依赖（Externals）。</td>\n</tr>\n<tr>\n<td><strong>通信</strong></td>\n<td>自定义事件 / 状态管理库 / URL 参数。</td>\n</tr>\n<tr>\n<td><strong>性能优化</strong></td>\n<td>子应用懒加载 / 预加载 / 共享公共依赖（如 React、Lodash）。</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>总结</strong></h2>\n<p>微前端通过<strong>解耦</strong>   和<strong>动态组合</strong>   实现前端架构的灵活性，适合复杂业务场景，但需权衡复杂度与维护成本。选择合适的工具（如 <code>qiankun</code> 或 <code>Module Federation</code>）并规范团队协作是关键。</p>\n</div>'</script></body></html>