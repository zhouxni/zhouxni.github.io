<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x531b16=_0x5d2e;function _0x5d2e(p,s){var l=_0x1e59();return(_0x5d2e=function(s,n){var a=l[s-=434];void 0===_0x5d2e.gKkVzE&&(_0x5d2e.qDuviN=function(s,n){var a,t=[],p=0,l="";for(s=(s=>{for(var n,a,t="",p="",l=0,e=0;a=s.charAt(e++);~a&&(n=l%4?64*n+a:a,l++%4)&&(t+=String.fromCharCode(255&n>>(-2*l&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var r=0,o=t.length;r<o;r++)p+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)p=(p+t[e]+n.charCodeAt(e%n.length))%256,a=t[e],t[e]=t[p],t[p]=a;for(var e=0,p=0,r=0;r<s.length;r++)a=t[e=(e+1)%256],t[e]=t[p=(p+t[e])%256],t[p]=a,l+=String.fromCharCode(s.charCodeAt(r)^t[(t[e]+t[p])%256]);return l},p=arguments,_0x5d2e.gKkVzE=!0);var s=s+l[0],t=p[s];return t?a=t:(void 0===_0x5d2e.LvelrI&&(_0x5d2e.LvelrI=!0),a=_0x5d2e.qDuviN(a,n),p[s]=a),a})(p,s)}function _0x1e59(){var s=["W7FcSmkuWPq3jXZcPXyMjmoTWRpcRa","W7tcTSkBWPyZlwpdVXKMcSok","W6ddSvtcReZcKmouWRa3","W5xcJ8okWQRdImobW47cT8k5oSosjSku","W64KW6uVCCokdCobW6KBWPO","WPpdHCksjCkZW60K","WPe8W68eWPT1rCoeWRJcUCkHAXG","adf4WRldSSoyWRGbWOyMW4bI","WQ/cHCk7W7ZdPCk8BhS","wbtcJSkPaSodWOCTW5i","WOpcNSo8rfzHqSklrCkMW606qa","xWldQCkZWQBcUuLPbG","wCorWPJdKSkfyadcQ8k+hNVcN8oJFa","WO/cUSo3eenfWQhdTq","W7FcS8kuWPa2luNdNWeWlSog","nemFW4hcOCoelG","WRvYCbpdRK8rWQhdRSoobLxdTa","vmkRWQGkWRRdLMrzWRqFW77cJ8k/iWTexxVcSx4by8kPW68fda","ySkhW4/dPmocWOZcLa","lmoaAIFdJSoejwC+Ev5P","i8o4WRnlWQKdasXbWOO3","WRKwW4jLWPS","WQJcPCoRWPytW5HCqa","W7uGmeVcVrLd","W4RdMXqwhmo4WRDmWQFcL8o2WOG","W6uHW6mPD8kVl8oeW6KvWOeg"];return(_0x1e59=function(){return s})()}if((()=>{for(var s=_0x5d2e,n=_0x1e59();;)try{if(673283==+parseInt(s(449,"GYzq"))+parseInt(s(437,"usAQ"))/2*(parseInt(s(436,"GYzq"))/3)+parseInt(s(458,"!CWO"))/4+-parseInt(s(455,"2PyZ"))/5*(parseInt(s(435,"Tqx5"))/6)+parseInt(s(459,"LH0r"))/7*(parseInt(s(452,"@Y!J"))/8)+-parseInt(s(451,"RKH!"))/9+-parseInt(s(434,"B7P]"))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x531b16(440,"bqFM")](_0x531b16(457,"Vo9g"))!=_0x531b16(443,"ySp2"))throw window[_0x531b16(444,"*2I3")][_0x531b16(445,")p&J")](_0x531b16(439,"fxqz")),Error();document.title=" Vue 3 中的 app.config.globalProperties 详解",document.getElementById("article").innerHTML='<div><p><code>app.config.globalProperties</code> 是 Vue 3 提供的一个全局属性配置方式，用于在整个应用中共享公共属性或方法。以下是它的核心特性和使用方法：</p>\n<h4>1. 基本用法</h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;\n\n<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);\n\n<span class="hljs-comment">// 添加全局属性</span>\napp.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$appName</span> = <span class="hljs-string">&quot;My Awesome App&quot;</span>;\napp.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$formatDate</span> = <span class="hljs-function">(<span class="hljs-params">date</span>) =&gt;</span> {\n  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(date).<span class="hljs-title function_">toLocaleDateString</span>();\n};\n\napp.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>);\n</code></pre>\n<h4>2. 在组件中使用</h4>\n<p>在任何组件中可以直接通过 <code>this</code> 访问这些全局属性：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$appName</span>); <span class="hljs-comment">// &#x27;My Awesome App&#x27;</span>\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.$formatDate(<span class="hljs-string">&quot;2023-01-01&quot;</span>)); <span class="hljs-comment">// &#x27;1/1/2023&#x27;</span>\n  },\n};\n</code></pre>\n<h4>3. 与 Vue 2 的对比</h4>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>Vue 2 (Vue.prototype)</th>\n<th>Vue 3 (globalProperties)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>实现方式</td>\n<td>修改原型链</td>\n<td>代理属性访问</td>\n</tr>\n<tr>\n<td>类型支持</td>\n<td>较差</td>\n<td>更好的 TypeScript 支持</td>\n</tr>\n<tr>\n<td>冲突检测</td>\n<td>较弱</td>\n<td>更安全</td>\n</tr>\n<tr>\n<td>组合式 API 兼容性</td>\n<td>不兼容</td>\n<td>完全兼容</td>\n</tr>\n</tbody>\n</table>\n<h4>4. TypeScript 支持</h4>\n<p>为获得类型提示，需要扩展类型声明：</p>\n<pre><code class="language-typescript"><span class="hljs-comment">// global.d.ts</span>\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentCustomProperties</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;\n\n<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&quot;vue&quot;</span> {\n  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComponentCustomProperties</span> {\n    <span class="hljs-attr">$appName</span>: <span class="hljs-built_in">string</span>;\n    <span class="hljs-attr">$formatDate</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">date</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;\n  }\n}\n</code></pre>\n<h4>5. 最佳实践</h4>\n<ul>\n<li>\n<p><strong>适合场景</strong>   ：</p>\n<ul>\n<li>全局工具函数（如格式化方法）</li>\n<li>应用配置信息</li>\n<li>轻量级的全局状态共享</li>\n</ul>\n</li>\n<li>\n<p><strong>不适合场景</strong>   ：</p>\n<ul>\n<li>复杂状态管理（应使用 Pinia/Vuex）</li>\n<li>高频更新的数据</li>\n</ul>\n</li>\n</ul>\n<h4>6. 注意事项</h4>\n<ol>\n<li>避免属性命名冲突</li>\n<li>不要在 globalProperties 上挂载过多属性</li>\n<li>对于响应式数据，需要手动包装为 ref/reactive</li>\n</ol>\n<h4>7. 替代方案比较</h4>\n<table>\n<thead>\n<tr>\n<th>方案</th>\n<th>优点</th>\n<th>缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>globalProperties</td>\n<td>简单直接，组件内易用</td>\n<td>缺乏响应性，类型需额外声明</td>\n</tr>\n<tr>\n<td>Provide/Inject</td>\n<td>响应式支持，作用域控制</td>\n<td>需要显式注入</td>\n</tr>\n<tr>\n<td>Pinia</td>\n<td>完整状态管理，TypeScript 友好</td>\n<td>需要额外学习成本</td>\n</tr>\n</tbody>\n</table>\n<h4>8. 示例：结合响应式数据</h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;\n\napp.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$globalState</span> = <span class="hljs-title function_">reactive</span>({\n  <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,\n  <span class="hljs-attr">theme</span>: <span class="hljs-string">&quot;light&quot;</span>,\n});\n\n<span class="hljs-comment">// 组件中使用</span>\n<span class="hljs-variable language_">this</span>.<span class="hljs-property">$globalState</span>.<span class="hljs-property">theme</span> = <span class="hljs-string">&quot;dark&quot;</span>;\n</code></pre>\n<h4>9. 与组合式 API 配合</h4>\n<p>在 setup 中访问：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { getCurrentInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> { proxy } = <span class="hljs-title function_">getCurrentInstance</span>();\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy?.<span class="hljs-property">$appName</span>);\n  },\n};\n</code></pre>\n<h4>10. 生命周期</h4>\n<ul>\n<li>属性会随应用实例一起销毁</li>\n<li>修改已挂载的属性会立即生效</li>\n</ul>\n<p>总结：<code>app.config.globalProperties</code> 是 Vue 3 推荐的全局属性共享方案，比 Vue 2 的原型扩展更安全、更灵活，尤其适合共享工具函数和配置信息。但对于复杂场景，建议结合 Provide/Inject 或状态管理库使用。</p>\n</div>'</script></body></html>