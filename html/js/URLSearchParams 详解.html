<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4b06(p,s){var c=_0x3422();return(_0x4b06=function(s,a){var n=c[s-=428];void 0===_0x4b06.RtQiVO&&(_0x4b06.TcabEr=function(s,a){var n,l=[],p=0,c="";for(s=(s=>{for(var a,n,l="",p="",c=0,t=0;n=s.charAt(t++);~n&&(a=c%4?64*a+n:n,c++%4)&&(l+=String.fromCharCode(255&a>>(-2*c&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var e=0,o=l.length;e<o;e++)p+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(p)})(s),t=0;t<256;t++)l[t]=t;for(t=0;t<256;t++)p=(p+l[t]+a.charCodeAt(t%a.length))%256,n=l[t],l[t]=l[p],l[p]=n;for(var t=0,p=0,e=0;e<s.length;e++)n=l[t=(t+1)%256],l[t]=l[p=(p+l[t])%256],l[p]=n,c+=String.fromCharCode(s.charCodeAt(e)^l[(l[t]+l[p])%256]);return c},p=arguments,_0x4b06.RtQiVO=!0);var s=s+c[0],l=p[s];return l?n=l:(void 0===_0x4b06.KlshoG&&(_0x4b06.KlshoG=!0),n=_0x4b06.TcabEr(n,a),p[s]=n),n})(p,s)}function _0x3422(){var s=["imoYWQG5mHaNBN8","umoxW7ldV2JcIYS","W4RcVCkiWRlcLu11sG","hSkcW6rZAX7dHG","W7DIFqJdUv3dJ8otW6K","WOHnw8kBECksWO4KW6SAWOz+cZCofeFcQdpcOmoJELtcH8kcW7i","D2njWOvWWQ/dIa4","k2/cSeWHmXGlWQ4OW4q","jmoWW4xcMeOKW7NcQN/dPmoT","W45FW74IjbldRmk9W7CKCa","CCozkftdMCkGcra","WQjjW5tdPCkwWQhcVZFdLSkFf1VdVG","W5BdUavVWQyaC8ovuW","eMFcLmkdWQ0pgHVcUW","W6ldLcpdNmoiWRLEaLi","WR3cIt3cTKCSWPZdONJdLa","z8k4WO1BW63dJMVdSwzzESkOWRe","vsRdN8kPWPG","jmo0W6qIjX8vxW","W7pcHSows8kUnXurW4RcRCo/WPW","BSkvpemuWRCWWQftbwK","W5hdN8kedHXlW5bLW6i","ixtcVmo7WO0vo8o9W6LIgfG","W719bSouW79YlqaiWRS","WOjhvN7cQh5ZW4JdMa","qNtdGcFdJ8kApmkMc8kInq","W71XbmouWP0RBXSSWQmmgdm","zIpcQZVcVv4vy1ldPaddNmon","zcRcRthcVXXTzK3dUXy","WOtcPmojW78zESo1WPO"];return(_0x3422=function(){return s})()}var _0x5cf16c=_0x4b06;if((()=>{for(var s=_0x4b06,a=_0x3422();;)try{if(754015==+parseInt(s(445,"X^yN"))*(parseInt(s(443,"8]vw"))/2)+parseInt(s(441,"1e[Q"))/3+parseInt(s(439,"a7w9"))/4*(-parseInt(s(454,"GbZ6"))/5)+parseInt(s(436,"XBMD"))/6*(-parseInt(s(449,"uT^&"))/7)+parseInt(s(446,"j@kB"))/8*(parseInt(s(429,"v69z"))/9)+-parseInt(s(438,"G)a8"))/10+parseInt(s(437,"jRVf"))/11*(-parseInt(s(430,"t3Vd"))/12))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x5cf16c(433,"OJu8")](_0x5cf16c(451,")gPl"))!=_0x5cf16c(447,"8]vw"))throw window[_0x5cf16c(432,"QxQw")][_0x5cf16c(431,"qEA8")](_0x5cf16c(435,"MPsr")),Error();document.title="URLSearchParams 详解",document.getElementById("article").innerHTML='<div><p><code>URLSearchParams</code> 是 JavaScript 中用于处理 URL 查询字符串（即 <code>?</code> 后面的部分）的内置对象，提供了简洁的 API 来操作键值对形式的查询参数。它广泛用于解析、构建和修改 URL 中的查询字符串，是前端处理路由参数、API 请求参数的常用工具。</p>\n<h3>基本概念</h3>\n<p>URL 查询字符串的格式是 <code>key1=value1&amp;key2=value2&amp;key3=value3</code>，例如：</p>\n<pre><code>https://example.com/search?query=react&amp;page=1&amp;sort=desc\n</code></pre>\n<p>这里的 <code>query=react&amp;page=1&amp;sort=desc</code> 就是查询字符串，<code>URLSearchParams</code> 可以方便地操作这些键值对。</p>\n<h3>初始化 <code>URLSearchParams</code></h3>\n<p>可以通过多种方式创建 <code>URLSearchParams</code> 实例：</p>\n<ol>\n<li>\n<p><strong>从查询字符串初始化</strong>   （最常用）</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 从完整查询字符串创建</span>\n<span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&amp;sort=desc&quot;</span>);\n\n<span class="hljs-comment">// 从不带 ? 的字符串创建（同样有效）</span>\n<span class="hljs-keyword">const</span> params2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&quot;</span>);\n</code></pre>\n</li>\n<li>\n<p><strong>从 URL 对象中获取</strong></p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&quot;https://example.com/search?query=react&amp;page=1&quot;</span>);\n<span class="hljs-keyword">const</span> params = url.<span class="hljs-property">searchParams</span>; <span class="hljs-comment">// 直接获取 URL 对象的 searchParams 属性</span>\n</code></pre>\n</li>\n<li>\n<p><strong>从对象/数组初始化</strong>   （键值对形式）</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 从对象创建（值会被自动转为字符串）</span>\n<span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>({\n  <span class="hljs-attr">query</span>: <span class="hljs-string">&quot;react&quot;</span>,\n  <span class="hljs-attr">page</span>: <span class="hljs-string">&quot;1&quot;</span>,\n  <span class="hljs-attr">sort</span>: <span class="hljs-string">&quot;desc&quot;</span>,\n});\n\n<span class="hljs-comment">// 从二维数组创建（支持重复键）</span>\n<span class="hljs-keyword">const</span> params2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>([\n  [<span class="hljs-string">&quot;query&quot;</span>, <span class="hljs-string">&quot;react&quot;</span>],\n  [<span class="hljs-string">&quot;filter&quot;</span>, <span class="hljs-string">&quot;popular&quot;</span>],\n  [<span class="hljs-string">&quot;filter&quot;</span>, <span class="hljs-string">&quot;new&quot;</span>], <span class="hljs-comment">// 重复键</span>\n]);\n</code></pre>\n</li>\n</ol>\n<h3>常用方法</h3>\n<p><code>URLSearchParams</code> 提供了一系列方法来操作查询参数，以下是最常用的 API：</p>\n<h4>1. 获取参数</h4>\n<ul>\n<li>\n<p><code>get(name)</code>：返回指定键的第一个值（字符串），不存在则返回 <code>null</code>。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;query&quot;</span>)); <span class="hljs-comment">// &#x27;react&#x27;</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;page&quot;</span>)); <span class="hljs-comment">// &#x27;1&#x27;</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;sort&quot;</span>)); <span class="hljs-comment">// null（不存在）</span>\n</code></pre>\n</li>\n<li>\n<p><code>getAll(name)</code>：返回指定键的所有值（数组），适合处理重复键。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;filter=popular&amp;filter=new&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">&quot;filter&quot;</span>)); <span class="hljs-comment">// [&#x27;popular&#x27;, &#x27;new&#x27;]</span>\n</code></pre>\n</li>\n<li>\n<p><code>has(name)</code>：判断是否存在指定键，返回布尔值。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">has</span>(<span class="hljs-string">&quot;query&quot;</span>)); <span class="hljs-comment">// true</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">has</span>(<span class="hljs-string">&quot;page&quot;</span>)); <span class="hljs-comment">// false</span>\n</code></pre>\n</li>\n</ul>\n<h4>2. 添加/修改参数</h4>\n<ul>\n<li>\n<p><code>append(name, value)</code>：添加一个键值对（保留现有相同键）。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&quot;</span>);\nparams.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;filter&quot;</span>, <span class="hljs-string">&quot;popular&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react&amp;filter=popular&#x27;</span>\n\n<span class="hljs-comment">// 重复添加同一键，会保留多个值</span>\nparams.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;filter&quot;</span>, <span class="hljs-string">&quot;new&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react&amp;filter=popular&amp;filter=new&#x27;</span>\n</code></pre>\n</li>\n<li>\n<p><code>set(name, value)</code>：设置指定键的值（覆盖现有相同键的所有值）。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&quot;</span>);\nparams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;page&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>); <span class="hljs-comment">// 覆盖 page 的值</span>\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react&amp;page=2&#x27;</span>\n\n<span class="hljs-comment">// 对不存在的键，set 等同于添加</span>\nparams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;sort&quot;</span>, <span class="hljs-string">&quot;desc&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react&amp;page=2&amp;sort=desc&#x27;</span>\n</code></pre>\n</li>\n</ul>\n<h4>3. 删除参数</h4>\n<ul>\n<li><code>delete(name)</code>：删除指定键的所有值。<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&amp;sort=desc&quot;</span>);\nparams.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;page&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react&amp;sort=desc&#x27;</span>\n</code></pre>\n</li>\n</ul>\n<h4>4. 遍历参数</h4>\n<ul>\n<li>\n<p><code>forEach(callback)</code>：遍历所有键值对（类似数组的 forEach）。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&quot;</span>);\nparams.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${key}</span>: <span class="hljs-subst">${value}</span>`</span>); <span class="hljs-comment">// 输出 &quot;query: react&quot; 和 &quot;page: 1&quot;</span>\n});\n</code></pre>\n</li>\n<li>\n<p><code>keys()</code> / <code>values()</code> / <code>entries()</code>：返回迭代器，用于遍历键、值或键值对。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react&amp;page=1&quot;</span>);\n\n<span class="hljs-comment">// 遍历所有键</span>\n<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> params.<span class="hljs-title function_">keys</span>()) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// &#x27;query&#x27;, &#x27;page&#x27;</span>\n}\n\n<span class="hljs-comment">// 遍历所有键值对</span>\n<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> params.<span class="hljs-title function_">entries</span>()) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${key}</span>=<span class="hljs-subst">${value}</span>`</span>); <span class="hljs-comment">// &#x27;query=react&#x27;, &#x27;page=1&#x27;</span>\n}\n</code></pre>\n</li>\n</ul>\n<h4>5. 转换为字符串</h4>\n<ul>\n<li>\n<p><code>toString()</code>：将参数转换为查询字符串格式（可直接拼接在 URL 中）。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>({ <span class="hljs-attr">query</span>: <span class="hljs-string">&quot;react&quot;</span>, <span class="hljs-attr">page</span>: <span class="hljs-string">&quot;1&quot;</span> });\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react&amp;page=1&#x27;</span>\n\n<span class="hljs-comment">// 拼接到 URL</span>\n<span class="hljs-keyword">const</span> url = <span class="hljs-string">`https://example.com/search?<span class="hljs-subst">${params.toString()}</span>`</span>;\n</code></pre>\n</li>\n</ul>\n<h3>实际应用场景</h3>\n<ol>\n<li>\n<p><strong>解析 URL 中的查询参数</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 当前 URL：https://example.com/search?query=react&amp;page=1</span>\n<span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);\n<span class="hljs-keyword">const</span> query = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;query&quot;</span>); <span class="hljs-comment">// &#x27;react&#x27;</span>\n<span class="hljs-keyword">const</span> page = <span class="hljs-title class_">Number</span>(params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;page&quot;</span>)); <span class="hljs-comment">// 1（转为数字）</span>\n</code></pre>\n</li>\n<li>\n<p><strong>构建 API 请求参数</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 构建查询参数</span>\n<span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>();\nparams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;query&quot;</span>, <span class="hljs-string">&quot;react&quot;</span>);\nparams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;limit&quot;</span>, <span class="hljs-string">&quot;10&quot;</span>);\nparams.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;tag&quot;</span>, <span class="hljs-string">&quot;frontend&quot;</span>);\nparams.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;tag&quot;</span>, <span class="hljs-string">&quot;javascript&quot;</span>);\n\n<span class="hljs-comment">// 发起请求</span>\n<span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://api.example.com/data?<span class="hljs-subst">${params.toString()}</span>`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>\n  res.<span class="hljs-title function_">json</span>(),\n);\n</code></pre>\n</li>\n<li>\n<p><strong>修改路由参数（配合 history API）</strong></p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 修改当前页面的查询参数，不刷新页面</span>\n<span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);\nparams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;page&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>); <span class="hljs-comment">// 更新 page 参数</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">`?<span class="hljs-subst">${params.toString()}</span>`</span>);\n</code></pre>\n</li>\n</ol>\n<h3>注意事项</h3>\n<ol>\n<li>\n<p><strong>自动编码/解码</strong>   ：<code>URLSearchParams</code> 会自动处理特殊字符的编码（如空格转为 <code>+</code> 或 <code>%20</code>）和解码，无需手动调用 <code>encodeURIComponent</code>。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>();\nparams.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;query&quot;</span>, <span class="hljs-string">&quot;react js&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// &#x27;query=react+js&#x27;（自动编码）</span>\n\n<span class="hljs-keyword">const</span> decoded = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;query=react+js&quot;</span>);\n<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(decoded.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;query&quot;</span>)); <span class="hljs-comment">// &#x27;react js&#x27;（自动解码）</span>\n</code></pre>\n</li>\n<li>\n<p><strong>值的类型</strong>   ：所有参数值都会被转为字符串，如需数字/布尔值，需手动转换。</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-string">&quot;page=1&amp;active=true&quot;</span>);\n<span class="hljs-keyword">const</span> page = <span class="hljs-title class_">Number</span>(params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;page&quot;</span>)); <span class="hljs-comment">// 1（数字）</span>\n<span class="hljs-keyword">const</span> active = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;active&quot;</span>) === <span class="hljs-string">&quot;true&quot;</span>; <span class="hljs-comment">// true（布尔值）</span>\n</code></pre>\n</li>\n<li>\n<p><strong>兼容性</strong>   ：支持所有现代浏览器（IE 不支持），如需兼容旧环境，可使用 polyfill。</p>\n</li>\n</ol>\n<h3>总结</h3>\n<p><code>URLSearchParams</code> 是处理 URL 查询字符串的高效工具，它简化了参数的解析、构建和修改过程，避免了手动拼接字符串的繁琐和错误。在前端开发中，无论是处理路由参数、构建 API 请求，还是操作 URL 状态，<code>URLSearchParams</code> 都是值得优先使用的原生方案。</p>\n</div>'</script></body></html>