<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x3adf94=_0x2999;function _0x2999(p,s){var c=_0x1ba4();return(_0x2999=function(s,n){var a=c[s-=251];void 0===_0x2999.ljfCPV&&(_0x2999.GIJccd=function(s,n){var a,t=[],p=0,c="";for(s=(s=>{for(var n,a,t="",p="",c=0,l=0;a=s.charAt(l++);~a&&(n=c%4?64*n+a:a,c++%4)&&(t+=String.fromCharCode(255&n>>(-2*c&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var o=0,u=t.length;o<u;o++)p+="%"+("00"+t.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(p)})(s),l=0;l<256;l++)t[l]=l;for(l=0;l<256;l++)p=(p+t[l]+n.charCodeAt(l%n.length))%256,a=t[l],t[l]=t[p],t[p]=a;for(var l=0,p=0,o=0;o<s.length;o++)a=t[l=(l+1)%256],t[l]=t[p=(p+t[l])%256],t[p]=a,c+=String.fromCharCode(s.charCodeAt(o)^t[(t[l]+t[p])%256]);return c},p=arguments,_0x2999.ljfCPV=!0);var s=s+c[0],t=p[s];return t?a=t:(void 0===_0x2999.marDdu&&(_0x2999.marDdu=!0),a=_0x2999.GIJccd(a,n),p[s]=a),a})(p,s)}function _0x1ba4(){var s=["Eu7dUGWU","wZ/dNX3cHJmk","WPTOgIfHtrZdKCocW4yjpmkx","CNGve8oLy1RcQKBdISk3pa","B8klrYZdOYC1W5XU","ChqyfmoNAaxcTutdK8k5gbS","DgaAqJbkWQ91WPftbCoUWRC","W4RcJW4dWRyAWPlcUbZdN8oeWQ7cVq","A2FcVe/cLmkTW5rcB8k4imoAe8oVfLDxbCkiWQJcLunvW7pdQHC","dureBmoGaxDEWQO","WOb6nSo7AWLPmgbgvmof","BKxcQb/cN8kTWRW","b1z3W6TBWRJcV8o6WO3dLG","ECkFu8kkW5NcOwhdNrTMurlcQW","zs7dSGRdJmkJAW","Fs42l0rPFG","qSo8W4RcLcxcI8o5W7WriSo3WOq","zmk7tG7cNuVdHHHiWQu","lq/cKb3cHq3dIbVdPG","W5qoACkLWOddUSkzWPeAjIZcPti","W5KWxfKZbIDv","lCkYW5SSW7/dV1VdTSk6kuTvva","l8oFggD6W6DWlMW9zee","W4q3W5fizmk9WQJcV2FcPmkMwam"];return(_0x1ba4=function(){return s})()}if((()=>{for(var s=_0x2999,n=_0x1ba4();;)try{if(378478==+parseInt(s(260,"oTIU"))+parseInt(s(266,"iD[I"))/2*(parseInt(s(269,"DUMA"))/3)+parseInt(s(272,"raw*"))/4*(-parseInt(s(254,"WLlY"))/5)+-parseInt(s(259,"v[8O"))/6+parseInt(s(255,"l78!"))/7+-parseInt(s(262,"oTIU"))/8+parseInt(s(256,"0l@#"))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x3adf94(271,"jUQw")](_0x3adf94(261,"1]@i"))!=_0x3adf94(257,"AWq["))throw window[_0x3adf94(253,"6Zwf")][_0x3adf94(258,"NoL]")](_0x3adf94(265,"[BKk")),Error();document.title="TypeScript 声明文件(.d.ts)的输出位置",document.getElementById("article").innerHTML='<div><p>在 TypeScript 项目中，<code>.d.ts</code> 声明文件的输出位置取决于你的 <code>tsconfig.json</code> 配置。以下是几种常见情况：</p>\n<h2>默认行为</h2>\n<p>默认情况下（没有特别配置时），<code>.d.ts</code> 文件会生成在与编译后的 <code>.js</code> 文件相同的目录中：</p>\n<pre><code>src/\n  ├── index.ts       → 编译后 →\ndist/\n  ├── index.js\n  ├── index.d.ts     // 声明文件与JS文件同目录\n</code></pre>\n<h2>配置声明文件输出</h2>\n<h3>1. 生成声明文件</h3>\n<p>确保 <code>tsconfig.json</code> 中启用了 <code>declaration</code> 选项：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;declaration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 生成.d.ts文件</span>\n    <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist&quot;</span>      <span class="hljs-comment">// 输出目录</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h3>2. 声明文件输出到单独目录</h3>\n<p>如果需要将声明文件集中到特定目录，可以使用 <code>declarationDir</code>：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;declaration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;declarationDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist/types&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 声明文件单独目录</span>\n    <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist/js&quot;</span>             <span class="hljs-comment">// JS文件输出目录</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<p>结果结构：</p>\n<pre><code>dist/\n  ├── js/\n  │   ├── index.js\n  ├── types/\n      ├── index.d.ts\n</code></pre>\n<h3>3. 与源码同目录（不推荐）</h3>\n<p>如果想让声明文件与源码保持同目录（不经过编译）：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;declaration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;noEmit&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// 确保会输出文件</span>\n    <span class="hljs-attr">&quot;emitDeclarationOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>  <span class="hljs-comment">// 只生成声明文件</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<p>这样会在 <code>.ts</code> 文件旁边生成 <code>.d.ts</code> 文件，但不推荐这种做法。</p>\n<h2>最佳实践</h2>\n<ol>\n<li>\n<p><strong>推荐将声明文件与编译后的JS放在同一目录</strong>  （默认行为），这样导入时TypeScript能自动找到类型定义</p>\n</li>\n<li>\n<p>如果是发布到npm的库，可以考虑：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;declaration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;declarationDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;outDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist&quot;</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;rootDir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;src&quot;</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<p>这样所有输出都在dist目录，便于发布</p>\n</li>\n<li>\n<p>对于复杂项目，可以使用路径映射：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n      <span class="hljs-attr">&quot;*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;types/*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;node_modules/*&quot;</span><span class="hljs-punctuation">]</span>\n    <span class="hljs-punctuation">}</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n</li>\n</ol>\n<h2>注意事项</h2>\n<ul>\n<li>如果使用<code>composite</code>或<code>project references</code>，声明文件会自动生成到输出目录</li>\n<li>确保<code>tsconfig.json</code>中的<code>include</code>/<code>exclude</code>配置正确包含所有需要生成声明的文件</li>\n<li>声明文件路径必须与JS文件保持对应关系，否则导入时TypeScript会找不到类型定义</li>\n</ul>\n</div>'</script></body></html>