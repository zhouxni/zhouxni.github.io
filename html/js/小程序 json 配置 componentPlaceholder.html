<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x5c7e(){var s=["WQVcK8onc8ofjd7cMeFdIwC","WQFdHdveb8o9W6O7bgKzWRjT","WRFdObBcHmkSW5KHWRjIlmk7","hKBcICkGcfhcKCoalYFcLhm4","gmkJpfxcRSkInYhcPG","W7HXWOeIWRlcRmkX","WQ3dO8kzFI5ruCkFW5G","WQ0LW4fzW7hcV8kUWOpcLWzU","oge6m8kvWRFcI0rpWQpcTG","WQSTW41AW7FcJ8kLWRhcJcbm","W7X8WQbhWRbHwSkYW41mW4e","ySoXW4pdNMvAEmkxtfFcHmkbzq","WRhdObBdHmoTW5WxWP5M","W6aMoILzWRvtWRz3W6f3WP8HWOK","WR14yhauW60nW6G","W5CHy03dVb0aW40","WQ4NW4zzW7pdUCoTWRFcLaHmiem","WRiAW4RcPdRdPLhdPCoW","WQSKWQ8gWPZcNmkBWPq","WQPIr0irqCksW5SuW4tdIs7cL8kfWR3cUmkXWOBdI8oQWPqDFxKqWP0","W5VdOZePC8k5Da","W6JdPsiGyCkPwSozAq","W7VcLmoiguO","WPzIW4mDmaGGn3joWR/dU3u","WPrHW4mwpW8KBvjxWRFdUhO+","W6fgFIWxAfSmwmoLWOS6gW"];return(_0x5c7e=function(){return s})()}var _0x44a626=_0x5cda;function _0x5cda(p,s){var l=_0x5c7e();return(_0x5cda=function(s,n){var a=l[s-=296];void 0===_0x5cda.hPNtpF&&(_0x5cda.zFUEGv=function(s,n){var a,t=[],p=0,l="";for(s=(s=>{for(var n,a,t="",p="",l=0,c=0;a=s.charAt(c++);~a&&(n=l%4?64*n+a:a,l++%4)&&(t+=String.fromCharCode(255&n>>(-2*l&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var o=0,u=t.length;o<u;o++)p+="%"+("00"+t.charCodeAt(o).toString(16)).slice(-2);return decodeURIComponent(p)})(s),c=0;c<256;c++)t[c]=c;for(c=0;c<256;c++)p=(p+t[c]+n.charCodeAt(c%n.length))%256,a=t[c],t[c]=t[p],t[p]=a;for(var c=0,p=0,o=0;o<s.length;o++)a=t[c=(c+1)%256],t[c]=t[p=(p+t[c])%256],t[p]=a,l+=String.fromCharCode(s.charCodeAt(o)^t[(t[c]+t[p])%256]);return l},p=arguments,_0x5cda.hPNtpF=!0);var s=s+l[0],t=p[s];return t?a=t:(void 0===_0x5cda.bccuCd&&(_0x5cda.bccuCd=!0),a=_0x5cda.zFUEGv(a,n),p[s]=a),a})(p,s)}if((()=>{for(var s=_0x5cda,n=_0x5c7e();;)try{if(520453==+parseInt(s(317,"bxp["))*(-parseInt(s(298,"$F3&"))/2)+-parseInt(s(320,"#9Bl"))/3+parseInt(s(308,"uFoF"))/4+-parseInt(s(306,"mw]c"))/5+-parseInt(s(315,"l^ji"))/6*(-parseInt(s(316,"sR1g"))/7)+-parseInt(s(309,"pcVO"))/8*(-parseInt(s(300,"Rm9#"))/9)+parseInt(s(296,"V#*K"))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x44a626(314,"sR1g")](_0x44a626(304,"N9]o"))!=_0x44a626(305,"wVN@"))throw window[_0x44a626(297,"V#*K")][_0x44a626(303,"N9]o")](_0x44a626(302,"6G&b")),Error();document.title="小程序 json 配置 componentPlaceholder",document.getElementById("article").innerHTML='<div><p>在小程序的 JSON 配置中，<code>componentPlaceholder</code> 是一个用于优化自定义组件加载体验的配置项，它可以在自定义组件加载完成前显示一个占位组件。以下是关于 <code>componentPlaceholder</code> 的详细说明和配置方法：</p>\n<hr>\n<h3><strong>一、基本概念</strong></h3>\n<p><code>componentPlaceholder</code> 主要用于以下场景：</p>\n<ul>\n<li>当页面使用自定义组件时，在组件代码下载和初始化完成前，显示一个占位内容</li>\n<li>避免组件加载过程中的页面布局跳动或空白</li>\n<li>提升用户体验，让用户感知内容正在加载</li>\n</ul>\n<hr>\n<h3><strong>二、配置方法</strong></h3>\n<p>在页面的 JSON 配置文件中添加 <code>componentPlaceholder</code> 字段：</p>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/my-component&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;componentPlaceholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;view&quot;</span>  <span class="hljs-comment">// 使用内置组件作为占位</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h4><strong>配置说明</strong></h4>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>类型</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>usingComponents</code></td>\n<td>Object</td>\n<td>是</td>\n<td>声明使用的自定义组件</td>\n</tr>\n<tr>\n<td><code>componentPlaceholder</code></td>\n<td>Object</td>\n<td>否</td>\n<td>定义组件的占位内容</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>三、占位类型</strong></h3>\n<h4>1. <strong>使用内置组件作为占位</strong></h4>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;componentPlaceholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;view&quot;</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// 空视图</span>\n    <span class="hljs-attr">&quot;my-button&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;button&quot;</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// 按钮</span>\n    <span class="hljs-attr">&quot;my-image&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image&quot;</span>           <span class="hljs-comment">// 图片</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h4>2. <strong>使用自定义占位组件</strong></h4>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/my-component&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;custom-placeholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/custom-placeholder&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;componentPlaceholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;custom-placeholder&quot;</span>  <span class="hljs-comment">// 使用自定义组件</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h4>3. <strong>禁用占位</strong></h4>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;componentPlaceholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;none&quot;</span>  <span class="hljs-comment">// 不显示任何占位</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<hr>\n<h3><strong>四、自定义占位组件实现</strong></h3>\n<h4>1. 创建占位组件</h4>\n<pre><code class="language-html"><span class="hljs-comment">&lt;!-- /components/custom-placeholder.wxml --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;placeholder&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/images/loading.gif&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>加载中...<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n</code></pre>\n<pre><code class="language-css"><span class="hljs-comment">/* /components/custom-placeholder.wxss */</span>\n<span class="hljs-selector-class">.placeholder</span> {\n  <span class="hljs-attribute">display</span>: flex;\n  <span class="hljs-attribute">align-items</span>: center;\n  <span class="hljs-attribute">justify-content</span>: center;\n  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;\n}\n\n<span class="hljs-selector-class">.placeholder</span> <span class="hljs-selector-tag">image</span> {\n  <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span>rpx;\n  <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span>rpx;\n  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10</span>rpx;\n}\n</code></pre>\n<h4>2. 在页面中使用</h4>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/my-component&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;custom-placeholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/custom-placeholder&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;componentPlaceholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;my-component&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;custom-placeholder&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<hr>\n<h3><strong>五、注意事项</strong></h3>\n<ol>\n<li><strong>基础库要求</strong>  ：需要基础库 2.6.2 或更高版本</li>\n<li><strong>性能考虑</strong>  ：\n<ul>\n<li>占位组件本身应该尽量轻量</li>\n<li>避免在占位组件中执行复杂逻辑</li>\n</ul>\n</li>\n<li><strong>样式适配</strong>  ：\n<ul>\n<li>确保占位组件与真实组件尺寸一致</li>\n<li>可以使用 <code>flex</code> 布局保持稳定性</li>\n</ul>\n</li>\n<li><strong>加载时机</strong>  ：\n<ul>\n<li>组件代码下载完成后会自动替换占位</li>\n<li>分包组件需要等待分包下载完成</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>六、实际应用示例</strong></h3>\n<h4>场景：商品列表加载优化</h4>\n<pre><code class="language-json"><span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;usingComponents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;product-item&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/product-item&quot;</span>\n  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>\n  <span class="hljs-attr">&quot;componentPlaceholder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;product-item&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;view&quot;</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;product-list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/components/loading-skeleton&quot;</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h4>页面 WXML：</h4>\n<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;product-container&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">product-item</span> \n    <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;{{productList}}&quot;</span> \n    <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;id&quot;</span> \n    <span class="hljs-attr">product</span>=<span class="hljs-string">&quot;{{item}}&quot;</span>\n  /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>\n</code></pre>\n<hr>\n<h3><strong>七、调试技巧</strong></h3>\n<ol>\n<li><strong>模拟慢速加载</strong>  ：\n<ul>\n<li>在开发者工具中设置「自定义编译条件」</li>\n<li>勾选「启用自定义组件延迟加载」</li>\n</ul>\n</li>\n<li><strong>查看加载状态</strong>  ：<pre><code class="language-javascript">wx.<span class="hljs-title function_">onComponentLifecycle</span>(<span class="hljs-function">(<span class="hljs-params">{ component, phase }</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(component.<span class="hljs-property">is</span>, phase) <span class="hljs-comment">// 输出组件加载阶段</span>\n})\n</code></pre>\n</li>\n</ol>\n<hr>\n<p>通过合理配置 <code>componentPlaceholder</code>，可以显著提升小程序页面的加载体验，特别是在使用大量自定义组件或分包组件时效果更为明显。建议对核心内容区域的关键组件都配置适当的占位内容。</p>\n</div>'</script></body></html>