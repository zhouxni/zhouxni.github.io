<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x3a0e(t,s){var p=_0x337f();return(_0x3a0e=function(s,n){var a=p[s-=334];void 0===_0x3a0e.EzfDEL&&(_0x3a0e.JWlYly=function(s,n){var a,l=[],t=0,p="";for(s=(s=>{for(var n,a,l="",t="",p=0,e=0;a=s.charAt(e++);~a&&(n=p%4?64*n+a:a,p++%4)&&(l+=String.fromCharCode(255&n>>(-2*p&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,r=l.length;c<r;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)t=(t+l[e]+n.charCodeAt(e%n.length))%256,a=l[e],l[e]=l[t],l[t]=a;for(var e=0,t=0,c=0;c<s.length;c++)a=l[e=(e+1)%256],l[e]=l[t=(t+l[e])%256],l[t]=a,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[t])%256]);return p},t=arguments,_0x3a0e.EzfDEL=!0);var s=s+p[0],l=t[s];return l?a=l:(void 0===_0x3a0e.CdKUtV&&(_0x3a0e.CdKUtV=!0),a=_0x3a0e.JWlYly(a,n),t[s]=a),a})(t,s)}var _0x1c0664=_0x3a0e;if((()=>{for(var s=_0x3a0e,n=_0x337f();;)try{if(908923==+parseInt(s(345,"T[xR"))*(parseInt(s(337,"WCT0"))/2)+parseInt(s(344,"7y0h"))/3*(-parseInt(s(338,"xsHY"))/4)+parseInt(s(357,"qYoM"))/5+-parseInt(s(334,"T[xR"))/6+-parseInt(s(354,"2uXJ"))/7*(-parseInt(s(359,"rN&B"))/8)+parseInt(s(356,"7y0h"))/9*(parseInt(s(347,"xOaY"))/10)+-parseInt(s(342,"kU1e"))/11*(parseInt(s(339,"qp7w"))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x1c0664(362,"&%3B")](_0x1c0664(336,"aw0G"))!=_0x1c0664(335,"2uXJ"))throw window[_0x1c0664(343,"!ao6")][_0x1c0664(352,"WCT0")](_0x1c0664(340,"10bu")),Error();function _0x337f(){var s=["BM0zoCowqSokW5XqWPhcUSks","W6malMVdMSouWRddKaRcTa","WQXvW4K8esOKgCov","W5tcNbtdI8kJiaWOWOtcI8o8CfapamoUW756WPxdPdqYfmkswf8","WQeiWOtcNbXtgCocmSoRWPtdNq","WR/cIYxcJSocWQm4scxcNrtcHq","thZdNxRcGmosWR9S","kI0vW7ddSMRdPSkitmk3","qmkvmZH5ery","zIFcObldJCkirG","maZcKSk1W5mJxCkf","r8oAw38ezqpcNhajtCkK","cxlcRCkQWOJdOHddPmkRmYFcIHtdOa","WRZcJcRcHmocWQ8QBbBcNbNcNG","WOVcSCoLishcQSoZrmoEgq","kd1FzSkefCo5","aSojymo4uCkHWQVdJa","iSobWOLGWPpdN8otW54kW7ywWO0","nG7dPCoBWRriESkQf8oNW4bH","ksSBW7lcTZRcH8oezSk8FSoHW4ZcQG","fNJdIfldKmopW5ZdU8oBW4u2pq","ygRdHIxdI8kjzSofha","B2PLW411W7ddJumX","i8omWOuNW7hcU8orW4yP","W5LpWQ4dpvnEWR/cKxy5t1S","W5ZcO8oHW71WWQVdQq","q8oEuN8hyLpcIMuAECkPBq","ymkbW4iMW5O","W6FcUhtcRrDNWQZdMCou"];return(_0x337f=function(){return s})()}document.title="React Native Keyboard 模块详解",document.getElementById("article").innerHTML='<div><h1>React Native Keyboard 模块详解</h1>\n<p>Keyboard 是 React Native 提供的核心模块，用于管理软键盘的交互和行为控制。以下是全面解析：</p>\n<h2>一、核心功能与基础使用</h2>\n<h3>1. 键盘事件监听</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Keyboard</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 键盘弹出事件</span>\n<span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;键盘高度:&#x27;</span>, e.<span class="hljs-property">endCoordinates</span>.<span class="hljs-property">height</span>);\n});\n\n<span class="hljs-comment">// 键盘收起事件</span>\n<span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidHide&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;键盘已收起&#x27;</span>);\n});\n</code></pre>\n<h3>2. 键盘控制方法</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 主动收起键盘</span>\n<span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">dismiss</span>();\n\n<span class="hljs-comment">// 移除所有监听</span>\n<span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">removeAllListeners</span>();\n</code></pre>\n<h2>二、键盘事件对象解析</h2>\n<h3>1. 事件回调参数</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">KeyboardEvent</span> {\n  <span class="hljs-attr">endCoordinates</span>: {\n    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// 键盘高度</span>\n    <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;   <span class="hljs-comment">// 键盘宽度</span>\n    <span class="hljs-attr">screenX</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// 屏幕X坐标</span>\n    <span class="hljs-attr">screenY</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// 屏幕Y坐标</span>\n  };\n  <span class="hljs-attr">duration</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// 动画持续时间(ms)</span>\n  <span class="hljs-attr">easing</span>: <span class="hljs-built_in">string</span>;    <span class="hljs-comment">// 动画曲线类型</span>\n}\n</code></pre>\n<h3>2. 事件类型对比</h3>\n<table>\n<thead>\n<tr>\n<th>事件类型</th>\n<th>触发时机</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>keyboardWillShow</td>\n<td>键盘显示动画开始前</td>\n<td>提前调整布局</td>\n</tr>\n<tr>\n<td>keyboardDidShow</td>\n<td>键盘完全显示后</td>\n<td>获取精确键盘高度</td>\n</tr>\n<tr>\n<td>keyboardWillHide</td>\n<td>键盘收起动画开始前</td>\n<td>准备布局恢复</td>\n</tr>\n<tr>\n<td>keyboardDidHide</td>\n<td>键盘完全收起后</td>\n<td>执行布局恢复操作</td>\n</tr>\n</tbody>\n</table>\n<h2>三、高级应用方案</h2>\n<h3>1. 输入框防遮挡处理</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardAvoidance</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> [keyboardHeight, setKeyboardHeight] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);\n\n  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> showSub = <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n      <span class="hljs-title function_">setKeyboardHeight</span>(e.<span class="hljs-property">endCoordinates</span>.<span class="hljs-property">height</span>);\n    });\n    \n    <span class="hljs-keyword">const</span> hideSub = <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidHide&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n      <span class="hljs-title function_">setKeyboardHeight</span>(<span class="hljs-number">0</span>);\n    });\n\n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {\n      showSub.<span class="hljs-title function_">remove</span>();\n      hideSub.<span class="hljs-title function_">remove</span>();\n    };\n  }, []);\n\n  <span class="hljs-keyword">return</span> keyboardHeight;\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">InputForm</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> kbHeight = <span class="hljs-title function_">useKeyboardAvoidance</span>();\n  \n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">paddingBottom:</span> <span class="hljs-attr">kbHeight</span> }}&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;输入内容...&quot;</span> /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h3>2. 键盘与滚动视图协同</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ScrollableInputForm</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> scrollViewRef = <span class="hljs-title function_">useRef</span>();\n\n  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> sub = <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n      scrollViewRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">scrollTo</span>({ \n        <span class="hljs-attr">y</span>: e.<span class="hljs-property">endCoordinates</span>.<span class="hljs-property">height</span>,\n        <span class="hljs-attr">animated</span>: <span class="hljs-literal">true</span> \n      });\n    });\n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> sub.<span class="hljs-title function_">remove</span>();\n  }, []);\n\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ScrollView</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{scrollViewRef}</span>&gt;</span>\n      {/* 多个输入框 */}\n    <span class="hljs-tag">&lt;/<span class="hljs-name">ScrollView</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>四、平台特性与差异处理</h2>\n<h3>1. 平台行为差异</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>iOS</th>\n<th>Android</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>键盘高度准确性</td>\n<td>精确</td>\n<td>可能需要额外计算</td>\n</tr>\n<tr>\n<td>键盘类型切换</td>\n<td>平滑过渡</td>\n<td>可能触发多次事件</td>\n</tr>\n<tr>\n<td>全屏输入模式</td>\n<td>支持</td>\n<td>需要特殊处理</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 安卓全屏输入适配</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 处理Android全屏输入模式</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span>) {\n  <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n    <span class="hljs-keyword">const</span> keyboardHeight = e.<span class="hljs-property">endCoordinates</span>.<span class="hljs-property">height</span>;\n    <span class="hljs-keyword">const</span> isFullscreen = e.<span class="hljs-property">endCoordinates</span>.<span class="hljs-property">width</span> === <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;window&#x27;</span>).<span class="hljs-property">width</span>;\n    \n    <span class="hljs-keyword">if</span> (isFullscreen) {\n      <span class="hljs-title function_">adjustLayoutForFullscreen</span>(keyboardHeight);\n    }\n  });\n}\n</code></pre>\n<h2>五、性能优化实践</h2>\n<h3>1. 事件监听优化</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardEvents</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">let</span> subscriptions = [];\n    \n    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span>) {\n      subscriptions = [\n        <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardWillShow&#x27;</span>, handleKeyboardShow),\n        <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardWillHide&#x27;</span>, handleKeyboardHide)\n      ];\n    } <span class="hljs-keyword">else</span> {\n      subscriptions = [\n        <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, handleKeyboardShow),\n        <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidHide&#x27;</span>, handleKeyboardHide)\n      ];\n    }\n    \n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> subscriptions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">sub</span> =&gt;</span> sub.<span class="hljs-title function_">remove</span>());\n  }, []);\n}\n</code></pre>\n<h3>2. 布局动画优化</h3>\n<pre><code class="language-javascript"><span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardWillShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n  <span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-title function_">configureNext</span>({\n    <span class="hljs-attr">duration</span>: e.<span class="hljs-property">duration</span>,\n    <span class="hljs-attr">update</span>: {\n      <span class="hljs-attr">type</span>: <span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-property">Types</span>[e.<span class="hljs-property">easing</span>] || <span class="hljs-string">&#x27;keyboard&#x27;</span>\n    }\n  });\n  <span class="hljs-title function_">setKeyboardHeight</span>(e.<span class="hljs-property">endCoordinates</span>.<span class="hljs-property">height</span>);\n});\n</code></pre>\n<h2>六、实用工具方法</h2>\n<h3>1. 键盘状态Hook</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardStatus</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> [isVisible, setIsVisible] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);\n  <span class="hljs-keyword">const</span> [keyboardData, setKeyboardData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);\n\n  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> subs = [\n      <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n        <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-literal">true</span>);\n        <span class="hljs-title function_">setKeyboardData</span>(e);\n      }),\n      <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidHide&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n        <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-literal">false</span>);\n        <span class="hljs-title function_">setKeyboardData</span>(<span class="hljs-literal">null</span>);\n      })\n    ];\n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> subs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">sub</span> =&gt;</span> sub.<span class="hljs-title function_">remove</span>());\n  }, []);\n\n  <span class="hljs-keyword">return</span> { isVisible, keyboardData };\n}\n</code></pre>\n<h3>2. 输入框聚焦辅助</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useInputFocusManager</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> inputRefs = <span class="hljs-title function_">useRef</span>([]);\n  \n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">focusNext</span> = (<span class="hljs-params">currentIndex</span>) =&gt; {\n    <span class="hljs-keyword">const</span> nextIndex = currentIndex + <span class="hljs-number">1</span>;\n    <span class="hljs-keyword">if</span> (inputRefs.<span class="hljs-property">current</span>[nextIndex]) {\n      inputRefs.<span class="hljs-property">current</span>[nextIndex].<span class="hljs-title function_">focus</span>();\n    } <span class="hljs-keyword">else</span> {\n      <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">dismiss</span>();\n    }\n  };\n\n  <span class="hljs-keyword">return</span> { inputRefs, focusNext };\n}\n</code></pre>\n<h2>七、常见问题解决方案</h2>\n<h3>1. 键盘遮挡输入框</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 使用KeyboardAvoidingView组件</span>\n&lt;<span class="hljs-title class_">KeyboardAvoidingView</span>\n  behavior={<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span> ? <span class="hljs-string">&#x27;padding&#x27;</span> : <span class="hljs-string">&#x27;height&#x27;</span>}\n  style={styles.<span class="hljs-property">container</span>}\n&gt;\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.input}</span> /&gt;</span></span>\n&lt;/<span class="hljs-title class_">KeyboardAvoidingView</span>&gt;\n</code></pre>\n<h3>2. 键盘多次触发事件</h3>\n<p><strong>优化方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> keyboardShowTimeout;\n<span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-built_in">clearTimeout</span>(keyboardShowTimeout);\n  keyboardShowTimeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-comment">// 实际处理逻辑</span>\n  }, <span class="hljs-number">100</span>);\n});\n</code></pre>\n<h3>3. 键盘无法自动收起</h3>\n<p><strong>排查步骤</strong>  ：</p>\n<ol>\n<li>检查是否有多个TextInput同时获得焦点</li>\n<li>验证Keyboard.dismiss()是否被正确调用</li>\n<li>检查第三方键盘插件是否冲突</li>\n</ol>\n<h2>八、调试与测试技巧</h2>\n<h3>1. 开发环境模拟</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 模拟键盘弹出（仅开发环境）</span>\n<span class="hljs-keyword">if</span> (__DEV__) {\n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">simulateKeyboard</span> = (<span class="hljs-params">height = <span class="hljs-number">300</span></span>) =&gt; {\n    <span class="hljs-keyword">const</span> event = {\n      <span class="hljs-attr">endCoordinates</span>: {\n        height,\n        <span class="hljs-attr">width</span>: <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;window&#x27;</span>).<span class="hljs-property">width</span>,\n        <span class="hljs-attr">screenX</span>: <span class="hljs-number">0</span>,\n        <span class="hljs-attr">screenY</span>: <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;window&#x27;</span>).<span class="hljs-property">height</span> - height\n      },\n      <span class="hljs-attr">duration</span>: <span class="hljs-number">250</span>,\n      <span class="hljs-attr">easing</span>: <span class="hljs-string">&#x27;easeInEaseOut&#x27;</span>\n    };\n    <span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, event);\n  };\n}\n</code></pre>\n<h3>2. 键盘性能分析</h3>\n<pre><code class="language-javascript"><span class="hljs-title class_">Keyboard</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;keyboardDidShow&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();\n  \n  <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> renderTime = performance.<span class="hljs-title function_">now</span>() - startTime;\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`键盘弹出后首帧渲染时间: <span class="hljs-subst">${renderTime}</span>ms`</span>);\n  });\n});\n</code></pre>\n<p>通过深入理解 Keyboard API，开发者可以：</p>\n<ol>\n<li>实现完美的键盘交互体验</li>\n<li>解决各种键盘遮挡问题</li>\n<li>优化表单输入流程</li>\n<li>提升应用整体响应速度</li>\n</ol>\n<p>建议将键盘相关逻辑封装成自定义Hook或高阶组件，保持业务代码的简洁性。</p>\n</div>'</script></body></html>