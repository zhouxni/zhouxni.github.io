<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4754(){var s=["dSoIy0JdKCo6W7umW7VcJq","W7KbESoOtN3dJe0jWOjoBa","W5tcMY0JWR4TzbK3W7q","WO7cPYVcJ8k3W4hdTK8fnq","Eu8TWP4WW63cMa","WOScsIOxAmkYvSoTWOddJqFcUa","rWCRWRFcGmkxkW","FmovzCopWQa4WPHR","WPysFmkugSomemofoSk4W63cGW","lSkZnSoZjSkFhCkJWOxdSmkfkMnAW4pdTCoOW5BcM2VcM8o4WPv7fSoQ","zeFcP8oRWPtdJCo/lCkCW5VcNW","WRRdUmk0W7L6mSo2WRZcHCoABCkcW4q","jmkopSkAW6zHWOb3W4FdN8kBW48","uCo/WPpdO8k5r8kqwY7dIKLssa","a2JcH8oRWR0DW6ZcRSozkbK","y8kBd0igWPfC","kMbkpmk+W7zxW5/cUqLvW7O","cSkOtSkUWRzyoW","b8kKiCoMjSowECoPWOy","sCklmSkeoCkaWQWXs8kOtNS","rCk7wqXYW5KhW7ZdTHOOW50","sfWzvSoEWQ7cHCk1W5JdRGFcVJK","ESogW7vjAq","lYPoAw7cHmo/zCk8oa"];return(_0x4754=function(){return s})()}var _0x461dd9=_0x5d03;function _0x5d03(l,s){var p=_0x4754();return(_0x5d03=function(s,a){var n=p[s-=100];void 0===_0x5d03.ximepp&&(_0x5d03.UUoUch=function(s,a){var n,t=[],l=0,p="";for(s=(s=>{for(var a,n,t="",l="",p=0,e=0;n=s.charAt(e++);~n&&(a=p%4?64*a+n:n,p++%4)&&(t+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var r=0,c=t.length;r<c;r++)l+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(l)})(s),e=0;e<256;e++)t[e]=e;for(e=0;e<256;e++)l=(l+t[e]+a.charCodeAt(e%a.length))%256,n=t[e],t[e]=t[l],t[l]=n;for(var e=0,l=0,r=0;r<s.length;r++)n=t[e=(e+1)%256],t[e]=t[l=(l+t[e])%256],t[l]=n,p+=String.fromCharCode(s.charCodeAt(r)^t[(t[e]+t[l])%256]);return p},l=arguments,_0x5d03.ximepp=!0);var s=s+p[0],t=l[s];return t?n=t:(void 0===_0x5d03.vEwyhl&&(_0x5d03.vEwyhl=!0),n=_0x5d03.UUoUch(n,a),l[s]=n),n})(l,s)}if((()=>{for(var s=_0x5d03,a=_0x4754();;)try{if(365777==+parseInt(s(119,"[(@J"))+parseInt(s(117,"udfC"))/2*(parseInt(s(113,"2BRU"))/3)+parseInt(s(107,"bOLh"))/4*(-parseInt(s(110,"E%6O"))/5)+-parseInt(s(112,"ds@A"))/6+-parseInt(s(102,"t)(H"))/7+parseInt(s(123,"c%I3"))/8+parseInt(s(118,"TdGA"))/9)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x461dd9(100,"yvVX")](_0x461dd9(101,"8upU"))!=_0x461dd9(105,"O&fD"))throw window[_0x461dd9(114,"[(@J")][_0x461dd9(122,"k]8#")](_0x461dd9(116,"8upU")),Error();document.title="React Native Gesture Handler 详解",document.getElementById("article").innerHTML='<div><h1>React Native Gesture Handler 详解</h1>\n<p>React Native Gesture Handler 是一个用于处理复杂手势交互的库，它提供了比 React Native 内置手势系统更强大、更流畅的手势识别能力。以下是该库的全面解析：</p>\n<h2>一、核心概念与优势</h2>\n<h3>1. 主要特点</h3>\n<ul>\n<li><strong>原生驱动</strong>  ：手势识别在原生线程执行，避免JS线程的瓶颈</li>\n<li><strong>丰富的手势类型</strong>  ：支持点击、拖动、缩放、旋转等多种手势</li>\n<li><strong>手势竞争控制</strong>  ：精细控制多个手势的交互关系</li>\n<li><strong>流畅的动画集成</strong>  ：与Reanimated库完美配合</li>\n</ul>\n<h3>2. 与内置手势系统对比</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>React Native 内置手势</th>\n<th>Gesture Handler</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>执行线程</td>\n<td>JS线程</td>\n<td>原生线程</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>一般</td>\n<td>优秀</td>\n</tr>\n<tr>\n<td>手势类型</td>\n<td>基本</td>\n<td>丰富</td>\n</tr>\n<tr>\n<td>竞争控制</td>\n<td>有限</td>\n<td>精细</td>\n</tr>\n<tr>\n<td>跨平台一致性</td>\n<td>一般</td>\n<td>优秀</td>\n</tr>\n</tbody>\n</table>\n<h2>二、安装与配置</h2>\n<h3>1. 安装</h3>\n<pre><code class="language-sh">yarn add react-native-gesture-handler\n<span class="hljs-comment"># 或</span>\nnpm install react-native-gesture-handler\n</code></pre>\n<h3>2. 必要配置</h3>\n<h4>iOS (Pod安装)</h4>\n<pre><code class="language-sh"><span class="hljs-built_in">cd</span> ios &amp;&amp; pod install\n</code></pre>\n<h4>Android (MainActivity.java)</h4>\n<pre><code class="language-java"><span class="hljs-keyword">import</span> com.facebook.react.ReactActivityDelegate;\n<span class="hljs-keyword">import</span> com.facebook.react.ReactRootView;\n<span class="hljs-keyword">import</span> com.swmansion.gesturehandler.react.RNGestureHandlerEnabledRootView;\n\n<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ReactActivity</span> {\n  <span class="hljs-meta">@Override</span>\n  <span class="hljs-keyword">protected</span> ReactActivityDelegate <span class="hljs-title function_">createReactActivityDelegate</span><span class="hljs-params">()</span> {\n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactActivityDelegate</span>(<span class="hljs-built_in">this</span>, getMainComponentName()) {\n      <span class="hljs-meta">@Override</span>\n      <span class="hljs-keyword">protected</span> ReactRootView <span class="hljs-title function_">createRootView</span><span class="hljs-params">()</span> {\n        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RNGestureHandlerEnabledRootView</span>(MainActivity.<span class="hljs-built_in">this</span>);\n      }\n    };\n  }\n}\n</code></pre>\n<h2>三、基础手势组件</h2>\n<h3>1. 常用手势处理器</h3>\n<table>\n<thead>\n<tr>\n<th>组件</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>TapGestureHandler</code></td>\n<td>点击手势</td>\n</tr>\n<tr>\n<td><code>PanGestureHandler</code></td>\n<td>拖动手势</td>\n</tr>\n<tr>\n<td><code>PinchGestureHandler</code></td>\n<td>缩放手势</td>\n</tr>\n<tr>\n<td><code>RotationGestureHandler</code></td>\n<td>旋转手势</td>\n</tr>\n<tr>\n<td><code>FlingGestureHandler</code></td>\n<td>快速滑动手势</td>\n</tr>\n<tr>\n<td><code>LongPressGestureHandler</code></td>\n<td>长按手势</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 基本使用示例</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TapGestureHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-gesture-handler&#x27;</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">TapExample</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> doubleTapRef = <span class="hljs-title function_">useRef</span>();\n  \n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSingleTap</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;单次点击&#x27;</span>);\n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onDoubleTap</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;双击&#x27;</span>);\n  \n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TapGestureHandler</span>\n      <span class="hljs-attr">onHandlerStateChange</span>=<span class="hljs-string">{onSingleTap}</span>\n      <span class="hljs-attr">waitFor</span>=<span class="hljs-string">{doubleTapRef}</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">TapGestureHandler</span>\n        <span class="hljs-attr">ref</span>=<span class="hljs-string">{doubleTapRef}</span>\n        <span class="hljs-attr">numberOfTaps</span>=<span class="hljs-string">{2}</span>\n        <span class="hljs-attr">onHandlerStateChange</span>=<span class="hljs-string">{onDoubleTap}</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.box}</span> /&gt;</span>\n      <span class="hljs-tag">&lt;/<span class="hljs-name">TapGestureHandler</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">TapGestureHandler</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>四、手势状态管理</h2>\n<h3>1. 手势状态常量</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">State</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-gesture-handler&#x27;</span>;\n\n<span class="hljs-comment">// 手势状态:</span>\n<span class="hljs-comment">// UNDETERMINED - 初始状态</span>\n<span class="hljs-comment">// FAILED - 手势识别失败</span>\n<span class="hljs-comment">// BEGAN - 手势开始</span>\n<span class="hljs-comment">// CANCELLED - 手势被系统取消</span>\n<span class="hljs-comment">// ACTIVE - 手势进行中</span>\n<span class="hljs-comment">// END - 手势正常结束</span>\n</code></pre>\n<h3>2. 状态处理示例</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">PanExample</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> translateX = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>)).<span class="hljs-property">current</span>;\n  \n  <span class="hljs-keyword">const</span> onGestureEvent = <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">event</span>(\n    [{ <span class="hljs-attr">nativeEvent</span>: { <span class="hljs-attr">translationX</span>: translateX } }],\n    { <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span> }\n  );\n  \n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onHandlerStateChange</span> = (<span class="hljs-params">event</span>) =&gt; {\n    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">state</span> === <span class="hljs-title class_">State</span>.<span class="hljs-property">END</span>) {\n      <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">spring</span>(translateX, {\n        <span class="hljs-attr">toValue</span>: <span class="hljs-number">0</span>,\n        <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n      }).<span class="hljs-title function_">start</span>();\n    }\n  };\n  \n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PanGestureHandler</span>\n      <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{onGestureEvent}</span>\n      <span class="hljs-attr">onHandlerStateChange</span>=<span class="hljs-string">{onHandlerStateChange}</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[</span>\n        <span class="hljs-attr">styles.box</span>, \n        { <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">translateX</span> }] }\n      ]} /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">PanGestureHandler</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>五、手势组合与控制</h2>\n<h3>1. 手势关系控制</h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>simultaneousHandlers</code></td>\n<td>允许同时识别的手势</td>\n</tr>\n<tr>\n<td><code>waitFor</code></td>\n<td>等待其他手势先识别</td>\n</tr>\n<tr>\n<td><code>fail</code></td>\n<td>使其他手势识别失败</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 复杂手势示例</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CombinedGestures</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> scale = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">1</span>)).<span class="hljs-property">current</span>;\n  <span class="hljs-keyword">const</span> rotate = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>)).<span class="hljs-property">current</span>;\n  \n  <span class="hljs-keyword">const</span> pinchRef = <span class="hljs-title function_">useRef</span>();\n  <span class="hljs-keyword">const</span> rotationRef = <span class="hljs-title function_">useRef</span>();\n  \n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PinchGestureHandler</span>\n      <span class="hljs-attr">ref</span>=<span class="hljs-string">{pinchRef}</span>\n      <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{Animated.event(</span>\n        [{ <span class="hljs-attr">nativeEvent:</span> { <span class="hljs-attr">scale</span> } }],\n        { <span class="hljs-attr">useNativeDriver:</span> <span class="hljs-attr">true</span> }\n      )}&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">RotationGestureHandler</span>\n        <span class="hljs-attr">ref</span>=<span class="hljs-string">{rotationRef}</span>\n        <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{Animated.event(</span>\n          [{ <span class="hljs-attr">nativeEvent:</span> { <span class="hljs-attr">rotation:</span> <span class="hljs-attr">rotate</span> } }],\n          { <span class="hljs-attr">useNativeDriver:</span> <span class="hljs-attr">true</span> }\n        )}&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[</span>\n          <span class="hljs-attr">styles.box</span>,\n          {\n            <span class="hljs-attr">transform:</span> [\n              { <span class="hljs-attr">scale</span> },\n              { <span class="hljs-attr">rotate:</span> <span class="hljs-attr">rotate.interpolate</span>({\n                  <span class="hljs-attr">inputRange:</span> [<span class="hljs-attr">-Math.PI</span>, <span class="hljs-attr">Math.PI</span>],\n                  <span class="hljs-attr">outputRange:</span> [&#x27;<span class="hljs-attr">-180deg</span>&#x27;, &#x27;<span class="hljs-attr">180deg</span>&#x27;]\n                })\n              }\n            ]\n          }\n        ]} /&gt;</span>\n      <span class="hljs-tag">&lt;/<span class="hljs-name">RotationGestureHandler</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">PinchGestureHandler</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>六、与Reanimated集成</h2>\n<h3>1. 高性能手势动画</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Animated</span>, { \n  useSharedValue,\n  useAnimatedStyle,\n  useAnimatedGestureHandler,\n  withSpring\n} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-reanimated&#x27;</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">ReanimatedExample</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> translateX = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0</span>);\n  <span class="hljs-keyword">const</span> translateY = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0</span>);\n  \n  <span class="hljs-keyword">const</span> gestureHandler = <span class="hljs-title function_">useAnimatedGestureHandler</span>({\n    <span class="hljs-attr">onStart</span>: <span class="hljs-function">(<span class="hljs-params">_, ctx</span>) =&gt;</span> {\n      ctx.<span class="hljs-property">startX</span> = translateX.<span class="hljs-property">value</span>;\n      ctx.<span class="hljs-property">startY</span> = translateY.<span class="hljs-property">value</span>;\n    },\n    <span class="hljs-attr">onActive</span>: <span class="hljs-function">(<span class="hljs-params">event, ctx</span>) =&gt;</span> {\n      translateX.<span class="hljs-property">value</span> = ctx.<span class="hljs-property">startX</span> + event.<span class="hljs-property">translationX</span>;\n      translateY.<span class="hljs-property">value</span> = ctx.<span class="hljs-property">startY</span> + event.<span class="hljs-property">translationY</span>;\n    },\n    <span class="hljs-attr">onEnd</span>: <span class="hljs-function">() =&gt;</span> {\n      translateX.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n      translateY.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n    }\n  });\n  \n  <span class="hljs-keyword">const</span> animatedStyle = <span class="hljs-title function_">useAnimatedStyle</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">transform</span>: [\n        { <span class="hljs-attr">translateX</span>: translateX.<span class="hljs-property">value</span> },\n        { <span class="hljs-attr">translateY</span>: translateY.<span class="hljs-property">value</span> }\n      ]\n    };\n  });\n  \n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PanGestureHandler</span> <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{gestureHandler}</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[styles.box,</span> <span class="hljs-attr">animatedStyle</span>]} /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">PanGestureHandler</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>七、常见问题解决</h2>\n<h3>1. 手势不响应</h3>\n<p><strong>解决方案</strong>  ：</p>\n<ol>\n<li>确保组件包裹在<code>GestureHandlerRootView</code>中</li>\n<li>检查是否有其他手势处理器拦截</li>\n<li>验证手势参数配置（如<code>minDist</code>等）</li>\n</ol>\n<h3>2. 手势冲突</h3>\n<p><strong>调试技巧</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 使用react-native-gesture-handler的调试工具</span>\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">GestureHandlerRootView</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-gesture-handler&#x27;</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">GestureHandlerRootView</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> }}&gt;</span>\n      {/* 应用内容 */}\n    <span class="hljs-tag">&lt;/<span class="hljs-name">GestureHandlerRootView</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h3>3. 性能优化</h3>\n<p><strong>建议方案</strong>  ：</p>\n<ol>\n<li>尽量使用<code>useNativeDriver: true</code></li>\n<li>复杂手势使用Reanimated库</li>\n<li>避免在JS线程处理手势事件</li>\n</ol>\n<h2>八、最佳实践</h2>\n<ol>\n<li><strong>手势组合</strong>  ：合理使用<code>waitFor</code>、<code>simultaneousHandlers</code>等控制手势关系</li>\n<li><strong>性能优化</strong>  ：将动画逻辑移至UI线程</li>\n<li><strong>用户体验</strong>  ：为手势添加视觉反馈</li>\n<li><strong>平台适配</strong>  ：考虑不同平台的交互习惯</li>\n</ol>\n<h2>完整示例：卡片滑动交互</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SwipeableCard</span>(<span class="hljs-params">{ onSwipeLeft, onSwipeRight }</span>) {\n  <span class="hljs-keyword">const</span> translateX = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0</span>);\n  <span class="hljs-keyword">const</span> rotate = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0</span>);\n  \n  <span class="hljs-keyword">const</span> gestureHandler = <span class="hljs-title function_">useAnimatedGestureHandler</span>({\n    <span class="hljs-attr">onStart</span>: <span class="hljs-function">(<span class="hljs-params">_, ctx</span>) =&gt;</span> {\n      ctx.<span class="hljs-property">startX</span> = translateX.<span class="hljs-property">value</span>;\n    },\n    <span class="hljs-attr">onActive</span>: <span class="hljs-function">(<span class="hljs-params">event, ctx</span>) =&gt;</span> {\n      translateX.<span class="hljs-property">value</span> = ctx.<span class="hljs-property">startX</span> + event.<span class="hljs-property">translationX</span>;\n      rotate.<span class="hljs-property">value</span> = (translateX.<span class="hljs-property">value</span> / <span class="hljs-number">200</span>) * <span class="hljs-number">10</span>;\n    },\n    <span class="hljs-attr">onEnd</span>: <span class="hljs-function">() =&gt;</span> {\n      <span class="hljs-keyword">if</span> (translateX.<span class="hljs-property">value</span> &gt; <span class="hljs-number">150</span>) {\n        <span class="hljs-title function_">onSwipeRight</span>();\n      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (translateX.<span class="hljs-property">value</span> &lt; -<span class="hljs-number">150</span>) {\n        <span class="hljs-title function_">onSwipeLeft</span>();\n      } <span class="hljs-keyword">else</span> {\n        translateX.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n        rotate.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n      }\n    }\n  });\n  \n  <span class="hljs-keyword">const</span> animatedStyle = <span class="hljs-title function_">useAnimatedStyle</span>(<span class="hljs-function">() =&gt;</span> ({\n    <span class="hljs-attr">transform</span>: [\n      { <span class="hljs-attr">translateX</span>: translateX.<span class="hljs-property">value</span> },\n      { <span class="hljs-attr">rotate</span>: <span class="hljs-string">`<span class="hljs-subst">${rotate.value}</span>deg`</span> }\n    ],\n    <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(translateX.<span class="hljs-property">value</span>) / <span class="hljs-number">300</span>\n  }));\n  \n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PanGestureHandler</span> <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{gestureHandler}</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[styles.card,</span> <span class="hljs-attr">animatedStyle</span>]} /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">PanGestureHandler</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<p>通过掌握 React Native Gesture Handler，开发者可以构建：</p>\n<ul>\n<li>流畅自然的拖拽交互</li>\n<li>复杂的手势组合</li>\n<li>高性能的手势动画</li>\n<li>媲美原生应用的交互体验</li>\n</ul>\n</div>'</script></body></html>