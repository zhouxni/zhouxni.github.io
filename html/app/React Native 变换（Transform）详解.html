<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x445d(){var s=["iWxdIfVdSCk7tCk1q8k8","Eh/dKCoWWO3dPZe8AMGyWRBdLW","WR14W6BdISkyjL4DddqxW5JdT8oYW5NcVr5uWOZcQmodwhHNW5bP","DSkpySouW4hdTuJcPXfXWPPRWOW","ueZcICkqwYOXFvBdJCkHW5O","iWldGLVcKSoSnCkcsCk4p1lcPG","jGhcLXVdK8kny8kn","WQDRDhuhWOhdLZlcJey","tSkeWQG5WOtdMCkrt13cK8o7l8oP","W6eAW7qKW4VdTbG","WO7dR8oAaSoPWQe5lq","jCkUW5NcGSozmcpcTSk2wSkEW6XQ","w2KVWPNcG39VxNj7WORdPa4","WQnREhC+WRpdKdlcN2i","WQtdGddcUCkpnNxcS8oUW7u","v0VdNSote0SEyG","D8otjSkLWPBcHJe","W6qVW79Icg3cRXfbt8kjW4m","CxJdNSo1WOtdOZqFuxqZWO3dTW","WPSlcCkfeSoxW6K","WP3cTvnWWOpdVmoVW5D4","qSkczYXyn0T3W5tcO8knWOG1","EYFcNSkaW53cLK4","W6yQW7LHa2VdKG5YvmkNW5fn","W5/cHtrDlW"];return(_0x445d=function(){return s})()}function _0x4c8a(t,s){var p=_0x445d();return(_0x4c8a=function(s,a){var n=p[s-=374];void 0===_0x4c8a.RKMRNS&&(_0x4c8a.ljnLOP=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,c=0;n=s.charAt(c++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var r=0,e=l.length;r<e;r++)t+="%"+("00"+l.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(t)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)t=(t+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[t],l[t]=n;for(var c=0,t=0,r=0;r<s.length;r++)n=l[c=(c+1)%256],l[c]=l[t=(t+l[c])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(r)^l[(l[c]+l[t])%256]);return p},t=arguments,_0x4c8a.RKMRNS=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x4c8a.Mlgiby&&(_0x4c8a.Mlgiby=!0),n=_0x4c8a.ljnLOP(n,a),t[s]=n),n})(t,s)}var _0x3809df=_0x4c8a;if((()=>{for(var s=_0x4c8a,a=_0x445d();;)try{if(860793==-parseInt(s(397,"33r@"))*(parseInt(s(377,"3K5N"))/2)+parseInt(s(384,"AgAL"))/3+parseInt(s(390,"@8x0"))/4*(parseInt(s(392,"44G4"))/5)+parseInt(s(398,"h5&z"))/6+parseInt(s(389,"3K5N"))/7+-parseInt(s(386,"44G4"))/8*(parseInt(s(393,"2nC1"))/9)+parseInt(s(379,"26f6"))/10)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x3809df(395,"$6vq")](_0x3809df(381,"4Caj"))!=_0x3809df(385,"mDhB"))throw window[_0x3809df(396,"LWtT")][_0x3809df(380,"A&Dp")](_0x3809df(388,"4R1I")),Error();document.title="React Native 变换（Transform）详解",document.getElementById("article").innerHTML='<div><h1>React Native 变换（Transform）详解</h1>\n<p>Transform 是 React Native 中用于实现视图变形的强大样式属性，支持 2D 和 3D 变换效果。以下是全面解析：</p>\n<h2>一、核心变换属性</h2>\n<h3>1. 基础变换类型</h3>\n<pre><code class="language-javascript"><span class="hljs-attr">transform</span>: [\n  { <span class="hljs-attr">translateX</span>: <span class="hljs-number">10</span> },    <span class="hljs-comment">// X轴平移</span>\n  { <span class="hljs-attr">translateY</span>: -<span class="hljs-number">20</span> },   <span class="hljs-comment">// Y轴平移</span>\n  { <span class="hljs-attr">scale</span>: <span class="hljs-number">1.5</span> },        <span class="hljs-comment">// 等比例缩放</span>\n  { <span class="hljs-attr">scaleX</span>: <span class="hljs-number">2</span> },        <span class="hljs-comment">// X轴缩放</span>\n  { <span class="hljs-attr">scaleY</span>: <span class="hljs-number">0.5</span> },      <span class="hljs-comment">// Y轴缩放</span>\n  { <span class="hljs-attr">rotate</span>: <span class="hljs-string">&#x27;45deg&#x27;</span> },   <span class="hljs-comment">// 2D旋转</span>\n  { <span class="hljs-attr">rotateX</span>: <span class="hljs-string">&#x27;30deg&#x27;</span> },  <span class="hljs-comment">// X轴旋转(3D)</span>\n  { <span class="hljs-attr">rotateY</span>: <span class="hljs-string">&#x27;60deg&#x27;</span> },  <span class="hljs-comment">// Y轴旋转(3D)</span>\n  { <span class="hljs-attr">skewX</span>: <span class="hljs-string">&#x27;30deg&#x27;</span> },    <span class="hljs-comment">// X轴倾斜</span>\n  { <span class="hljs-attr">skewY</span>: <span class="hljs-string">&#x27;10deg&#x27;</span> },    <span class="hljs-comment">// Y轴倾斜</span>\n  { <span class="hljs-attr">perspective</span>: <span class="hljs-number">1000</span> } <span class="hljs-comment">// 3D透视距离</span>\n]\n</code></pre>\n<h3>2. 变换顺序的重要性</h3>\n<p>变换矩阵按声明顺序应用：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 先平移后旋转（效果不同）</span>\n<span class="hljs-attr">transform</span>: [{ <span class="hljs-attr">translateX</span>: <span class="hljs-number">100</span> }, { <span class="hljs-attr">rotate</span>: <span class="hljs-string">&#x27;45deg&#x27;</span> }]\n\n<span class="hljs-comment">// 先旋转后平移（效果不同）</span>\n<span class="hljs-attr">transform</span>: [{ <span class="hljs-attr">rotate</span>: <span class="hljs-string">&#x27;45deg&#x27;</span> }, { <span class="hljs-attr">translateX</span>: <span class="hljs-number">100</span> }]\n</code></pre>\n<h2>二、2D变换实战</h2>\n<h3>1. 平移变换</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 相对定位替代方案</span>\n&lt;<span class="hljs-title class_">View</span> style={{\n  <span class="hljs-attr">transform</span>: [\n    { <span class="hljs-attr">translateX</span>: left }, \n    { <span class="hljs-attr">translateY</span>: top }\n  ]\n}} /&gt;\n</code></pre>\n<h3>2. 缩放动画</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> scaleAnim = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">1</span>)).<span class="hljs-property">current</span>;\n\n<span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">spring</span>(scaleAnim, {\n  <span class="hljs-attr">toValue</span>: <span class="hljs-number">1.2</span>,\n  <span class="hljs-attr">friction</span>: <span class="hljs-number">2</span>,\n  <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n}).<span class="hljs-title function_">start</span>();\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n  <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">scale:</span> <span class="hljs-attr">scaleAnim</span> }]\n}} /&gt;</span></span>\n</code></pre>\n<h2>三、3D变换进阶</h2>\n<h3>1. 3D立方体实现</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Cube</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">perspective:</span> <span class="hljs-attr">1000</span> }}&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n        <span class="hljs-attr">transform:</span> [\n          { <span class="hljs-attr">rotateY:</span> &#x27;<span class="hljs-attr">45deg</span>&#x27; },\n          { <span class="hljs-attr">rotateX:</span> &#x27;<span class="hljs-attr">30deg</span>&#x27; }\n        ]\n      }}&gt;</span>\n        {/* 立方体各面 */}\n      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h3>2. 透视投影控制</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 透视距离影响3D效果强度</span>\n<span class="hljs-keyword">const</span> perspectiveStyles = <span class="hljs-title class_">StyleSheet</span>.<span class="hljs-title function_">create</span>({\n  <span class="hljs-attr">weak</span>: { <span class="hljs-attr">perspective</span>: <span class="hljs-number">2000</span> },   <span class="hljs-comment">// 效果较弱</span>\n  <span class="hljs-attr">normal</span>: { <span class="hljs-attr">perspective</span>: <span class="hljs-number">1000</span> }, <span class="hljs-comment">// 标准效果</span>\n  <span class="hljs-attr">strong</span>: { <span class="hljs-attr">perspective</span>: <span class="hljs-number">500</span> }   <span class="hljs-comment">// 强烈变形</span>\n});\n</code></pre>\n<h2>四、性能优化技巧</h2>\n<h3>1. 原生驱动优化</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 启用原生驱动（必须使用Animated）</span>\n<span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">anim</span>, {\n  <span class="hljs-attr">toValue</span>: <span class="hljs-number">1</span>,\n  <span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>,\n  <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 关键性能优化</span>\n}).<span class="hljs-title function_">start</span>();\n</code></pre>\n<h3>2. 变换组合优化</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 不推荐 - 多次重绘</span>\n<span class="hljs-attr">transform</span>: [{ <span class="hljs-attr">translateX</span>: x }]\n<span class="hljs-comment">// 随后更新为</span>\n<span class="hljs-attr">transform</span>: [{ <span class="hljs-attr">translateX</span>: x }, { <span class="hljs-attr">scale</span>: <span class="hljs-number">1.1</span> }]\n\n<span class="hljs-comment">// 推荐 - 一次性设置所有变换</span>\n<span class="hljs-attr">transform</span>: [\n  { <span class="hljs-attr">translateX</span>: x },\n  { <span class="hljs-attr">scale</span>: shouldScale ? <span class="hljs-number">1.1</span> : <span class="hljs-number">1</span> }\n]\n</code></pre>\n<h2>五、平台差异处理</h2>\n<h3>1. 平台支持对比</h3>\n<table>\n<thead>\n<tr>\n<th>变换类型</th>\n<th>iOS支持</th>\n<th>Android支持</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>translate</td>\n<td>✓</td>\n<td>✓</td>\n<td>完美支持</td>\n</tr>\n<tr>\n<td>rotate</td>\n<td>✓</td>\n<td>✓</td>\n<td>2D旋转一致</td>\n</tr>\n<tr>\n<td>rotateX/Y</td>\n<td>✓</td>\n<td>✓</td>\n<td>需要perspective</td>\n</tr>\n<tr>\n<td>skew</td>\n<td>✓</td>\n<td>✓</td>\n<td>Android 5+</td>\n</tr>\n<tr>\n<td>perspective</td>\n<td>✓</td>\n<td>部分</td>\n<td>效果可能不同</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 跨平台适配方案</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> transformStyles = <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n  <span class="hljs-attr">ios</span>: {\n    <span class="hljs-attr">transform</span>: [\n      { <span class="hljs-attr">rotateY</span>: <span class="hljs-string">&#x27;30deg&#x27;</span> },\n      { <span class="hljs-attr">perspective</span>: <span class="hljs-number">1000</span> }\n    ]\n  },\n  <span class="hljs-attr">android</span>: {\n    <span class="hljs-attr">transform</span>: [\n      { <span class="hljs-attr">rotateY</span>: <span class="hljs-string">&#x27;25deg&#x27;</span> } <span class="hljs-comment">// Android透视效果更强烈</span>\n    ]\n  }\n});\n</code></pre>\n<h2>六、高级应用场景</h2>\n<h3>1. 手势驱动的变换</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> pan = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">ValueXY</span>()).<span class="hljs-property">current</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PanGestureHandler</span>\n  <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{Animated.event(</span>\n    [{ <span class="hljs-attr">nativeEvent:</span> { <span class="hljs-attr">translationX:</span> <span class="hljs-attr">pan.x</span>, <span class="hljs-attr">translationY:</span> <span class="hljs-attr">pan.y</span> } }],\n    { <span class="hljs-attr">useNativeDriver:</span> <span class="hljs-attr">true</span> }\n  )}&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n    <span class="hljs-attr">transform:</span> [\n      { <span class="hljs-attr">translateX:</span> <span class="hljs-attr">pan.x</span> },\n      { <span class="hljs-attr">translateY:</span> <span class="hljs-attr">pan.y</span> },\n      { <span class="hljs-attr">rotate:</span> <span class="hljs-attr">pan.x.interpolate</span>({\n          <span class="hljs-attr">inputRange:</span> [<span class="hljs-attr">-200</span>, <span class="hljs-attr">0</span>, <span class="hljs-attr">200</span>],\n          <span class="hljs-attr">outputRange:</span> [&#x27;<span class="hljs-attr">-30deg</span>&#x27;, &#x27;<span class="hljs-attr">0deg</span>&#x27;, &#x27;<span class="hljs-attr">30deg</span>&#x27;]\n        }) \n      }\n    ]\n  }} /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">PanGestureHandler</span>&gt;</span></span>\n</code></pre>\n<h3>2. 视差滚动效果</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> scrollY = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>)).<span class="hljs-property">current</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.ScrollView</span>\n  <span class="hljs-attr">scrollEventThrottle</span>=<span class="hljs-string">{16}</span>\n  <span class="hljs-attr">onScroll</span>=<span class="hljs-string">{Animated.event(</span>\n    [{ <span class="hljs-attr">nativeEvent:</span> { <span class="hljs-attr">contentOffset:</span> { <span class="hljs-attr">y:</span> <span class="hljs-attr">scrollY</span> } } }],\n    { <span class="hljs-attr">useNativeDriver:</span> <span class="hljs-attr">true</span> }\n  )}&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Animated.Image</span> \n    <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n      <span class="hljs-attr">transform:</span> [{\n        <span class="hljs-attr">translateY:</span> <span class="hljs-attr">scrollY.interpolate</span>({\n          <span class="hljs-attr">inputRange:</span> [<span class="hljs-attr">0</span>, <span class="hljs-attr">300</span>],\n          <span class="hljs-attr">outputRange:</span> [<span class="hljs-attr">0</span>, <span class="hljs-attr">100</span>],\n          <span class="hljs-attr">extrapolate:</span> &#x27;<span class="hljs-attr">clamp</span>&#x27;\n        })\n      }]\n    }}\n  /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.ScrollView</span>&gt;</span></span>\n</code></pre>\n<h2>七、常见问题解决方案</h2>\n<h3>1. 变换失效问题</h3>\n<p><strong>排查步骤</strong>  ：</p>\n<ol>\n<li>检查父容器尺寸是否明确</li>\n<li>验证transform数组语法正确</li>\n<li>确认没有冲突的定位样式</li>\n</ol>\n<h3>2. Android阴影异常</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 变换容器添加背景色</span>\n<span class="hljs-attr">container</span>: {\n  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;white&#x27;</span>,\n  <span class="hljs-attr">transform</span>: [{ <span class="hljs-attr">rotate</span>: <span class="hljs-string">&#x27;5deg&#x27;</span> }],\n  <span class="hljs-comment">// Android阴影需要overflow: &#x27;visible&#x27;</span>\n  <span class="hljs-attr">overflow</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span> ? <span class="hljs-string">&#x27;visible&#x27;</span> : <span class="hljs-string">&#x27;hidden&#x27;</span>\n}\n</code></pre>\n<h3>3. 性能问题优化</h3>\n<p><strong>改进方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 避免动态生成变换数组</span>\n<span class="hljs-keyword">const</span> transform = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> [\n  { <span class="hljs-attr">translateX</span>: x },\n  { <span class="hljs-attr">translateY</span>: y }\n], [x, y]);\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">transform</span> }} /&gt;</span></span>\n</code></pre>\n<h2>八、调试与可视化工具</h2>\n<h3>1. 变换调试样式</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 开发环境添加调试边框</span>\n<span class="hljs-keyword">const</span> debugTransform = __DEV__ ? {\n  <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>,\n  <span class="hljs-attr">borderColor</span>: <span class="hljs-string">&#x27;red&#x27;</span>\n} : <span class="hljs-literal">null</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[styles.transformed,</span> <span class="hljs-attr">debugTransform</span>]} /&gt;</span></span>\n</code></pre>\n<h3>2. 3D轴辅助线</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DebugAxes</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.xAxis}</span> /&gt;</span> {/* X轴 */}\n      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.yAxis}</span> /&gt;</span> {/* Y轴 */}\n      <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.zAxis}</span> /&gt;</span> {/* Z轴 */}\n    <span class="hljs-tag">&lt;/&gt;</span></span>\n  );\n}\n</code></pre>\n<p>通过深入掌握 Transform，开发者可以：</p>\n<ol>\n<li>创建丰富的视觉交互动画</li>\n<li>实现高性能的布局变换</li>\n<li>构建沉浸式3D体验</li>\n<li>优化界面渲染性能</li>\n</ol>\n<p>建议将复杂变换封装为可复用组件，并配合React Native Reanimated库实现更高级的动画效果。</p>\n</div>'</script></body></html>