<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4441(e,s){var o=_0x1b78();return(_0x4441=function(s,n){var r=o[s-=222];void 0===_0x4441.TlsrsK&&(_0x4441.jgOiZx=function(s,n){var r,a=[],e=0,o="";for(s=(s=>{for(var n,r,a="",e="",o=0,t=0;r=s.charAt(t++);~r&&(n=o%4?64*n+r:r,o++%4)&&(a+=String.fromCharCode(255&n>>(-2*o&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var l=0,c=a.length;l<c;l++)e+="%"+("00"+a.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(e)})(s),t=0;t<256;t++)a[t]=t;for(t=0;t<256;t++)e=(e+a[t]+n.charCodeAt(t%n.length))%256,r=a[t],a[t]=a[e],a[e]=r;for(var t=0,e=0,l=0;l<s.length;l++)r=a[t=(t+1)%256],a[t]=a[e=(e+a[t])%256],a[e]=r,o+=String.fromCharCode(s.charCodeAt(l)^a[(a[t]+a[e])%256]);return o},e=arguments,_0x4441.TlsrsK=!0);var s=s+o[0],a=e[s];return a?r=a:(void 0===_0x4441.OwPHDO&&(_0x4441.OwPHDO=!0),r=_0x4441.jgOiZx(r,n),e[s]=r),r})(e,s)}function _0x1b78(){var s=["WQymWOn5WP1jhmoFW4G7W7quWQG","W4KMhgHWWOG2WRe0W6a","W5NcMCoZW6pcTa3dJCo9W5FcNmkuiCo6","WPzCmL7cOgKKiq","dZyhW7eZamoaWQ/cVG","W7ddJ8oxWRxdOmkcW64","hLnMWOHRDgazbmkoWRZcSCoY","W70+tSo/pdVcMepdRmkvWRZcSSka","dCoPWOrdWO9MWR9sp3C5WRldIq","j3xdOHRdMCoRWQb/W7CvWOldHCk1eKVdNCo7dSoFCqvbWOJcRwzS","W4mJgCoEavJdVmko","EJFcRLRcNSoPWRO2W6WQWQldKSka","ef4gW6uSetSj","jmkHW47cNqbXwh/cTKXXidu","r2yHsSo7zxK","tgW2ySo7AxT0","WPaSW7/cUmo8dfpcJmkSWP0NpG","yt04FCkwWPxcJCkTWPzO","FtpdNWBdUCkFW4mP","WRODA20Z","qYZdMeVdSSoRbmkqfCkCW43dK3m","p8kKWPGWW4dcTmkUW58","W7tdJ1pdTrf8aqFcQmk7WO1ZWO0","W74/sCo/ntZdIwxdVSkCWOhcKa","W7ZdHdxcLLCAwYm","W61igmkBWQyxW5HDW4rlW6eSW5q"];return(_0x1b78=function(){return s})()}var _0x130565=_0x4441;if((()=>{for(var s=_0x4441,n=_0x1b78();;)try{if(814730==-parseInt(s(244,"!6jq"))*(parseInt(s(230,"9FRZ"))/2)+parseInt(s(229,"A379"))/3+-parseInt(s(240,"Muj$"))/4+parseInt(s(238,"x[%h"))/5+-parseInt(s(233,"i^2v"))/6+-parseInt(s(223,"!2)$"))/7*(parseInt(s(222,"SVfg"))/8)+parseInt(s(239,"i^2v"))/9*(parseInt(s(243,"pWra"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x130565(241,"SFQW")](_0x130565(231,"sf8S"))!=_0x130565(246,"e3v9"))throw window[_0x130565(242,"SFQW")][_0x130565(232,"R)Fx")](_0x130565(236,"x[%h")),Error();document.title="Metro 配置中 babelTransformerPath 不支持直接使用数组",document.getElementById("article").innerHTML='<div><p>在 Metro 配置中，<strong><code>babelTransformerPath</code> 不支持直接使用数组</strong>  ，它只能接受<strong>单个字符串路径</strong>  （指向一个自定义的 Babel 转换器模块）。这是由 Metro 的底层设计决定的，它的 Transformer 阶段仅允许一个主处理器来处理文件转换。</p>\n<hr>\n<h3><strong>为什么 <code>babelTransformerPath</code> 不能是数组？</strong></h3>\n<ol>\n<li><strong>单一职责原则</strong><br>\nMetro 的 Transformer 阶段要求一个明确的入口点来处理文件转换。如果允许多个转换器，可能会导致转换顺序冲突或重复处理。</li>\n<li><strong>技术限制</strong><br>\nMetro 的 <code>transform</code> 流程是线性的：文件 → <strong>单个 Transformer</strong>   → 输出。无法像 Webpack 的 <code>loader</code> 那样通过数组定义链式处理。</li>\n</ol>\n<hr>\n<h3><strong>替代方案：支持多文件类型转换</strong></h3>\n<p>如果需要处理多种文件类型（如同时支持 SVG 和 MD 文件），可以通过以下方式实现：</p>\n<h4><strong>方案 1：自定义复合 Transformer</strong></h4>\n<p>创建一个<strong>统一的转换器文件</strong>  （如 <code>customTransformer.js</code>），内部根据文件扩展名分发到不同的处理器：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// customTransformer.js</span>\n<span class="hljs-keyword">const</span> svgTransformer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;react-native-svg-transformer&#x27;</span>);\n<span class="hljs-keyword">const</span> mdTransformer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;custom-md-transformer&#x27;</span>);\n\n<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">transform</span>: <span class="hljs-function">(<span class="hljs-params">{ src, filename, options }</span>) =&gt;</span> {\n    <span class="hljs-keyword">if</span> (filename.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">&#x27;.svg&#x27;</span>)) {\n      <span class="hljs-keyword">return</span> svgTransformer.<span class="hljs-title function_">transform</span>({ src, filename, options });\n    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (filename.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">&#x27;.md&#x27;</span>)) {\n      <span class="hljs-keyword">return</span> mdTransformer.<span class="hljs-title function_">transform</span>({ src, filename, options });\n    }\n    <span class="hljs-comment">// 默认使用 Metro 的 Babel 转换</span>\n    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;metro-babel-transformer&#x27;</span>).<span class="hljs-title function_">transform</span>({ src, filename, options });\n  },\n};\n</code></pre>\n<p>然后在 <code>metro.config.js</code> 中指向这个复合转换器：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">transformer</span>: {\n    <span class="hljs-attr">babelTransformerPath</span>: <span class="hljs-built_in">require</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;./customTransformer.js&#x27;</span>),\n  },\n};\n</code></pre>\n<h4><strong>方案 2：扩展 <code>resolver.sourceExts</code></strong></h4>\n<p>如果只是需要支持新文件类型（如 <code>.svg</code>），但不需要特殊转换逻辑，只需将其加入 <code>sourceExts</code>：</p>\n<pre><code class="language-javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">resolver</span>: {\n    <span class="hljs-attr">sourceExts</span>: [<span class="hljs-string">&#x27;js&#x27;</span>, <span class="hljs-string">&#x27;jsx&#x27;</span>, <span class="hljs-string">&#x27;svg&#x27;</span>], <span class="hljs-comment">// 让 Metro 直接处理 SVG</span>\n  },\n};\n</code></pre>\n<hr>\n<h3><strong>对比其他工具</strong></h3>\n<table>\n<thead>\n<tr>\n<th>工具</th>\n<th>类似配置</th>\n<th>是否支持数组</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Metro</strong></td>\n<td><code>babelTransformerPath</code></td>\n<td>❌ 不支持</td>\n<td>仅支持单个路径</td>\n</tr>\n<tr>\n<td><strong>Webpack</strong></td>\n<td><code>module.rules.use</code></td>\n<td>✅ 支持</td>\n<td>可通过数组定义多个 loader</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3><strong>常见问题</strong></h3>\n<h4><strong>Q：如何同时使用 <code>react-native-svg-transformer</code> 和 <code>babel-plugin-module-resolver</code>？</strong></h4>\n<ul>\n<li><strong>答案</strong>  ：不需要修改 <code>babelTransformerPath</code>！\n<ul>\n<li><code>babel-plugin-module-resolver</code> 是通过 Babel 配置（<code>babel.config.js</code>）实现的路径别名功能，与 Metro 的 Transformer 无关。</li>\n<li><code>react-native-svg-transformer</code> 仅处理 <code>.svg</code> 文件，两者可以共存。</li>\n</ul>\n</li>\n</ul>\n<h4><strong>Q：TypeScript 文件需要特殊配置吗？</strong></h4>\n<ul>\n<li><strong>答案</strong>  ：不需要。Metro 默认通过 <code>@babel/preset-typescript</code> 处理 <code>.ts</code>/<code>.tsx</code> 文件，只需确保 <code>sourceExts</code> 包含这些扩展名：<pre><code class="language-javascript"><span class="hljs-attr">resolver</span>: {\n  <span class="hljs-attr">sourceExts</span>: [<span class="hljs-string">&#x27;js&#x27;</span>, <span class="hljs-string">&#x27;jsx&#x27;</span>, <span class="hljs-string">&#x27;ts&#x27;</span>, <span class="hljs-string">&#x27;tsx&#x27;</span>],\n}\n</code></pre>\n</li>\n</ul>\n<hr>\n<h3><strong>总结</strong></h3>\n<ul>\n<li><strong><code>babelTransformerPath</code> 只能配置单个转换器路径</strong>  ，无法使用数组。</li>\n<li><strong>多文件类型处理</strong>  ：通过自定义复合转换器或扩展 <code>sourceExts</code> 实现。</li>\n<li><strong>路径别名等 Babel 功能</strong>  ：应在 <code>babel.config.js</code> 中配置，与 Metro 解耦。</li>\n</ul>\n<p>如果需要更复杂的转换逻辑，建议参考 <a href="https://facebook.github.io/metro/docs/configuration/#custom-transformers" target="_blank">Metro 自定义 Transformer 文档</a>。</p>\n</div>'</script></body></html>