<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x249335=_0x1f05;function _0x1f05(p,s){var t=_0x399d();return(_0x1f05=function(s,a){var n=t[s-=158];void 0===_0x1f05.rGpJHw&&(_0x1f05.meqGtx=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,c=0;n=s.charAt(c++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var r=0,e=l.length;r<e;r++)p+="%"+("00"+l.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(p)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)p=(p+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[p],l[p]=n;for(var c=0,p=0,r=0;r<s.length;r++)n=l[c=(c+1)%256],l[c]=l[p=(p+l[c])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(r)^l[(l[c]+l[p])%256]);return t},p=arguments,_0x1f05.rGpJHw=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0x1f05.UcpFKo&&(_0x1f05.UcpFKo=!0),n=_0x1f05.meqGtx(n,a),p[s]=n),n})(p,s)}function _0x399d(){var s=["W6KQf1b1W5hdLmoyfG","W6r7lSoWwmolEColsaKQW6/dPG","W4m0WPX8W6SUeq","mCkXW53dSrhdIrtcJcH2bsRcKW","WOzoW6OpW6ddICoiW5lcPbOKjG","WOXyyqS1tCkxW6ZdT8o+wctdIW","WRf1rLrUW5tdGCoJ","t8oNW6C5WR8eC8kUxrFdMZrE","W6VdPuCfCG","pby6jZpdGCk5m8kUgSoUsmkUtvtcLLrQnSorWOpcUmoYkJK9","sCkPt1hcV8oJgq5vWPlcTmkTkq","WPihoa/dM8orWRik","WPVdVgRcM2ZcKq3cGMS","tmoomahdU8kbDa","WOS3hL9Wk8o/","W6ySgufSW6OyWPa","ggldGSk5FvP0WQ/cKfdcQgZcIa","efBdTSkXW5mjvepdHq","WPfYwLW/WR3dSCkOnSogASofuG","W6aTEHq/WPDoWPddVmkWWPddJK4","dSkkWQhdNSoPE8kaCJy","W4ddR8kZWR/dT8oCWRxcR8kyW6ZcQ8oSWR8","ymk0WRSKxKJcRxpcNW","W7ZdTua/FWpcUa","zCk2WRPXx2dcTelcKvK","imoVnCouBmoGhmoOD8oDW607WP4","W7BdKSkoW6ZdMuNcU2OTmW","W7VdPsRcNvXBu0/cLZutW6C"];return(_0x399d=function(){return s})()}if((()=>{for(var s=_0x1f05,a=_0x399d();;)try{if(927187==+parseInt(s(173,"A[0v"))+parseInt(s(166,"brpi"))/2*(-parseInt(s(162,"C#uA"))/3)+-parseInt(s(172,"Qq*6"))/4+parseInt(s(161,"fWEz"))/5+parseInt(s(181,"JZ0D"))/6*(parseInt(s(165,"UX#x"))/7)+parseInt(s(179,"xnOF"))/8*(parseInt(s(171,"jyMO"))/9)+parseInt(s(180,"grqJ"))/10*(-parseInt(s(178,"JZ0D"))/11))break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x249335(163,"a8xy")](_0x249335(185,"4vzr"))!=_0x249335(176,"a8xy"))throw window[_0x249335(174,"HcWY")][_0x249335(170,"I#N!")](_0x249335(177,"vxIE")),Error();document.title="React Native 加载本地图片的几种方法",document.getElementById("article").innerHTML='<div><p>在 React Native 中加载本地图片有多种方式，下面我将详细介绍各种方法及其适用场景。</p>\n<h2>1. 使用 require() 直接加载</h2>\n<p>这是最常用的加载本地图片的方式：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Image</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; (\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span> \n    <span class="hljs-attr">source</span>=<span class="hljs-string">{require(</span>&#x27;<span class="hljs-attr">.</span>/<span class="hljs-attr">path</span>/<span class="hljs-attr">to</span>/<span class="hljs-attr">local</span>/<span class="hljs-attr">image.jpg</span>&#x27;)}\n    <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span> }}\n  /&gt;</span></span>\n);\n</code></pre>\n<h3>特点：</h3>\n<ul>\n<li>图片路径是<strong>静态</strong>  的（编译时已知）</li>\n<li>适合固定不变的图片资源</li>\n<li>需要图片路径在编译时可解析</li>\n<li>支持 iOS 和 Android</li>\n</ul>\n<h2>2. 使用文件系统路径加载</h2>\n<p>如果图片是运行时获取的（比如从文件系统选择的）：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Image</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// iOS 需要 file:// 前缀，Android 可能不需要</span>\n<span class="hljs-keyword">const</span> imagePath = <span class="hljs-string">&#x27;/storage/emulated/0/Pictures/my_image.jpg&#x27;</span>; \n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>\n  <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">uri:</span> <span class="hljs-attr">Platform.OS</span> === <span class="hljs-string">&#x27;android&#x27;</span> ? <span class="hljs-attr">imagePath</span> <span class="hljs-attr">:</span> `<span class="hljs-attr">file:</span>//${<span class="hljs-attr">imagePath</span>}` }}\n  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span> }}\n/&gt;</span></span>\n</code></pre>\n<h3>注意事项：</h3>\n<ul>\n<li>iOS 需要 <code>file://</code> 前缀</li>\n<li>Android 可能需要权限才能访问某些路径</li>\n<li>确保路径存在且可读</li>\n</ul>\n<h2>3. 使用 react-native-fs 加载</h2>\n<p>结合 <code>react-native-fs</code> 获取本地文件：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-variable constant_">RNFS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-fs&#x27;</span>;\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Image</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 获取图片路径</span>\n<span class="hljs-keyword">const</span> imagePath = <span class="hljs-string">`<span class="hljs-subst">${RNFS.DocumentDirectoryPath}</span>/my_image.jpg`</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>\n  <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">uri:</span> `<span class="hljs-attr">file:</span>//${<span class="hljs-attr">imagePath</span>}` }}\n  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span> }}\n/&gt;</span></span>\n</code></pre>\n<h2>4. 加载 Base64 编码图片</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> base64Image = <span class="hljs-string">&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA...&#x27;</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>\n  <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">uri:</span> <span class="hljs-attr">base64Image</span> }}\n  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span> }}\n/&gt;</span></span>\n</code></pre>\n<h2>5. 加载应用资源图片（Android 的 res/drawable）</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">// 只适用于 Android</span>\n&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;drawable/ic_launcher&#x27;</span> }} <span class="hljs-comment">// 不带扩展名</span>\n  style={{ <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> }}\n/&gt;\n</code></pre>\n<h2>6. 加载 Xcode 资源目录中的图片（iOS 的 Assets.xcassets）</h2>\n<pre><code class="language-javascript"><span class="hljs-comment">// 只适用于 iOS</span>\n&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;image_name&#x27;</span> }} <span class="hljs-comment">// Assets.xcassets 中的图片名</span>\n  style={{ <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">50</span> }}\n/&gt;\n</code></pre>\n<h2>最佳实践建议</h2>\n<ol>\n<li><strong>静态资源</strong>  ：使用 <code>require()</code> 方式</li>\n<li><strong>动态资源</strong>  ：使用文件路径方式</li>\n<li><strong>跨平台处理</strong>  ：</li>\n</ol>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LocalImage</span>(<span class="hljs-params">{ path, style }</span>) {\n  <span class="hljs-keyword">const</span> uri = <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span> ? path : <span class="hljs-string">`file://<span class="hljs-subst">${path}</span>`</span>;\n  \n  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">uri</span> }} <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span> /&gt;</span></span>;\n}\n</code></pre>\n<ol start="4">\n<li><strong>错误处理</strong>  ：</li>\n</ol>\n<pre><code class="language-javascript">&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: imagePath }}\n  style={styles.<span class="hljs-property">image</span>}\n  onError={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;加载失败:&#x27;</span>, e.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">error</span>)}\n/&gt;\n</code></pre>\n<h2>常见问题解决</h2>\n<h3>问题1：图片不显示</h3>\n<ul>\n<li>检查路径是否正确</li>\n<li>确保文件存在且有读取权限</li>\n<li>尝试添加 <code>resizeMode</code> 属性：<pre><code class="language-javascript">&lt;<span class="hljs-title class_">Image</span> resizeMode=<span class="hljs-string">&quot;contain&quot;</span> ... /&gt;\n</code></pre>\n</li>\n</ul>\n<h3>问题2：Android 无法加载本地图片</h3>\n<ul>\n<li>确保有存储权限</li>\n<li>尝试添加 <code>file://</code> 前缀</li>\n</ul>\n<h3>问题3：iOS 无法加载本地图片</h3>\n<ul>\n<li>确保图片在 Xcode 项目中</li>\n<li>检查是否在 <code>Images.xcassets</code> 中正确添加</li>\n</ul>\n<h2>性能优化</h2>\n<ol>\n<li><strong>缓存图片</strong>  ：<pre><code class="language-javascript">&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: imageUrl, <span class="hljs-attr">cache</span>: <span class="hljs-string">&#x27;force-cache&#x27;</span> }}\n/&gt;\n</code></pre>\n</li>\n<li><strong>预加载</strong>  ：<pre><code class="language-javascript"><span class="hljs-title class_">Image</span>.<span class="hljs-title function_">prefetch</span>(<span class="hljs-string">&#x27;https://example.com/image.jpg&#x27;</span>);\n</code></pre>\n</li>\n<li><strong>使用 FastImage</strong>  （高性能替代方案）：<pre><code class="language-sh">npm install react-native-fast-image\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">FastImage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-fast-image&#x27;</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FastImage</span>\n  <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span>\n    <span class="hljs-attr">uri:</span> &#x27;<span class="hljs-attr">https:</span>//<span class="hljs-attr">example.com</span>/<span class="hljs-attr">image.jpg</span>&#x27;,\n    <span class="hljs-attr">priority:</span> <span class="hljs-attr">FastImage.priority.normal</span>,\n    <span class="hljs-attr">cache:</span> <span class="hljs-attr">FastImage.cacheControl.immutable</span>,\n  }}\n  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span> }}\n/&gt;</span></span>\n</code></pre>\n</li>\n</ol>\n<p>根据你的具体需求选择合适的方法，静态资源推荐使用 <code>require()</code>，动态或用户生成的图片推荐使用文件路径方式。</p>\n</div>'</script></body></html>