<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0xd91945=_0x4cd4;function _0x3f5c(){var s=["mmkkWPVcSmoDp8kluW","iGjcW5pcS8o9vX0zEKJdHCkF","WRfmbcSnmXLIEa","W5HXWOxdHZyzW77dPeJcTJpcHCky","FCovmb/dLCoSW5P7awJcJSowWOG","DmovpXZdMCkkWOPJcNZcLG","W49oldBcT2HrymkaW4FdPxr4vKRcUmo+W7nDW4rCaWbMbCop","EenDaSo3BJrbWO8","W5tcVSoHFmk5cHXVW5NcTJ8W","sSkIsd55WO3dSSoUntdcTq","W7JcGttcTJ/cUmozwCo4W4K5zCoZ","W4/cQIZdNL5EW4WS","WQBcO2DkW4y","qCojaCk7W5hcJmk/t8kj","WQxcG8kEeHpdICoDCqiSWOq","W5tdPw0vrCodv1joW73dIG","bmotW7BdN0hcO8kdt8k6eH/cLG","amkzoSkFWOGEmCofpW","tb0GDSkyv8kBgSoX","W5rexSkbz1Pjpq","W7/cHfpdOSoeW6pcL8ovsaddMSoBWQ4","W4bFla/cSdCt","W6BdMWSJWRBcN8otW6WnWONdOh85","tSkgWRFcGXldTmkt","nHZdImkYfeOkWRf/WR7cHxi","c8o7pKtdMCo5jf4Ze8oqW58"];return(_0x3f5c=function(){return s})()}function _0x4cd4(l,s){var e=_0x3f5c();return(_0x4cd4=function(s,n){var a=e[s-=412];void 0===_0x4cd4.hNxYCA&&(_0x4cd4.cUhxwc=function(s,n){var a,t=[],l=0,e="";for(s=(s=>{for(var n,a,t="",l="",e=0,p=0;a=s.charAt(p++);~a&&(n=e%4?64*n+a:a,e++%4)&&(t+=String.fromCharCode(255&n>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,o=t.length;c<o;c++)l+="%"+("00"+t.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(l)})(s),p=0;p<256;p++)t[p]=p;for(p=0;p<256;p++)l=(l+t[p]+n.charCodeAt(p%n.length))%256,a=t[p],t[p]=t[l],t[l]=a;for(var p=0,l=0,c=0;c<s.length;c++)a=t[p=(p+1)%256],t[p]=t[l=(l+t[p])%256],t[l]=a,e+=String.fromCharCode(s.charCodeAt(c)^t[(t[p]+t[l])%256]);return e},l=arguments,_0x4cd4.hNxYCA=!0);var s=s+e[0],t=l[s];return t?a=t:(void 0===_0x4cd4.aadYtE&&(_0x4cd4.aadYtE=!0),a=_0x4cd4.cUhxwc(a,n),l[s]=a),a})(l,s)}if((()=>{for(var s=_0x4cd4,n=_0x3f5c();;)try{if(718046==-parseInt(s(412,"8ttg"))*(parseInt(s(424,"IM@3"))/2)+-parseInt(s(413,"@F55"))/3+parseInt(s(434,"*n1o"))/4+parseInt(s(415,"G7Hw"))/5*(-parseInt(s(427,"(G[t"))/6)+parseInt(s(426,"P&xA"))/7+-parseInt(s(432,"82)G"))/8+parseInt(s(421,"DZ1v"))/9*(parseInt(s(437,"!wu)"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0xd91945(431,"WhKF")](_0xd91945(417,"5afA"))!=_0xd91945(422,"5tM2"))throw window[_0xd91945(436,"P@jz")][_0xd91945(433,"P&xA")](_0xd91945(416,"WhKF")),Error();document.title="LayoutAnimation Properties 详解",document.getElementById("article").innerHTML='<div><p>LayoutAnimation 是 React Native 中用于简化布局动画的 API，它允许您在下一个布局周期自动将视图动画到新位置。</p>\n<h2>一、核心属性</h2>\n<h3>1. 基本结构</h3>\n<pre><code class="language-javascript"><span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-title function_">configureNext</span>({\n  <span class="hljs-attr">duration</span>: number,       <span class="hljs-comment">// 动画持续时间（毫秒）</span>\n  <span class="hljs-attr">create</span>: {               <span class="hljs-comment">// 新视图的动画配置</span>\n    <span class="hljs-attr">type</span>: string,         <span class="hljs-comment">// 动画类型</span>\n    <span class="hljs-attr">property</span>: string,     <span class="hljs-comment">// 动画属性</span>\n  },\n  <span class="hljs-attr">update</span>: {               <span class="hljs-comment">// 已有视图更新的动画配置</span>\n    <span class="hljs-attr">type</span>: string,\n    <span class="hljs-attr">property</span>: string,\n  },\n  <span class="hljs-attr">delete</span>: {               <span class="hljs-comment">// 删除视图的动画配置</span>\n    <span class="hljs-attr">type</span>: string,\n    <span class="hljs-attr">property</span>: string,\n  },\n});\n</code></pre>\n<h3>2. 主要配置属性</h3>\n<h4>动画类型 (<code>type</code>)</h4>\n<table>\n<thead>\n<tr>\n<th>值</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>spring</code></td>\n<td>弹簧动画（有弹性效果）</td>\n</tr>\n<tr>\n<td><code>linear</code></td>\n<td>线性动画（匀速）</td>\n</tr>\n<tr>\n<td><code>easeInEaseOut</code></td>\n<td>缓入缓出动画</td>\n</tr>\n<tr>\n<td><code>easeIn</code></td>\n<td>缓入动画</td>\n</tr>\n<tr>\n<td><code>easeOut</code></td>\n<td>缓出动画</td>\n</tr>\n<tr>\n<td><code>keyboard</code></td>\n<td>键盘动画（iOS专用）</td>\n</tr>\n</tbody>\n</table>\n<h4>动画属性 (<code>property</code>)</h4>\n<table>\n<thead>\n<tr>\n<th>值</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>opacity</code></td>\n<td>透明度动画</td>\n</tr>\n<tr>\n<td><code>scaleXY</code></td>\n<td>缩放动画</td>\n</tr>\n<tr>\n<td><code>scaleX</code></td>\n<td>X轴缩放</td>\n</tr>\n<tr>\n<td><code>scaleY</code></td>\n<td>Y轴缩放</td>\n</tr>\n<tr>\n<td><code>position</code></td>\n<td>位置动画</td>\n</tr>\n</tbody>\n</table>\n<h2>二、预设配置</h2>\n<p>React Native 提供了几个预设配置：</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-property">Presets</span> = {\n  <span class="hljs-attr">easeInEaseOut</span>: { <span class="hljs-comment">/* 默认配置 */</span> },\n  <span class="hljs-attr">linear</span>: { <span class="hljs-comment">/* 线性配置 */</span> },\n  <span class="hljs-attr">spring</span>: { <span class="hljs-comment">/* 弹簧配置 */</span> }\n};\n</code></pre>\n<p>使用示例：</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-title function_">configureNext</span>(<span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-property">Presets</span>.<span class="hljs-property">easeInEaseOut</span>);\n</code></pre>\n<h2>三、详细属性说明</h2>\n<h3>1. <code>duration</code> (必需)</h3>\n<ul>\n<li>类型: <code>number</code></li>\n<li>单位: 毫秒</li>\n<li>描述: 动画持续时间</li>\n</ul>\n<h3>2. <code>create</code> (可选)</h3>\n<ul>\n<li>描述: 对新创建的视图应用的动画</li>\n<li>子属性:\n<ul>\n<li><code>type</code>: 动画类型</li>\n<li><code>property</code>: 动画属性</li>\n<li><code>springDamping</code> (仅<code>spring</code>类型): 弹簧阻尼系数(0-1)</li>\n<li><code>initialVelocity</code> (仅<code>spring</code>类型): 初始速度</li>\n</ul>\n</li>\n</ul>\n<h3>3. <code>update</code> (可选)</h3>\n<ul>\n<li>描述: 对更新的视图应用的动画</li>\n<li>子属性: 同<code>create</code></li>\n</ul>\n<h3>4. <code>delete</code> (可选)</h3>\n<ul>\n<li>描述: 对删除的视图应用的动画</li>\n<li>子属性: 同<code>create</code></li>\n</ul>\n<h2>四、高级配置示例</h2>\n<pre><code class="language-javascript">\n<span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-title function_">configureNext</span>({\n  <span class="hljs-attr">duration</span>: <span class="hljs-number">700</span>,\n  <span class="hljs-attr">create</span>: {\n    <span class="hljs-attr">type</span>: <span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">spring</span>,\n    <span class="hljs-attr">property</span>: <span class="hljs-string">&#x27;scaleXY&#x27;</span>,\n    <span class="hljs-attr">springDamping</span>: <span class="hljs-number">0.7</span>,\n    <span class="hljs-attr">initialVelocity</span>: <span class="hljs-number">0.3</span>,\n  },\n  <span class="hljs-attr">update</span>: {\n    <span class="hljs-attr">type</span>: <span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">easeInEaseOut</span>,\n    <span class="hljs-attr">property</span>: <span class="hljs-string">&#x27;opacity&#x27;</span>,\n  },\n  <span class="hljs-attr">delete</span>: {\n    <span class="hljs-attr">type</span>: <span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">linear</span>,\n    <span class="hljs-attr">property</span>: <span class="hljs-string">&#x27;position&#x27;</span>,\n    <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,\n  },\n});\n</code></pre>\n<h2>五、平台特定注意事项</h2>\n<h3>iOS 特有属性</h3>\n<ul>\n<li><code>delay</code>: 动画延迟时间（毫秒）</li>\n<li><code>stiffness</code>: 弹簧刚度（仅<code>spring</code>类型）</li>\n<li><code>damping</code>: 弹簧阻尼（仅<code>spring</code>类型）</li>\n<li><code>mass</code>: 弹簧质量（仅<code>spring</code>类型）</li>\n</ul>\n<h3>Android 限制</h3>\n<ul>\n<li>需要启用标志：<code>UIManager.setLayoutAnimationEnabledExperimental(true)</code></li>\n<li>支持的属性较少，主要是<code>opacity</code>和<code>scaleXY</code></li>\n</ul>\n<h2>六、实际应用示例</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayoutAnimation</span>, <span class="hljs-title class_">UIManager</span>, <span class="hljs-title class_">Platform</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// Android特殊设置</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span>) {\n  <span class="hljs-title class_">UIManager</span>.<span class="hljs-title function_">setLayoutAnimationEnabledExperimental</span>(<span class="hljs-literal">true</span>);\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">animateLayout</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-title class_">LayoutAnimation</span>.<span class="hljs-title function_">configureNext</span>({\n    <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,\n    <span class="hljs-attr">create</span>: { \n      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;easeInEaseOut&#x27;</span>, \n      <span class="hljs-attr">property</span>: <span class="hljs-string">&#x27;opacity&#x27;</span> \n    },\n    <span class="hljs-attr">update</span>: { \n      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;spring&#x27;</span>, \n      <span class="hljs-attr">property</span>: <span class="hljs-string">&#x27;scaleXY&#x27;</span>,\n      <span class="hljs-attr">springDamping</span>: <span class="hljs-number">0.4</span>\n    },\n  });\n  \n  <span class="hljs-comment">// 触发状态变化...</span>\n  <span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">items</span>: newItems }));\n}\n</code></pre>\n<h2>七、性能优化建议</h2>\n<ol>\n<li><strong>避免频繁动画</strong>  ：减少动画触发频率</li>\n<li><strong>简化动画</strong>  ：使用简单的<code>easeInEaseOut</code>替代复杂的<code>spring</code></li>\n<li><strong>批量更新</strong>  ：在多个状态变化前调用一次<code>configureNext</code></li>\n<li><strong>Android优化</strong>  ：在Android上优先使用<code>opacity</code>动画</li>\n</ol>\n<h2>八、常见问题解决方案</h2>\n<h3>动画不生效</h3>\n<ol>\n<li>检查Android是否启用了实验性支持</li>\n<li>确保在状态变化前调用<code>configureNext</code></li>\n<li>验证动画属性是否被组件支持</li>\n</ol>\n<h3>动画卡顿</h3>\n<ol>\n<li>减少动画持续时间</li>\n<li>避免同时动画大量元素</li>\n<li>使用<code>InteractionManager</code>延迟复杂动画</li>\n</ol>\n<p>通过合理配置这些属性，您可以创建流畅的布局过渡动画，提升用户体验。</p>\n</div>'</script></body></html>