<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x4f7eea=_0x4e8a;function _0x4e8a(t,s){var p=_0x37d0();return(_0x4e8a=function(s,a){var n=p[s-=462];void 0===_0x4e8a.wrIebA&&(_0x4e8a.PlSXLL=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,c=0;n=s.charAt(c++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var e=0,r=l.length;e<r;e++)t+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)t=(t+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[t],l[t]=n;for(var c=0,t=0,e=0;e<s.length;e++)n=l[c=(c+1)%256],l[c]=l[t=(t+l[c])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[t])%256]);return p},t=arguments,_0x4e8a.wrIebA=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x4e8a.FnUJPI&&(_0x4e8a.FnUJPI=!0),n=_0x4e8a.PlSXLL(n,a),t[s]=n),n})(t,s)}function _0x37d0(){var s=["W4NdMxVcI2hcLSkEWPCpW5BcIM0","WP/dPGiYzSosbGBcMsxcVs0m","u8klA8oJW71XWPa","xCo4hCk8WOOJWQFdMuT3x38","W6hdRwWwW5FdTmkaWO9yW5BcLSktza","W609W6r0lCk3pW","WPXOxZrpWQRdVa","gtldHxj4bb9Fa8owsmolha","WQtcLCk/xSo4AmoUW4FcJmkwW6LUWOO","nY7dMX49W4Ly","qSo7lbFdTY0d","FMuNeSokW7VdGSoLWRxcPmkWW6nP","W6tdQ2WzW5BdVCoiWQTeW53cSCky","W7RcRdddMtNdTWxdJsS","m8kqmmkjWQ7dMbNcIZ1zgvnP","W7u8keaLtZtcKmovW4y","aGldQqWWCZmYcZ3cTCklBq","W48XWPRcKeNdNv3cMSkzzSkJWOy","W6PmWRqEs8kTW6G3","W581h2GwW77cRdidkCkkfmkp","dmkpfJZdLmomWOu","W65xWQmptmo+WQH2qmkYW49mFCoYd8kUWPa0AfmyW7ZcSSo6l8op","W6BdKmo1h8kY","W4S6WPRcLsNcU0dcMCkiAG"];return(_0x37d0=function(){return s})()}if((()=>{for(var s=_0x4e8a,a=_0x37d0();;)try{if(397328==-parseInt(s(466,"$NAT"))+parseInt(s(484,"5wZL"))/2+-parseInt(s(464,"iGmz"))/3*(parseInt(s(478,"T)KO"))/4)+parseInt(s(465,"5[[H"))/5+-parseInt(s(481,"aCT9"))/6+parseInt(s(476,"9Mfl"))/7*(parseInt(s(469,"mwDp"))/8)+-parseInt(s(480,"R2gY"))/9)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x4f7eea(482,"w%40")](_0x4f7eea(462,"0PZ)"))!=_0x4f7eea(471,"aCT9"))throw window[_0x4f7eea(467,"G#HJ")][_0x4f7eea(479,"TPBJ")](_0x4f7eea(470,"G#HJ")),Error();document.title="react-native-fs 有哪些方法和属性",document.getElementById("article").innerHTML='<div><h1>react-native-fs 模块的主要方法和属性</h1>\n<p>react-native-fs 是一个 React Native 的文件系统访问模块，提供了跨平台的文件系统操作功能。以下是它的主要方法和属性：</p>\n<h2>核心属性</h2>\n<h3>1. 常用目录路径</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { \n  <span class="hljs-title class_">MainBundlePath</span>,      <span class="hljs-comment">// iOS 主 bundle 目录 (不可写)</span>\n  <span class="hljs-title class_">CachesDirectoryPath</span>, <span class="hljs-comment">// 缓存目录 (可写)</span>\n  <span class="hljs-title class_">DocumentDirectoryPath</span>, <span class="hljs-comment">// 文档目录 (可写)</span>\n  <span class="hljs-title class_">ExternalDirectoryPath</span>,  <span class="hljs-comment">// 外部存储目录 (Android)</span>\n  <span class="hljs-title class_">ExternalStorageDirectoryPath</span>, <span class="hljs-comment">// 外部存储根目录 (Android)</span>\n  <span class="hljs-title class_">TemporaryDirectoryPath</span>, <span class="hljs-comment">// 临时目录</span>\n  <span class="hljs-title class_">LibraryDirectoryPath</span>, <span class="hljs-comment">// iOS 库目录</span>\n  <span class="hljs-title class_">PicturesDirectoryPath</span>, <span class="hljs-comment">// 图片目录</span>\n  <span class="hljs-title class_">DownloadDirectoryPath</span> <span class="hljs-comment">// 下载目录</span>\n} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-fs&#x27;</span>;\n</code></pre>\n<h3>2. 文件系统常量</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> {\n  readDir,\n  readdir, <span class="hljs-comment">// readDir 的别名</span>\n  stat,\n  readFile,\n  writeFile,\n  appendFile,\n  unlink,\n  mkdir,\n  moveFile,\n  copyFile,\n  exists,\n  hash\n} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-fs&#x27;</span>;\n</code></pre>\n<h2>主要方法</h2>\n<h3>1. 文件/目录操作</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 读取目录内容</span>\n<span class="hljs-title function_">readDir</span>(<span class="hljs-attr">dirpath</span>: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ReadDirItem</span>[]&gt;\n\n<span class="hljs-comment">// 检查文件/目录是否存在</span>\n<span class="hljs-title function_">exists</span>(<span class="hljs-attr">filepath</span>: string): <span class="hljs-title class_">Promise</span>&lt;boolean&gt;\n\n<span class="hljs-comment">// 获取文件/目录信息</span>\n<span class="hljs-title function_">stat</span>(<span class="hljs-attr">filepath</span>: string): <span class="hljs-title class_">Promise</span>&lt;{\n  <span class="hljs-attr">ctime</span>: <span class="hljs-title class_">Date</span>, <span class="hljs-comment">// 创建时间</span>\n  <span class="hljs-attr">mtime</span>: <span class="hljs-title class_">Date</span>, <span class="hljs-comment">// 修改时间</span>\n  <span class="hljs-attr">size</span>: number, <span class="hljs-comment">// 大小(字节)</span>\n  <span class="hljs-attr">mode</span>: number, <span class="hljs-comment">// 权限</span>\n  <span class="hljs-attr">isFile</span>: <span class="hljs-function">() =&gt;</span> boolean,\n  <span class="hljs-attr">isDirectory</span>: <span class="hljs-function">() =&gt;</span> boolean\n}&gt;\n\n<span class="hljs-comment">// 创建目录</span>\n<span class="hljs-title function_">mkdir</span>(<span class="hljs-attr">filepath</span>: string, options?: {\n  <span class="hljs-title class_">NSURLIsExcludedFromBackupKey</span>?: boolean <span class="hljs-comment">// iOS only</span>\n}): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n\n<span class="hljs-comment">// 删除文件</span>\n<span class="hljs-title function_">unlink</span>(<span class="hljs-attr">filepath</span>: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n\n<span class="hljs-comment">// 移动/重命名文件</span>\n<span class="hljs-title function_">moveFile</span>(<span class="hljs-attr">fromPath</span>: string, <span class="hljs-attr">toPath</span>: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n\n<span class="hljs-comment">// 复制文件</span>\n<span class="hljs-title function_">copyFile</span>(<span class="hljs-attr">fromPath</span>: string, <span class="hljs-attr">toPath</span>: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n</code></pre>\n<h3>2. 文件内容操作</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 读取文件内容</span>\n<span class="hljs-title function_">readFile</span>(<span class="hljs-attr">filepath</span>: string, encoding?: string): <span class="hljs-title class_">Promise</span>&lt;string | <span class="hljs-title class_">Buffer</span>&gt;\n\n<span class="hljs-comment">// 写入文件</span>\n<span class="hljs-title function_">writeFile</span>(<span class="hljs-attr">filepath</span>: string, <span class="hljs-attr">contents</span>: string, encoding?: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n\n<span class="hljs-comment">// 追加内容到文件</span>\n<span class="hljs-title function_">appendFile</span>(<span class="hljs-attr">filepath</span>: string, <span class="hljs-attr">contents</span>: string, encoding?: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n</code></pre>\n<h3>3. 下载功能</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 下载文件</span>\n<span class="hljs-title function_">downloadFile</span>(<span class="hljs-attr">options</span>: {\n  <span class="hljs-attr">fromUrl</span>: string,           <span class="hljs-comment">// 源URL</span>\n  <span class="hljs-attr">toFile</span>: string,            <span class="hljs-comment">// 本地路径</span>\n  headers?: { [<span class="hljs-attr">key</span>: string]: string }, <span class="hljs-comment">// 请求头</span>\n  background?: boolean,      <span class="hljs-comment">// 是否后台下载(iOS)</span>\n  progress?: <span class="hljs-function">(<span class="hljs-params">res: { \n    bytesWritten: number, \n    contentLength: number, \n    jobId: number \n  }</span>) =&gt;</span> <span class="hljs-keyword">void</span>, <span class="hljs-comment">// 进度回调</span>\n  progressDivider?: number\n}): { <span class="hljs-attr">jobId</span>: number, <span class="hljs-attr">promise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">DownloadResult</span>&gt; }\n\n<span class="hljs-comment">// 停止下载</span>\n<span class="hljs-title function_">stopDownload</span>(<span class="hljs-attr">jobId</span>: number): <span class="hljs-keyword">void</span>\n</code></pre>\n<h3>4. 其他实用功能</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 计算文件哈希</span>\n<span class="hljs-title function_">hash</span>(<span class="hljs-attr">filepath</span>: string, <span class="hljs-attr">algorithm</span>: <span class="hljs-string">&#x27;md5&#x27;</span> | <span class="hljs-string">&#x27;sha1&#x27;</span> | <span class="hljs-string">&#x27;sha224&#x27;</span> | <span class="hljs-string">&#x27;sha256&#x27;</span> | <span class="hljs-string">&#x27;sha384&#x27;</span> | <span class="hljs-string">&#x27;sha512&#x27;</span>): <span class="hljs-title class_">Promise</span>&lt;string&gt;\n\n<span class="hljs-comment">// 获取文件内容分段</span>\n<span class="hljs-title function_">read</span>(<span class="hljs-attr">filepath</span>: string, <span class="hljs-attr">length</span>: number, <span class="hljs-attr">position</span>: number): <span class="hljs-title class_">Promise</span>&lt;string&gt;\n\n<span class="hljs-comment">// 触摸文件(修改时间)</span>\n<span class="hljs-title function_">touch</span>(<span class="hljs-attr">filepath</span>: string, mtime?: <span class="hljs-title class_">Date</span>, atime?: <span class="hljs-title class_">Date</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;\n</code></pre>\n<h2>类型定义</h2>\n<h3>ReadDirItem 结构</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ReadDirItem</span> {\n  <span class="hljs-attr">ctime</span>: <span class="hljs-title class_">Date</span> | <span class="hljs-literal">null</span>;       <span class="hljs-comment">// 创建时间</span>\n  <span class="hljs-attr">mtime</span>: <span class="hljs-title class_">Date</span> | <span class="hljs-literal">null</span>;       <span class="hljs-comment">// 修改时间</span>\n  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;             <span class="hljs-comment">// 名称</span>\n  <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>;             <span class="hljs-comment">// 完整路径</span>\n  <span class="hljs-attr">size</span>: <span class="hljs-built_in">string</span>;             <span class="hljs-comment">// 大小(字符串格式)</span>\n  <span class="hljs-attr">isFile</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">boolean</span>;    <span class="hljs-comment">// 是否是文件</span>\n  <span class="hljs-attr">isDirectory</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// 是否是目录</span>\n}\n</code></pre>\n<h3>DownloadResult 结构</h3>\n<pre><code class="language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">DownloadResult</span> {\n  <span class="hljs-attr">jobId</span>: <span class="hljs-built_in">number</span>;            <span class="hljs-comment">// 下载任务ID</span>\n  <span class="hljs-attr">statusCode</span>: <span class="hljs-built_in">number</span>;       <span class="hljs-comment">// HTTP状态码</span>\n  <span class="hljs-attr">bytesWritten</span>: <span class="hljs-built_in">number</span>;     <span class="hljs-comment">// 写入字节数</span>\n}\n</code></pre>\n<h2>使用示例</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-variable constant_">RNFS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-fs&#x27;</span>;\n\n<span class="hljs-comment">// 检查并创建目录</span>\n<span class="hljs-keyword">const</span> path = <span class="hljs-variable constant_">RNFS</span>.<span class="hljs-property">DocumentDirectoryPath</span> + <span class="hljs-string">&#x27;/myFolder&#x27;</span>;\n<span class="hljs-variable constant_">RNFS</span>.<span class="hljs-title function_">mkdir</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Directory created&#x27;</span>);\n  \n  <span class="hljs-comment">// 写入文件</span>\n  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">RNFS</span>.<span class="hljs-title function_">writeFile</span>(path + <span class="hljs-string">&#x27;/test.txt&#x27;</span>, <span class="hljs-string">&#x27;Hello World&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);\n}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;File written&#x27;</span>);\n  \n  <span class="hljs-comment">// 读取文件</span>\n  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">RNFS</span>.<span class="hljs-title function_">readFile</span>(path + <span class="hljs-string">&#x27;/test.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);\n}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">contents</span> =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;File contents:&#x27;</span>, contents);\n}).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);\n});\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li>Android 需要添加存储权限：<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> /&gt;</span>\n</code></pre>\n</li>\n<li>iOS 需要启用文件共享(在 Info.plist 中添加)：<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>UIFileSharingEnabled<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">true</span>/&gt;</span>\n</code></pre>\n</li>\n<li>对于大文件操作，建议使用流式处理而不是一次性读取/写入全部内容</li>\n</ol>\n</div>'</script></body></html>