<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1e6664=_0x4719;function _0x4719(t,s){var p=_0x186a();return(_0x4719=function(s,a){var n=p[s-=482];void 0===_0x4719.HUrpuT&&(_0x4719.DOQceN=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,e=0;n=s.charAt(e++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)t=(t+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[t],l[t]=n;for(var e=0,t=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[t=(t+l[e])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[t])%256]);return p},t=arguments,_0x4719.HUrpuT=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x4719.HFAzvT&&(_0x4719.HFAzvT=!0),n=_0x4719.DOQceN(n,a),t[s]=n),n})(t,s)}function _0x186a(){var s=["W7LOWR1drqGzW51zW7C","bLBdHhNdLZmNWRrA","xSo1WOpdSdHsWOldQCoWWQf3WOf+nW","n8kZimkGW7y5BCoRWQ05pa","lCkIW5JcP3KxW7NcVmoV","W5SLfmkNWQddPIC","W5LPWOFcPSkJWQfXW43cGdfcW58u","rbNcOrlcSrxdINjHWRjJWO3dPxlcGepdGseakIBdJ8k6omoFWR8","qJLtz3NdPwe","bsFdSXXN","d8ovBsq9WOhdV1Or","cHbIj8ogxSkliahdNG","W5LTWOtcR8kNW4exW7BcHszs","wrHDW5SMFeK7bmkz","nmkZjCkVW7vEcSoqWQGobCoDW44","W71SWRPicMPNWOb8W5y2nsT5","WR47W7ODxJe0","dXfJj8ksi8owtqddPmk+WPa1ea","wSohagNcVbqFW68","cXvKlmoDqCkOecxdHq","W63dSv3cJr9Hn8klW6ldSd7cGmkaia","bJtdGJDRW5FdJqHwCmoPW6G","WPfEuComWPNcJCoJjgjMW4pcKxS","W4qkfSk0W5/dMSk5","W4pdTmoQzSo5WPpcTCkpW4DDW54a","W5X9umoGW7JcP2JdHCkBWPpcGSoVWQS"];return(_0x186a=function(){return s})()}if((()=>{for(var s=_0x4719,a=_0x186a();;)try{if(710868==+parseInt(s(502,"4eSE"))*(parseInt(s(486,"(]Sd"))/2)+parseInt(s(503,"pTXA"))/3+parseInt(s(506,"(]Sd"))/4+-parseInt(s(482,"]7DV"))/5*(parseInt(s(484,"1Jya"))/6)+parseInt(s(494,"YeDS"))/7*(parseInt(s(500,"2zlE"))/8)+parseInt(s(498,"2zlE"))/9+-parseInt(s(501,"]2yO"))/10)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x1e6664(504,"pTXA")](_0x1e6664(485,"SJc8"))!=_0x1e6664(490,"!Pju"))throw window[_0x1e6664(499,"TibF")][_0x1e6664(497,"lSGr")](_0x1e6664(488,"^s#o")),Error();document.title="react native Animated 详解",document.getElementById("article").innerHTML='<div><h1>React Native Animated 详解</h1>\n<p>React Native 的 Animated API 提供了强大的动画功能，可以创建流畅的交互体验。以下是 Animated 的全面解析：</p>\n<h2>一、核心概念</h2>\n<h3>1. 动画值类型</h3>\n<ul>\n<li><code>Animated.Value</code> - 基础动画值</li>\n<li><code>Animated.ValueXY</code> - 二维动画值（x,y坐标）</li>\n</ul>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Animated</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 创建动画值</span>\n<span class="hljs-keyword">const</span> fadeAnim = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// 透明度初始值0</span>\n<span class="hljs-keyword">const</span> position = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">ValueXY</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }); <span class="hljs-comment">// 位置初始值</span>\n</code></pre>\n<h3>2. 动画类型</h3>\n<ul>\n<li><code>Animated.timing()</code> - 时间驱动动画</li>\n<li><code>Animated.spring()</code> - 弹簧物理动画</li>\n<li><code>Animated.decay()</code> - 衰减动画</li>\n</ul>\n<h2>二、基础动画实现</h2>\n<h3>1. 淡入效果</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> fadeAnim = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n\n<span class="hljs-comment">// 动画配置</span>\n<span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(fadeAnim, {\n  <span class="hljs-attr">toValue</span>: <span class="hljs-number">1</span>,          <span class="hljs-comment">// 目标值</span>\n  <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,      <span class="hljs-comment">// 持续时间(ms)</span>\n  <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 使用原生驱动</span>\n}).<span class="hljs-title function_">start</span>();            <span class="hljs-comment">// 启动动画</span>\n\n<span class="hljs-comment">// 应用动画</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">fadeAnim</span> }}&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>淡入文字<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.View</span>&gt;</span></span>\n</code></pre>\n<h3>2. 移动动画</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> moveAnim = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n\n<span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">spring</span>(moveAnim, {\n  <span class="hljs-attr">toValue</span>: <span class="hljs-number">100</span>,\n  <span class="hljs-attr">friction</span>: <span class="hljs-number">5</span>,       <span class="hljs-comment">// 摩擦力，越小弹力越大</span>\n  <span class="hljs-attr">tension</span>: <span class="hljs-number">40</span>,       <span class="hljs-comment">// 张力</span>\n  <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n}).<span class="hljs-title function_">start</span>();\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> \n  <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">translateY:</span> <span class="hljs-attr">moveAnim</span> }] \n}}&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>上下移动的元素<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.View</span>&gt;</span></span>\n</code></pre>\n<h2>三、组合动画</h2>\n<h3>1. 并行动画 (parallel)</h3>\n<pre><code class="language-javascript"><span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">parallel</span>([\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(fadeAnim, {\n    <span class="hljs-attr">toValue</span>: <span class="hljs-number">1</span>,\n    <span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>,\n    <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n  }),\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">spring</span>(position, {\n    <span class="hljs-attr">toValue</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> },\n    <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n  })\n]).<span class="hljs-title function_">start</span>();\n</code></pre>\n<h3>2. 顺序动画 (sequence)</h3>\n<pre><code class="language-javascript"><span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">sequence</span>([\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(fadeAnim, {\n    <span class="hljs-attr">toValue</span>: <span class="hljs-number">1</span>,\n    <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,\n    <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n  }),\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">spring</span>(position, {\n    <span class="hljs-attr">toValue</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">50</span> },\n    <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n  })\n]).<span class="hljs-title function_">start</span>();\n</code></pre>\n<h3>3. 交错动画 (stagger)</h3>\n<pre><code class="language-javascript"><span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">stagger</span>(<span class="hljs-number">100</span>, [\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(anim1, { <span class="hljs-comment">/* 配置 */</span> }),\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(anim2, { <span class="hljs-comment">/* 配置 */</span> }),\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(anim3, { <span class="hljs-comment">/* 配置 */</span> })\n]).<span class="hljs-title function_">start</span>();\n</code></pre>\n<h2>四、动画插值</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> rotateAnim = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n\n<span class="hljs-keyword">const</span> rotateInterpolate = rotateAnim.<span class="hljs-title function_">interpolate</span>({\n  <span class="hljs-attr">inputRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>],\n  <span class="hljs-attr">outputRange</span>: [<span class="hljs-string">&#x27;0deg&#x27;</span>, <span class="hljs-string">&#x27;360deg&#x27;</span>] <span class="hljs-comment">// 从0度旋转到360度</span>\n});\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n  <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">rotate:</span> <span class="hljs-attr">rotateInterpolate</span> }]\n}} /&gt;</span></span>\n</code></pre>\n<h3>复杂插值示例</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> animatedValue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n\n<span class="hljs-keyword">const</span> backgroundColor = animatedValue.<span class="hljs-title function_">interpolate</span>({\n  <span class="hljs-attr">inputRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>],\n  <span class="hljs-attr">outputRange</span>: [<span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;green&#x27;</span>, <span class="hljs-string">&#x27;blue&#x27;</span>]\n});\n\n<span class="hljs-keyword">const</span> fontSize = animatedValue.<span class="hljs-title function_">interpolate</span>({\n  <span class="hljs-attr">inputRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>],\n  <span class="hljs-attr">outputRange</span>: [<span class="hljs-number">14</span>, <span class="hljs-number">24</span>]\n});\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> \n  <span class="hljs-attr">backgroundColor</span>, \n  <span class="hljs-attr">fontSize</span> \n}}&gt;</span>\n  动态变化的文本\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.Text</span>&gt;</span></span>\n</code></pre>\n<h2>五、手势动画</h2>\n<h3>1. 拖拽动画</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> pan = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">ValueXY</span>();\n\n<span class="hljs-keyword">const</span> panResponder = <span class="hljs-title class_">PanResponder</span>.<span class="hljs-title function_">create</span>({\n  <span class="hljs-attr">onMoveShouldSetPanResponder</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">true</span>,\n  <span class="hljs-attr">onPanResponderMove</span>: <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">event</span>(\n    [<span class="hljs-literal">null</span>, { <span class="hljs-attr">dx</span>: pan.<span class="hljs-property">x</span>, <span class="hljs-attr">dy</span>: pan.<span class="hljs-property">y</span> }],\n    { <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">false</span> } <span class="hljs-comment">// 手势动画不能使用原生驱动</span>\n  ),\n  <span class="hljs-attr">onPanResponderRelease</span>: <span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">spring</span>(pan, {\n      <span class="hljs-attr">toValue</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },\n      <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n    }).<span class="hljs-title function_">start</span>();\n  }\n});\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span>\n  {<span class="hljs-attr">...panResponder.panHandlers</span>}\n  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n    <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">translateX:</span> <span class="hljs-attr">pan.x</span> }, { <span class="hljs-attr">translateY:</span> <span class="hljs-attr">pan.y</span> }]\n  }}\n/&gt;</span></span>\n</code></pre>\n<h3>2. 滚动动画</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> scrollY = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n\n<span class="hljs-keyword">const</span> headerHeight = scrollY.<span class="hljs-title function_">interpolate</span>({\n  <span class="hljs-attr">inputRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],\n  <span class="hljs-attr">outputRange</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">50</span>],\n  <span class="hljs-attr">extrapolate</span>: <span class="hljs-string">&#x27;clamp&#x27;</span>\n});\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> <span class="hljs-attr">headerHeight</span> }}&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>可缩小的标题<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.View</span>&gt;</span></span>\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.ScrollView</span>\n  <span class="hljs-attr">scrollEventThrottle</span>=<span class="hljs-string">{16}</span>\n  <span class="hljs-attr">onScroll</span>=<span class="hljs-string">{Animated.event(</span>\n    [{ <span class="hljs-attr">nativeEvent:</span> { <span class="hljs-attr">contentOffset:</span> { <span class="hljs-attr">y:</span> <span class="hljs-attr">scrollY</span> } } }],\n    { <span class="hljs-attr">useNativeDriver:</span> <span class="hljs-attr">true</span> }\n  )}\n&gt;</span>\n  {/* 内容 */}\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.ScrollView</span>&gt;</span></span>\n</code></pre>\n<h2>六、高级技巧</h2>\n<h3>1. 循环动画</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">loopAnim</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">sequence</span>([\n    <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(fadeAnim, {\n      <span class="hljs-attr">toValue</span>: <span class="hljs-number">1</span>,\n      <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,\n      <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n    }),\n    <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(fadeAnim, {\n      <span class="hljs-attr">toValue</span>: <span class="hljs-number">0</span>,\n      <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,\n      <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n    })\n  ]).<span class="hljs-title function_">start</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">loopAnim</span>()); <span class="hljs-comment">// 动画完成后再次调用</span>\n};\n\n<span class="hljs-comment">// 组件挂载时启动</span>\n<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-title function_">loopAnim</span>();\n  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {\n    fadeAnim.<span class="hljs-title function_">stopAnimation</span>(); <span class="hljs-comment">// 组件卸载时停止</span>\n  };\n}, []);\n</code></pre>\n<h3>2. 动画组合</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> scale = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">1</span>);\n\n<span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">parallel</span>([\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(scale, {\n    <span class="hljs-attr">toValue</span>: <span class="hljs-number">1.5</span>,\n    <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,\n    <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n  }),\n  <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(fadeAnim, {\n    <span class="hljs-attr">toValue</span>: <span class="hljs-number">0.5</span>,\n    <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,\n    <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n  })\n]).<span class="hljs-title function_">start</span>();\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n  <span class="hljs-attr">opacity:</span> <span class="hljs-attr">fadeAnim</span>,\n  <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">scale</span> }]\n}}&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>缩放并淡出的元素<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">Animated.View</span>&gt;</span></span>\n</code></pre>\n<h2>七、性能优化</h2>\n<ol>\n<li><strong>使用原生驱动</strong>  ：<pre><code class="language-javascript"><span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(anim, {\n  <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 启用原生驱动</span>\n}).<span class="hljs-title function_">start</span>();\n</code></pre>\n</li>\n<li><strong>避免频繁更新</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// 不好的做法</span>\n<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);\n  }, <span class="hljs-number">16</span>);\n  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);\n}, []);\n\n<span class="hljs-comment">// 好的做法 - 使用Animated.Value</span>\n<span class="hljs-keyword">const</span> count = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n<span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">timing</span>(count, {\n  <span class="hljs-attr">toValue</span>: <span class="hljs-number">100</span>,\n  <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,\n  <span class="hljs-attr">useNativeDriver</span>: <span class="hljs-literal">true</span>\n}).<span class="hljs-title function_">start</span>();\n</code></pre>\n</li>\n<li><strong>复用动画值</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// 复用同一个动画值</span>\n<span class="hljs-keyword">const</span> animValue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animated</span>.<span class="hljs-title class_">Value</span>(<span class="hljs-number">0</span>);\n\n<span class="hljs-keyword">const</span> scale = animValue.<span class="hljs-title function_">interpolate</span>({\n  <span class="hljs-attr">inputRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>],\n  <span class="hljs-attr">outputRange</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1.5</span>]\n});\n\n<span class="hljs-keyword">const</span> opacity = animValue.<span class="hljs-title function_">interpolate</span>({\n  <span class="hljs-attr">inputRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>],\n  <span class="hljs-attr">outputRange</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>]\n});\n</code></pre>\n</li>\n</ol>\n<h2>八、注意事项</h2>\n<ol>\n<li><strong>原生驱动限制</strong>  ：</li>\n</ol>\n<ul>\n<li>不能用于 <code>left/top/right/bottom</code> 等布局属性</li>\n<li>不能用于 <code>height/width</code> 属性</li>\n<li>手势动画不能使用原生驱动</li>\n</ul>\n<ol start="2">\n<li><strong>组件支持</strong>  ：</li>\n</ol>\n<ul>\n<li>只有 <code>Animated.View</code>、<code>Animated.Text</code>、<code>Animated.Image</code> 等支持动画</li>\n<li>自定义组件需要使用 <code>Animated.createAnimatedComponent()</code> 包装</li>\n</ul>\n<ol start="3">\n<li><strong>调试技巧</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// 查看当前动画值</span>\nfadeAnim.<span class="hljs-title function_">addListener</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value));\n\n<span class="hljs-comment">// 动画完成后清理监听器</span>\n<span class="hljs-keyword">const</span> listener = fadeAnim.<span class="hljs-title function_">addListener</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {});\nfadeAnim.<span class="hljs-title function_">removeListener</span>(listener);\n</code></pre>\n</li>\n</ol>\n<p>React Native 的 Animated API 提供了强大的动画能力，通过合理使用可以创建流畅的用户体验。对于更复杂的动画需求，可以考虑结合 <code>react-native-reanimated</code> 库使用。</p>\n</div>'</script></body></html>