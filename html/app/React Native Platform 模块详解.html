<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x20da5d=_0x1e6d;function _0x1e6d(p,s){var t=_0x4d67();return(_0x1e6d=function(s,a){var n=t[s-=452];void 0===_0x1e6d.UVkcpb&&(_0x1e6d.vCyTOG=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,c=0;n=s.charAt(c++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var e=0,r=l.length;e<r;e++)p+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(p)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)p=(p+l[c]+a.charCodeAt(c%a.length))%256,n=l[c],l[c]=l[p],l[p]=n;for(var c=0,p=0,e=0;e<s.length;e++)n=l[c=(c+1)%256],l[c]=l[p=(p+l[c])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[p])%256]);return t},p=arguments,_0x1e6d.UVkcpb=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0x1e6d.clpQvX&&(_0x1e6d.clpQvX=!0),n=_0x1e6d.vCyTOG(n,a),p[s]=n),n})(p,s)}if((()=>{for(var s=_0x1e6d,a=_0x4d67();;)try{if(256225==-parseInt(s(458,"oT[K"))*(parseInt(s(478,"B7IQ"))/2)+parseInt(s(460,"MASe"))/3+parseInt(s(467,"9J6y"))/4+-parseInt(s(476,"FI%)"))/5*(-parseInt(s(456,"IGtB"))/6)+parseInt(s(464,"$cSq"))/7*(parseInt(s(471,"sU7$"))/8)+parseInt(s(462,"%iEn"))/9*(parseInt(s(477,"wh4C"))/10)+-parseInt(s(473,"!VjZ"))/11)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x20da5d(457,"50Ly")](_0x20da5d(455,"gm[S"))!=_0x20da5d(468,")hbS"))throw window[_0x20da5d(454,"G4ox")][_0x20da5d(474,"jpPM")](_0x20da5d(466,"9L8S")),Error();function _0x4d67(){var s=["nceYWQNcPYxdHrlcP3tcKv7cNW","WOLmW6tcLwTFWOS+lCowomka","W6ntWO3dTCo8WOldOc3dUmk7WQm","W6bzjxVcKcRdNtXfnblcJqa","WPboWP/cOu9AW5q4WPBcRhnyWPBcTrBcVHfyWOVcMMFcJCkHWPJcSSov","dCkAW6VdTYrfCvmzW4rOwG","WOeNWPjHqG","W6bvWPVcNvDSkveNDCkrba","hCkRsCoXnCo5W6BdT8kOWRSCW61n","pq3dT8ogCd3cMxtcQa","W4OLWPBdLb0yc8oPWRFdOM4","teJdKCkqW7aNu8oNW5hdSSkSrmog","wWRcO1LIW5ddOG","WQjyWRTKmu4KWQPZ","W5VcLbbbW7dcQSo+ouRcPW","W5LbgHi5WReSW6S","W5RcTMFdGSk4WOn8","WR3dKLldGSkUwb3cJa","W58szZFcO8oyA8kbCmo1W5mu","f2L+W5vHW5moDW","eSoOy8ohtNNdSgb1","W6xcP2xdRCoOxuhcICkh","DgCAW7n2rMm","W5WlWQtcQeBcVNX1WPDCBmkg","W7ddKcdcH2FcJWVcO8kh","s8k9B8kNhuFcUWRdGmkylCkH","W58iWQdcQqVdT3HkWRfB"];return(_0x4d67=function(){return s})()}document.title="React Native Platform 模块详解",document.getElementById("article").innerHTML='<div><h1>React Native Platform 模块详解</h1>\n<p>Platform 是 React Native 提供的核心模块，用于处理平台特定的代码和样式。以下是全面解析：</p>\n<h2>一、核心功能与基础使用</h2>\n<h3>1. 平台检测基础API</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Platform</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 基本平台检测</span>\n<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span>; <span class="hljs-comment">// &#x27;ios&#x27; 或 &#x27;android&#x27;</span>\n\n<span class="hljs-comment">// 平台版本检测</span>\n<span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span>; \n<span class="hljs-comment">// iOS: 系统版本号 (如 15.0)</span>\n<span class="hljs-comment">// Android: API级别 (如 30)</span>\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span>) {\n  <span class="hljs-comment">// iOS特定代码</span>\n} <span class="hljs-keyword">else</span> {\n  <span class="hljs-comment">// Android特定代码</span>\n}\n</code></pre>\n<h3>2. 平台特定扩展名</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 会自动识别平台后缀的文件</span>\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Button&#x27;</span>; \n<span class="hljs-comment">// 实际加载:</span>\n<span class="hljs-comment">// - ./Button.ios.js</span>\n<span class="hljs-comment">// - ./Button.android.js</span>\n<span class="hljs-comment">// - ./Button.native.js (原生组件)</span>\n</code></pre>\n<h2>二、平台特定样式处理</h2>\n<h3>1. StyleSheet 平台差异</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Platform</span>, <span class="hljs-title class_">StyleSheet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-keyword">const</span> styles = <span class="hljs-title class_">StyleSheet</span>.<span class="hljs-title function_">create</span>({\n  <span class="hljs-attr">container</span>: {\n    <span class="hljs-attr">padding</span>: <span class="hljs-number">16</span>,\n    <span class="hljs-comment">// 平台特定样式</span>\n    ...<span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n      <span class="hljs-attr">ios</span>: {\n        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#f8f8f8&#x27;</span>\n      },\n      <span class="hljs-attr">android</span>: {\n        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#f0f0f0&#x27;</span>\n      }\n    })\n  },\n  <span class="hljs-attr">shadow</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: {\n      <span class="hljs-attr">shadowColor</span>: <span class="hljs-string">&#x27;#000&#x27;</span>,\n      <span class="hljs-attr">shadowOffset</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">2</span> },\n      <span class="hljs-attr">shadowOpacity</span>: <span class="hljs-number">0.2</span>\n    },\n    <span class="hljs-attr">android</span>: {\n      <span class="hljs-attr">elevation</span>: <span class="hljs-number">3</span>\n    }\n  })\n});\n</code></pre>\n<h3>2. 平台特定组件</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据平台渲染不同组件</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title class_">Header</span> = <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n  <span class="hljs-attr">ios</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./HeaderIOS&#x27;</span>),\n  <span class="hljs-attr">android</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./HeaderAndroid&#x27;</span>)\n})();\n\n<span class="hljs-comment">// 使用</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span>\n</code></pre>\n<h2>三、高级平台适配方案</h2>\n<h3>1. 平台版本特定代码</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 检查Android API级别</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span> &amp;&amp; <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span> &gt;= <span class="hljs-number">26</span>) {\n  <span class="hljs-comment">// 处理Android 8.0+特性</span>\n}\n\n<span class="hljs-comment">// 检查iOS版本</span>\n<span class="hljs-keyword">const</span> isIOS13Plus = <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span> &amp;&amp; <span class="hljs-built_in">parseInt</span>(<span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span>, <span class="hljs-number">10</span>) &gt;= <span class="hljs-number">13</span>;\n</code></pre>\n<h3>2. 跨平台组件封装</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">PlatformAwareComponent</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-comment">// 根据平台使用不同实现</span>\n  <span class="hljs-keyword">const</span> platformProps = <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: {\n      <span class="hljs-attr">accessibilityRole</span>: <span class="hljs-string">&#x27;button&#x27;</span>\n    },\n    <span class="hljs-attr">android</span>: {\n      <span class="hljs-attr">accessibilityComponentType</span>: <span class="hljs-string">&#x27;button&#x27;</span>\n    }\n  });\n\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> {<span class="hljs-attr">...platformProps</span>}&gt;</span>\n      {/* 公共内容 */}\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>四、实用工具方法</h2>\n<h3>1. 平台检测Hook</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">usePlatform</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> [platform, setPlatform] = <span class="hljs-title function_">useState</span>({\n    <span class="hljs-attr">os</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span>,\n    <span class="hljs-attr">version</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span>,\n    <span class="hljs-attr">isIOS</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span>,\n    <span class="hljs-attr">isAndroid</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span>,\n    <span class="hljs-attr">isPad</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span> &amp;&amp; <span class="hljs-title class_">Platform</span>.<span class="hljs-property">isPad</span>\n  });\n\n  <span class="hljs-keyword">return</span> platform;\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> { isIOS, version } = <span class="hljs-title function_">usePlatform</span>();\n</code></pre>\n<h3>2. 平台特定常量</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PLATFORM_CONSTANTS</span> = {\n  <span class="hljs-attr">statusBarHeight</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: <span class="hljs-number">44</span>,\n    <span class="hljs-attr">android</span>: <span class="hljs-number">56</span>,\n    <span class="hljs-attr">default</span>: <span class="hljs-number">48</span>\n  }),\n  <span class="hljs-attr">iconSize</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: <span class="hljs-number">30</span>,\n    <span class="hljs-attr">android</span>: <span class="hljs-number">24</span>\n  })\n};\n</code></pre>\n<h2>五、平台特性与差异处理</h2>\n<h3>1. 主要平台差异</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>iOS</th>\n<th>Android</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>导航栏</td>\n<td>有默认样式</td>\n<td>需要自定义</td>\n</tr>\n<tr>\n<td>点击效果</td>\n<td>无涟漪</td>\n<td>有触摸反馈</td>\n</tr>\n<tr>\n<td>字体渲染</td>\n<td>动态字体</td>\n<td>固定大小</td>\n</tr>\n<tr>\n<td>阴影</td>\n<td>shadow属性</td>\n<td>elevation属性</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 跨平台适配最佳实践</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 1. 使用Platform.select处理大部分差异</span>\n<span class="hljs-comment">// 2. 将平台特定代码分离到不同文件</span>\n<span class="hljs-comment">// 3. 对于复杂组件，考虑创建平台特定实现</span>\n\n<span class="hljs-comment">// 示例：安全区域适配</span>\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SafeAreaView</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">SafeAreaAndroid</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./SafeAreaAndroid&#x27;</span>;\n\n<span class="hljs-keyword">const</span> <span class="hljs-title class_">SafeArea</span> = <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n  <span class="hljs-attr">ios</span>: <span class="hljs-title class_">SafeAreaView</span>,\n  <span class="hljs-attr">android</span>: <span class="hljs-title class_">SafeAreaAndroid</span>\n});\n\n<span class="hljs-comment">// 使用</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SafeArea</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.container}</span> /&gt;</span></span>\n</code></pre>\n<h2>六、常见问题解决方案</h2>\n<h3>1. Android版本兼容问题</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useAndroidFeature</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span> &amp;&amp; <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span> &gt;= <span class="hljs-number">23</span>;\n};\n\n<span class="hljs-comment">// 使用</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-title function_">useAndroidFeature</span>()) {\n  <span class="hljs-comment">// 使用新API</span>\n} <span class="hljs-keyword">else</span> {\n  <span class="hljs-comment">// 降级方案</span>\n}\n</code></pre>\n<h3>2. iOS设备特定适配</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 检测iPad</span>\n<span class="hljs-keyword">const</span> isiPad = <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span> &amp;&amp; <span class="hljs-title class_">Platform</span>.<span class="hljs-property">isPad</span>;\n\n<span class="hljs-comment">// 检测iPhone X及以上全面屏</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">isiPhoneX</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> !== <span class="hljs-string">&#x27;ios&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n  \n  <span class="hljs-keyword">const</span> { height, width } = <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;window&#x27;</span>);\n  <span class="hljs-keyword">return</span> (\n    (height &gt;= <span class="hljs-number">812</span> || width &gt;= <span class="hljs-number">812</span>) &amp;&amp; \n    <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span> &gt;= <span class="hljs-string">&#x27;11.0&#x27;</span>\n  );\n};\n</code></pre>\n<h3>3. 第三方库平台差异</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 处理第三方库的平台差异</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">getLibraryComponent</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-keyword">const</span> lib = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;some-library&#x27;</span>);\n  \n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: lib.<span class="hljs-property">IOSComponent</span>,\n    <span class="hljs-attr">android</span>: lib.<span class="hljs-property">AndroidComponent</span>,\n    <span class="hljs-attr">default</span>: lib.<span class="hljs-property">DefaultComponent</span>\n  });\n};\n</code></pre>\n<h2>七、调试与测试技巧</h2>\n<h3>1. 平台模拟调试</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 开发环境下模拟不同平台</span>\n<span class="hljs-keyword">if</span> (__DEV__) {\n  <span class="hljs-title class_">Platform</span>.<span class="hljs-property">__mockOS</span> = <span class="hljs-function"><span class="hljs-params">os</span> =&gt;</span> {\n    <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> = os;\n    <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span> = os === <span class="hljs-string">&#x27;ios&#x27;</span> ? <span class="hljs-string">&#x27;15.0&#x27;</span> : <span class="hljs-string">&#x27;30&#x27;</span>;\n  };\n  \n  <span class="hljs-comment">// 使用示例：</span>\n  <span class="hljs-comment">// Platform.__mockOS(&#x27;android&#x27;);</span>\n}\n</code></pre>\n<h3>2. 自动化测试策略</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 测试文件中设置平台</span>\n<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Platform specific tests&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-title function_">beforeAll</span>(<span class="hljs-function">() =&gt;</span> {\n    jest.<span class="hljs-title function_">mock</span>(<span class="hljs-string">&#x27;react-native/Libraries/Utilities/Platform&#x27;</span>, <span class="hljs-function">() =&gt;</span> ({\n      <span class="hljs-attr">OS</span>: <span class="hljs-string">&#x27;ios&#x27;</span>,\n      <span class="hljs-title class_">Version</span>: <span class="hljs-string">&#x27;15.0&#x27;</span>,\n      <span class="hljs-attr">select</span>: jest.<span class="hljs-title function_">fn</span>(<span class="hljs-function"><span class="hljs-params">ios</span> =&gt;</span> ios.<span class="hljs-property">ios</span>)\n    }));\n  });\n  \n  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should use iOS styles&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-comment">// 测试iOS样式</span>\n  });\n});\n</code></pre>\n<p>通过深入理解 Platform 模块，开发者可以：</p>\n<ol>\n<li>高效处理平台差异</li>\n<li>维护单一代码库的多平台实现</li>\n<li>提升应用在各平台的用户体验</li>\n<li>简化跨平台开发流程</li>\n</ol>\n<p>建议将平台相关代码集中管理，保持业务代码的平台无关性，提高代码可维护性。</p>\n</div>'</script></body></html>