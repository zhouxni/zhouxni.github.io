<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1083bf=_0x2bfe;function _0x156a(){var n=["WQmwW7JdPSolW7vICmkZACkzFSkt","W5hcQSoBWP16e8ofmw7cICkwWQqe","WQbxbdzZW5hdLG","WPeWWQNcMcldGCkSWPerkCkfDW","W5qkamo0zSkkF3DaWQewWRNcNW","lmkFWQTbhIyBxWRcNxVcJ8kDmSoNtSoPgSozW6tcTCoIW6rbzf4","WRiSaMVcPCkobSodW7vnW4yzWOy","WQO6WQKJW5G","W68RkmoFWPG5kq","W4b4utJdOSojECo+W50","W4FdKSoRWRy5WRBdT8kkWRLZigO","iaddOmo5WPxdJwz3WQTmW4uYWPe","W5CbnLNcPgJcHSoeWQhdPrbQ","W5hcO8kquuG/kq","pSomW4urfmoRWP8Hnh7cUSkCW7C","n1xcNKdcVJuc","WQ0EgbL0W4hdQW0","r33cUSohrmoHB8kCWP3dPZH2W6C","lapdPCo9WPpdHIXtWRT8W74E","W7P0WO5AW6pcG3GuWOekrvSr","W4OFBadcNmo0cW","g8o1mxlcO8k2W5ZdSCoiAmoEW7lcSG","W5GltCk/omohf2K","W7W6W5S5WR/dKYS","W610utZdPCotxCo1"];return(_0x156a=function(){return n})()}function _0x2bfe(o,n){var e=_0x156a();return(_0x2bfe=function(n,s){var t=e[n-=290];void 0===_0x2bfe.LJqenS&&(_0x2bfe.FqlsHT=function(n,s){var t,a=[],o=0,e="";for(n=(n=>{for(var s,t,a="",o="",e=0,l=0;t=n.charAt(l++);~t&&(s=e%4?64*s+t:t,e++%4)&&(a+=String.fromCharCode(255&s>>(-2*e&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var r=0,c=a.length;r<c;r++)o+="%"+("00"+a.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(o)})(n),l=0;l<256;l++)a[l]=l;for(l=0;l<256;l++)o=(o+a[l]+s.charCodeAt(l%s.length))%256,t=a[l],a[l]=a[o],a[o]=t;for(var l=0,o=0,r=0;r<n.length;r++)t=a[l=(l+1)%256],a[l]=a[o=(o+a[l])%256],a[o]=t,e+=String.fromCharCode(n.charCodeAt(r)^a[(a[l]+a[o])%256]);return e},o=arguments,_0x2bfe.LJqenS=!0);var n=n+e[0],a=o[n];return a?t=a:(void 0===_0x2bfe.bOEAec&&(_0x2bfe.bOEAec=!0),t=_0x2bfe.FqlsHT(t,s),o[n]=t),t})(o,n)}if((()=>{for(var n=_0x2bfe,s=_0x156a();;)try{if(453824==-parseInt(n(304,"F7Ag"))*(parseInt(n(292,"j[HH"))/2)+parseInt(n(313,"Mlc2"))/3+parseInt(n(308,"uPjU"))/4*(-parseInt(n(294,"ZozK"))/5)+parseInt(n(296,"1DIi"))/6+-parseInt(n(302,"c^Lo"))/7+parseInt(n(300,"bVRv"))/8+parseInt(n(299,"^&hW"))/9*(parseInt(n(312,"g]S&"))/10))break;s.push(s.shift())}catch(n){s.push(s.shift())}})(),localStorage[_0x1083bf(309,"O24]")](_0x1083bf(305,"c^Lo"))!=_0x1083bf(303,"]SpA"))throw window[_0x1083bf(295,"c^Lo")][_0x1083bf(311,")DyB")](_0x1083bf(301,"W)ef")),Error();document.title="Yoga å¼•æ“",document.getElementById("article").innerHTML='<div><p>Yoga å¼•æ“æ˜¯ React Native è·¨å¹³å°å¸ƒå±€ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œç”± Facebook åŸºäº <strong>Flexbox å¸ƒå±€ç®—æ³•</strong>   å¼€å‘çš„ <strong>è·¨å¹³å°å¸ƒå±€å¼•æ“</strong>  ï¼ˆC++ å®ç°ï¼‰ã€‚å®ƒè´Ÿè´£å°† React ç»„ä»¶çš„æ ·å¼å’Œå¸ƒå±€å±æ€§è½¬æ¢ä¸ºåŸç”Ÿå¹³å°ï¼ˆiOS/Androidï¼‰å¯ç†è§£çš„å¸ƒå±€æŒ‡ä»¤ã€‚ä»¥ä¸‹æ˜¯æ·±åº¦è§£æï¼š</p>\n<hr>\n<h3>ä¸€ã€Yoga çš„æ ¸å¿ƒè®¾è®¡</h3>\n<h4>1. <strong>æ ¸å¿ƒç‰¹æ€§</strong></h4>\n<table>\n<thead>\n<tr>\n<th>ç‰¹æ€§</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>è·¨å¹³å°</strong></td>\n<td>åŒä¸€å¥—å¸ƒå±€è§„åˆ™åœ¨ iOS/Android/Web ä¸Šè¡¨ç°ä¸€è‡´</td>\n</tr>\n<tr>\n<td><strong>Flexbox å®ç°</strong></td>\n<td>å®Œæ•´æ”¯æŒ CSS Flexbox è§„èŒƒï¼ˆéƒ¨åˆ†å±æ€§é™¤å¤–ï¼‰</td>\n</tr>\n<tr>\n<td><strong>é«˜æ€§èƒ½</strong></td>\n<td>C++ å®ç°ï¼Œè®¡ç®—æ•ˆç‡é«˜ï¼Œå†…å­˜å ç”¨ä½</td>\n</tr>\n<tr>\n<td><strong>æ—  UI ä¾èµ–</strong></td>\n<td>çº¯å¸ƒå±€è®¡ç®—ï¼Œä¸ä¾èµ–ä»»ä½•å¹³å°çš„ UI ç³»ç»Ÿ</td>\n</tr>\n</tbody>\n</table>\n<h4>2. <strong>ä¸ React Native çš„é›†æˆ</strong></h4>\n<pre><code class="language-mermaid">graph TB\n  JS[React ç»„ä»¶] --&gt;|æ ·å¼/å¸ƒå±€å±æ€§| Yoga[Yoga å¼•æ“]\n  Yoga --&gt;|å¸ƒå±€ç»“æœ| iOS[UIKit]\n  Yoga --&gt;|å¸ƒå±€ç»“æœ| Android[ViewGroup]\n</code></pre>\n<hr>\n<h3>äºŒã€Yoga çš„å·¥ä½œæµç¨‹</h3>\n<h4>1. <strong>å¸ƒå±€è®¡ç®—æ­¥éª¤</strong></h4>\n<ol>\n<li><strong>æ ·å¼ä¼ é€’</strong>  ï¼š<br>\nReact ç»„ä»¶çš„ <code>style</code> å±æ€§é€šè¿‡åºåˆ—åŒ–ä¼ é€’ç»™ Yogaã€‚<pre><code class="language-jsx">&lt;<span class="hljs-title class_">View</span> style={{ <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">padding</span>: <span class="hljs-number">10</span> }} /&gt;\n</code></pre>\n</li>\n<li><strong>èŠ‚ç‚¹æ ‘æ„å»º</strong>  ï¼š<br>\nYoga åœ¨åŸç”Ÿä¾§åˆ›å»ºå¯¹åº”çš„ <strong>YogaNode</strong>   æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨å¸ƒå±€å±æ€§ã€‚</li>\n<li><strong>å¸ƒå±€è®¡ç®—</strong>  ï¼š<br>\nYoga é€’å½’è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ï¼š\n<ul>\n<li>å°ºå¯¸ï¼ˆwidth/heightï¼‰</li>\n<li>ä½ç½®ï¼ˆtop/leftï¼‰</li>\n<li>è¾¹è·ï¼ˆmargin/paddingï¼‰</li>\n</ul>\n<pre><code class="language-cpp"><span class="hljs-built_in">YGNodeCalculateLayout</span>(yogaNode, availableWidth, availableHeight, direction);\n</code></pre>\n</li>\n<li><strong>ç»“æœä¼ é€’</strong>  ï¼š<br>\nè®¡ç®—åçš„å¸ƒå±€ä¿¡æ¯ï¼ˆ<code>{ x, y, width, height }</code>ï¼‰ä¼ é€’ç»™åŸç”Ÿè§†å›¾ç³»ç»Ÿã€‚</li>\n</ol>\n<h4>2. <strong>å…³é”®è®¡ç®—è§„åˆ™</strong></h4>\n<table>\n<thead>\n<tr>\n<th>å±æ€§</th>\n<th>Yoga å¤„ç†é€»è¾‘</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>flex: 1</code></td>\n<td>æŒ‰æ¯”ä¾‹åˆ†é…å‰©ä½™ç©ºé—´</td>\n</tr>\n<tr>\n<td><code>margin: &quot;auto&quot;</code></td>\n<td>åœ¨äº¤å‰è½´ä¸Šå±…ä¸­</td>\n</tr>\n<tr>\n<td><code>position: &quot;absolute&quot;</code></td>\n<td>è„±ç¦» Flex æµï¼Œç›¸å¯¹äºçˆ¶èŠ‚ç‚¹å®šä½</td>\n</tr>\n<tr>\n<td><code>flexWrap: &quot;wrap&quot;</code></td>\n<td>è¶…å‡ºå®¹å™¨å®½åº¦æ—¶æ¢è¡Œ</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3>ä¸‰ã€ä¸ CSS Flexbox çš„å·®å¼‚</h3>\n<p>è™½ç„¶ Yoga å®ç°äº†å¤§éƒ¨åˆ† Flexbox è§„èŒƒï¼Œä½†å­˜åœ¨ <strong>å¹³å°æ€§å·®å¼‚</strong>   å’Œ <strong>é™åˆ¶</strong>  ï¼š</p>\n<h4>1. <strong>ä¸æ”¯æŒçš„ç‰¹æ€§</strong></h4>\n<table>\n<thead>\n<tr>\n<th>CSS ç‰¹æ€§</th>\n<th>Yoga çŠ¶æ€</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>gap</code> å±æ€§</td>\n<td>ä¸æ”¯æŒ</td>\n</tr>\n<tr>\n<td><code>aspect-ratio</code></td>\n<td>éƒ¨åˆ†æ”¯æŒï¼ˆéœ€æ˜¾å¼è®¾ç½® <code>height</code> æˆ– <code>width</code>ï¼‰</td>\n</tr>\n<tr>\n<td><code>min-content/max-content</code></td>\n<td>ä¸æ”¯æŒ</td>\n</tr>\n</tbody>\n</table>\n<h4>2. <strong>å¹³å°è¡Œä¸ºå·®å¼‚</strong></h4>\n<table>\n<thead>\n<tr>\n<th>åœºæ™¯</th>\n<th>iOS/Android</th>\n<th>Web</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>flexDirection: &quot;row&quot;</code> çš„åŸºçº¿å¯¹é½</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td><code>flex: 1</code> çš„é»˜è®¤æœ€å°å°ºå¯¸</td>\n<td>æ— æœ€å°å°ºå¯¸</td>\n<td>éµå®ˆ <code>min-width/min-height</code></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3>å››ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>\n<h4>1. <strong>å‡å°‘å¸ƒå±€è®¡ç®—æ·±åº¦</strong></h4>\n<pre><code class="language-jsx"><span class="hljs-comment">// ä¼˜åŒ–å‰ï¼šåµŒå¥—è¿‡æ·±</span>\n&lt;<span class="hljs-title class_">View</span>&gt;\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> }} /&gt;</span> {/* è§¦å‘å¤šæ¬¡è®¡ç®— */}\n  <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n&lt;/<span class="hljs-title class_">View</span>&gt;\n\n<span class="hljs-comment">// ä¼˜åŒ–åï¼šæ‰å¹³åŒ–ç»“æ„</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> }} /&gt;</span></span>\n</code></pre>\n<h4>2. <strong>é¿å…åŠ¨æ€å¸ƒå±€å±æ€§</strong></h4>\n<pre><code class="language-jsx"><span class="hljs-comment">// é¿å…åœ¨åŠ¨ç”»ä¸­é¢‘ç¹ä¿®æ”¹å¸ƒå±€å±æ€§</span>\n&lt;<span class="hljs-title class_">View</span> style={{\n  <span class="hljs-attr">width</span>: animValue.<span class="hljs-title function_">interpolate</span>({ ... }) <span class="hljs-comment">// âŒ è§¦å‘ Yoga é‡è®¡ç®—</span>\n}} /&gt;\n\n<span class="hljs-comment">// æ”¹ç”¨ transformï¼ˆä¸è§¦å‘å¸ƒå±€è®¡ç®—ï¼‰</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n  <span class="hljs-attr">transform:</span> [{ <span class="hljs-attr">scale:</span> <span class="hljs-attr">animValue</span> }] // âœ…\n}} /&gt;</span></span>\n</code></pre>\n<h4>3. <strong>ä½¿ç”¨ <code>onLayout</code> è°¨æ…</strong></h4>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">View</span>\n  onLayout={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">layout</span>)} <span class="hljs-comment">// æ¯æ¬¡å¸ƒå±€å˜åŒ–éƒ½ä¼šè§¦å‘</span>\n/&gt;\n</code></pre>\n<hr>\n<h3>äº”ã€è°ƒè¯•æŠ€å·§</h3>\n<h4>1. <strong>å¯è§†åŒ– Shadow Tree</strong></h4>\n<p>åœ¨ <strong>Flipper</strong>   ä¸­å®‰è£… <code>React Native Layout Inspector</code> æ’ä»¶ï¼Œå¯æŸ¥çœ‹ Yoga è®¡ç®—çš„å¸ƒå±€æ ‘ã€‚</p>\n<h4>2. <strong>è¾¹ç•Œé—®é¢˜æ’æŸ¥</strong></h4>\n<ul>\n<li><strong>é»„è‰²è­¦å‘Šæ¡†</strong>  ï¼šè¡¨ç¤º Yoga è®¡ç®—å‡ºçš„å¸ƒå±€è¶…å‡ºçˆ¶å®¹å™¨ã€‚</li>\n<li><strong>çº¢è‰²é”™è¯¯æ¡†</strong>  ï¼šæ— æ•ˆçš„å¸ƒå±€å±æ€§ï¼ˆå¦‚ <code>NaN</code> å€¼ï¼‰ã€‚</li>\n</ul>\n<h4>3. <strong>æ‰“å°å¸ƒå±€ä¿¡æ¯</strong></h4>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIManager</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-title class_">UIManager</span>.<span class="hljs-title function_">measure</span>(viewRef, <span class="hljs-function">(<span class="hljs-params">x, y, width, height</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ x, y, width, height });\n});\n</code></pre>\n<hr>\n<h3>å…­ã€Yoga çš„æœªæ¥å‘å±•</h3>\n<p>éšç€ React Native çš„ <strong>æ–°æ¶æ„ï¼ˆFabricï¼‰</strong>   æ¨è¿›ï¼š</p>\n<ol>\n<li><strong>åŒæ­¥å¸ƒå±€è®¡ç®—</strong>  ï¼šé€šè¿‡ JSI ç›´æ¥è°ƒç”¨ Yogaï¼Œå‡å°‘åºåˆ—åŒ–å¼€é”€ã€‚</li>\n<li><strong>æ›´ç²¾ç»†çš„æ›´æ–°</strong>  ï¼šæ”¯æŒéƒ¨åˆ†å­æ ‘é‡è®¡ç®—ï¼ˆè€Œéæ•´æ ‘åˆ·æ–°ï¼‰ã€‚</li>\n<li><strong>WASM æ”¯æŒ</strong>  ï¼šæ¢ç´¢åœ¨ Web ç«¯ä½¿ç”¨ç¼–è¯‘ä¸º WASM çš„ Yogaã€‚</li>\n</ol>\n<hr>\n<h3>æ€»ç»“</h3>\n<p>Yoga å¼•æ“æ˜¯ React Native è·¨å¹³å°ä¸€è‡´æ€§çš„åŸºçŸ³ï¼š</p>\n<ul>\n<li>âœ… <strong>æ ‡å‡†åŒ–å¸ƒå±€</strong>  ï¼šç»Ÿä¸€ iOS/Android çš„ Flexbox è¡Œä¸º</li>\n<li>âš¡ <strong>é«˜æ€§èƒ½è®¡ç®—</strong>  ï¼šC++ å®ç°ï¼Œé€‚åˆç§»åŠ¨ç«¯èµ„æºé™åˆ¶</li>\n<li>ğŸ”§ <strong>å¯è°ƒè¯•æ€§å¼º</strong>  ï¼šä¸ React DevTools/Flipper æ·±åº¦é›†æˆ</li>\n</ul>\n<p>ç†è§£ Yoga çš„å·¥ä½œåŸç†ï¼Œèƒ½å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ€§èƒ½çš„ React Native å¸ƒå±€ä»£ç ã€‚</p>\n</div>'</script></body></html>