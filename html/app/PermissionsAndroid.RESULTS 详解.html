<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x2053c6=_0x4ad3;function _0x4ad3(p,s){var t=_0x2c99();return(_0x4ad3=function(s,n){var a=t[s-=354];void 0===_0x4ad3.qFHbJq&&(_0x4ad3.qCMPcu=function(s,n){var a,l=[],p=0,t="";for(s=(s=>{for(var n,a,l="",p="",t=0,r=0;a=s.charAt(r++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,e=l.length;c<e;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),r=0;r<256;r++)l[r]=r;for(r=0;r<256;r++)p=(p+l[r]+n.charCodeAt(r%n.length))%256,a=l[r],l[r]=l[p],l[p]=a;for(var r=0,p=0,c=0;c<s.length;c++)a=l[r=(r+1)%256],l[r]=l[p=(p+l[r])%256],l[p]=a,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[r]+l[p])%256]);return t},p=arguments,_0x4ad3.qFHbJq=!0);var s=s+t[0],l=p[s];return l?a=l:(void 0===_0x4ad3.KERuLo&&(_0x4ad3.KERuLo=!0),a=_0x4ad3.qCMPcu(a,n),p[s]=a),a})(p,s)}function _0x2c99(){var s=["q27cTGGOCHq","W4GotgSmEsmtWR3dUSkydG","W5bTcCoUW4mAW5aX","DfzbkSonWOe/eSkxEHtcOgS","ic4nxSo9qhK","yJivtmo6W6xdJmoLW7T1W7VcUCkS","W4i6vXNdM0H4CGLjW4RdHZG","W6NdGmondSkhW57dQmk7WQGHW7f3","W58gp2RdRmonWRX0WP8PW5iaEW","WO/cLbJdVSkFnIlcSXXpW7G","Bxy0W43cNXLC","CvXnkSolWOi0eSkotq7cLxO","Dvb1xWOYWRpcIWFcPmkjW6ddOW","e2FdVZzLh1PF","Dfuqc3jIW4lcTW","zmoxBSodASkknWVcSCk/wa","jdqrW4ScW77cMLtdSCkeFCkdlq","zWGFsIG+W70HwISPW5/cSSo0vK9aWOJdRvlcL8orWQpcMcnP","W7K/W5mmua","oSoutSk1amkrW7NdO8kGWQFdG1Gu","W53dQSkHcWm0c8kOra","lcZdKSkvWQddOrZdQmomWO1HWRK+","DrWwECoOB3y","xJD6r8kzWPnMx8oTg8k+WPOt"];return(_0x2c99=function(){return s})()}if((()=>{for(var s=_0x4ad3,n=_0x2c99();;)try{if(660047==+parseInt(s(364,"PMOJ"))*(-parseInt(s(359,"#MPs"))/2)+parseInt(s(356,"UEsy"))/3+parseInt(s(374,"Yy45"))/4+parseInt(s(367,"H&yZ"))/5+parseInt(s(361,"E[O5"))/6+-parseInt(s(358,"YnYu"))/7+-parseInt(s(366,"YnYu"))/8*(parseInt(s(368,"EHUo"))/9))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x2053c6(377,"#MPs")](_0x2053c6(375,"VChy"))!=_0x2053c6(373,"hfEy"))throw window[_0x2053c6(357,"R1Et")][_0x2053c6(365,"r#Z6")](_0x2053c6(372,"lezm")),Error();document.title="PermissionsAndroid.RESULTS 详解",document.getElementById("article").innerHTML='<div><p><code>PermissionsAndroid.RESULTS</code> 是 React Native 中用于表示权限请求结果的枚举对象，它定义了 Android 权限请求可能返回的各种状态。</p>\n<h2>基本定义</h2>\n<p><code>PermissionsAndroid.RESULTS</code> 包含以下常量：</p>\n<pre><code class="language-javascript">{\n  <span class="hljs-attr">GRANTED</span>: <span class="hljs-string">&#x27;granted&#x27;</span>,      <span class="hljs-comment">// 用户已授予权限</span>\n  <span class="hljs-attr">DENIED</span>: <span class="hljs-string">&#x27;denied&#x27;</span>,        <span class="hljs-comment">// 用户已拒绝权限</span>\n  <span class="hljs-attr">NEVER_ASK_AGAIN</span>: <span class="hljs-string">&#x27;never_ask_again&#x27;</span> <span class="hljs-comment">// 用户拒绝并选择&quot;不再询问&quot;</span>\n}\n</code></pre>\n<h2>各状态含义</h2>\n<h3>1. <code>GRANTED</code></h3>\n<ul>\n<li><strong>含义</strong>  : 用户已明确授予请求的权限</li>\n<li><strong>后续操作</strong>  : 可以直接使用相关功能</li>\n<li><strong>示例处理</strong>  :<pre><code class="language-javascript"><span class="hljs-keyword">if</span> (result === <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">RESULTS</span>.<span class="hljs-property">GRANTED</span>) {\n  <span class="hljs-comment">// 执行需要权限的操作</span>\n  <span class="hljs-title function_">takePhoto</span>();\n}\n</code></pre>\n</li>\n</ul>\n<h3>2. <code>DENIED</code></h3>\n<ul>\n<li><strong>含义</strong>  : 用户拒绝了权限请求</li>\n<li><strong>后续操作</strong>  :\n<ul>\n<li>可以再次请求权限</li>\n<li>或解释为什么需要此权限</li>\n</ul>\n</li>\n<li><strong>示例处理</strong>  :<pre><code class="language-javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result === <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">RESULTS</span>.<span class="hljs-property">DENIED</span>) {\n  <span class="hljs-title function_">showPermissionRationale</span>();\n}\n</code></pre>\n</li>\n</ul>\n<h3>3. <code>NEVER_ASK_AGAIN</code></h3>\n<ul>\n<li><strong>含义</strong>  : 用户拒绝了权限并勾选&quot;不再询问&quot;</li>\n<li><strong>后续操作</strong>  :\n<ul>\n<li>引导用户去应用设置手动开启权限</li>\n<li>提供无权限情况下的备用方案</li>\n</ul>\n</li>\n<li><strong>示例处理</strong>  :<pre><code class="language-javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result === <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">RESULTS</span>.<span class="hljs-property">NEVER_ASK_AGAIN</span>) {\n  <span class="hljs-title class_">Alert</span>.<span class="hljs-title function_">alert</span>(\n    <span class="hljs-string">&#x27;权限被永久拒绝&#x27;</span>,\n    <span class="hljs-string">&#x27;请前往设置-应用权限中手动开启权限&#x27;</span>,\n    [\n      {<span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;取消&#x27;</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">&#x27;cancel&#x27;</span>},\n      {<span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;去设置&#x27;</span>, <span class="hljs-attr">onPress</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openSettings</span>()}\n    ]\n  );\n}\n</code></pre>\n</li>\n</ul>\n<h2>完整使用示例</h2>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PermissionsAndroid</span>, <span class="hljs-title class_">Platform</span>, <span class="hljs-title class_">Alert</span>, <span class="hljs-title class_">Linking</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">requestCameraPermission</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> !== <span class="hljs-string">&#x27;android&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">const</span> granted = <span class="hljs-keyword">await</span> <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-title function_">request</span>(\n      <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">PERMISSIONS</span>.<span class="hljs-property">CAMERA</span>,\n      {\n        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;相机权限请求&#x27;</span>,\n        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;我们需要访问您的相机以拍摄照片&#x27;</span>,\n        <span class="hljs-attr">buttonPositive</span>: <span class="hljs-string">&#x27;同意&#x27;</span>,\n        <span class="hljs-attr">buttonNegative</span>: <span class="hljs-string">&#x27;拒绝&#x27;</span>,\n      }\n    );\n\n    <span class="hljs-keyword">switch</span> (granted) {\n      <span class="hljs-keyword">case</span> <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">RESULTS</span>.<span class="hljs-property">GRANTED</span>:\n        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;相机权限已授予&#x27;</span>);\n        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n      <span class="hljs-keyword">case</span> <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">RESULTS</span>.<span class="hljs-property">DENIED</span>:\n        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;相机权限被拒绝&#x27;</span>);\n        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n      <span class="hljs-keyword">case</span> <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">RESULTS</span>.<span class="hljs-property">NEVER_ASK_AGAIN</span>:\n        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;相机权限被永久拒绝&#x27;</span>);\n        <span class="hljs-title function_">showSettingsAlert</span>();\n        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n      <span class="hljs-attr">default</span>:\n        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n    }\n  } <span class="hljs-keyword">catch</span> (err) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;请求相机权限出错:&#x27;</span>, err);\n    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n  }\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">showSettingsAlert</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-title class_">Alert</span>.<span class="hljs-title function_">alert</span>(\n    <span class="hljs-string">&#x27;权限设置&#x27;</span>,\n    <span class="hljs-string">&#x27;相机权限已被永久拒绝，请前往应用设置中手动开启&#x27;</span>,\n    [\n      { <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;取消&#x27;</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">&#x27;cancel&#x27;</span> },\n      { <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;打开设置&#x27;</span>, <span class="hljs-attr">onPress</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openSettings</span>() }\n    ]\n  );\n}\n</code></pre>\n<h2>注意事项</h2>\n<ol>\n<li><strong>Android 版本差异</strong>  :\n<ul>\n<li>对于 Android 6.0 (API 23) 以下设备，权限在安装时自动授予</li>\n<li><code>NEVER_ASK_AGAIN</code> 状态只在用户明确拒绝并选择&quot;不再询问&quot;时返回</li>\n</ul>\n</li>\n<li><strong>权限组行为</strong>  :\n<ul>\n<li>Android 将权限分组管理</li>\n<li>如果用户已授予同组的某个权限，同一组的其他权限可能会自动授予</li>\n</ul>\n</li>\n<li><strong>最佳实践</strong>  :<pre><code class="language-javascript"><span class="hljs-comment">// 在请求权限前先检查状态</span>\n<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkAndRequestPermission</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> hasPermission = <span class="hljs-keyword">await</span> <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-title function_">check</span>(\n    <span class="hljs-title class_">PermissionsAndroid</span>.<span class="hljs-property">PERMISSIONS</span>.<span class="hljs-property">CAMERA</span>\n  );\n  \n  <span class="hljs-keyword">if</span> (!hasPermission) {\n    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestCameraPermission</span>();\n  }\n  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n}\n</code></pre>\n</li>\n<li><strong>错误处理</strong>  :\n<ul>\n<li>始终用 try-catch 包裹权限请求</li>\n<li>处理用户拒绝权限后的降级方案</li>\n</ul>\n</li>\n</ol>\n<p>通过合理使用 <code>PermissionsAndroid.RESULTS</code>，可以构建更友好的权限请求流程，提升用户体验和应用稳定性。</p>\n</div>'</script></body></html>