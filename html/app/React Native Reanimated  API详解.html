<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x9d8c(p,s){var t=_0x1c6f();return(_0x9d8c=function(s,a){var n=t[s-=344];void 0===_0x9d8c.rBrfxI&&(_0x9d8c.SjoBGa=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,e=0;n=s.charAt(e++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)p=(p+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[p],l[p]=n;for(var e=0,p=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[p=(p+l[e])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[p])%256]);return t},p=arguments,_0x9d8c.rBrfxI=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0x9d8c.DvDVNJ&&(_0x9d8c.DvDVNJ=!0),n=_0x9d8c.SjoBGa(n,a),p[s]=n),n})(p,s)}var _0x159bf5=_0x9d8c;function _0x1c6f(){var s=["WQvFp8k/bNaOv8kt","fSo5W7K/ctpdQmoqbf8NW6jrW7ldTetcUKhdNuGslCkDefxdNa","s8kwWR7dRCoHWPxdQq","WRTpvsFcSLBdKG","W63dVe/dVYm","WOPCBmo+BSomFmkaWP1cfqhcH2K","WQbCjexcKSoSW7y","cN4vACoMW5VcRa","W53dTSkHW7hcR0z+s8o1aSkoW6hcRKe","W4eADSo+u8oEBJtdQx3dTmkYWPW","cXn3p8kHWQJdSxyspepcVSko","W7ecbmoXemo2pSk3q0y","W6VcV8kJvSoEhCkJtIi","W7VcIHK5W5jNWP/dJSk/EK7cV2FdRa","W4PCWP5NfSkevqa","WRdcTuWNWQKGq8oDhSkDBmkxW48","WRz4hmoPW5L3omkFW6y","aColWPbgxCo2W4dcI1G","fNJcHCkFg8kLnG","WP7cOSoOWQRdTXyI","WPCcW40+v8kFEsJdTCo6pa","WOHvBSo3B8ooDSo7WPHXorBcIq","WPJdJCkXqtBdUbpcLfxdG8kweHS","txVdMMaYW5L1W65vwCo1WQxdQa","xcRcR8kiW5tcK8onFSoDW57cOq","W7JcJXq+WPiNW67cJ8kIwG","W4qDD8koeCkOcdFdLq","q8ojWPOgW7xdQ8kWrmkwumo4WR7cTSkT"];return(_0x1c6f=function(){return s})()}if((()=>{for(var s=_0x9d8c,a=_0x1c6f();;)try{if(614136==-parseInt(s(367,"xqS["))*(-parseInt(s(352,"Vea4"))/2)+parseInt(s(365,"$XdI"))/3*(-parseInt(s(358,"3zEV"))/4)+-parseInt(s(371,"ks1%"))/5*(-parseInt(s(364,"D0ub"))/6)+parseInt(s(356,"LDqA"))/7+-parseInt(s(363,"4[dT"))/8*(-parseInt(s(348,"TuCv"))/9)+-parseInt(s(368,")bfK"))/10+-parseInt(s(349,"x(LP"))/11)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x159bf5(344,"BB!$")](_0x159bf5(369,"fGf2"))!=_0x159bf5(345,"Ul8("))throw window[_0x159bf5(355,"QEX6")][_0x159bf5(360,"x(LP")](_0x159bf5(370,"2[7V")),Error();document.title="React Native Reanimated  API详解",document.getElementById("article").innerHTML='<div><h1>React Native Reanimated API 详解</h1>\n<p>Reanimated 是 React Native 的高性能动画库，提供了比原生 Animated API 更强大的功能。以下是 Reanimated 2+ 版本的 API 详细解析：</p>\n<h2>一、核心 API</h2>\n<h3>1. 动画值 (Shared Values)</h3>\n<h4><code>useSharedValue(initialValue)</code></h4>\n<p>创建可在 UI 线程和 JS 线程之间共享的动画值</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { useSharedValue } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-reanimated&#x27;</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// 创建共享值</span>\n  <span class="hljs-keyword">const</span> opacity = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0.5</span>);\n  \n  <span class="hljs-comment">// 更新值</span>\n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateValues</span> = (<span class="hljs-params"></span>) =&gt; {\n    width.<span class="hljs-property">value</span> = <span class="hljs-number">200</span>; <span class="hljs-comment">// 直接修改 .value 属性</span>\n    opacity.<span class="hljs-property">value</span> = <span class="hljs-number">1</span>;\n  };\n}\n</code></pre>\n<h3>2. 动画样式 (Animated Styles)</h3>\n<h4><code>useAnimatedStyle(() =&gt; styleObject)</code></h4>\n<p>创建响应共享值变化的动画样式</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { useAnimatedStyle } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-reanimated&#x27;</span>;\n\n<span class="hljs-keyword">const</span> animatedStyle = <span class="hljs-title function_">useAnimatedStyle</span>(<span class="hljs-function">() =&gt;</span> ({\n  <span class="hljs-attr">width</span>: width.<span class="hljs-property">value</span>,\n  <span class="hljs-attr">opacity</span>: opacity.<span class="hljs-property">value</span>,\n  <span class="hljs-attr">transform</span>: [\n    { <span class="hljs-attr">scale</span>: scale.<span class="hljs-property">value</span> },\n    { <span class="hljs-attr">rotate</span>: <span class="hljs-string">`<span class="hljs-subst">${rotation.value}</span>deg`</span> }\n  ]\n}));\n\n<span class="hljs-comment">// 使用</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[styles.box,</span> <span class="hljs-attr">animatedStyle</span>]} /&gt;</span></span>\n</code></pre>\n<h3>3. 动画函数</h3>\n<h4>基础动画函数：</h4>\n<ul>\n<li><code>withTiming(value, config)</code> - 时间动画</li>\n</ul>\n<pre><code class="language-javascript">width.<span class="hljs-property">value</span> = <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">300</span>, {\n  <span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>,\n  <span class="hljs-attr">easing</span>: <span class="hljs-title class_">Easing</span>.<span class="hljs-title function_">inOut</span>(<span class="hljs-title class_">Easing</span>.<span class="hljs-property">ease</span>)\n});\n</code></pre>\n<ul>\n<li><code>withSpring(value, config)</code> - 弹簧动画</li>\n</ul>\n<pre><code class="language-javascript">height.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">200</span>, {\n  <span class="hljs-attr">damping</span>: <span class="hljs-number">10</span>,\n  <span class="hljs-attr">stiffness</span>: <span class="hljs-number">100</span>\n});\n</code></pre>\n<ul>\n<li><code>withDecay(config)</code> - 衰减动画</li>\n</ul>\n<pre><code class="language-javascript">position.<span class="hljs-property">value</span> = <span class="hljs-title function_">withDecay</span>({\n  <span class="hljs-attr">velocity</span>: <span class="hljs-number">0.5</span>,\n  <span class="hljs-attr">clamp</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>] <span class="hljs-comment">// 限制范围</span>\n});\n</code></pre>\n<h4>组合动画函数：</h4>\n<ul>\n<li><code>withDelay(duration, animation)</code> - 延迟执行</li>\n</ul>\n<pre><code class="language-javascript">opacity.<span class="hljs-property">value</span> = <span class="hljs-title function_">withDelay</span>(<span class="hljs-number">1000</span>, <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">1</span>));\n</code></pre>\n<ul>\n<li><code>withSequence(...animations)</code> - 顺序执行</li>\n</ul>\n<pre><code class="language-javascript">scale.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSequence</span>(\n  <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">1.5</span>, { <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span> }),\n  <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">1</span>, { <span class="hljs-attr">duration</span>: <span class="hljs-number">200</span> })\n);\n</code></pre>\n<ul>\n<li><code>withRepeat(animation, numberOfReps, reverse)</code> - 重复执行</li>\n</ul>\n<pre><code class="language-javascript">rotation.<span class="hljs-property">value</span> = <span class="hljs-title function_">withRepeat</span>(\n  <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">360</span>, { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span> }),\n  -<span class="hljs-number">1</span>, <span class="hljs-comment">// 无限循环</span>\n  <span class="hljs-literal">true</span> <span class="hljs-comment">// 往返动画</span>\n);\n</code></pre>\n<h2>二、手势处理 API</h2>\n<h3><code>useAnimatedGestureHandler(handlers)</code></h3>\n<p>创建动画手势处理器</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GestureDetector</span>, <span class="hljs-title class_">Gesture</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-gesture-handler&#x27;</span>;\n<span class="hljs-keyword">import</span> { useAnimatedGestureHandler } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-reanimated&#x27;</span>;\n\n<span class="hljs-keyword">const</span> panGesture = <span class="hljs-title class_">Gesture</span>.<span class="hljs-title class_">Pan</span>()\n  .<span class="hljs-title function_">onBegin</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-comment">// 手势开始</span>\n  })\n  .<span class="hljs-title function_">onUpdate</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n    <span class="hljs-comment">// 手势更新</span>\n    offset.<span class="hljs-property">value</span> = e.<span class="hljs-property">translationX</span>;\n  })\n  .<span class="hljs-title function_">onEnd</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-comment">// 手势结束</span>\n    offset.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n  });\n\n<span class="hljs-comment">// 使用</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">GestureDetector</span> <span class="hljs-attr">gesture</span>=<span class="hljs-string">{panGesture}</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{animatedStyle}</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">GestureDetector</span>&gt;</span></span>\n</code></pre>\n<h2>三、派生值与反应</h2>\n<h3><code>useDerivedValue(() =&gt; computation)</code></h3>\n<p>创建基于其他共享值的派生值</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> circumference = <span class="hljs-title function_">useDerivedValue</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * radius.<span class="hljs-property">value</span>;\n});\n</code></pre>\n<h3><code>useAnimatedReaction(what, action)</code></h3>\n<p>监听共享值变化并执行操作</p>\n<pre><code class="language-javascript"><span class="hljs-title function_">useAnimatedReaction</span>(\n  <span class="hljs-function">() =&gt;</span> scrollY.<span class="hljs-property">value</span>,\n  <span class="hljs-function">(<span class="hljs-params">current</span>) =&gt;</span> {\n    <span class="hljs-keyword">if</span> (current &gt; <span class="hljs-number">100</span>) {\n      headerOpacity.<span class="hljs-property">value</span> = <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">0</span>);\n    } <span class="hljs-keyword">else</span> {\n      headerOpacity.<span class="hljs-property">value</span> = <span class="hljs-title function_">withTiming</span>(<span class="hljs-number">1</span>);\n    }\n  }\n);\n</code></pre>\n<h2>四、插值函数</h2>\n<h3><code>interpolate(value, inputRange, outputRange, extrapolate)</code></h3>\n<p>在输入范围和输出范围之间映射值</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> animatedStyle = <span class="hljs-title function_">useAnimatedStyle</span>(<span class="hljs-function">() =&gt;</span> ({\n  <span class="hljs-attr">height</span>: <span class="hljs-title function_">interpolate</span>(\n    scrollY.<span class="hljs-property">value</span>,\n    [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],        <span class="hljs-comment">// 输入范围</span>\n    [<span class="hljs-number">200</span>, <span class="hljs-number">50</span>],       <span class="hljs-comment">// 输出范围</span>\n    <span class="hljs-title class_">Extrapolate</span>.<span class="hljs-property">CLAMP</span> <span class="hljs-comment">// 超出范围的处理方式</span>\n  )\n}));\n</code></pre>\n<h2>五、动画组件</h2>\n<h3><code>Animated.createAnimatedComponent(Component)</code></h3>\n<p>创建支持动画的自定义组件</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">AnimatedFlatList</span> = <span class="hljs-title class_">Animated</span>.<span class="hljs-title function_">createAnimatedComponent</span>(<span class="hljs-title class_">FlatList</span>);\n\n<span class="hljs-comment">// 使用</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnimatedFlatList</span>\n  <span class="hljs-attr">scrollEventThrottle</span>=<span class="hljs-string">{16}</span>\n  <span class="hljs-attr">onScroll</span>=<span class="hljs-string">{Animated.event(</span>\n    [{ <span class="hljs-attr">nativeEvent:</span> { <span class="hljs-attr">contentOffset:</span> { <span class="hljs-attr">y:</span> <span class="hljs-attr">scrollY</span> } } }],\n    { <span class="hljs-attr">useNativeDriver:</span> <span class="hljs-attr">true</span> }\n  )}\n/&gt;</span></span>\n</code></pre>\n<h2>六、工作线程 (Worklets)</h2>\n<h3><code>runOnUI(() =&gt; {})</code> 和 <code>runOnJS(() =&gt; {})</code></h3>\n<p>在 UI 线程或 JS 线程执行代码</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">workletFunction</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-string">&#x27;worklet&#x27;</span>; <span class="hljs-comment">// 必须标记为 worklet</span>\n  <span class="hljs-keyword">if</span> (scale.<span class="hljs-property">value</span> &gt; <span class="hljs-number">1.5</span>) {\n    <span class="hljs-title function_">runOnJS</span>(callback)(); <span class="hljs-comment">// 回调到 JS 线程</span>\n  }\n};\n</code></pre>\n<h2>七、实用工具</h2>\n<h3><code>measure(viewRef)</code></h3>\n<p>测量组件尺寸</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> viewRef = <span class="hljs-title function_">useAnimatedRef</span>();\n\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">measureView</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-string">&#x27;worklet&#x27;</span>;\n  <span class="hljs-keyword">const</span> layout = <span class="hljs-title function_">measure</span>(viewRef);\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(layout.<span class="hljs-property">width</span>, layout.<span class="hljs-property">height</span>);\n};\n</code></pre>\n<h3><code>scrollTo(ref, x, y, animated)</code></h3>\n<p>滚动到指定位置</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> scrollViewRef = <span class="hljs-title function_">useAnimatedRef</span>();\n\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollToTop</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-title function_">scrollTo</span>(scrollViewRef, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>);\n};\n</code></pre>\n<h2>八、完整示例 - 交互式卡片</h2>\n<pre><code class="language-jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StyleSheet</span>, <span class="hljs-title class_">View</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">Animated</span>, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n  interpolate,\n  useAnimatedGestureHandler,\n  <span class="hljs-title class_">Extrapolate</span>\n} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-reanimated&#x27;</span>;\n<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PanGestureHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-gesture-handler&#x27;</span>;\n\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">Card</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-keyword">const</span> translateX = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0</span>);\n  <span class="hljs-keyword">const</span> translateY = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">0</span>);\n  <span class="hljs-keyword">const</span> scale = <span class="hljs-title function_">useSharedValue</span>(<span class="hljs-number">1</span>);\n  \n  <span class="hljs-keyword">const</span> gestureHandler = <span class="hljs-title function_">useAnimatedGestureHandler</span>({\n    <span class="hljs-attr">onStart</span>: <span class="hljs-function">(<span class="hljs-params">_, ctx</span>) =&gt;</span> {\n      ctx.<span class="hljs-property">startX</span> = translateX.<span class="hljs-property">value</span>;\n      ctx.<span class="hljs-property">startY</span> = translateY.<span class="hljs-property">value</span>;\n    },\n    <span class="hljs-attr">onActive</span>: <span class="hljs-function">(<span class="hljs-params">event, ctx</span>) =&gt;</span> {\n      translateX.<span class="hljs-property">value</span> = ctx.<span class="hljs-property">startX</span> + event.<span class="hljs-property">translationX</span>;\n      translateY.<span class="hljs-property">value</span> = ctx.<span class="hljs-property">startY</span> + event.<span class="hljs-property">translationY</span>;\n      \n      <span class="hljs-comment">// 根据移动距离计算缩放比例</span>\n      <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(\n        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(event.<span class="hljs-property">translationX</span>, <span class="hljs-number">2</span>) + \n        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(event.<span class="hljs-property">translationY</span>, <span class="hljs-number">2</span>)\n      );\n      \n      scale.<span class="hljs-property">value</span> = <span class="hljs-title function_">interpolate</span>(\n        distance,\n        [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],\n        [<span class="hljs-number">1</span>, <span class="hljs-number">0.9</span>],\n        <span class="hljs-title class_">Extrapolate</span>.<span class="hljs-property">CLAMP</span>\n      );\n    },\n    <span class="hljs-attr">onEnd</span>: <span class="hljs-function">() =&gt;</span> {\n      <span class="hljs-comment">// 松手后回到原位</span>\n      translateX.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n      translateY.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">0</span>);\n      scale.<span class="hljs-property">value</span> = <span class="hljs-title function_">withSpring</span>(<span class="hljs-number">1</span>);\n    }\n  });\n\n  <span class="hljs-keyword">const</span> animatedStyle = <span class="hljs-title function_">useAnimatedStyle</span>(<span class="hljs-function">() =&gt;</span> ({\n    <span class="hljs-attr">transform</span>: [\n      { <span class="hljs-attr">translateX</span>: translateX.<span class="hljs-property">value</span> },\n      { <span class="hljs-attr">translateY</span>: translateY.<span class="hljs-property">value</span> },\n      { <span class="hljs-attr">scale</span>: scale.<span class="hljs-property">value</span> }\n    ],\n    <span class="hljs-attr">shadowOpacity</span>: <span class="hljs-title function_">interpolate</span>(\n      scale.<span class="hljs-property">value</span>,\n      [<span class="hljs-number">0.9</span>, <span class="hljs-number">1</span>],\n      [<span class="hljs-number">0.2</span>, <span class="hljs-number">0.05</span>],\n      <span class="hljs-title class_">Extrapolate</span>.<span class="hljs-property">CLAMP</span>\n    )\n  }));\n\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.container}</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">PanGestureHandler</span> <span class="hljs-attr">onGestureEvent</span>=<span class="hljs-string">{gestureHandler}</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">Animated.View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{[styles.card,</span> <span class="hljs-attr">animatedStyle</span>]} /&gt;</span>\n      <span class="hljs-tag">&lt;/<span class="hljs-name">PanGestureHandler</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n};\n\n<span class="hljs-keyword">const</span> styles = <span class="hljs-title class_">StyleSheet</span>.<span class="hljs-title function_">create</span>({\n  <span class="hljs-attr">container</span>: {\n    <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,\n    <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">&#x27;center&#x27;</span>,\n    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">&#x27;center&#x27;</span>\n  },\n  <span class="hljs-attr">card</span>: {\n    <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,\n    <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,\n    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;white&#x27;</span>,\n    <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">16</span>,\n    <span class="hljs-attr">shadowColor</span>: <span class="hljs-string">&#x27;#000&#x27;</span>,\n    <span class="hljs-attr">shadowOffset</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">2</span> },\n    <span class="hljs-attr">shadowRadius</span>: <span class="hljs-number">6</span>\n  }\n});\n</code></pre>\n<h2>九、最佳实践</h2>\n<ol>\n<li><strong>性能优化</strong>  ：</li>\n</ol>\n<ul>\n<li>尽可能使用 <code>useNativeDriver: true</code></li>\n<li>避免在动画回调中执行复杂逻辑</li>\n<li>使用 <code>useDerivedValue</code> 减少计算量</li>\n</ul>\n<ol start="2">\n<li><strong>代码组织</strong>  ：</li>\n</ol>\n<ul>\n<li>将复杂动画逻辑提取到单独文件</li>\n<li>使用自定义 hooks 封装复用动画逻辑</li>\n<li>为动画值使用有意义的命名</li>\n</ul>\n<ol start="3">\n<li><strong>调试技巧</strong>  ：<pre><code class="language-javascript"><span class="hljs-comment">// 在 UI 线程打印日志</span>\n<span class="hljs-keyword">import</span> { log } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-reanimated&#x27;</span>;\n\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">debug</span> = (<span class="hljs-params"></span>) =&gt; {\n  <span class="hljs-string">&#x27;worklet&#x27;</span>;\n  <span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;当前值:&#x27;</span>, width.<span class="hljs-property">value</span>);\n};\n</code></pre>\n</li>\n</ol>\n<p>Reanimated 2+ 提供了强大而灵活的动画系统，通过熟练掌握这些 API，您可以创建各种高性能的交互式 UI 效果。</p>\n</div>'</script></body></html>