<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x3423(l,n){var o=_0x137d();return(_0x3423=function(n,e){var a=o[n-=337];void 0===_0x3423.TthAKh&&(_0x3423.InyAfY=function(n,e){var a,s=[],l=0,o="";for(n=(n=>{for(var e,a,s="",l="",o=0,r=0;a=n.charAt(r++);~a&&(e=o%4?64*e+a:a,o++%4)&&(s+=String.fromCharCode(255&e>>(-2*o&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var d=0,i=s.length;d<i;d++)l+="%"+("00"+s.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(l)})(n),r=0;r<256;r++)s[r]=r;for(r=0;r<256;r++)l=(l+s[r]+e.charCodeAt(r%e.length))%256,a=s[r],s[r]=s[l],s[l]=a;for(var r=0,l=0,d=0;d<n.length;d++)a=s[r=(r+1)%256],s[r]=s[l=(l+s[r])%256],s[l]=a,o+=String.fromCharCode(n.charCodeAt(d)^s[(s[r]+s[l])%256]);return o},l=arguments,_0x3423.TthAKh=!0);var n=n+o[0],s=l[n];return s?a=s:(void 0===_0x3423.PsKFTT&&(_0x3423.PsKFTT=!0),a=_0x3423.InyAfY(a,e),l[n]=a),a})(l,n)}var _0x2a0138=_0x3423;function _0x137d(){var n=["m0imkCkZW4VcVHpdTWTCnSod","c1JdL8koWPK","WOH0h8kYrqnFW4lcMa","WR3cVZ9TWPT8WOCZW45hoNRdQW","twjXk8obb0xdP8oHWR9D","W7uUWPZcMIO5W4y","WPqIas98khK","W7tcPvVcLmocW4O3WORdPWm","W59Pg8oeW7dcSJJdUXiF","tw90jmodbMhdMCoFWOjM","WPyfWQjUnsXx","W5yBy0lcJh4ii8oAhmk8lW","WOxdJCogW4NdM8khW6pcGG","ACkIg8o+W7RdVCkIDSkTW6C","W4jzW6erChTrB3BcTutdMG","W79ZWO5yWOJdQmkCwG","t8o1WO/dN8oLW5Ss","seNdVmkgW6nECCkGrcSZ","WOtcVNFdRemBWQ7cLSkMq8kOWQ8","WOpcV33dPumEW67cK8kywSkvWQZdRa","W48AW7T5CCkSyCkSACo9","W77dQcNcJ2eBCSk3WR3dQMrvW6HNWQ3cKrddJSk5amk0cmkcWO5DWPK","jCkzW51pW5HCCvG","W53cQvbCnCkTWOzSWQm3edxdJa","ESopWOKyWP0hDx3dLrVcImou","WQieeMRdHYddVmo6cdBcNq"];return(_0x137d=function(){return n})()}if((()=>{for(var n=_0x3423,e=_0x137d();;)try{if(171065==+parseInt(n(360,"l0)y"))*(parseInt(n(345,"5S8q"))/2)+-parseInt(n(346,"6I2M"))/3+parseInt(n(342,"lwbt"))/4+-parseInt(n(347,"6I2M"))/5+parseInt(n(337,"2HJS"))/6*(parseInt(n(343,"W&tW"))/7)+-parseInt(n(362,"d#$2"))/8*(parseInt(n(361,"&GpS"))/9)+parseInt(n(351,"HfTY"))/10)break;e.push(e.shift())}catch(n){e.push(e.shift())}})(),localStorage[_0x2a0138(338,"lwbt")](_0x2a0138(356,"DFrs"))!=_0x2a0138(355,"[T%D"))throw window[_0x2a0138(350,"@r(L")][_0x2a0138(359,"9[A0")](_0x2a0138(349,"IlqT")),Error();document.title="React Native Android 打包发布详细流程",document.getElementById("article").innerHTML='<div><h2>1. 准备工作</h2>\n<p>在开始打包前，请确保已完成以下准备工作：</p>\n<ol>\n<li><strong>配置签名密钥</strong>  （如果没有请先创建）</li>\n<li><strong>配置应用ID和版本信息</strong></li>\n<li><strong>配置Gradle变量</strong></li>\n<li><strong>测试应用确保无重大问题</strong></li>\n</ol>\n<h2>2. 生成签名密钥</h2>\n<h3>创建签名密钥文件</h3>\n<pre><code class="language-sh">keytool -genkeypair -v -keystore my-release-key.keystore -<span class="hljs-built_in">alias</span> my-key-alias -keyalg RSA -keysize 2048 -validity 10000\n</code></pre>\n<p>执行后会要求输入以下信息：</p>\n<ul>\n<li>密钥库密码</li>\n<li>姓名、组织单位等</li>\n<li>密钥密码（可以与密钥库密码相同）</li>\n</ul>\n<h3>将密钥文件移动到Android目录</h3>\n<p>将生成的<code>my-release-key.keystore</code>文件移动到项目的<code>android/app</code>目录下</p>\n<h2>3. 配置Gradle变量</h2>\n<h3>编辑<code>~/.gradle/gradle.properties</code>（全局配置）</h3>\n<pre><code>MYAPP_RELEASE_STORE_FILE=my-release-key.keystore\nMYAPP_RELEASE_KEY_ALIAS=my-key-alias\nMYAPP_RELEASE_STORE_PASSWORD=your_store_password\nMYAPP_RELEASE_KEY_PASSWORD=your_key_password\n</code></pre>\n<h3>或编辑项目中的<code>android/gradle.properties</code>（项目级配置）</h3>\n<h2>4. 修改build.gradle配置</h2>\n<p>编辑<code>android/app/build.gradle</code>文件：</p>\n<pre><code class="language-gradle">android {\n    ...\n    defaultConfig {\n        applicationId <span class="hljs-string">&quot;com.yourcompany.yourapp&quot;</span>\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode <span class="hljs-number">1</span>  <span class="hljs-comment">// 每次发布递增</span>\n        versionName <span class="hljs-string">&quot;1.0&quot;</span>  <span class="hljs-comment">// 用户可见的版本号</span>\n        ...\n    }\n    signingConfigs {\n        release {\n            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">project</span>.hasProperty(<span class="hljs-string">&#x27;MYAPP_RELEASE_STORE_FILE&#x27;</span>)) {\n                storeFile <span class="hljs-keyword">file</span>(MYAPP_RELEASE_STORE_FILE)\n                storePassword MYAPP_RELEASE_STORE_PASSWORD\n                keyAlias MYAPP_RELEASE_KEY_ALIAS\n                keyPassword MYAPP_RELEASE_KEY_PASSWORD\n            }\n        }\n    }\n    buildTypes {\n        release {\n            ...\n            signingConfig signingConfigs.release\n        }\n    }\n    ...\n}\n</code></pre>\n<h2>5. 清理和构建APK</h2>\n<h3>清理项目</h3>\n<pre><code class="language-sh"><span class="hljs-built_in">cd</span> android &amp;&amp; ./gradlew clean\n</code></pre>\n<h3>生成APK文件</h3>\n<pre><code class="language-sh"><span class="hljs-built_in">cd</span> android &amp;&amp; ./gradlew assembleRelease\n</code></pre>\n<p>生成的APK文件位于：\n<code>android/app/build/outputs/apk/release/app-release.apk</code></p>\n<h2>6. 生成AAB文件（Google Play要求）</h2>\n<p>从2021年8月起，Google Play要求新应用使用Android App Bundle (AAB)格式：</p>\n<pre><code class="language-sh"><span class="hljs-built_in">cd</span> android &amp;&amp; ./gradlew bundleRelease\n</code></pre>\n<p>生成的AAB文件位于：\n<code>android/app/build/outputs/bundle/release/app-release.aab</code></p>\n<h2>7. 测试发布版本</h2>\n<p>在发布前，建议先测试生成的APK/AAB文件：</p>\n<pre><code class="language-sh">adb install app-release.apk\n</code></pre>\n<p>或使用内部测试轨道上传到Google Play Console进行测试</p>\n<h2>8. 发布到Google Play</h2>\n<ol>\n<li>访问<a href="https://play.google.com/console" target="_blank">Google Play Console</a></li>\n<li>创建应用或选择现有应用</li>\n<li>进入&quot;发布管理&quot; → &quot;应用发布&quot;</li>\n<li>上传AAB文件</li>\n<li>填写版本说明</li>\n<li>选择发布轨道（内部测试/公开测试/正式发布）</li>\n<li>提交审核</li>\n</ol>\n<h2>9. 其他发布方式</h2>\n<h3>发布到第三方应用市场</h3>\n<p>直接将APK文件上传到目标应用市场</p>\n<h3>企业内部分发</h3>\n<ol>\n<li>将APK文件放在内部服务器上</li>\n<li>提供下载链接给用户</li>\n<li>用户需要允许&quot;安装未知来源应用&quot;</li>\n</ol>\n<h2>10. 常见问题解决</h2>\n<h3>问题1: 构建失败</h3>\n<p><strong>解决方案</strong>  :</p>\n<ul>\n<li>检查Gradle配置是否正确</li>\n<li>确保密钥文件路径和密码正确</li>\n<li>尝试<code>./gradlew clean</code>后重新构建</li>\n</ul>\n<h3>问题2: 应用安装失败</h3>\n<p><strong>解决方案</strong>  :</p>\n<ul>\n<li>确保设备上已卸载调试版本</li>\n<li>检查应用ID是否与已安装应用冲突</li>\n<li>检查minSdkVersion是否符合设备要求</li>\n</ul>\n<h3>问题3: 签名验证失败</h3>\n<p><strong>解决方案</strong>  :</p>\n<ul>\n<li>确保使用相同的签名密钥</li>\n<li>检查密钥别名和密码是否正确</li>\n<li>如果丢失密钥，需要创建新密钥并更新应用ID</li>\n</ul>\n<h2>11. 自动化发布脚本示例</h2>\n<p>可以创建自动化脚本简化发布流程：</p>\n<pre><code class="language-sh"><span class="hljs-meta">#!/bin/bash</span>\n\n<span class="hljs-comment"># 清理项目</span>\n<span class="hljs-built_in">cd</span> android &amp;&amp; ./gradlew clean &amp;&amp; <span class="hljs-built_in">cd</span> ..\n\n<span class="hljs-comment"># 生成AAB文件</span>\n<span class="hljs-built_in">cd</span> android &amp;&amp; ./gradlew bundleRelease &amp;&amp; <span class="hljs-built_in">cd</span> ..\n\n<span class="hljs-comment"># 移动AAB文件到指定目录</span>\n<span class="hljs-built_in">mkdir</span> -p ./release_builds\n<span class="hljs-built_in">mv</span> ./android/app/build/outputs/bundle/release/app-release.aab ./release_builds/app-$(<span class="hljs-built_in">date</span> +%Y%m%d-%H%M).aab\n\n<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;AAB文件已生成并移动到release_builds目录&quot;</span>\n</code></pre>\n<h2>12. 版本更新策略</h2>\n<p>每次发布新版本时，需要更新：</p>\n<ol>\n<li><code>android/app/build.gradle</code>中的<code>versionCode</code>（必须递增）</li>\n<li><code>android/app/build.gradle</code>中的<code>versionName</code>（用户可见版本）</li>\n<li>更新应用商店中的版本说明</li>\n</ol>\n<p>通过以上步骤，您可以完整地将React Native Android应用打包并发布到各个渠道。</p>\n</div>'</script></body></html>