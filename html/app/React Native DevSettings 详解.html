<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x228832=_0x4935;function _0x3097(){var s=["WRyAWPr/bu18","xXaaW7pdKa","W7OUk1PumcnLW6HjWRlcHq","y8k1WPlcGmouW51QWOJdPmoGdGG","W7KLjdv2W5BcJ21o","smoaWQfKW5RdOHacpSkMWQSkaq","hmocW6HlW4TEBq","WOlcS8ocCSoFmHdcPa","omkqWRblWQ3cLmkGW4nNWOCv","tXjnW4O9ECoDWRfGvMRdG8oHg3pcImkVW6DNnqldHZmlvHW","sSokWQzHW5BdQXCMjmk+WOGfgW","hCobieiDbSkvW7lcN8kFW7VcUG","effqW4a3jmkFW4K","u8kpW6JdP8kvnZRdJCkC","vCo5rCoRv8kFdmoYCmkwAfG","w8kLW6HBoCkKtmkIF0ah","W6m8dYhcHJboWPG3gCoWt8kR","BGRcNmo8WRXYwCo6","dSk5WOBdL08SW7m","oSoeW79NW4XisWdcHW","W6lcSCkUF8ohW7NcPI9bW4qF","nxWsWOddQ33cGb3cUSogwW","W6qfEvLSWOSPW4u/ceXYgq","WPuystBcPCouW7zotmo4WRNcNCkA","W6JdSh8UWPhdGZy","W4LiWR4IW6ldKCk4DmojWODzrCkX"];return(_0x3097=function(){return s})()}function _0x4935(t,s){var e=_0x3097();return(_0x4935=function(s,n){var a=e[s-=448];void 0===_0x4935.msNFid&&(_0x4935.rbsnNx=function(s,n){var a,l=[],t=0,e="";for(s=(s=>{for(var n,a,l="",t="",e=0,p=0;a=s.charAt(p++);~a&&(n=e%4?64*n+a:a,e++%4)&&(l+=String.fromCharCode(255&n>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var c=0,i=l.length;c<i;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),p=0;p<256;p++)l[p]=p;for(p=0;p<256;p++)t=(t+l[p]+n.charCodeAt(p%n.length))%256,a=l[p],l[p]=l[t],l[t]=a;for(var p=0,t=0,c=0;c<s.length;c++)a=l[p=(p+1)%256],l[p]=l[t=(t+l[p])%256],l[t]=a,e+=String.fromCharCode(s.charCodeAt(c)^l[(l[p]+l[t])%256]);return e},t=arguments,_0x4935.msNFid=!0);var s=s+e[0],l=t[s];return l?a=l:(void 0===_0x4935.joGaML&&(_0x4935.joGaML=!0),a=_0x4935.rbsnNx(a,n),t[s]=a),a})(t,s)}if((()=>{for(var s=_0x4935,n=_0x3097();;)try{if(635369==-parseInt(s(451,"zU7Y"))*(-parseInt(s(459,"bDiy"))/2)+parseInt(s(463,"c!&U"))/3*(-parseInt(s(464,"ZkrU"))/4)+parseInt(s(461,"]M$G"))/5+-parseInt(s(468,"KHb9"))/6+parseInt(s(455,"t!h2"))/7+-parseInt(s(450,"XW3n"))/8+parseInt(s(469,"*egJ"))/9*(-parseInt(s(454,"QKmc"))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x228832(471,"jWox")](_0x228832(458,"jWox"))!=_0x228832(466,"iqOY"))throw window[_0x228832(456,"PVv!")][_0x228832(465,"EIBP")](_0x228832(448,"zU7Y")),Error();document.title="React Native DevSettings 详解",document.getElementById("article").innerHTML='<div><h1>React Native DevSettings 详解</h1>\n<p>DevSettings 是 React Native 提供的开发者专用模块，用于调试和开发阶段的运行时配置。以下是全面解析：</p>\n<h2>一、核心功能与基础使用</h2>\n<h3>1. 基本能力</h3>\n<ul>\n<li>启用/禁用开发菜单（摇一摇菜单）</li>\n<li>控制远程调试开关</li>\n<li>热重载和实时重载控制</li>\n<li>快速刷新配置</li>\n<li>自定义开发者选项</li>\n</ul>\n<h3>2. 引入方式</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DevSettings</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n</code></pre>\n<h2>二、主要API解析</h2>\n<h3>1. 开发菜单控制</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 启用开发菜单（默认已启用）</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setIsShakeToShowDevMenuEnabled</span>(<span class="hljs-literal">true</span>);\n\n<span class="hljs-comment">// 检查当前状态</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">getIsShakeToShowDevMenuEnabled</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">enabled</span> =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;摇一摇菜单状态:&#x27;</span>, enabled);\n});\n</code></pre>\n<h3>2. 调试功能控制</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 开启远程JS调试</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setIsDebuggingRemotely</span>(<span class="hljs-literal">true</span>);\n\n<span class="hljs-comment">// 切换元素检查器</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setIsElementInspectorShown</span>(<span class="hljs-literal">true</span>);\n\n<span class="hljs-comment">// 启用性能监测</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setIsPerfMonitorShown</span>(<span class="hljs-literal">true</span>);\n</code></pre>\n<h2>三、高级调试功能</h2>\n<h3>1. 自定义开发者选项</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 添加自定义菜单项</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;自定义动作&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-title class_">Alert</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;执行了自定义动作&#x27;</span>);\n});\n\n<span class="hljs-comment">// 生产环境自动移除</span>\n<span class="hljs-keyword">if</span> (__DEV__) {\n  <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;清空缓存&#x27;</span>, clearCache);\n}\n</code></pre>\n<h3>2. 热更新控制</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 手动触发热重载</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">reload</span>();\n\n<span class="hljs-comment">// 带回调的重载</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">reloadWithReason</span>(<span class="hljs-string">&#x27;用户触发了重置&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;重载完成回调&#x27;</span>);\n});\n\n<span class="hljs-comment">// 快速刷新配置</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setHotLoadingEnabled</span>(<span class="hljs-literal">true</span>);\n</code></pre>\n<h2>四、开发环境配置</h2>\n<h3>1. 网络代理设置</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 设置开发服务器地址</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setDevServerHost</span>(<span class="hljs-string">&#x27;192.168.1.100:8081&#x27;</span>);\n\n<span class="hljs-comment">// 获取当前配置</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">getDevServerHost</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">host</span> =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;当前开发服务器:&#x27;</span>, host);\n});\n</code></pre>\n<h3>2. 性能优化开关</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 启用Fabric渲染引擎</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setFabricEnabled</span>(<span class="hljs-literal">true</span>);\n\n<span class="hljs-comment">// 启用并发模式（React 18+）</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setConcurrentRootEnabled</span>(<span class="hljs-literal">true</span>);\n</code></pre>\n<h2>五、实际应用场景</h2>\n<h3>1. 调试面板实现</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DebugPanel</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> [remoteDebug, setRemoteDebug] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);\n\n  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">getIsDebuggingRemotely</span>().<span class="hljs-title function_">then</span>(setRemoteDebug);\n  }, []);\n\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.debugPanel}</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span>\n        <span class="hljs-attr">value</span>=<span class="hljs-string">{remoteDebug}</span>\n        <span class="hljs-attr">onValueChange</span>=<span class="hljs-string">{v</span> =&gt;</span> DevSettings.setIsDebuggingRemotely(v)}\n      /&gt;\n      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> \n        <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;触发热重载&quot;</span> \n        <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> DevSettings.reload()} \n      /&gt;\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h3>2. 开发环境工具集成</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 添加性能测试菜单项</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;运行性能测试&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {\n  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title function_">runPerformanceTest</span>();\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;性能测试结果:&#x27;</span>, results);\n});\n</code></pre>\n<h2>六、平台特性与限制</h2>\n<h3>1. 平台可用性</h3>\n<table>\n<thead>\n<tr>\n<th>功能</th>\n<th>iOS</th>\n<th>Android</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>摇一摇菜单</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>远程调试</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>自定义菜单项</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>开发服务器配置</td>\n<td>✓</td>\n<td>✓</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 安全限制</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 生产环境自动禁用</span>\n<span class="hljs-keyword">if</span> (!__DEV__) {\n  <span class="hljs-comment">// 移除所有开发菜单项</span>\n  <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">removeAllMenuItems</span>();\n}\n</code></pre>\n<h2>七、调试技巧与最佳实践</h2>\n<h3>1. 条件式调试</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据设备类型启用不同调试选项</span>\n<span class="hljs-keyword">if</span> (<span class="hljs-title class_">DeviceInfo</span>.<span class="hljs-title function_">getDeviceType</span>() === <span class="hljs-string">&#x27;Handset&#x27;</span>) {\n  <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;移动端专用工具&#x27;</span>, mobileDebugTool);\n}\n</code></pre>\n<h3>2. 自动化测试集成</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 在测试模式下添加测试菜单</span>\n<span class="hljs-keyword">if</span> (__TEST__) {\n  <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;运行测试用例&#x27;</span>, runTestCases);\n}\n</code></pre>\n<h2>八、常见问题解决方案</h2>\n<h3>1. 菜单项不显示问题</h3>\n<p><strong>检查步骤</strong>  ：</p>\n<ol>\n<li>确认运行在开发环境（<code>__DEV__ === true</code>）</li>\n<li>检查是否调用了<code>addMenuItem</code>方法</li>\n<li>确保没有调用<code>removeAllMenuItems</code></li>\n</ol>\n<h3>2. 远程调试连接失败</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 重置开发服务器连接</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setDevServerHost</span>(<span class="hljs-string">&#x27;localhost:8081&#x27;</span>);\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">reload</span>();\n</code></pre>\n<h3>3. 热重载不生效</h3>\n<p><strong>排查方法</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 检查快速刷新状态</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setHotLoadingEnabled</span>(<span class="hljs-literal">true</span>);\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">reload</span>();\n</code></pre>\n<h2>九、扩展开发功能</h2>\n<h3>1. 自定义开发者插件</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 注册扩展开发功能</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">registerDevPlugin</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;我的插件&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-title class_">Navigation</span>.<span class="hljs-title function_">showModal</span>({\n      <span class="hljs-attr">component</span>: {\n        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;DevPluginScreen&#x27;</span>,\n        <span class="hljs-attr">options</span>: {\n          <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;开发者插件&#x27;</span>\n        }\n      }\n    });\n  });\n}\n</code></pre>\n<h3>2. 性能监控集成</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 添加性能监控快捷入口</span>\n<span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">addMenuItem</span>(<span class="hljs-string">&#x27;显示性能面板&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-title class_">DevSettings</span>.<span class="hljs-title function_">setIsPerfMonitorShown</span>(<span class="hljs-literal">true</span>);\n});\n</code></pre>\n<p>通过合理使用 DevSettings 模块，开发者可以：</p>\n<ol>\n<li>构建更高效的开发工作流</li>\n<li>创建自定义调试工具</li>\n<li>快速定位和解决问题</li>\n<li>优化应用性能表现</li>\n</ol>\n<p>建议将常用调试功能封装成可复用的组件或Hook，提升团队开发效率。</p>\n</div>'</script></body></html>