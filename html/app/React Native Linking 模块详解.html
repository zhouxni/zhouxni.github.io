<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1ec06d=_0xc93a;function _0xc93a(p,s){var t=_0x5712();return(_0xc93a=function(s,n){var a=t[s-=372];void 0===_0xc93a.ehyQHz&&(_0xc93a.djQYFS=function(s,n){var a,l=[],p=0,t="";for(s=(s=>{for(var n,a,l="",p="",t=0,c=0;a=s.charAt(c++);~a&&(n=t%4?64*n+a:a,t++%4)&&(l+=String.fromCharCode(255&n>>(-2*t&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(var e=0,i=l.length;e<i;e++)p+="%"+("00"+l.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(p)})(s),c=0;c<256;c++)l[c]=c;for(c=0;c<256;c++)p=(p+l[c]+n.charCodeAt(c%n.length))%256,a=l[c],l[c]=l[p],l[p]=a;for(var c=0,p=0,e=0;e<s.length;e++)a=l[c=(c+1)%256],l[c]=l[p=(p+l[c])%256],l[p]=a,t+=String.fromCharCode(s.charCodeAt(e)^l[(l[c]+l[p])%256]);return t},p=arguments,_0xc93a.ehyQHz=!0);var s=s+t[0],l=p[s];return l?a=l:(void 0===_0xc93a.zobJAY&&(_0xc93a.zobJAY=!0),a=_0xc93a.djQYFS(a,n),p[s]=a),a})(p,s)}if((()=>{for(var s=_0xc93a,n=_0x5712();;)try{if(600861==-parseInt(s(380,"(o$3"))+-parseInt(s(390,"&]#3"))/2*(-parseInt(s(395,"HPl6"))/3)+-parseInt(s(392,"6Eo9"))/4+-parseInt(s(381,"0h[5"))/5+-parseInt(s(393,"m(ze"))/6+-parseInt(s(383,"uXgQ"))/7*(parseInt(s(387,"G1aF"))/8)+parseInt(s(376,"@#3x"))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}})(),localStorage[_0x1ec06d(389,"zRl3")](_0x1ec06d(391,"YLId"))!=_0x1ec06d(394,"yc8b"))throw window[_0x1ec06d(377,"zRl3")][_0x1ec06d(373,"YLId")](_0x1ec06d(388,"]$^D")),Error();function _0x5712(){var s=["W7yiWPLNWPGFwSk3WP8","B23dIdCYWRybWO11vCorhW","W7iiWP4CW6rFlSofWOHKn8omW798","iN9ZW4qSWQrgzG","WPZdLCk4W4hdMSodDCkDhmkX","BMVdJJK4WRzMWQrGvCo9oWm","BHCzWOjWFSkqtcvromoj","WQGJnvBcJCkxWRdcImoAcSoaW6C","WPBdL8kYWPhdMCo3DCkkpG","tvu5W6xdHwVdOSolla","ielcGCkXWRZdT8ojj8kQaJn0","svu+WP7cUsVcLSk5o8k6q03dLCo5","bmk7W48kWO8bqu/dHLL2","WRVdJaGgW4G0WQunW5NcLCka","WOhdRuRcKmoPWQlcJeBdJtFdSJnsW4xcKt9CW4nqmCkFW7RdP8kzWQPH","kxvKW6WSWQHe","WOuGAKddHtNdVgCWgq","qSo1WQbFpfFdU2HN","fSk1pgRdHSoFp8obW6T0W5Do","mSkBsmkpyCoMn8oWjSogWONcO8kt","gmoXWPVdKXO","cmk6W4jwW7e1ueRdHW","WPv2W5/cTYutnHvQdCkBCq","CCoZWRnwlKFdLq"];return(_0x5712=function(){return s})()}document.title="React Native Linking 模块详解",document.getElementById("article").innerHTML='<div><h1>React Native Linking 模块详解</h1>\n<p>Linking 是 React Native 提供的用于处理应用内外部链接的核心模块，支持深度链接(Deep Linking)和通用链接(Universal Links)。以下是全面解析：</p>\n<h2>一、核心功能与基础使用</h2>\n<h3>1. 主要能力</h3>\n<ul>\n<li>打开外部URL（浏览器、地图、邮件等应用）</li>\n<li>处理传入的深度链接</li>\n<li>检查已安装的应用</li>\n<li>管理自定义URL Scheme</li>\n</ul>\n<h3>2. 基础API</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Linking</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 打开外部URL</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">&#x27;https://reactnative.dev&#x27;</span>);\n\n<span class="hljs-comment">// 检查URL是否可打开</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">canOpenURL</span>(<span class="hljs-string">&#x27;https://reactnative.dev&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">supported</span> =&gt;</span> {\n  <span class="hljs-keyword">if</span> (!supported) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;无法处理该URL&#x27;</span>);\n});\n\n<span class="hljs-comment">// 添加/移除链接监听</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, handleOpenURL);\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, handleOpenURL);\n</code></pre>\n<h2>二、深度链接(Deep Linking)实现</h2>\n<h3>1. 配置自定义URL Scheme</h3>\n<h4>iOS (Info.plist)</h4>\n<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>CFBundleURLTypes<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>CFBundleURLSchemes<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>myapp<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>\n</code></pre>\n<h4>Android (AndroidManifest.xml)</h4>\n<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.VIEW&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.BROWSABLE&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">data</span> <span class="hljs-attr">android:scheme</span>=<span class="hljs-string">&quot;myapp&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>\n</code></pre>\n<h3>2. 深度链接处理</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 监听传入链接</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOpenURL</span>(<span class="hljs-params">event</span>) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;收到深度链接:&#x27;</span>, event.<span class="hljs-property">url</span>);\n  <span class="hljs-comment">// 解析URL参数并导航到对应页面</span>\n}\n\n<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-comment">// 添加监听</span>\n  <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, handleOpenURL);\n  \n  <span class="hljs-comment">// 检查应用是否通过链接启动</span>\n  <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">getInitialURL</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {\n    <span class="hljs-keyword">if</span> (url) <span class="hljs-title function_">handleOpenURL</span>({ url });\n  });\n\n  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, handleOpenURL);\n}, []);\n</code></pre>\n<h2>三、通用链接(Universal Links)实现</h2>\n<h3>1. iOS配置</h3>\n<pre><code class="language-json"><span class="hljs-comment">// apple-app-site-association文件</span>\n<span class="hljs-punctuation">{</span>\n  <span class="hljs-attr">&quot;applinks&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>\n    <span class="hljs-attr">&quot;apps&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>\n    <span class="hljs-attr">&quot;details&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>\n      <span class="hljs-punctuation">{</span>\n        <span class="hljs-attr">&quot;appID&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;TEAMID.com.your.app&quot;</span><span class="hljs-punctuation">,</span>\n        <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;/docs/*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;/help/*&quot;</span><span class="hljs-punctuation">]</span>\n      <span class="hljs-punctuation">}</span>\n    <span class="hljs-punctuation">]</span>\n  <span class="hljs-punctuation">}</span>\n<span class="hljs-punctuation">}</span>\n</code></pre>\n<h3>2. Android配置</h3>\n<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span> <span class="hljs-attr">android:autoVerify</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.VIEW&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.BROWSABLE&quot;</span> /&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">data</span> <span class="hljs-attr">android:scheme</span>=<span class="hljs-string">&quot;https&quot;</span> \n        <span class="hljs-attr">android:host</span>=<span class="hljs-string">&quot;yourdomain.com&quot;</span> \n        <span class="hljs-attr">android:pathPrefix</span>=<span class="hljs-string">&quot;/app&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>\n</code></pre>\n<h2>四、常见场景实现</h2>\n<h3>1. 打开系统应用</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 打电话</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">&#x27;tel:+123456789&#x27;</span>);\n\n<span class="hljs-comment">// 发邮件</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">&#x27;mailto:support@example.com&#x27;</span>);\n\n<span class="hljs-comment">// 打开地图</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">&#x27;geo:37.484847,-122.148386&#x27;</span>);\n\n<span class="hljs-comment">// 打开设置</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openSettings</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">&#x27;app-settings:&#x27;</span>);\n});\n</code></pre>\n<h3>2. 社交分享</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">shareOnTwitter</span>(<span class="hljs-params">text, url</span>) {\n  <span class="hljs-keyword">const</span> tweetUrl = <span class="hljs-string">`https://twitter.com/intent/tweet?text=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(text)}</span>&amp;url=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(url)}</span>`</span>;\n  <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">canOpenURL</span>(tweetUrl).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">supported</span> =&gt;</span> {\n    <span class="hljs-keyword">if</span> (supported) {\n      <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(tweetUrl);\n    } <span class="hljs-keyword">else</span> {\n      <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">`https://twitter.com/share?text=<span class="hljs-subst">${text}</span>`</span>);\n    }\n  });\n}\n</code></pre>\n<h2>五、高级应用方案</h2>\n<h3>1. 深度链接路由系统</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DeepLinkRouter</span> {\n  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = {};\n    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();\n  }\n\n  <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleURL</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));\n    <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">getInitialURL</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> url &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleURL</span>({ url }));\n  }\n\n  <span class="hljs-title function_">register</span>(<span class="hljs-params">path, handler</span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path] = handler;\n  }\n\n  <span class="hljs-title function_">handleURL</span>(<span class="hljs-params">event</span>) {\n    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(event.<span class="hljs-property">url</span>);\n    <span class="hljs-keyword">const</span> path = url.<span class="hljs-property">pathname</span>;\n    <span class="hljs-keyword">const</span> params = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">entries</span>());\n    \n    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path]) {\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path](params);\n    } <span class="hljs-keyword">else</span> {\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-string">&#x27;*&#x27;</span>]?.(path, params);\n    }\n  }\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeepLinkRouter</span>();\nrouter.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;/product&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">{ id }</span>) =&gt;</span> <span class="hljs-title function_">navigateToProduct</span>(id));\nrouter.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;*&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> <span class="hljs-title function_">navigateToFallback</span>(path));\n</code></pre>\n<h3>2. 应用间通信</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 发送数据到其他应用</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">sendToOtherApp</span>(<span class="hljs-params">data</span>) {\n  <span class="hljs-keyword">const</span> base64Data = <span class="hljs-title function_">btoa</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));\n  <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">`otherapp://share?data=<span class="hljs-subst">${base64Data}</span>`</span>);\n}\n\n<span class="hljs-comment">// 接收处理数据</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(event.<span class="hljs-property">url</span>);\n  <span class="hljs-keyword">if</span> (url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">&#x27;data&#x27;</span>)) {\n    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title function_">atob</span>(url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;data&#x27;</span>)));\n    <span class="hljs-title function_">handleReceivedData</span>(data);\n  }\n});\n</code></pre>\n<h2>六、调试与测试技巧</h2>\n<h3>1. 开发环境测试</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># iOS模拟器测试</span>\nxcrun simctl openurl booted <span class="hljs-string">&quot;myapp://test/path&quot;</span>\n\n<span class="hljs-comment"># Android模拟器测试</span>\nadb shell am start -W -a android.intent.action.VIEW -d <span class="hljs-string">&quot;myapp://test/path&quot;</span>\n</code></pre>\n<h3>2. 调试工具</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 打印所有可处理的URL</span>\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">getSupportedURLs</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">urls</span> =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;支持的URL Schemes:&#x27;</span>, urls);\n});\n\n<span class="hljs-comment">// 检查特定功能可用性</span>\n<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkFeatures</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> [canOpenPhone, canOpenEmail, canOpenSettings] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([\n    <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">canOpenURL</span>(<span class="hljs-string">&#x27;tel:123&#x27;</span>),\n    <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">canOpenURL</span>(<span class="hljs-string">&#x27;mailto:test@test.com&#x27;</span>),\n    <span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">canOpenURL</span>(<span class="hljs-string">&#x27;app-settings:&#x27;</span>)\n  ]);\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ canOpenPhone, canOpenEmail, canOpenSettings });\n}\n</code></pre>\n<h2>七、常见问题解决方案</h2>\n<h3>1. Android链接不生效</h3>\n<p><strong>排查步骤</strong>  ：</p>\n<ol>\n<li>确认AndroidManifest.xml中intent-filter配置正确</li>\n<li>检查MainActivity的launchMode是否为singleTask</li>\n<li>验证是否添加了DEFAULT和BROWSABLE category</li>\n</ol>\n<h3>2. iOS Universal Links不工作</h3>\n<p><strong>检查清单</strong>  ：</p>\n<ol>\n<li>确认apple-app-site-association文件可访问且有效</li>\n<li>验证Associated Domains能力已开启</li>\n<li>检查entitlements文件配置</li>\n</ol>\n<h3>3. 多次触发链接事件</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">let</span> lastProcessedURL = <span class="hljs-literal">null</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOpenURL</span>(<span class="hljs-params">event</span>) {\n  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">url</span> === lastProcessedURL) <span class="hljs-keyword">return</span>;\n  \n  lastProcessedURL = event.<span class="hljs-property">url</span>;\n  <span class="hljs-comment">// 处理逻辑...</span>\n}\n</code></pre>\n<h2>八、安全最佳实践</h2>\n<h3>1. URL验证</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isValidURL</span>(<span class="hljs-params">url</span>) {\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">const</span> parsed = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(url);\n    <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;https:&#x27;</span>, <span class="hljs-string">&#x27;myapp:&#x27;</span>].<span class="hljs-title function_">includes</span>(parsed.<span class="hljs-property">protocol</span>);\n  } <span class="hljs-keyword">catch</span> {\n    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n  }\n}\n\n<span class="hljs-title class_">Linking</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {\n  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isValidURL</span>(event.<span class="hljs-property">url</span>)) <span class="hljs-keyword">return</span>;\n  <span class="hljs-comment">// 安全处理</span>\n});\n</code></pre>\n<h3>2. 防止恶意链接</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ALLOWED_PATHS</span> = [<span class="hljs-string">&#x27;/home&#x27;</span>, <span class="hljs-string">&#x27;/products&#x27;</span>, <span class="hljs-string">&#x27;/support&#x27;</span>];\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDeepLink</span>(<span class="hljs-params">url</span>) {\n  <span class="hljs-keyword">const</span> path = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(url).<span class="hljs-property">pathname</span>;\n  <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">ALLOWED_PATHS</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">allowed</span> =&gt;</span> path.<span class="hljs-title function_">startsWith</span>(allowed))) {\n    <span class="hljs-keyword">return</span> <span class="hljs-title function_">navigateTo</span>(<span class="hljs-string">&#x27;/invalid-link&#x27;</span>);\n  }\n  <span class="hljs-comment">// 正常处理</span>\n}\n</code></pre>\n<p>通过深入理解Linking模块，开发者可以：</p>\n<ol>\n<li>实现无缝的应用间跳转体验</li>\n<li>构建完善的深度链接系统</li>\n<li>提升用户留存和转化率</li>\n<li>创建更智能的跨应用工作流</li>\n</ol>\n<p>建议将链接处理逻辑封装成独立服务，便于统一管理和维护。</p>\n</div>'</script></body></html>