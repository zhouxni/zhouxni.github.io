<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x196747=_0x1149;if((()=>{for(var s=_0x1149,a=_0x1574();;)try{if(247599==-parseInt(s(498,"Rx*@"))+parseInt(s(486,"wqJb"))/2+-parseInt(s(492,"ZIf3"))/3*(-parseInt(s(487,"F3N["))/4)+parseInt(s(490,"w#uz"))/5*(parseInt(s(500,"icP2"))/6)+parseInt(s(497,"JWPi"))/7+parseInt(s(484,"Gk%2"))/8+-parseInt(s(499,"@04Z"))/9)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x196747(496,"Ixf$")](_0x196747(495,"ZIf3"))!=_0x196747(489,"cAIx"))throw window[_0x196747(493,"eEve")][_0x196747(491,"t(rh")](_0x196747(494,"ZIf3")),Error();function _0x1149(t,s){var p=_0x1574();return(_0x1149=function(s,a){var n=p[s-=478];void 0===_0x1149.WycgtP&&(_0x1149.tIEuJa=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,e=0;n=s.charAt(e++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)t=(t+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[t],l[t]=n;for(var e=0,t=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[t=(t+l[e])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[t])%256]);return p},t=arguments,_0x1149.WycgtP=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x1149.hoSldG&&(_0x1149.hoSldG=!0),n=_0x1149.tIEuJa(n,a),t[s]=n),n})(t,s)}function _0x1574(){var s=["WQtdJCkJW77dJeO7W4hdHCkCoSoaWOi","rmkUW7/cPCkjqmkoWRuduCkyWR8","mhRcNxexvvJcNG","W6tdKZKuW4tcNSkcja","WQFcLGKlW7a","W5jIW5hcMZjyuIdcOSksWPJdPG","W6bwfM7cOgii","W5FdPY4lWPhcI8ktWPZdGSo0W4Kp","wCo0cmkBCGz1W6y","WO7cP2PkW5dcGmo7W7RdVmoDW5iPW5yjWRldH1/dGZRcPSkyzrrVWQiZ","WQFcSh1FW5ddICkFWRddVW","WPhcU3/dN38fta","WQ3dJSkRW7NdJKeXW4BdGCkGmConWQm","W5VcSWm1W5f/W7xcTmoQW45a","W4SjW5e1WOXtW4tcVbhdTaLcWRq","W6e6gmkSWQnsaLi","W5iekqeQWQZcVL5TW6FdGgFdOq","chFdNxRcH8kBW58EdSksWORcP8oP","rSkUW73cO8koqmkfWPC/rSkwWQC","B0FcGqJcJxXDqa","WQVdVr8/WP9UW6NcGCo9W5dcTSke","WPZdPNxdTSoDbxtcTW3dSSkJxq","WRmPWPD0omoFWRxcGSkMWOhcK8oUoG"];return(_0x1574=function(){return s})()}document.title="React Native 本地存储解决方案全面指南",document.getElementById("article").innerHTML='<div><h1>React Native 本地存储解决方案全面指南</h1>\n<p>在 React Native 开发中，本地存储是构建离线应用、缓存数据和保存用户偏好的关键技术。以下是 React Native 本地存储的完整解决方案：</p>\n<h2>一、基础存储方案</h2>\n<h3>1. AsyncStorage (React Native 内置)</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># 新版本需要单独安装</span>\nnpm install @react-native-async-storage/async-storage\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncStorage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-native-async-storage/async-storage&#x27;</span>;\n\n<span class="hljs-comment">// 存储数据</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">storeData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">key, value</span>) =&gt; {\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));\n  } <span class="hljs-keyword">catch</span> (e) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;存储失败&#x27;</span>, e);\n  }\n};\n\n<span class="hljs-comment">// 读取数据</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">key</span>) =&gt; {\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(key);\n    <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value) : <span class="hljs-literal">null</span>;\n  } <span class="hljs-keyword">catch</span> (e) {\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;读取失败&#x27;</span>, e);\n    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;\n  }\n};\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">await</span> <span class="hljs-title function_">storeData</span>(<span class="hljs-string">&#x27;user&#x27;</span>, {<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>});\n<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getData</span>(<span class="hljs-string">&#x27;user&#x27;</span>);\n</code></pre>\n<h3>2. 文件系统存储 (react-native-fs)</h3>\n<pre><code class="language-sh">npm install react-native-fs\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-variable constant_">RNFS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-fs&#x27;</span>;\n\n<span class="hljs-comment">// 写入文件</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">writeFile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">filename, data</span>) =&gt; {\n  <span class="hljs-keyword">const</span> path = <span class="hljs-string">`<span class="hljs-subst">${RNFS.DocumentDirectoryPath}</span>/<span class="hljs-subst">${filename}</span>`</span>;\n  <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">RNFS</span>.<span class="hljs-title function_">writeFile</span>(path, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data), <span class="hljs-string">&#x27;utf8&#x27;</span>);\n};\n\n<span class="hljs-comment">// 读取文件</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">readFile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">filename</span>) =&gt; {\n  <span class="hljs-keyword">const</span> path = <span class="hljs-string">`<span class="hljs-subst">${RNFS.DocumentDirectoryPath}</span>/<span class="hljs-subst">${filename}</span>`</span>;\n  <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">RNFS</span>.<span class="hljs-title function_">readFile</span>(path, <span class="hljs-string">&#x27;utf8&#x27;</span>);\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(content);\n};\n</code></pre>\n<h2>二、高级存储方案</h2>\n<h3>1. SQLite 数据库</h3>\n<pre><code class="language-sh">npm install react-native-sqlite-storage\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">SQLite</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-sqlite-storage&#x27;</span>;\n\n<span class="hljs-comment">// 打开数据库</span>\n<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title class_">SQLite</span>.<span class="hljs-title function_">openDatabase</span>(\n  {<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mydb.db&#x27;</span>, <span class="hljs-attr">location</span>: <span class="hljs-string">&#x27;default&#x27;</span>},\n  <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;数据库连接成功&#x27;</span>),\n  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;数据库连接失败&#x27;</span>, error)\n);\n\n<span class="hljs-comment">// 创建表</span>\n<span class="hljs-keyword">await</span> db.<span class="hljs-title function_">executeSql</span>(\n  <span class="hljs-string">&#x27;CREATE TABLE IF NOT EXISTS users(id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, age INTEGER)&#x27;</span>\n);\n\n<span class="hljs-comment">// 插入数据</span>\n<span class="hljs-keyword">await</span> db.<span class="hljs-title function_">executeSql</span>(\n  <span class="hljs-string">&#x27;INSERT INTO users (name, age) VALUES (?, ?)&#x27;</span>,\n  [<span class="hljs-string">&#x27;李四&#x27;</span>, <span class="hljs-number">30</span>]\n);\n\n<span class="hljs-comment">// 查询数据</span>\n<span class="hljs-keyword">const</span> [results] = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">executeSql</span>(<span class="hljs-string">&#x27;SELECT * FROM users&#x27;</span>);\n<span class="hljs-keyword">const</span> rows = results.<span class="hljs-property">rows</span>.<span class="hljs-title function_">raw</span>(); <span class="hljs-comment">// 获取结果集</span>\n</code></pre>\n<h3>2. MMKV (高性能键值存储)</h3>\n<pre><code class="language-sh">npm install react-native-mmkv\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">MMKV</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-mmkv&#x27;</span>;\n\n<span class="hljs-comment">// 初始化</span>\n<span class="hljs-keyword">const</span> storage = <span class="hljs-keyword">new</span> <span class="hljs-title function_">MMKV</span>();\n\n<span class="hljs-comment">// 存储数据</span>\nstorage.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;user.name&#x27;</span>, <span class="hljs-string">&#x27;王五&#x27;</span>);\nstorage.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;user.age&#x27;</span>, <span class="hljs-number">28</span>);\n\n<span class="hljs-comment">// 读取数据</span>\n<span class="hljs-keyword">const</span> name = storage.<span class="hljs-title function_">getString</span>(<span class="hljs-string">&#x27;user.name&#x27;</span>);\n<span class="hljs-keyword">const</span> age = storage.<span class="hljs-title function_">getNumber</span>(<span class="hljs-string">&#x27;user.age&#x27;</span>);\n\n<span class="hljs-comment">// 监听变化</span>\nstorage.<span class="hljs-title function_">addOnValueChangedListener</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`键 <span class="hljs-subst">${key}</span> 的值已更改`</span>);\n});\n</code></pre>\n<h2>三、数据加密方案</h2>\n<h3>1. SecureStore (加密存储)</h3>\n<pre><code class="language-sh"><span class="hljs-comment"># Expo项目使用</span>\nnpx expo install expo-secure-store\n\n<span class="hljs-comment"># 纯React Native项目</span>\nnpm install react-native-sensitive-info\n</code></pre>\n<pre><code class="language-javascript"><span class="hljs-comment">// Expo SecureStore示例</span>\n<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecureStore</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;expo-secure-store&#x27;</span>;\n\n<span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">setItemAsync</span>(<span class="hljs-string">&#x27;token&#x27;</span>, <span class="hljs-string">&#x27;secret-auth-token&#x27;</span>, {\n  <span class="hljs-attr">keychainAccessible</span>: <span class="hljs-title class_">SecureStore</span>.<span class="hljs-property">WHEN_UNLOCKED</span>\n});\n\n<span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">getItemAsync</span>(<span class="hljs-string">&#x27;token&#x27;</span>);\n\n<span class="hljs-comment">// React Native Sensitive Info示例</span>\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">SInfo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-sensitive-info&#x27;</span>;\n\n<span class="hljs-keyword">await</span> <span class="hljs-title class_">SInfo</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;token&#x27;</span>, <span class="hljs-string">&#x27;secret-auth-token&#x27;</span>, {\n  <span class="hljs-attr">sharedPreferencesName</span>: <span class="hljs-string">&#x27;mySharedPrefs&#x27;</span>,\n  <span class="hljs-attr">keychainService</span>: <span class="hljs-string">&#x27;myKeychain&#x27;</span>\n});\n</code></pre>\n<h3>2. 自定义加密</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CryptoJS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;crypto-js&#x27;</span>;\n\n<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SECRET_KEY</span> = <span class="hljs-string">&#x27;my-secret-key-123&#x27;</span>;\n\n<span class="hljs-comment">// 加密数据</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">encryptData</span> = (<span class="hljs-params">data</span>) =&gt; {\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">AES</span>.<span class="hljs-title function_">encrypt</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data), <span class="hljs-variable constant_">SECRET_KEY</span>).<span class="hljs-title function_">toString</span>();\n};\n\n<span class="hljs-comment">// 解密数据</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">decryptData</span> = (<span class="hljs-params">ciphertext</span>) =&gt; {\n  <span class="hljs-keyword">const</span> bytes = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">AES</span>.<span class="hljs-title function_">decrypt</span>(ciphertext, <span class="hljs-variable constant_">SECRET_KEY</span>);\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(bytes.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>));\n};\n</code></pre>\n<h2>四、离线数据同步策略</h2>\n<h3>1. 数据版本控制</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">storeWithVersion</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">key, data</span>) =&gt; {\n  <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({\n    <span class="hljs-attr">_version</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 版本号</span>\n    <span class="hljs-attr">_timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),\n    data\n  }));\n};\n</code></pre>\n<h3>2. 增量同步</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">syncData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">remoteData</span>) =&gt; {\n  <span class="hljs-keyword">const</span> localData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getData</span>(<span class="hljs-string">&#x27;products&#x27;</span>);\n  \n  <span class="hljs-keyword">if</span> (!localData || localData.<span class="hljs-property">_version</span> &lt; remoteData.<span class="hljs-property">_version</span>) {\n    <span class="hljs-keyword">await</span> <span class="hljs-title function_">storeData</span>(<span class="hljs-string">&#x27;products&#x27;</span>, remoteData);\n    <span class="hljs-keyword">return</span> remoteData;\n  }\n  \n  <span class="hljs-keyword">return</span> localData;\n};\n</code></pre>\n<h2>五、存储最佳实践</h2>\n<h3>1. 存储管理封装</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageService</span> {\n  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getItem</span>(<span class="hljs-params">key</span>) {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(key);\n      <span class="hljs-keyword">return</span> value ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value) : <span class="hljs-literal">null</span>;\n    } <span class="hljs-keyword">catch</span> (error) {\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`读取 <span class="hljs-subst">${key}</span> 失败`</span>, error);\n      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;\n    }\n  }\n\n  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">setItem</span>(<span class="hljs-params">key, value</span>) {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));\n      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n    } <span class="hljs-keyword">catch</span> (error) {\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`存储 <span class="hljs-subst">${key}</span> 失败`</span>, error);\n      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n    }\n  }\n\n  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">removeItem</span>(<span class="hljs-params">key</span>) {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">removeItem</span>(key);\n      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;\n    } <span class="hljs-keyword">catch</span> (error) {\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`删除 <span class="hljs-subst">${key}</span> 失败`</span>, error);\n      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;\n    }\n  }\n}\n</code></pre>\n<h3>2. 数据缓存策略</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchWithCache</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url, cacheKey, expireTime = <span class="hljs-number">3600000</span></span>) =&gt; {\n  <span class="hljs-comment">// 尝试从缓存读取</span>\n  <span class="hljs-keyword">const</span> cached = <span class="hljs-keyword">await</span> <span class="hljs-title class_">StorageService</span>.<span class="hljs-title function_">getItem</span>(cacheKey);\n  \n  <span class="hljs-keyword">if</span> (cached &amp;&amp; <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - cached.<span class="hljs-property">timestamp</span> &lt; expireTime) {\n    <span class="hljs-keyword">return</span> cached.<span class="hljs-property">data</span>;\n  }\n  \n  <span class="hljs-comment">// 从网络获取</span>\n  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);\n  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();\n  \n  <span class="hljs-comment">// 更新缓存</span>\n  <span class="hljs-keyword">await</span> <span class="hljs-title class_">StorageService</span>.<span class="hljs-title function_">setItem</span>(cacheKey, {\n    data,\n    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()\n  });\n  \n  <span class="hljs-keyword">return</span> data;\n};\n</code></pre>\n<h2>六、各方案对比</h2>\n<table>\n<thead>\n<tr>\n<th>方案</th>\n<th>类型</th>\n<th>容量</th>\n<th>性能</th>\n<th>加密</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>AsyncStorage</strong></td>\n<td>键值存储</td>\n<td>~6MB</td>\n<td>中</td>\n<td>无</td>\n<td>简单数据、用户偏好</td>\n</tr>\n<tr>\n<td><strong>react-native-fs</strong></td>\n<td>文件系统</td>\n<td>无限制</td>\n<td>高</td>\n<td>需自定义</td>\n<td>大文件、复杂数据</td>\n</tr>\n<tr>\n<td><strong>SQLite</strong></td>\n<td>关系型数据库</td>\n<td>无限制</td>\n<td>高</td>\n<td>需自定义</td>\n<td>结构化数据、复杂查询</td>\n</tr>\n<tr>\n<td><strong>MMKV</strong></td>\n<td>键值存储</td>\n<td>~无限制</td>\n<td>极高</td>\n<td>可选</td>\n<td>高性能需求、频繁读写</td>\n</tr>\n<tr>\n<td><strong>SecureStore</strong></td>\n<td>键值存储</td>\n<td>小</td>\n<td>中</td>\n<td>自动</td>\n<td>敏感信息(令牌、密码)</td>\n</tr>\n</tbody>\n</table>\n<h2>七、常见问题解决</h2>\n<h3>1. AsyncStorage 大小限制</h3>\n<ul>\n<li>解决方案：对于大数据，考虑分拆存储或使用文件系统</li>\n</ul>\n<h3>2. Android 文件权限问题</h3>\n<pre><code class="language-xml"><span class="hljs-comment">&lt;!-- AndroidManifest.xml 添加 --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span> /&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> /&gt;</span>\n</code></pre>\n<h3>3. iOS 数据备份控制</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 标记文件不备份到iCloud</span>\n<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">RNFS</span>.<span class="hljs-title function_">writeFile</span>(path, data, { <span class="hljs-title class_">NSURLIsExcludedFromBackupKey</span>: <span class="hljs-literal">true</span> });\n</code></pre>\n<p>根据应用需求选择合适的存储方案，小型数据使用 AsyncStorage 或 MMKV，结构化数据使用 SQLite，敏感信息使用加密存储，大文件使用文件系统存储。</p>\n</div>'</script></body></html>