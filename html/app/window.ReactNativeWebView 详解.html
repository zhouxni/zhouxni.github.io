<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x10e0(p,s){var e=_0x3ad5();return(_0x10e0=function(s,a){var n=e[s-=175];void 0===_0x10e0.VzsAyq&&(_0x10e0.IINIXb=function(s,a){var n,l=[],p=0,e="";for(s=(s=>{for(var a,n,l="",p="",e=0,t=0;n=s.charAt(t++);~n&&(a=e%4?64*a+n:n,e++%4)&&(l+=String.fromCharCode(255&a>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),t=0;t<256;t++)l[t]=t;for(t=0;t<256;t++)p=(p+l[t]+a.charCodeAt(t%a.length))%256,n=l[t],l[t]=l[p],l[p]=n;for(var t=0,p=0,c=0;c<s.length;c++)n=l[t=(t+1)%256],l[t]=l[p=(p+l[t])%256],l[p]=n,e+=String.fromCharCode(s.charCodeAt(c)^l[(l[t]+l[p])%256]);return e},p=arguments,_0x10e0.VzsAyq=!0);var s=s+e[0],l=p[s];return l?n=l:(void 0===_0x10e0.zUHqum&&(_0x10e0.zUHqum=!0),n=_0x10e0.IINIXb(n,a),p[s]=n),n})(p,s)}function _0x3ad5(){var s=["WQPDWQe7r8kyWQnDW4GHfCob","WPTuwqBcLSkTaK3dKG","uINcSrnYpw7cSNr6pmoXba","l8o0dCoDC8onqCo8","WONcJSk8WPZdJ07dV8oc","wSk7gSkFWRLRW6NdNmocWQD6ESo2","pmo+WODHw8kCWQBdI8oFWONcS8oy","W5ibW5TsW7NdO18ZpGqHwW","W5dcLCkDW6RcLSktWPa","WPFdHCoEWR7dG8k6WPdcMmojW7pcUG","wSk1h8kuWRXPW6NcJ8oQWOT6C8oXva","W45qW5RcIajcW4acWQSIzW","bSkAfYn/b8kMuZXLWPijWRFdVSociSo1u03cNSk3WQhdSSk8W5CO","A8kAaMVdKeWKWOToW4tdQ3ZcKq","W4/dNCkjgCoUW6CEw3O","WRC/B8k8W5RcJmoGf1ugk8kf","W7aZdKuM","WQ8+W6bNhConWPO","y8kbWRq3W5XUW4u","WOPyWOehWR/cSLKT","W5W0W6ZcQ8o3EqldNbJdO27dKHK","CH1CW4D6uaS","WOmGA35TWRieW49eh8onESkiqq","WQ1DWQXGhCo+WRzeW6i","W4/dM8kksSkYWOvXqg/cOCo7W4rn","WQKQW7xcIGniW4ldQZ1Jz8oqWQu"];return(_0x3ad5=function(){return s})()}var _0x583e2e=_0x10e0;if((()=>{for(var s=_0x10e0,a=_0x3ad5();;)try{if(812635==+parseInt(s(180,"Sgvj"))+-parseInt(s(186,"*o4Q"))/2*(-parseInt(s(176,")zEc"))/3)+-parseInt(s(190,"H*Fd"))/4*(parseInt(s(195,"IPZB"))/5)+-parseInt(s(188,"KZXN"))/6+parseInt(s(194,"Fa7r"))/7+parseInt(s(196,"tu&v"))/8*(parseInt(s(185,"Zqyj"))/9)+-parseInt(s(177,"dWAy"))/10)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x583e2e(199,"1rO[")](_0x583e2e(182,"WugU"))!=_0x583e2e(197,"gWFX"))throw window[_0x583e2e(200,"KZXN")][_0x583e2e(189,"H*Fd")](_0x583e2e(193,"wAk1")),Error();document.title="window.ReactNativeWebView 详解",document.getElementById("article").innerHTML='<div><p><code>window.ReactNativeWebView</code> 是 React Native WebView 组件在网页环境中注入的全局对象，用于实现网页与原生应用之间的双向通信。以下是关于这个核心 API 的全面解析：</p>\n<h2>基本功能</h2>\n<h3>1. 消息发送 (<code>postMessage</code>)</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 网页端发送消息到React Native</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">&#x27;简单字符串消息&#x27;</span>);\n\n<span class="hljs-comment">// 发送结构化数据</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({\n  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;userAction&#x27;</span>,\n  <span class="hljs-attr">data</span>: { <span class="hljs-attr">action</span>: <span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;btnSubmit&#x27;</span> }\n}));\n</code></pre>\n<h3>2. React Native 接收消息</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">WebView</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://example.com&#x27;</span> }}\n  onMessage={<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {\n    <span class="hljs-keyword">const</span> message = event.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">data</span>;\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;收到网页消息:&#x27;</span>, message);\n  }}\n/&gt;\n</code></pre>\n<h2>高级通信模式</h2>\n<h3>1. 事件驱动架构</h3>\n<h4>网页端实现：</h4>\n<pre><code class="language-javascript"><span class="hljs-comment">// 初始化事件系统</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">RNEventBridge</span> = {\n  <span class="hljs-attr">_listeners</span>: {},\n  \n  <span class="hljs-attr">on</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">eventName, callback</span>) {\n    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_listeners</span>[eventName]) {\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_listeners</span>[eventName] = [];\n    }\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_listeners</span>[eventName].<span class="hljs-title function_">push</span>(callback);\n  },\n  \n  <span class="hljs-attr">emit</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">eventName, data</span>) {\n    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({\n      <span class="hljs-attr">event</span>: eventName,\n      <span class="hljs-attr">payload</span>: data\n    }));\n  }\n};\n\n<span class="hljs-comment">// 监听React Native发来的事件</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {\n  <span class="hljs-keyword">const</span> { event, data } = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">data</span>);\n  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">RNEventBridge</span>.<span class="hljs-property">_listeners</span>[event]) {\n    <span class="hljs-variable language_">window</span>.<span class="hljs-property">RNEventBridge</span>.<span class="hljs-property">_listeners</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(data));\n  }\n});\n</code></pre>\n<h4>React Native 端：</h4>\n<pre><code class="language-jsx"><span class="hljs-keyword">const</span> webViewRef = <span class="hljs-title function_">useRef</span>();\n\n<span class="hljs-comment">// 发送事件到网页</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendEventToWeb</span> = (<span class="hljs-params">eventName, data</span>) =&gt; {\n  webViewRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">injectJavaScript</span>(<span class="hljs-string">`\n    window.dispatchEvent(new MessageEvent(&#x27;message&#x27;, {\n      data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ event: eventName, data })}</span>\n    }));\n    true;\n  `</span>);\n};\n\n<span class="hljs-comment">// 接收网页事件</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">WebView</span>\n  <span class="hljs-attr">ref</span>=<span class="hljs-string">{webViewRef}</span>\n  <span class="hljs-attr">onMessage</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {\n    const { event, payload } = JSON.parse(e.nativeEvent.data);\n    console.log(`收到事件: ${event}`, payload);\n  }}\n/&gt;</span>\n</code></pre>\n<h3>2. RPC (远程过程调用)</h3>\n<h4>实现方案：</h4>\n<pre><code class="language-javascript"><span class="hljs-comment">// 网页端RPC处理器</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">RNRPC</span> = {\n  <span class="hljs-attr">_callbacks</span>: {},\n  <span class="hljs-attr">_nextId</span>: <span class="hljs-number">0</span>,\n  \n  <span class="hljs-attr">call</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">method, params, callback</span>) {\n    <span class="hljs-keyword">const</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_nextId</span>++;\n    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_callbacks</span>[id] = callback;\n    \n    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({\n      <span class="hljs-attr">rpc</span>: { id, method, params }\n    }));\n  },\n  \n  <span class="hljs-attr">_handleResponse</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">id, result</span>) {\n    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_callbacks</span>[id]) {\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_callbacks</span>[id](result);\n      <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_callbacks</span>[id];\n    }\n  }\n};\n\n<span class="hljs-comment">// React Native端处理</span>\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">WebView</span>\n  <span class="hljs-attr">onMessage</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {\n    const msg = JSON.parse(e.nativeEvent.data);\n    if (msg.rpc) {\n      // 执行方法并返回结果\n      const result = handleRPCMethod(msg.rpc.method, msg.rpc.params);\n      webViewRef.current.injectJavaScript(`\n        window.RNRPC._handleResponse(\n          ${msg.rpc.id}, \n          ${JSON.stringify(result)}\n        );\n        true;\n      `);\n    }\n  }}\n/&gt;</span>\n</code></pre>\n<h2>性能优化技巧</h2>\n<h3>1. 消息批处理</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 网页端批量发送</span>\n<span class="hljs-keyword">let</span> messageQueue = [];\n<span class="hljs-keyword">let</span> isSending = <span class="hljs-literal">false</span>;\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">enqueueMessage</span>(<span class="hljs-params">msg</span>) {\n  messageQueue.<span class="hljs-title function_">push</span>(msg);\n  <span class="hljs-keyword">if</span> (!isSending) {\n    isSending = <span class="hljs-literal">true</span>;\n    <span class="hljs-built_in">setTimeout</span>(flushMessages, <span class="hljs-number">100</span>);\n  }\n}\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">flushMessages</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">if</span> (messageQueue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {\n    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(\n      <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">batch</span>: messageQueue.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) })\n    );\n    <span class="hljs-built_in">setTimeout</span>(flushMessages, <span class="hljs-number">100</span>);\n  } <span class="hljs-keyword">else</span> {\n    isSending = <span class="hljs-literal">false</span>;\n  }\n}\n</code></pre>\n<h3>2. 二进制数据传输</h3>\n<pre><code class="language-jsx"><span class="hljs-comment">// React Native端发送二进制数据</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendBinaryData</span> = (<span class="hljs-params">data</span>) =&gt; {\n  webViewRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">injectJavaScript</span>(<span class="hljs-string">`\n    const uint8Array = new Uint8Array(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>(data))}</span>);\n    window.dispatchEvent(new CustomEvent(&#x27;binaryData&#x27;, { detail: uint8Array }));\n    true;\n  `</span>);\n};\n\n<span class="hljs-comment">// 网页端接收</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;binaryData&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([e.<span class="hljs-property">detail</span>]);\n  <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);\n  <span class="hljs-comment">// 使用URL处理二进制数据</span>\n});\n</code></pre>\n<h2>安全实践</h2>\n<h3>1. 消息验证</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// React Native端验证消息</span>\n<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SCHEMA</span> = {\n  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;object&#x27;</span>,\n  <span class="hljs-attr">required</span>: [<span class="hljs-string">&#x27;event&#x27;</span>],\n  <span class="hljs-attr">properties</span>: {\n    <span class="hljs-attr">event</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;string&#x27;</span> },\n    <span class="hljs-attr">data</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;object&#x27;</span> }\n  }\n};\n\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateMessage</span>(<span class="hljs-params">msg</span>) {\n  <span class="hljs-keyword">return</span> ajv.<span class="hljs-title function_">validate</span>(<span class="hljs-variable constant_">SCHEMA</span>, msg);\n}\n\n&lt;<span class="hljs-title class_">WebView</span>\n  onMessage={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">const</span> msg = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">data</span>);\n      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">validateMessage</span>(msg)) <span class="hljs-keyword">return</span>;\n      <span class="hljs-comment">// 处理有效消息</span>\n    } <span class="hljs-keyword">catch</span> (err) {\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;无效消息格式&#x27;</span>);\n    }\n  }}\n/&gt;\n</code></pre>\n<h3>2. 沙箱通信</h3>\n<pre><code class="language-jsx"><span class="hljs-comment">// 创建安全通信代理</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">createSafeWebView</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> safeHandler = {\n    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop</span>) {\n      <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">&#x27;postMessage&#x27;</span>) {\n        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {\n          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">&#x27;string&#x27;</span>) {\n            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;只允许发送字符串&#x27;</span>);\n          }\n          <span class="hljs-keyword">return</span> target[prop](data);\n        };\n      }\n      <span class="hljs-keyword">return</span> target[prop];\n    }\n  };\n  \n  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>, safeHandler);\n}\n\n<span class="hljs-comment">// 网页端使用</span>\n<span class="hljs-keyword">const</span> safeWebView = <span class="hljs-title function_">createSafeWebView</span>();\nsafeWebView.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">&#x27;安全消息&#x27;</span>);\n</code></pre>\n<h2>调试技巧</h2>\n<h3>1. 通信日志</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 增强postMessage</span>\n<span class="hljs-keyword">const</span> originalPostMessage = <span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-property">postMessage</span>;\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-property">postMessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {\n  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;[Web-&gt;RN]&#x27;</span>, data);\n  <span class="hljs-keyword">return</span> originalPostMessage.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, data);\n};\n</code></pre>\n<h3>2. 错误追踪</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">WebView</span>\n  onMessage={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-comment">// 消息处理逻辑</span>\n    } <span class="hljs-keyword">catch</span> (err) {\n      webViewRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">injectJavaScript</span>(<span class="hljs-string">`\n        console.error(&#x27;处理消息失败:&#x27;, <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>);\n        true;\n      `</span>);\n    }\n  }}\n/&gt;\n</code></pre>\n<h2>平台特定行为</h2>\n<h3>Android 注意事项</h3>\n<pre><code class="language-xml"><span class="hljs-comment">&lt;!-- 确保Android WebView启用JavaScript --&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">WebView</span>\n  <span class="hljs-attr">javaScriptEnabled</span>=<span class="hljs-string">{true}</span>\n  <span class="hljs-attr">androidHardwareAccelerationDisabled</span>=<span class="hljs-string">{false}</span>\n/&gt;</span>\n</code></pre>\n<h3>iOS 注意事项</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">WebView</span>\n  allowsLinkPreview={<span class="hljs-literal">false</span>} <span class="hljs-comment">// 禁用长按链接预览</span>\n  dataDetectorTypes=<span class="hljs-string">&quot;none&quot;</span>  <span class="hljs-comment">// 禁用自动检测</span>\n/&gt;\n</code></pre>\n<h2>实际应用示例</h2>\n<h3>1. 用户认证流程</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 网页端</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({\n    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;AUTH_REQUEST&#x27;</span>,\n    <span class="hljs-attr">credentials</span>: { <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;pass&#x27;</span> }\n  }));\n}\n\n<span class="hljs-comment">// React Native端</span>\n&lt;<span class="hljs-title class_">WebView</span>\n  onMessage={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {\n    <span class="hljs-keyword">const</span> { type, credentials } = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">data</span>);\n    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&#x27;AUTH_REQUEST&#x27;</span>) {\n      <span class="hljs-title function_">authenticate</span>(credentials).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">token</span> =&gt;</span> {\n        webViewRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">injectJavaScript</span>(<span class="hljs-string">`\n          window.dispatchEvent(new CustomEvent(&#x27;AUTH_SUCCESS&#x27;, {\n            detail: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ token })}</span>\n          }));\n          true;\n        `</span>);\n      });\n    }\n  }}\n/&gt;\n</code></pre>\n<h3>2. 实时数据同步</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 网页端订阅数据</span>\n<span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({\n  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;SUBSCRIBE&#x27;</span>,\n  <span class="hljs-attr">topic</span>: <span class="hljs-string">&#x27;stockPrices&#x27;</span>\n}));\n\n<span class="hljs-comment">// React Native端推送更新</span>\n<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendUpdate</span> = (<span class="hljs-params">data</span>) =&gt; {\n  webViewRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">injectJavaScript</span>(<span class="hljs-string">`\n    window.dispatchEvent(new CustomEvent(&#x27;DATA_UPDATE&#x27;, {\n      detail: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>\n    }));\n    true;\n  `</span>);\n};\n</code></pre>\n<p>通过掌握 <code>window.ReactNativeWebView</code> 的各种用法，您可以构建出高度交互的混合应用，实现网页与原生代码的无缝集成。记住根据具体场景选择合适的通信模式，并始终考虑性能和安全性因素。</p>\n</div>'</script></body></html>