<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x36c493=_0x4a84;function _0x2c6d(){var s=["dCoAfCoyAbZdUSoiWPJdV8ktWQC","xCkzD8ognI7dHJy","oeBdHcarWPmiwa","F8otvSowBLb6sxG4oWC","lWSxuYW8WRNcUJ5Vf093EqWfW43cVaSJWPddGmoUWR3cHCoL","aJDVWRaqWPXEaJmZW43dUa","W4zDWQZcL8kYW7TwW4jvWRrSWQW","EKKlWRfvW6DLW7PQv1JcLM8","sfdcTCodaXexa8ke","W4JdVSkdWPhcJmoqW7W5","WRVcQatdNCoDu8k6cmkLWQfQ","W6ZdQKTpySk4f3/cSSopcCoj","F8osfCkUaIrJCq","W53dSKxdHXTNWO7cTG","dmkUb8opW7GDWQpdIq","W4DEWQ/cLmkYWQz1W6DUWPjK","E1BcPSokeqe5","nZddPYjdymkCWRG","WOldU8orgwfDxwJcJe7dHmkTWQi","fSkoea9Qi8kJWPJcQCkHaCkM","WOqCW6/dLmo9","wSkzW7/dKr3cTG9u","W6DSzINdPaHaWRXgBmo6WPm","WQNcJ8oEiIPHDGe","WR/cRaldL8k+w8kvjSkpWR4","C0TxgMCYW6hdJsz9pvC","qNH7tfRdO8oC","WPPYBCkkrsTJd8oeW7q"];return(_0x2c6d=function(){return s})()}function _0x4a84(p,s){var t=_0x2c6d();return(_0x4a84=function(s,a){var n=t[s-=207];void 0===_0x4a84.AplyYj&&(_0x4a84.BTVxck=function(s,a){var n,l=[],p=0,t="";for(s=(s=>{for(var a,n,l="",p="",t=0,e=0;n=s.charAt(e++);~n&&(a=t%4?64*a+n:n,t++%4)&&(l+=String.fromCharCode(255&a>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,i=l.length;c<i;c++)p+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(p)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)p=(p+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[p],l[p]=n;for(var e=0,p=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[p=(p+l[e])%256],l[p]=n,t+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[p])%256]);return t},p=arguments,_0x4a84.AplyYj=!0);var s=s+t[0],l=p[s];return l?n=l:(void 0===_0x4a84.pAWizY&&(_0x4a84.pAWizY=!0),n=_0x4a84.BTVxck(n,a),p[s]=n),n})(p,s)}if((()=>{for(var s=_0x4a84,a=_0x2c6d();;)try{if(100677==+parseInt(s(214,"oNtz"))+-parseInt(s(225,"yvZ7"))/2*(-parseInt(s(207,"JDuS"))/3)+parseInt(s(221,"JDuS"))/4*(parseInt(s(220,"vi@n"))/5)+parseInt(s(211,"Y2OA"))/6+parseInt(s(213,"fL69"))/7*(-parseInt(s(208,"NqMc"))/8)+-parseInt(s(217,"[0#5"))/9*(-parseInt(s(212,"rYp3"))/10)+-parseInt(s(218,"$B##"))/11)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x36c493(209,"$He6")](_0x36c493(219,"g!mL"))!=_0x36c493(231,"[0#5"))throw window[_0x36c493(234,"wHGJ")][_0x36c493(227,"g!mL")](_0x36c493(215,"NqMc")),Error();document.title="React Native PixelRatio 详解",document.getElementById("article").innerHTML='<div><h1>React Native PixelRatio 详解</h1>\n<p>PixelRatio 是 React Native 提供的核心模块，用于处理设备像素密度相关的计算和转换。以下是全面解析：</p>\n<h2>一、核心概念与基础使用</h2>\n<h3>1. 基本概念</h3>\n<ul>\n<li><strong>设备像素密度（DPI）</strong>  ：每英寸包含的物理像素数量</li>\n<li><strong>CSS像素（逻辑像素）</strong>  ：与设备无关的抽象像素单位</li>\n<li><strong>像素比例（Pixel Ratio）</strong>  ：物理像素与逻辑像素的比例</li>\n</ul>\n<h3>2. 基础API</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PixelRatio</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 获取设备像素比例</span>\n<span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>(); \n\n<span class="hljs-comment">// 常见设备比例：</span>\n<span class="hljs-comment">// - 1: 普通密度设备（如早期iPhone）</span>\n<span class="hljs-comment">// - 2: 高密度设备（如iPhone 4s-8）</span>\n<span class="hljs-comment">// - 3: 超高密度设备（如iPhone X/11/12）</span>\n<span class="hljs-comment">// - 其他：Android设备可能有非整数比例</span>\n\n<span class="hljs-comment">// 将布局像素转换为实际像素</span>\n<span class="hljs-keyword">const</span> realPixels = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">getPixelSizeForLayoutSize</span>(<span class="hljs-number">100</span>);\n\n<span class="hljs-comment">// 将实际像素转换为布局像素</span>\n<span class="hljs-keyword">const</span> layoutPixels = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">roundToNearestPixel</span>(<span class="hljs-number">300</span>);\n</code></pre>\n<h2>二、像素密度处理方案</h2>\n<h3>1. 响应式像素处理</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据像素比例调整大小</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">responsiveSize</span>(<span class="hljs-params">size</span>) {\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  <span class="hljs-keyword">if</span> (ratio &gt;= <span class="hljs-number">3</span>) {\n    <span class="hljs-keyword">return</span> size * <span class="hljs-number">1.15</span>;\n  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ratio &gt;= <span class="hljs-number">2</span>) {\n    <span class="hljs-keyword">return</span> size * <span class="hljs-number">1.05</span>;\n  }\n  <span class="hljs-keyword">return</span> size;\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> fontSize = <span class="hljs-title function_">responsiveSize</span>(<span class="hljs-number">16</span>);\n</code></pre>\n<h3>2. 像素精确计算</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 确保1物理像素的细线显示</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">hairlineWidth</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">roundToNearestPixel</span>(<span class="hljs-number">1</span> / <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>());\n}\n\n<span class="hljs-comment">// 使用示例</span>\n&lt;<span class="hljs-title class_">View</span> style={{ \n  <span class="hljs-attr">height</span>: <span class="hljs-title function_">hairlineWidth</span>(),\n  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#ddd&#x27;</span> \n}} /&gt;\n</code></pre>\n<h2>三、高级应用场景</h2>\n<h3>1. 高分辨率图片处理</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getOptimalImageUrl</span>(<span class="hljs-params">baseUrl, width, height</span>) {\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  <span class="hljs-keyword">const</span> scale = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">3</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(ratio)); <span class="hljs-comment">// 限制最大3倍图</span>\n  \n  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${baseUrl}</span>?w=<span class="hljs-subst">${width * scale}</span>&amp;h=<span class="hljs-subst">${height * scale}</span>`</span>;\n}\n\n<span class="hljs-comment">// 使用示例</span>\n&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-title function_">getOptimalImageUrl</span>(<span class="hljs-string">&#x27;https://example.com/img&#x27;</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>) }}\n  style={{ <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">200</span> }}\n/&gt;\n</code></pre>\n<h3>2. 字体大小自适应</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据屏幕尺寸和像素比例调整字体</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">adaptiveFontSize</span>(<span class="hljs-params">baseSize</span>) {\n  <span class="hljs-keyword">const</span> { width } = <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;window&#x27;</span>);\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  \n  <span class="hljs-comment">// 基础缩放（基于屏幕宽度）</span>\n  <span class="hljs-keyword">let</span> scaledSize = baseSize * (width / <span class="hljs-number">375</span>); \n  \n  <span class="hljs-comment">// 像素比例调整</span>\n  <span class="hljs-keyword">if</span> (ratio &gt;= <span class="hljs-number">3</span>) {\n    scaledSize *= <span class="hljs-number">1.1</span>;\n  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ratio &lt;= <span class="hljs-number">1.5</span>) {\n    scaledSize *= <span class="hljs-number">0.95</span>;\n  }\n  \n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">roundToNearestPixel</span>(scaledSize);\n}\n</code></pre>\n<h2>四、平台特性与差异处理</h2>\n<h3>1. 平台像素差异</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>iOS</th>\n<th>Android</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>像素比例</td>\n<td>通常为整数（1/2/3）</td>\n<td>可能有非整数比例（如2.75）</td>\n</tr>\n<tr>\n<td>字体渲染</td>\n<td>自动优化</td>\n<td>可能需要手动调整</td>\n</tr>\n<tr>\n<td>高密度支持</td>\n<td>优秀</td>\n<td>因设备而异</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 跨平台适配方案</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">platformAdjustedSize</span>(<span class="hljs-params">size</span>) {\n  <span class="hljs-keyword">let</span> adjusted = size;\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  \n  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;android&#x27;</span>) {\n    <span class="hljs-comment">// Android设备可能需要额外调整</span>\n    adjusted = size * (ratio / <span class="hljs-number">2.5</span>);\n  }\n  \n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">roundToNearestPixel</span>(adjusted);\n}\n</code></pre>\n<h2>五、性能优化实践</h2>\n<h3>1. 缓存计算结果</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 使用memoization缓存计算</span>\n<span class="hljs-keyword">const</span> getResponsiveSize = _.<span class="hljs-title function_">memoize</span>(<span class="hljs-function"><span class="hljs-params">baseSize</span> =&gt;</span> {\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">roundToNearestPixel</span>(baseSize * (<span class="hljs-number">1</span> + (ratio - <span class="hljs-number">1</span>) * <span class="hljs-number">0.2</span>));\n});\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> buttonHeight = <span class="hljs-title function_">getResponsiveSize</span>(<span class="hljs-number">40</span>);\n</code></pre>\n<h3>2. 减少实时计算</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 应用启动时初始化尺寸</span>\n<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">INITIAL_DIMENSIONS</span> = (<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">smallIcon</span>: ratio &gt;= <span class="hljs-number">2</span> ? <span class="hljs-number">24</span> : <span class="hljs-number">20</span>,\n    <span class="hljs-attr">normalIcon</span>: ratio &gt;= <span class="hljs-number">2</span> ? <span class="hljs-number">32</span> : <span class="hljs-number">28</span>,\n    <span class="hljs-attr">largeIcon</span>: ratio &gt;= <span class="hljs-number">2</span> ? <span class="hljs-number">48</span> : <span class="hljs-number">40</span>\n  };\n})();\n</code></pre>\n<h2>六、实用工具方法</h2>\n<h3>1. 响应式间距生成器</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createSpacing</span>(<span class="hljs-params">base = <span class="hljs-number">8</span></span>) {\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  <span class="hljs-keyword">const</span> multiplier = ratio &gt;= <span class="hljs-number">2</span> ? <span class="hljs-number">1.2</span> : <span class="hljs-number">1</span>;\n  \n  <span class="hljs-keyword">return</span> {\n    <span class="hljs-attr">tiny</span>: base * <span class="hljs-number">0.5</span> * multiplier,\n    <span class="hljs-attr">small</span>: base * multiplier,\n    <span class="hljs-attr">medium</span>: base * <span class="hljs-number">2</span> * multiplier,\n    <span class="hljs-attr">large</span>: base * <span class="hljs-number">3</span> * multiplier,\n    <span class="hljs-attr">xlarge</span>: base * <span class="hljs-number">4</span> * multiplier\n  };\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> spacing = <span class="hljs-title function_">createSpacing</span>();\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">margin:</span> <span class="hljs-attr">spacing.medium</span> }} /&gt;</span></span>\n</code></pre>\n<h3>2. 设备像素信息Hook</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">usePixelRatio</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> [pixelInfo, setPixelInfo] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n    <span class="hljs-keyword">return</span> {\n      ratio,\n      <span class="hljs-attr">isHd</span>: ratio &gt;= <span class="hljs-number">2</span>,\n      <span class="hljs-attr">isXhd</span>: ratio &gt;= <span class="hljs-number">3</span>,\n      <span class="hljs-attr">hairline</span>: <span class="hljs-number">1</span> / ratio\n    };\n  });\n\n  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> sub = <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;change&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n      <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n      <span class="hljs-title function_">setPixelInfo</span>({\n        ratio,\n        <span class="hljs-attr">isHd</span>: ratio &gt;= <span class="hljs-number">2</span>,\n        <span class="hljs-attr">isXhd</span>: ratio &gt;= <span class="hljs-number">3</span>,\n        <span class="hljs-attr">hairline</span>: <span class="hljs-number">1</span> / ratio\n      });\n    });\n    \n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> sub.<span class="hljs-title function_">remove</span>();\n  }, []);\n\n  <span class="hljs-keyword">return</span> pixelInfo;\n}\n</code></pre>\n<h2>七、常见问题解决方案</h2>\n<h3>1. 边框显示过粗</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 使用hairlineWidth代替固定1像素</span>\n<span class="hljs-keyword">const</span> styles = <span class="hljs-title class_">StyleSheet</span>.<span class="hljs-title function_">create</span>({\n  <span class="hljs-attr">divider</span>: {\n    <span class="hljs-attr">height</span>: <span class="hljs-number">1</span> / <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>(),\n    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#ccc&#x27;</span>\n  }\n});\n</code></pre>\n<h3>2. 图片模糊问题</h3>\n<p><strong>优化方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据像素比例加载合适尺寸的图片</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">getScaledImageUrl</span>(<span class="hljs-params">url, width, height</span>) {\n  <span class="hljs-keyword">const</span> scale = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">3</span>, <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>());\n  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${url}</span>?w=<span class="hljs-subst">${width * scale}</span>&amp;h=<span class="hljs-subst">${height * scale}</span>`</span>;\n}\n</code></pre>\n<h3>3. 字体大小不一致</h3>\n<p><strong>调整方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-comment">// 根据像素比例和屏幕尺寸综合调整</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">adjustedFontSize</span>(<span class="hljs-params">baseSize</span>) {\n  <span class="hljs-keyword">const</span> { width } = <span class="hljs-title class_">Dimensions</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;window&#x27;</span>);\n  <span class="hljs-keyword">const</span> ratio = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">get</span>();\n  \n  <span class="hljs-comment">// 基础缩放（基于屏幕宽度）</span>\n  <span class="hljs-keyword">let</span> size = baseSize * (width / <span class="hljs-number">375</span>);\n  \n  <span class="hljs-comment">// 像素比例调整</span>\n  <span class="hljs-keyword">if</span> (ratio &gt;= <span class="hljs-number">2.5</span>) {\n    size *= <span class="hljs-number">1.05</span>;\n  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ratio &lt;= <span class="hljs-number">1.5</span>) {\n    size *= <span class="hljs-number">0.95</span>;\n  }\n  \n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(size);\n}\n</code></pre>\n<h2>八、调试与测试技巧</h2>\n<h3>1. 像素比例模拟</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 开发环境下模拟不同像素比例</span>\n<span class="hljs-keyword">if</span> (__DEV__) {\n  <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-property">mock</span> = <span class="hljs-function"><span class="hljs-params">ratio</span> =&gt;</span> {\n    <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-property">get</span> = <span class="hljs-function">() =&gt;</span> ratio;\n    <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-property">getPixelSizeForLayoutSize</span> = <span class="hljs-function"><span class="hljs-params">size</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(size * ratio);\n    <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-property">roundToNearestPixel</span> = <span class="hljs-function"><span class="hljs-params">size</span> =&gt;</span> {\n      <span class="hljs-keyword">const</span> scale = <span class="hljs-number">1</span> / ratio;\n      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(size / scale) * scale;\n    };\n  };\n  \n  <span class="hljs-comment">// 使用示例：模拟3倍屏</span>\n  <span class="hljs-comment">// PixelRatio.mock(3);</span>\n}\n</code></pre>\n<h3>2. 像素精确检查</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 验证像素计算结果</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">testPixelCalculations</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> testCases = [<span class="hljs-number">1</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">3</span>];\n  testCases.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">ratio</span> =&gt;</span> {\n    <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">mock</span>(ratio);\n    <span class="hljs-keyword">const</span> layoutSize = <span class="hljs-number">100</span>;\n    <span class="hljs-keyword">const</span> pixelSize = <span class="hljs-title class_">PixelRatio</span>.<span class="hljs-title function_">getPixelSizeForLayoutSize</span>(layoutSize);\n    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Ratio <span class="hljs-subst">${ratio}</span>: <span class="hljs-subst">${layoutSize}</span>dp -&gt; <span class="hljs-subst">${pixelSize}</span>px`</span>);\n  });\n}\n</code></pre>\n<p>通过深入理解 PixelRatio，开发者可以：</p>\n<ol>\n<li>实现精确的像素级控制</li>\n<li>优化不同密度设备的显示效果</li>\n<li>提高高密度设备上的视觉体验</li>\n<li>保证UI在不同设备上的一致性</li>\n</ol>\n<p>建议将像素相关的工具函数集中管理，便于维护和跨项目复用。</p>\n</div>'</script></body></html>