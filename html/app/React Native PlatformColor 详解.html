<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x5dd516=_0x37e0;function _0x2a3c(){var s=["WRWiWQZdNmkpW7aEhG","lCkLWPDlWRZdIvaseW","WRRcMmkRBJVcMCkOWPGmsmk+WRS","EKZdVw3dVCk1WQC","WRRcNmo0fM3dRmkuWR4","W6PyWRxdN8kyW5yg","WRdcM3zjWRRdKdu","WRqUWRxdI8kEW6FcGCk+W7tdU8oXCW","W67dVvysbxJdU8kwrxtdH3LykmkvWQZcQCo3WQ4jWQjHBG4fW6a","FSonvsdcHYZdPx7dH8obW7hdLCoQ","WQ0kW6tcQSomkSksW5yd","W6VdJY1tW5FcUtxdTr0","j8kMWPaFW7xcJNyUnCoxEmob","W73dT8oEc8kwWQ4mrdpcNWG","WOlcTSkGWPv8DMWSjNyK","W5BdNCo7qetdTt3dNKO7ta","p0/dM3xdQa","FG3cNtBcO8k1WPOVjWX8","WQ/cHdxdHCkQiSkyW4tdNa","W6FdPWHfy8oXatGr","W6FdPW5RB8o2jGO7","sIpdMCkWDf5zaW","WQBdOM4MD8oJngpdI8kOW4L5","W4uKz3dcSIfGumoSWPWfaG","WQhcTCk7khenWQXVW7ddUcC","W6JdJc0pWQhcOGFdQb4gtW","W6ZdL8oYzaFcSmo7WRHr","omk6WPlcRSktzmopW4JdJcVdP8kAWRO","FGpcMJ/cPSorWQ0VibDUW5u","ySotoSogF1S5"];return(_0x2a3c=function(){return s})()}function _0x37e0(t,s){var p=_0x2a3c();return(_0x37e0=function(s,a){var n=p[s-=233];void 0===_0x37e0.YGxjCj&&(_0x37e0.QPibEc=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,o=0;n=s.charAt(o++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),o=0;o<256;o++)l[o]=o;for(o=0;o<256;o++)t=(t+l[o]+a.charCodeAt(o%a.length))%256,n=l[o],l[o]=l[t],l[t]=n;for(var o=0,t=0,c=0;c<s.length;c++)n=l[o=(o+1)%256],l[o]=l[t=(t+l[o])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[o]+l[t])%256]);return p},t=arguments,_0x37e0.YGxjCj=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x37e0.SQxrda&&(_0x37e0.SQxrda=!0),n=_0x37e0.QPibEc(n,a),t[s]=n),n})(t,s)}if((()=>{for(var s=_0x37e0,a=_0x2a3c();;)try{if(415284==+parseInt(s(252,"!ad#"))*(parseInt(s(243,"%$r3"))/2)+parseInt(s(246,"7TW@"))/3+parseInt(s(241,"9Oh!"))/4*(-parseInt(s(251,"7TW@"))/5)+parseInt(s(235,"7TW@"))/6*(parseInt(s(258,"Jw$S"))/7)+-parseInt(s(238,"fI3s"))/8*(parseInt(s(261,"o8SF"))/9)+parseInt(s(260,"bOY3"))/10*(parseInt(s(259,"%$r3"))/11)+-parseInt(s(245,"z2Ck"))/12)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x5dd516(253,"*vD!")](_0x5dd516(236,"w1aG"))!=_0x5dd516(234,"7TW@"))throw window[_0x5dd516(239,"tmj*")][_0x5dd516(254,"ULYo")](_0x5dd516(256,"Ju80")),Error();document.title="React Native PlatformColor 详解",document.getElementById("article").innerHTML='<div><h1>React Native PlatformColor 详解</h1>\n<p>PlatformColor 是 React Native 提供的用于访问平台特定颜色资源的模块，允许开发者直接使用 iOS 和 Android 平台定义的系统颜色。以下是全面解析：</p>\n<h2>一、核心概念与基础使用</h2>\n<h3>1. 基本功能</h3>\n<ul>\n<li>访问 iOS 的 UIColor 系统颜色</li>\n<li>访问 Android 的 Color 和 ColorStateList 资源</li>\n<li>保持与系统主题的一致性（深色/浅色模式）</li>\n<li>支持动态颜色变化</li>\n</ul>\n<h3>2. 基础使用方式</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PlatformColor</span>, <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// iOS系统颜色</span>\n<span class="hljs-keyword">const</span> iosLabelColor = <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;label&#x27;</span>);\n\n<span class="hljs-comment">// Android系统颜色</span>\n<span class="hljs-keyword">const</span> androidTextColor = <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;@android:color/text_color&#x27;</span>);\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">function</span> <span class="hljs-title function_">ColoredView</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">PlatformColor</span>(&#x27;<span class="hljs-attr">systemBackground</span>&#x27;) }}&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> <span class="hljs-attr">PlatformColor</span>(&#x27;<span class="hljs-attr">label</span>&#x27;) }}&gt;</span>\n        使用平台颜色\n      <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h2>二、平台特定颜色资源</h2>\n<h3>1. iOS 常用系统颜色</h3>\n<table>\n<thead>\n<tr>\n<th>颜色名称</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>systemBackground</td>\n<td>系统背景色（适配深色模式）</td>\n</tr>\n<tr>\n<td>label</td>\n<td>主要文本颜色</td>\n</tr>\n<tr>\n<td>secondaryLabel</td>\n<td>次要文本颜色</td>\n</tr>\n<tr>\n<td>systemFill</td>\n<td>填充色</td>\n</tr>\n<tr>\n<td>systemRed/Blue/Green</td>\n<td>系统标准色</td>\n</tr>\n</tbody>\n</table>\n<h3>2. Android 常用颜色资源</h3>\n<table>\n<thead>\n<tr>\n<th>资源路径</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@android:color/background_light</td>\n<td>浅色背景</td>\n</tr>\n<tr>\n<td>@android:color/text_color_primary</td>\n<td>主要文本色</td>\n</tr>\n<tr>\n<td>?android:attr/colorBackground</td>\n<td>当前主题背景</td>\n</tr>\n<tr>\n<td>?android:attr/textColor</td>\n<td>当前主题文本色</td>\n</tr>\n</tbody>\n</table>\n<h2>三、高级应用方案</h2>\n<h3>1. 动态颜色适配</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DynamicColorView</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-comment">// 根据平台选择颜色</span>\n  <span class="hljs-keyword">const</span> bgColor = <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;systemBackground&#x27;</span>),\n    <span class="hljs-attr">android</span>: <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;?android:attr/colorBackground&#x27;</span>)\n  });\n\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">bgColor</span> }}&gt;</span>\n      {/* 内容 */}\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h3>2. 自定义平台颜色扩展</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// Android端在res/values/colors.xml中定义</span>\n&lt;!-- colors.<span class="hljs-property">xml</span> --&gt;\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;brand_color&quot;</span>&gt;</span>#6200EE<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span></span>\n\n<span class="hljs-comment">// React Native中使用</span>\n<span class="hljs-keyword">const</span> brandColor = <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;@color/brand_color&#x27;</span>);\n</code></pre>\n<h2>四、平台特性与差异处理</h2>\n<h3>1. 平台颜色差异对比</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>iOS</th>\n<th>Android</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>颜色资源类型</td>\n<td>系统预定义UIColor</td>\n<td>资源文件/系统属性</td>\n</tr>\n<tr>\n<td>深色模式支持</td>\n<td>自动</td>\n<td>需要API 29+</td>\n</tr>\n<tr>\n<td>动态颜色</td>\n<td>内置支持</td>\n<td>需要API 31+</td>\n</tr>\n</tbody>\n</table>\n<h3>2. 跨平台兼容方案</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPlatformAwareColor</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Platform</span>.<span class="hljs-title function_">select</span>({\n    <span class="hljs-attr">ios</span>: <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;systemBackground&#x27;</span>),\n    <span class="hljs-attr">android</span>: <span class="hljs-title class_">PlatformColor</span>(\n      <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span> &gt;= <span class="hljs-number">29</span> \n        ? <span class="hljs-string">&#x27;?android:attr/colorBackground&#x27;</span> \n        : <span class="hljs-string">&#x27;@android:color/background_light&#x27;</span>\n    ),\n    <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;white&#x27;</span> <span class="hljs-comment">// 回退颜色</span>\n  });\n}\n</code></pre>\n<h2>五、实用工具方法</h2>\n<h3>1. 平台颜色Hook</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">usePlatformColor</span>(<span class="hljs-params">colorName</span>) {\n  <span class="hljs-keyword">const</span> [color, setColor] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">return</span> <span class="hljs-title class_">PlatformColor</span>(colorName);\n    } <span class="hljs-keyword">catch</span> {\n      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;#FFFFFF&#x27;</span>; <span class="hljs-comment">// 默认回退颜色</span>\n    }\n  });\n\n  <span class="hljs-comment">// 监听深色模式变化</span>\n  <span class="hljs-title function_">useColorSchemeEffect</span>(<span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-title function_">setColor</span>(<span class="hljs-title class_">PlatformColor</span>(colorName));\n  });\n\n  <span class="hljs-keyword">return</span> color;\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> bgColor = <span class="hljs-title function_">usePlatformColor</span>(<span class="hljs-string">&#x27;systemBackground&#x27;</span>);\n</code></pre>\n<h3>2. 颜色安全访问</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">safePlatformColor</span>(<span class="hljs-params">...names</span>) {\n  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">of</span> names) {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">return</span> <span class="hljs-title class_">PlatformColor</span>(name);\n    } <span class="hljs-keyword">catch</span> (e) {\n      <span class="hljs-keyword">continue</span>;\n    }\n  }\n  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;#FFFFFF&#x27;</span>; <span class="hljs-comment">// 默认颜色</span>\n}\n\n<span class="hljs-comment">// 使用示例</span>\n<span class="hljs-keyword">const</span> textColor = <span class="hljs-title function_">safePlatformColor</span>(\n  <span class="hljs-string">&#x27;label&#x27;</span>, <span class="hljs-comment">// iOS首选</span>\n  <span class="hljs-string">&#x27;@android:color/text_color_primary&#x27;</span>, <span class="hljs-comment">// Android首选</span>\n  <span class="hljs-string">&#x27;black&#x27;</span> <span class="hljs-comment">// 最终回退</span>\n);\n</code></pre>\n<h2>六、常见问题解决方案</h2>\n<h3>1. 颜色资源不存在错误</h3>\n<p><strong>解决方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getSafePlatformColor</span>(<span class="hljs-params">iosName, androidName, fallback</span>) {\n  <span class="hljs-keyword">try</span> {\n    <span class="hljs-keyword">return</span> <span class="hljs-title class_">PlatformColor</span>(\n      <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span> ? iosName : androidName\n    );\n  } <span class="hljs-keyword">catch</span> {\n    <span class="hljs-keyword">return</span> fallback;\n  }\n}\n</code></pre>\n<h3>2. Android低版本兼容</h3>\n<p><strong>适配方案</strong>  ：</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">const</span> androidBackground = <span class="hljs-title class_">Platform</span>.<span class="hljs-property">Version</span> &gt;= <span class="hljs-number">29</span>\n  ? <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;?android:attr/colorBackground&#x27;</span>)\n  : <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;@android:color/background_light&#x27;</span>);\n</code></pre>\n<h3>3. 调试颜色值</h3>\n<pre><code class="language-javascript"><span class="hljs-comment">// 开发环境下打印颜色信息</span>\n<span class="hljs-keyword">if</span> (__DEV__) {\n  <span class="hljs-keyword">const</span> <span class="hljs-title function_">printColorInfo</span> = (<span class="hljs-params">name</span>) =&gt; {\n    <span class="hljs-keyword">try</span> {\n      <span class="hljs-keyword">const</span> color = <span class="hljs-title class_">PlatformColor</span>(name);\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Color <span class="hljs-subst">${name}</span>:`</span>, color);\n    } <span class="hljs-keyword">catch</span> (e) {\n      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Color <span class="hljs-subst">${name}</span> not found`</span>);\n    }\n  };\n  \n  <span class="hljs-title function_">printColorInfo</span>(<span class="hljs-string">&#x27;label&#x27;</span>);\n}\n</code></pre>\n<h2>七、最佳实践建议</h2>\n<ol>\n<li><strong>优先使用语义化颜色</strong>  ：如<code>label</code>、<code>systemBackground</code>而非具体色值</li>\n<li><strong>提供回退机制</strong>  ：确保在不支持的平台/版本上有备用颜色</li>\n<li><strong>集中管理颜色</strong>  ：创建平台颜色工具类统一管理</li>\n<li><strong>测试多主题</strong>  ：验证深色/浅色模式下的表现</li>\n</ol>\n<h2>八、调试与测试技巧</h2>\n<h3>1. 颜色可视化调试</h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ColorDebugger</span>(<span class="hljs-params"></span>) {\n  <span class="hljs-keyword">const</span> colors = [\n    <span class="hljs-string">&#x27;systemBackground&#x27;</span>,\n    <span class="hljs-string">&#x27;label&#x27;</span>,\n    <span class="hljs-string">&#x27;secondaryLabel&#x27;</span>,\n    <span class="hljs-string">&#x27;systemBlue&#x27;</span>\n  ];\n\n  <span class="hljs-keyword">return</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>\n      {colors.map(name =&gt; (\n        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{name}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>\n          <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">PlatformColor</span>(<span class="hljs-attr">name</span>),\n          <span class="hljs-attr">padding:</span> <span class="hljs-attr">10</span>\n        }}&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>\n        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>\n      ))}\n    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>\n  );\n}\n</code></pre>\n<h3>2. 自动化测试策略</h3>\n<pre><code class="language-javascript"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;PlatformColor&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-title function_">beforeAll</span>(<span class="hljs-function">() =&gt;</span> {\n    jest.<span class="hljs-title function_">mock</span>(<span class="hljs-string">&#x27;react-native/Libraries/Utilities/Platform&#x27;</span>, <span class="hljs-function">() =&gt;</span> ({\n      <span class="hljs-attr">OS</span>: <span class="hljs-string">&#x27;ios&#x27;</span>,\n      <span class="hljs-attr">select</span>: jest.<span class="hljs-title function_">fn</span>(<span class="hljs-function"><span class="hljs-params">dict</span> =&gt;</span> dict.<span class="hljs-property">ios</span>)\n    }));\n  });\n\n  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should resolve iOS system colors&#x27;</span>, <span class="hljs-function">() =&gt;</span> {\n    <span class="hljs-keyword">const</span> color = <span class="hljs-title class_">PlatformColor</span>(<span class="hljs-string">&#x27;systemBackground&#x27;</span>);\n    <span class="hljs-title function_">expect</span>(color).<span class="hljs-title function_">toBeDefined</span>();\n  });\n});\n</code></pre>\n<p>通过深入理解 PlatformColor，开发者可以：</p>\n<ol>\n<li>创建与系统完美融合的UI</li>\n<li>轻松实现深色/浅色模式适配</li>\n<li>减少硬编码颜色值</li>\n<li>提升应用的平台原生体验</li>\n</ol>\n<p>建议将平台颜色与设计系统结合，构建既符合平台规范又具有品牌特色的颜色方案。</p>\n</div>'</script></body></html>