<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0xd265(){var s=["W485EmofsYOyamkIW4TJWPn4","W5mBmSohusG/i8kVW6BcR8kxWR0","gSo7EdtdMmo5W53dOCoZW4NdQbW","ySkCW78REXjWgmkY","zmokW4bEuCkNuG","gSo2EJVdKmo0W7FdNmobW7BdSYa","DSkincadWRxdS8o/AsxcN8oIWQW","fmobWOJdKmkGWRW3WOVdV8keWO7cImkRW7GfWRpdRHnrWPpdMqL/mq5R","fI7cIJNdQmoOqW","WOvwWRH1erBcUsCozmk+W68k","W67cVKxdP8oIh8ob","oKr1WOlcPSo8WPW9W67dTmo1W7hdVSko","sZ5lWOhdHX43WPbxAb1TWRu","qCkZW7FcNCk3W6evWRq","C8k1smkjySkbW6e0yq","ogiDWPfIWRmQ","W4hdQv7dLmoeWOpdKmkjrSkqWOiikq","B8oPn8oDw3VcPComW5lcPG8b","B8oKnCosu3BcJ8oXW6dcMrq9","pfXwW7pdP8oGWPmlvMhcHxOe","h8oos8kwoexcK3ddLSoDAhGr","C8k2smoAcmoxWQngyKTsW6BcNgW","WO5+o8kdcG","W7CcW64NuLhdGG4V"];return(_0xd265=function(){return s})()}function _0x3d72(t,s){var o=_0xd265();return(_0x3d72=function(s,a){var n=o[s-=447];void 0===_0x3d72.wJXSRp&&(_0x3d72.ZNDAAg=function(s,a){var n,e=[],t=0,o="";for(s=(s=>{for(var a,n,e="",t="",o=0,l=0;n=s.charAt(l++);~n&&(a=o%4?64*a+n:n,o++%4)&&(e+=String.fromCharCode(255&a>>(-2*o&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,p=e.length;c<p;c++)t+="%"+("00"+e.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),l=0;l<256;l++)e[l]=l;for(l=0;l<256;l++)t=(t+e[l]+a.charCodeAt(l%a.length))%256,n=e[l],e[l]=e[t],e[t]=n;for(var l=0,t=0,c=0;c<s.length;c++)n=e[l=(l+1)%256],e[l]=e[t=(t+e[l])%256],e[t]=n,o+=String.fromCharCode(s.charCodeAt(c)^e[(e[l]+e[t])%256]);return o},t=arguments,_0x3d72.wJXSRp=!0);var s=s+o[0],e=t[s];return e?n=e:(void 0===_0x3d72.uiEkvV&&(_0x3d72.uiEkvV=!0),n=_0x3d72.ZNDAAg(n,a),t[s]=n),n})(t,s)}var _0x2864e6=_0x3d72;if((()=>{for(var s=_0x3d72,a=_0xd265();;)try{if(690295==+parseInt(s(447,"xjLp"))+-parseInt(s(470,"K1to"))/2+parseInt(s(468,"!Yl["))/3*(-parseInt(s(455,"SooZ"))/4)+parseInt(s(460,"3ssk"))/5+parseInt(s(463,"!M^@"))/6+-parseInt(s(454,"q)Ov"))/7*(-parseInt(s(469,"!Yl["))/8)+-parseInt(s(462,"ezDX"))/9)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x2864e6(459,"eu7[")](_0x2864e6(450,"3ssk"))!=_0x2864e6(449,"B)4y"))throw window[_0x2864e6(464,"912t")][_0x2864e6(461,"VUFU")](_0x2864e6(458,"LK)$")),Error();document.title="react native æ³¨å†Œ android åŸç”Ÿæ¨¡å—",document.getElementById("article").innerHTML='<div><p>åœ¨ React Native ä¸­æ³¨å†Œ Android åŸç”Ÿæ¨¡å—çš„å®Œæ•´æµç¨‹å¦‚ä¸‹ï¼ˆä»¥ <strong>Toast æ¨¡å—</strong>   ä¸ºä¾‹ï¼‰ï¼š</p>\n<hr>\n<h3><strong>1. åˆ›å»º Android åŸç”Ÿæ¨¡å—</strong></h3>\n<p>åœ¨ <code>android/app/src/main/java/com/yourprojectname/</code> ä¸‹åˆ›å»º <code>ToastModule.java</code>ï¼š</p>\n<pre><code class="language-java"><span class="hljs-keyword">package</span> com.yourprojectname;\n\n<span class="hljs-keyword">import</span> android.widget.Toast;\n<span class="hljs-keyword">import</span> androidx.annotation.NonNull;\n<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactApplicationContext;\n<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactContextBaseJavaModule;\n<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactMethod;\n\n<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToastModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ReactContextBaseJavaModule</span> {\n    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ToastModule</span><span class="hljs-params">(ReactApplicationContext reactContext)</span> {\n        <span class="hljs-built_in">super</span>(reactContext);\n    }\n\n    <span class="hljs-meta">@NonNull</span>\n    <span class="hljs-meta">@Override</span>\n    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {\n        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ToastModule&quot;</span>; <span class="hljs-comment">// JS ä¸­é€šè¿‡æ­¤åç§°è°ƒç”¨æ¨¡å—</span>\n    }\n\n    <span class="hljs-meta">@ReactMethod</span>\n    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(String message)</span> {\n        Toast.makeText(getReactApplicationContext(), message, Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<hr>\n<h3><strong>2. åˆ›å»ºæ¨¡å—çš„ Package ç±»</strong></h3>\n<p>åœ¨ç›¸åŒç›®å½•ä¸‹åˆ›å»º <code>ToastPackage.java</code>ï¼š</p>\n<pre><code class="language-java"><span class="hljs-keyword">package</span> com.yourprojectname;\n\n<span class="hljs-keyword">import</span> com.facebook.react.ReactPackage;\n<span class="hljs-keyword">import</span> com.facebook.react.bridge.NativeModule;\n<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactApplicationContext;\n<span class="hljs-keyword">import</span> com.facebook.react.uimanager.ViewManager;\n<span class="hljs-keyword">import</span> java.util.ArrayList;\n<span class="hljs-keyword">import</span> java.util.Collections;\n<span class="hljs-keyword">import</span> java.util.List;\n\n<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToastPackage</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ReactPackage</span> {\n    <span class="hljs-meta">@Override</span>\n    <span class="hljs-keyword">public</span> List&lt;NativeModule&gt; <span class="hljs-title function_">createNativeModules</span><span class="hljs-params">(ReactApplicationContext reactContext)</span> {\n        List&lt;NativeModule&gt; modules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();\n        modules.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToastModule</span>(reactContext)); <span class="hljs-comment">// æ³¨å†Œæ¨¡å—</span>\n        <span class="hljs-keyword">return</span> modules;\n    }\n\n    <span class="hljs-meta">@Override</span>\n    <span class="hljs-keyword">public</span> List&lt;ViewManager&gt; <span class="hljs-title function_">createViewManagers</span><span class="hljs-params">(ReactApplicationContext reactContext)</span> {\n        <span class="hljs-keyword">return</span> Collections.emptyList(); <span class="hljs-comment">// æ— è‡ªå®šä¹‰ UI ç»„ä»¶æ—¶è¿”å›ç©ºåˆ—è¡¨</span>\n    }\n}\n</code></pre>\n<hr>\n<h3><strong>3. æ³¨å†Œæ¨¡å—åˆ°ä¸»åº”ç”¨</strong></h3>\n<h4><strong>æ–¹å¼ 1ï¼šè‡ªåŠ¨æ³¨å†Œï¼ˆReact Native 0.60+ï¼‰</strong></h4>\n<p>åœ¨ <code>android/app/src/main/java/com/yourprojectname/MainApplication.java</code> ä¸­ï¼š</p>\n<pre><code class="language-java"><span class="hljs-keyword">import</span> com.yourprojectname.ToastPackage; <span class="hljs-comment">// å¯¼å…¥ä½ çš„ Package</span>\n\n<span class="hljs-meta">@Override</span>\n <span class="hljs-keyword">protected</span> List&lt;ReactPackage&gt; <span class="hljs-title function_">getPackages</span><span class="hljs-params">()</span> {\n  <span class="hljs-meta">@SuppressWarnings(&quot;UnnecessaryLocalVariable&quot;)</span>\n    List&lt;ReactPackage&gt; packages = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PackageList</span>(<span class="hljs-built_in">this</span>).getPackages();\n        <span class="hljs-comment">// Packages that cannot be autolinked yet can be added manually here, for example:</span>\n        <span class="hljs-comment">// packages.add(new MyReactNativePackage());</span>\n           packages.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToastPackage</span>());\n           <span class="hljs-keyword">return</span> packages;\n    }\n</code></pre>\n<p>ç¡®ä¿ <code>ToastPackage</code> å·²åœ¨ <code>android/app/src/main/java/com/yourprojectname/</code> ä¸‹æ­£ç¡®åˆ›å»ºï¼ŒReact Native ä¼šè‡ªåŠ¨å‘ç°å®ƒã€‚</p>\n<h4><strong>æ–¹å¼ 2ï¼šæ‰‹åŠ¨æ³¨å†Œï¼ˆæ—§ç‰ˆ RN æˆ–ç‰¹æ®Šæƒ…å†µï¼‰</strong></h4>\n<p>åœ¨ <code>MainApplication.java</code> ä¸­æ˜¾å¼æ·»åŠ ï¼š</p>\n<pre><code class="language-java"><span class="hljs-meta">@Override</span>\n<span class="hljs-keyword">protected</span> List&lt;ReactPackage&gt; <span class="hljs-title function_">getPackages</span><span class="hljs-params">()</span> {\n    <span class="hljs-keyword">return</span> Arrays.asList(\n        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MainReactPackage</span>(),\n        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToastPackage</span>() <span class="hljs-comment">// æ‰‹åŠ¨æ·»åŠ ä½ çš„ Package</span>\n    );\n}\n</code></pre>\n<hr>\n<h3><strong>4. åœ¨ JavaScript ä¸­è°ƒç”¨</strong></h3>\n<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NativeModules</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-keyword">const</span> { <span class="hljs-title class_">ToastModule</span> } = <span class="hljs-title class_">NativeModules</span>;\n\n<span class="hljs-title class_">ToastModule</span>.<span class="hljs-title function_">show</span>(<span class="hljs-string">&quot;Hello from Android Native!&quot;</span>);\n</code></pre>\n<hr>\n<h3><strong>5. é‡æ–°ç¼–è¯‘è¿è¡Œ</strong></h3>\n<pre><code class="language-sh">npx react-native run-android\n</code></pre>\n<hr>\n<h3><strong>å¸¸è§é—®é¢˜è§£å†³</strong></h3>\n<h4><strong>Q1: <code>NativeModules.ToastModule</code> æ˜¯ <code>undefined</code>ï¼Ÿ</strong></h4>\n<ul>\n<li>æ£€æŸ¥æ¨¡å—æ˜¯å¦æ³¨å†Œæ­£ç¡®ï¼ˆ<code>MainApplication.java</code> æˆ– <code>ToastPackage.java</code>ï¼‰ã€‚</li>\n<li>ç¡®ä¿æ¨¡å—åä¸€è‡´ï¼ˆ<code>getName()</code> è¿”å›çš„å­—ç¬¦ä¸²ï¼‰ã€‚</li>\n<li>æ¸…ç†ç¼“å­˜åé‡æ–°ç¼–è¯‘ï¼š</li>\n</ul>\n<pre><code class="language-sh"><span class="hljs-built_in">cd</span> android &amp;&amp; ./gradlew clean &amp;&amp; <span class="hljs-built_in">cd</span> ..\nnpx react-native run-android\n</code></pre>\n<h4><strong>Q2: å¦‚ä½•ä¼ é€’å¤æ‚å‚æ•°ï¼Ÿ</strong></h4>\n<p>ä½¿ç”¨ <code>ReadableMap</code>ï¼ˆå¯¹åº” JS Objectï¼‰æˆ– <code>ReadableArray</code>ï¼ˆå¯¹åº” JS Arrayï¼‰ï¼š</p>\n<pre><code class="language-java"><span class="hljs-meta">@ReactMethod</span>\n<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showWithOptions</span><span class="hljs-params">(String message, ReadableMap options)</span> {\n    <span class="hljs-type">int</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> options.hasKey(<span class="hljs-string">&quot;isLong&quot;</span>) &amp;&amp; options.getBoolean(<span class="hljs-string">&quot;isLong&quot;</span>) \n        ? Toast.LENGTH_LONG : Toast.LENGTH_SHORT;\n    Toast.makeText(getReactApplicationContext(), message, duration).show();\n}\n</code></pre>\n<p>JS è°ƒç”¨ï¼š</p>\n<pre><code class="language-javascript"><span class="hljs-title class_">ToastModule</span>.<span class="hljs-title function_">showWithOptions</span>(<span class="hljs-string">&quot;Hello&quot;</span>, { <span class="hljs-attr">isLong</span>: <span class="hljs-literal">true</span> });\n</code></pre>\n<hr>\n<h3><strong>æ€»ç»“</strong></h3>\n<table>\n<thead>\n<tr>\n<th>æ­¥éª¤</th>\n<th>å…³é”®æ“ä½œ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>1. åˆ›å»ºæ¨¡å—</strong></td>\n<td>ç»§æ‰¿ <code>ReactContextBaseJavaModule</code>ï¼Œå®ç° <code>@ReactMethod</code> æ–¹æ³•</td>\n</tr>\n<tr>\n<td><strong>2. åˆ›å»º Package</strong></td>\n<td>å®ç° <code>ReactPackage</code>ï¼Œåœ¨ <code>createNativeModules</code> ä¸­æ³¨å†Œæ¨¡å—</td>\n</tr>\n<tr>\n<td><strong>3. æ³¨å†Œåˆ°ä¸»åº”ç”¨</strong></td>\n<td>é€šè¿‡ <code>MainApplication.java</code> è‡ªåŠ¨æˆ–æ‰‹åŠ¨æ³¨å†Œ</td>\n</tr>\n<tr>\n<td><strong>4. JS è°ƒç”¨</strong></td>\n<td>é€šè¿‡ <code>NativeModules.ToastModule</code> è°ƒç”¨åŸç”Ÿæ–¹æ³•</td>\n</tr>\n<tr>\n<td><strong>5. é‡æ–°ç¼–è¯‘</strong></td>\n<td>æ‰§è¡Œ <code>npx react-native run-android</code></td>\n</tr>\n</tbody>\n</table>\n<p>å®Œæˆåï¼Œä½ çš„ React Native åº”ç”¨å³å¯è°ƒç”¨ Android åŸç”ŸåŠŸèƒ½ï¼ ğŸš€</p>\n</div>'</script></body></html>