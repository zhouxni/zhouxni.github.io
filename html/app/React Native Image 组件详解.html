<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x472a6f=_0x58af;function _0x58af(t,s){var p=_0x3f89();return(_0x58af=function(s,a){var n=p[s-=321];void 0===_0x58af.txDWst&&(_0x58af.BtdQeL=function(s,a){var n,l=[],t=0,p="";for(s=(s=>{for(var a,n,l="",t="",p=0,e=0;n=s.charAt(e++);~n&&(a=p%4?64*a+n:n,p++%4)&&(l+=String.fromCharCode(255&a>>(-2*p&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var c=0,r=l.length;c<r;c++)t+="%"+("00"+l.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(t)})(s),e=0;e<256;e++)l[e]=e;for(e=0;e<256;e++)t=(t+l[e]+a.charCodeAt(e%a.length))%256,n=l[e],l[e]=l[t],l[t]=n;for(var e=0,t=0,c=0;c<s.length;c++)n=l[e=(e+1)%256],l[e]=l[t=(t+l[e])%256],l[t]=n,p+=String.fromCharCode(s.charCodeAt(c)^l[(l[e]+l[t])%256]);return p},t=arguments,_0x58af.txDWst=!0);var s=s+p[0],l=t[s];return l?n=l:(void 0===_0x58af.zIdkpF&&(_0x58af.zIdkpF=!0),n=_0x58af.BtdQeL(n,a),t[s]=n),n})(t,s)}if((()=>{for(var s=_0x58af,a=_0x3f89();;)try{if(617629==+parseInt(s(343,"LLry"))*(-parseInt(s(338,"gq^m"))/2)+parseInt(s(326,"pARQ"))/3*(-parseInt(s(339,"!qck"))/4)+-parseInt(s(324,"Tvcx"))/5*(parseInt(s(323,"EKSS"))/6)+-parseInt(s(340,"(Ux1"))/7*(-parseInt(s(325,"(Ux1"))/8)+-parseInt(s(344,"ql)]"))/9+parseInt(s(348,"PYlq"))/10*(-parseInt(s(345,"D(Jw"))/11)+parseInt(s(333,"Tvcx"))/12)break;a.push(a.shift())}catch(s){a.push(a.shift())}})(),localStorage[_0x472a6f(321,"Tvcx")](_0x472a6f(331,"zJ^V"))!=_0x472a6f(328,"Iue0"))throw window[_0x472a6f(322,"GN#H")][_0x472a6f(332,"pdCl")](_0x472a6f(335,"oo2[")),Error();function _0x3f89(){var s=["W5utWPtcJ1ldRSoeda","uruKWPr2WOy5W7O","Bfq7kqnWBmogiSkWrXu","W63cK8ocW4hcVSolWOjSqSopWQ0","WRC1W4PGj8kFW41QWQzkWOy","wqpdMKmAW4dcMSof","db9yae8","cZtcH8owaSk0c2pcMrhdSmkObW","lCoNW4mpkIRcHbqytmkl","W7pdUtL+jSkZWP4geq","WPy1W6eNWRfgaa","yvu7lqDZd8kkfCkXsa7dRCo3","pf4dWQP8W4mVmmk8b1HUW5WG","bSknW7/dPtbtWPfwldRdQHhcPSoOWQ/dISogWQKGjfNdT8oCqSkFhG","uGFcRYjeWQxcVmowzmo0WOpdVa","aCoNW5VcJCkXhCkCBerAW70","W4xcQHiNb8kRtCopW4yp","p1GmW4S8WR1Ws8k+","W63cNCodW43dUSohWOXvESo4","W4NcPmofwsHDDCoylbq","WQ/dMh7dK8k7xmkToSoVW4W","WRNcHSkCW71gWOikqCoE","kqVdUdjvzYxcKtBcQxCnWPa","nSoPo8kBW7lcNWO3W45Cwa","dZFcImoBrSomANNcQY0","W7yXWPuYW4ewcCk6W6hdGmkz","WRKxqrjWBSopauVdJq","W45yk8oFW6SFW6ibWOy","mGf2uuyGvG"];return(_0x3f89=function(){return s})()}document.title="React Native Image 组件详解",document.getElementById("article").innerHTML='<div><h1>React Native Image 组件详解</h1>\n<p>Image 是 React Native 中用于显示图片的核心组件，支持多种图片源和显示方式。以下是全面深入的解析：</p>\n<h2>一、基本用法</h2>\n<h3>1. 加载本地图片</h3>\n<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Image</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span> \n  <span class="hljs-attr">source</span>=<span class="hljs-string">{require(</span>&#x27;<span class="hljs-attr">.</span>/<span class="hljs-attr">img</span>/<span class="hljs-attr">icon.png</span>&#x27;)}\n  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">100</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">100</span> }}\n/&gt;</span></span>\n</code></pre>\n<h3>2. 加载网络图片</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://example.com/img.jpg&#x27;</span> }}\n  style={{ <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">200</span> }}\n/&gt;\n</code></pre>\n<h2>二、核心属性解析</h2>\n<h3>1. 图片源 (source)</h3>\n<ul>\n<li><strong>静态资源</strong>  ：<code>require(\'./path/to/image.png\')</code></li>\n<li><strong>网络图片</strong>  ：<code>{ uri: \'http://...\', headers: { /* 自定义头 */ } }</code></li>\n<li><strong>Base64</strong>  ：<code>{ uri: \'data:image/png;base64,...\' }</code></li>\n<li><strong>平台特定资源</strong>  ：</li>\n</ul>\n<pre><code class="language-jsx">source={{\n  <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;icon&#x27;</span>,\n  <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>,\n  <span class="hljs-attr">height</span>: <span class="hljs-number">30</span>,\n  <span class="hljs-attr">scale</span>: <span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> === <span class="hljs-string">&#x27;ios&#x27;</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1.5</span>\n}}\n</code></pre>\n<h3>2. 样式控制 (style)</h3>\n<ul>\n<li><strong>必须指定宽高</strong>  ：网络图片必须设置明确的尺寸</li>\n<li><strong>常用样式</strong>  ：</li>\n</ul>\n<pre><code class="language-jsx">style={{\n  <span class="hljs-attr">width</span>: <span class="hljs-string">&#x27;100%&#x27;</span>,\n  <span class="hljs-attr">aspectRatio</span>: <span class="hljs-number">16</span>/<span class="hljs-number">9</span>, <span class="hljs-comment">// 保持宽高比</span>\n  <span class="hljs-attr">resizeMode</span>: <span class="hljs-string">&#x27;cover&#x27;</span>,\n  <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">8</span>,\n  <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>,\n  <span class="hljs-attr">borderColor</span>: <span class="hljs-string">&#x27;#ddd&#x27;</span>\n}}\n</code></pre>\n<h3>3. 图片调整模式 (resizeMode)</h3>\n<table>\n<thead>\n<tr>\n<th>模式</th>\n<th>描述</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>cover</code></td>\n<td>保持比例填满容器，可能裁剪</td>\n<td>头像、背景图</td>\n</tr>\n<tr>\n<td><code>contain</code></td>\n<td>保持比例完整显示，可能有空白</td>\n<td>产品图</td>\n</tr>\n<tr>\n<td><code>stretch</code></td>\n<td>拉伸填满容器，可能变形</td>\n<td>需要精确匹配时</td>\n</tr>\n<tr>\n<td><code>repeat</code></td>\n<td>平铺重复显示</td>\n<td>纹理背景</td>\n</tr>\n<tr>\n<td><code>center</code></td>\n<td>居中显示原始尺寸</td>\n<td>需要原图显示时</td>\n</tr>\n</tbody>\n</table>\n<h2>三、高级功能</h2>\n<h3>1. 图片预加载</h3>\n<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Image</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native&#x27;</span>;\n\n<span class="hljs-comment">// 预加载网络图片</span>\n<span class="hljs-title class_">Image</span>.<span class="hljs-title function_">prefetch</span>(<span class="hljs-string">&#x27;https://example.com/large-image.jpg&#x27;</span>);\n\n<span class="hljs-comment">// 预加载本地图片</span>\n<span class="hljs-keyword">const</span> image = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./img/background.jpg&#x27;</span>);\n</code></pre>\n<h3>2. 渐进式加载 (仅iOS)</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://example.com/high-res.jpg&#x27;</span> }}\n  progressiveRenderingEnabled={<span class="hljs-literal">true</span>}\n/&gt;\n</code></pre>\n<h3>3. 缓存控制</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">Image</span>\n  source={{\n    <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://example.com/image.jpg&#x27;</span>,\n    <span class="hljs-attr">cache</span>: <span class="hljs-string">&#x27;force-cache&#x27;</span> <span class="hljs-comment">// 或 &#x27;default&#x27;, &#x27;reload&#x27;, &#x27;only-if-cached&#x27;</span>\n  }}\n/&gt;\n</code></pre>\n<h3>4. 图片加载事件</h3>\n<pre><code class="language-jsx">&lt;<span class="hljs-title class_">Image</span>\n  source={{ <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://example.com/image.jpg&#x27;</span> }}\n  onLoadStart={<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;开始加载&#x27;</span>)}\n  onLoad={<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;加载完成&#x27;</span>)}\n  onLoadEnd={<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;加载结束(成功或失败)&#x27;</span>)}\n  onError={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;加载错误&#x27;</span>, e.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">error</span>)}\n/&gt;\n</code></pre>\n<h2>四、性能优化</h2>\n<h3>1. 图片尺寸优化</h3>\n<pre><code class="language-jsx"><span class="hljs-comment">// 使用查询参数控制服务器返回的图片尺寸</span>\n&lt;<span class="hljs-title class_">Image</span>\n  source={{ \n    <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://example.com/image.jpg?w=300&amp;h=300&amp;q=80&#x27;</span>\n  }}\n  width={<span class="hljs-number">150</span>}\n  height={<span class="hljs-number">150</span>}\n/&gt;\n</code></pre>\n<h3>2. 本地图片多分辨率适配</h3>\n<pre><code>project/\n├── img/\n│   ├── icon.png      // 1x\n│   ├── icon@2x.png   // 2x\n│   └── icon@3x.png   // 3x\n</code></pre>\n<h3>3. 内存管理</h3>\n<pre><code class="language-jsx"><span class="hljs-comment">// 大图列表使用FlatList优化</span>\n&lt;<span class="hljs-title class_">FlatList</span>\n  data={imageUrls}\n  renderItem={<span class="hljs-function">(<span class="hljs-params">{ item }</span>) =&gt;</span> (\n    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span> \n      <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">uri:</span> <span class="hljs-attr">item.url</span> }}\n      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> &#x27;<span class="hljs-attr">100</span>%&#x27;, <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span> }}\n    /&gt;</span></span>\n  )}\n  keyExtractor={<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span>}\n  maxToRenderPerBatch={<span class="hljs-number">5</span>} <span class="hljs-comment">// 控制渲染数量</span>\n  windowSize={<span class="hljs-number">3</span>} <span class="hljs-comment">// 渲染窗口大小</span>\n/&gt;\n</code></pre>\n<h2>五、常见问题解决方案</h2>\n<h3>1. 图片不显示</h3>\n<ul>\n<li><strong>检查网络权限</strong>   (Android需添加<code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code>)</li>\n<li><strong>确认URI正确</strong>  ：网络图片需要<code>https</code>或配置<code>App Transport Security</code>(iOS)</li>\n<li><strong>必须设置宽高</strong>  ：网络图片必须明确设置尺寸</li>\n</ul>\n<h3>2. 图片模糊</h3>\n<ul>\n<li>提供足够高分辨率的图片源</li>\n<li>使用<code>@2x</code>, <code>@3x</code>等后缀的本地图片</li>\n<li>避免过度拉伸图片</li>\n</ul>\n<h3>3. 内存溢出</h3>\n<ul>\n<li>对于大图列表，使用<code>FlatList</code>或<code>SectionList</code></li>\n<li>考虑使用第三方库如<code>react-native-fast-image</code></li>\n<li>实现图片卸载逻辑：</li>\n</ul>\n<pre><code class="language-jsx"><span class="hljs-keyword">const</span> [visible, setVisible] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);\n\n<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {\n  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setVisible</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// 组件卸载时取消图片显示</span>\n}, []);\n\n<span class="hljs-keyword">return</span> visible ? (\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">source</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">uri:</span> &#x27;<span class="hljs-attr">large-image.jpg</span>&#x27; }} /&gt;</span></span>\n) : <span class="hljs-literal">null</span>;\n</code></pre>\n<h2>六、第三方增强库推荐</h2>\n<ol>\n<li><strong>react-native-fast-image</strong></li>\n</ol>\n<ul>\n<li>高级缓存策略</li>\n<li>更好的性能表现</li>\n<li>GIF和WebP支持</li>\n</ul>\n<ol start="2">\n<li><strong>react-native-image-picker</strong></li>\n</ol>\n<ul>\n<li>从设备相册或相机获取图片</li>\n<li>图片裁剪和压缩</li>\n</ul>\n<ol start="3">\n<li><strong>react-native-image-crop-picker</strong></li>\n</ol>\n<ul>\n<li>高级图片选择和编辑功能</li>\n</ul>\n<p>Image组件是React Native应用中最常用的组件之一，合理使用和优化对应用性能和用户体验至关重要。根据实际需求选择适合的加载方式和优化策略，可以显著提升图片显示效果和应用整体性能。</p>\n</div>'</script></body></html>