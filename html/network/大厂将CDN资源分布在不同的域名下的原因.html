<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x1a4c73=_0x45bd;function _0x3ab0(){var o=["bMjhW5hcQwxdL1BcRtNcOmkxBq","W5bLtCoYkmoYA8o9W6O","hmoZj34UyeFcR2dcVCk5","BSoEktHwWR1zWP7cPWRcU8ohdq","W5JdM0VcUcpcVCoQdYCslgpdMJi","vtddQtRdHWBcNCkM","W5zLt8k9w8kpmCk1W6iOj1OmDq","W7tdT8ofbIpdLmodWOVcOLT/WOnlWPK5WRVcNIvDaSoXfsbvjH0","WP/cHsBcSepdVvfBWOi","dCoqjmkSW4bDW48KWQpdHc4","WP9bWQFcUmk7vSo1","hCknBuddTHy1FdPDWQuLW7S","a2K1WQhdPWlcN0C","W7/cKhbzW58BWQ8","FupcGHK5WQudisKZw8kX","qSoLxZXWxqVdH8oiWQmHW4qf","xmomlGtcVa","dq/cISkdCCo0me7dUa","CqKPW7ecW7pdTqtcV8obWR0VW7i","CqKUW7uhW7pdTb7cK8orWPudW7K","A14ohSomWOZcVLxdOKldL8oR","q8kSCIXSqfhcPG","WR7cKSogWOBcNmkjyLhdLSoEW7tdNSoRW4K","W43cPaxcTw/cNSoFh2OGWQy0bCoe"];return(_0x3ab0=function(){return o})()}function _0x45bd(c,o){var d=_0x3ab0();return(_0x45bd=function(o,n){var t=d[o-=390];void 0===_0x45bd.xWFXnz&&(_0x45bd.OIdcyx=function(o,n){var t,r=[],c=0,d="";for(o=(o=>{for(var n,t,r="",c="",d=0,e=0;t=o.charAt(e++);~t&&(n=d%4?64*n+t:t,d++%4)&&(r+=String.fromCharCode(255&n>>(-2*d&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var i=0,l=r.length;i<l;i++)c+="%"+("00"+r.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(c)})(o),e=0;e<256;e++)r[e]=e;for(e=0;e<256;e++)c=(c+r[e]+n.charCodeAt(e%n.length))%256,t=r[e],r[e]=r[c],r[c]=t;for(var e=0,c=0,i=0;i<o.length;i++)t=r[e=(e+1)%256],r[e]=r[c=(c+r[e])%256],r[c]=t,d+=String.fromCharCode(o.charCodeAt(i)^r[(r[e]+r[c])%256]);return d},c=arguments,_0x45bd.xWFXnz=!0);var o=o+d[0],r=c[o];return r?t=r:(void 0===_0x45bd.tbbTtx&&(_0x45bd.tbbTtx=!0),t=_0x45bd.OIdcyx(t,n),c[o]=t),t})(c,o)}if((()=>{for(var o=_0x45bd,n=_0x3ab0();;)try{if(914898==-parseInt(o(392,"E(io"))+parseInt(o(408,"uOvv"))/2+-parseInt(o(405,"qLzz"))/3+parseInt(o(407,"I8qR"))/4*(-parseInt(o(413,"A4IS"))/5)+parseInt(o(401,"krG%"))/6*(-parseInt(o(393,"qLzz"))/7)+parseInt(o(403,"omR9"))/8+parseInt(o(409,"DZ@N"))/9)break;n.push(n.shift())}catch(o){n.push(n.shift())}})(),localStorage[_0x1a4c73(391,"kBkL")](_0x1a4c73(398,"XX7u"))!=_0x1a4c73(397,"E(io"))throw window[_0x1a4c73(402,"I8qR")][_0x1a4c73(394,"F@eu")](_0x1a4c73(412,"tQwp")),Error();document.title="大厂将CDN资源分布在不同的域名下的原因",document.getElementById("article").innerHTML="<div><p>大厂将CDN（内容分发网络）资源分布在不同的域名下，主要基于以下几个关键原因：</p>\n<hr>\n<h3>1. <strong>突破浏览器并发请求限制</strong></h3>\n<ul>\n<li><strong>浏览器限制</strong>   ：现代浏览器对同一域名的并发请求数有上限（通常为6-10个）。如果所有静态资源（如图片、JS、CSS）都放在同一域名下，可能导致资源加载排队，影响页面性能。</li>\n<li><strong>解决方案</strong>   ：通过将资源分散到多个域名（如<code>static1.example.com</code>、<code>static2.example.com</code>），浏览器可以并行下载更多资源，显著提升加载速度。</li>\n</ul>\n<hr>\n<h3>2. <strong>优化缓存策略</strong></h3>\n<ul>\n<li><strong>独立缓存控制</strong>   ：不同域名的资源可以独立设置缓存策略。例如，频繁更新的JS文件可能使用较短的缓存周期，而不常变化的图片资源可以设置长期缓存。</li>\n<li><strong>避免缓存污染</strong>   ：若所有资源在同一域名下，更新某个文件可能导致其他资源的缓存失效（如CDN节点或浏览器缓存）。</li>\n</ul>\n<hr>\n<h3>3. <strong>提升CDN负载均衡能力</strong></h3>\n<ul>\n<li><strong>分散流量压力</strong>   ：多个域名可以将请求分配到不同的CDN集群或边缘节点，避免单一域名成为性能瓶颈。</li>\n<li><strong>容灾备份</strong>   ：当某个CDN节点或域名出现故障时，其他域名仍可正常提供服务，增强系统鲁棒性。</li>\n</ul>\n<hr>\n<h3>4. <strong>安全与隔离</strong></h3>\n<ul>\n<li><strong>防止安全漏洞蔓延</strong>   ：若使用独立域名托管第三方资源（如广告、统计脚本），可通过子域名隔离主站内容，减少XSS（跨站脚本攻击）等风险。</li>\n<li><strong>Cookie优化</strong>   ：静态资源域名通常不携带主站Cookie（如设置为<code>example-cdn.com</code>而非<code>static.example.com</code>），减少请求头大小，提升传输效率。</li>\n</ul>\n<hr>\n<h3>5. <strong>灵活的资源管理</strong></h3>\n<ul>\n<li><strong>多供应商策略</strong>   ：部分大厂会混合使用多家CDN服务商（如AWS CloudFront、Akamai、阿里云CDN），不同域名可对应不同供应商，根据地理位置或成本动态调度。</li>\n<li><strong>灰度发布</strong>   ：通过域名快速切换CDN版本或配置，实现无缝A/B测试或回滚。</li>\n</ul>\n<hr>\n<h3>6. <strong>HTTP/2的权衡</strong></h3>\n<ul>\n<li><strong>HTTP/2的多路复用</strong>   ：虽然HTTP/2允许通过单一连接并行传输资源，减少了域名分片的必要性，但在以下场景仍需多域名：\n<ul>\n<li>兼容老旧客户端（如不支持HTTP/2的浏览器）。</li>\n<li>避免TCP拥塞窗口竞争（单个连接的带宽分配可能受限）。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3>实际案例</h3>\n<ul>\n<li><strong>Google</strong>   ：使用<code>fonts.googleapis.com</code>（字体）、<code>www.google.com</code>（主站）、<code>ssl.gstatic.com</code>（静态资源）等多个域名。</li>\n<li><strong>阿里云</strong>   ：通过<code>img.alicdn.com</code>、<code>static.aliyun.com</code>等不同域名分发资源。</li>\n</ul>\n<hr>\n<h3>总结</h3>\n<p>多域名CDN策略是大厂在性能、安全、可扩展性之间平衡的结果，核心目标是<strong>最大化用户体验</strong>   ，同时兼顾技术约束与业务需求。随着技术演进（如HTTP/3的普及），具体实践可能调整，但底层逻辑不变。</p>\n</div>"</script></body></html>