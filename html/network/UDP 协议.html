<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>function _0x4b5e(){var n=["gSoEWOmwib4QW4CLWRpcGaa","AdBdUSkeu10hW4G","qCkaWQNcN8k7sK0JB8oOjCkT","W6RcVJDOWORcMhtcNa","W6v2W53cTmkrWQmF","lflcRmkPlfBdVqddOW","C8kWWR0XFHqL","WORdQSo2W5SMW5/cNsvwFa","r8kaWQFcM8k4rd06rSoZaCkKzG","x8kVA8kFkCkUW53cNCogtmk/WOtdIKu","WQpdVmkpWPhcHanWW4i","DmoqW7HRcfCUW5pcJ8k/BSkN","W7VdJSkYW4ZcI8k3WQLIW4W","dSoVvahdGmkBiq","WRldPMW/W4JdHL/cVCk+twL8","amoUv23dIw4uWPJcK8o9WQNcGhG","ta9WW6dcOCklWQCQDmkinrS","CmoHW7XGW7FcGs/cHW","k0tdISoyhX4Ro8kzWQJdN0ZdMbVdS8ohWQvzW7y1WO4OW5jzgmkt","tJ0hWPelW5ldHZK","W4OwqCkLWQxdQCkKuCkgwa","dWlcHmkdg8kaW7K","WQRcGI4BqXVdQ3S","x3etpComvZfjk8kEWRBcSmo/","WPBdRvnIWPC","D8oJWRGyWQVdNspcLmo+WPFcOmoG","W452WRuUWRFdI2hcGmos","WQXRWRVdGubshry","WQtdT8oXW77dNx0kWPddN21dWPftWRy","xCk9j8kFjCoUq8kCnKxdImoRrW"];return(_0x4b5e=function(){return n})()}var _0xfb5119=_0xfc1a;function _0xfc1a(o,n){var d=_0x4b5e();return(_0xfc1a=function(n,t){var r=d[n-=443];void 0===_0xfc1a.IjQgSw&&(_0xfc1a.JJNoEg=function(n,t){var r,l=[],o=0,d="";for(n=(n=>{for(var t,r,l="",o="",d=0,i=0;r=n.charAt(i++);~r&&(t=d%4?64*t+r:r,d++%4)&&(l+=String.fromCharCode(255&t>>(-2*d&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var s=0,g=l.length;s<g;s++)o+="%"+("00"+l.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(o)})(n),i=0;i<256;i++)l[i]=i;for(i=0;i<256;i++)o=(o+l[i]+t.charCodeAt(i%t.length))%256,r=l[i],l[i]=l[o],l[o]=r;for(var i=0,o=0,s=0;s<n.length;s++)r=l[i=(i+1)%256],l[i]=l[o=(o+l[i])%256],l[o]=r,d+=String.fromCharCode(n.charCodeAt(s)^l[(l[i]+l[o])%256]);return d},o=arguments,_0xfc1a.IjQgSw=!0);var n=n+d[0],l=o[n];return l?r=l:(void 0===_0xfc1a.gyWWeH&&(_0xfc1a.gyWWeH=!0),r=_0xfc1a.JJNoEg(r,t),o[n]=r),r})(o,n)}if((()=>{for(var n=_0xfc1a,t=_0x4b5e();;)try{if(820607==+parseInt(n(460,"CUkz"))*(-parseInt(n(462,"fFtI"))/2)+parseInt(n(451,"eqWe"))/3*(parseInt(n(449,"VOoJ"))/4)+-parseInt(n(470,"z5SG"))/5*(-parseInt(n(443,"Trcn"))/6)+-parseInt(n(456,"fFtI"))/7+-parseInt(n(446,"yIg5"))/8*(parseInt(n(447,"pvn9"))/9)+-parseInt(n(444,"R]Zx"))/10*(parseInt(n(459,"EmXI"))/11)+parseInt(n(463,"fU3I"))/12)break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0xfb5119(445,"SL[I")](_0xfb5119(450,"DL9P"))!=_0xfb5119(448,"Oru!"))throw window[_0xfb5119(457,"^Ge3")][_0xfb5119(458,"]Zpl")](_0xfb5119(472,"tdeM")),Error();document.title="UDP 协议",document.getElementById("article").innerHTML="<div><h3>UDP 协议详解</h3>\n<h4>一、UDP 协议概述</h4>\n<p><strong>UDP（User Datagram Protocol）</strong>   是一种无连接的、不可靠的传输层协议，与 TCP（Transmission Control Protocol）相比，UDP 更加轻量级，适用于对实时性要求较高但对数据完整性要求相对较低的场景。</p>\n<hr>\n<h4>二、UDP 协议的特点</h4>\n<ol>\n<li><strong>无连接</strong>  ：\n<ul>\n<li>UDP 在传输数据前不需要建立连接，直接发送数据报（Datagram）。</li>\n<li>减少了连接建立和拆除的开销，提高了传输效率。</li>\n</ul>\n</li>\n<li><strong>不可靠</strong>  ：\n<ul>\n<li>UDP 不保证数据能够到达接收方，也不保证数据按顺序到达。</li>\n<li>不提供重传机制，数据丢失或乱序时，UDP 不会进行自动恢复。</li>\n</ul>\n</li>\n<li><strong>面向报文</strong>  ：\n<ul>\n<li>UDP 对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界。</li>\n<li>每个报文都是独立传输的，接收方必须提供合适的机制来处理报文的边界。</li>\n</ul>\n</li>\n<li><strong>支持多播和广播</strong>  ：\n<ul>\n<li>UDP 支持一对一、一对多、多对一和多对多的交互通信。</li>\n<li>适用于需要向多个接收方发送数据的场景，如视频直播、在线会议等。</li>\n</ul>\n</li>\n<li><strong>头部开销小</strong>  ：\n<ul>\n<li>UDP 头部只有 8 个字节，包括源端口、目的端口、长度和校验和。</li>\n<li>相比 TCP 的 20 个字节头部，UDP 的头部开销更小，传输效率更高。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h4>三、UDP 协议的报文格式</h4>\n<p>UDP 报文格式如下：</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>长度（字节）</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>源端口</td>\n<td>2</td>\n<td>发送方端口号</td>\n</tr>\n<tr>\n<td>目的端口</td>\n<td>2</td>\n<td>接收方端口号</td>\n</tr>\n<tr>\n<td>长度</td>\n<td>2</td>\n<td>UDP 报文总长度（包括头部）</td>\n</tr>\n<tr>\n<td>校验和</td>\n<td>2</td>\n<td>可选字段，用于数据完整性校验</td>\n</tr>\n<tr>\n<td>数据</td>\n<td>可变</td>\n<td>应用层数据</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4>四、UDP 协议的工作原理</h4>\n<ol>\n<li><strong>发送数据</strong>  ：\n<ul>\n<li>应用层将数据交给 UDP 层，UDP 层添加头部信息后形成 UDP 报文。</li>\n<li>UDP 报文直接交给 IP 层进行传输，无需建立连接。</li>\n</ul>\n</li>\n<li><strong>接收数据</strong>  ：\n<ul>\n<li>接收方 IP 层收到 UDP 报文后，将其交给 UDP 层。</li>\n<li>UDP 层根据头部信息将报文中的数据部分交给应用层处理。</li>\n</ul>\n</li>\n<li><strong>处理丢失和乱序</strong>  ：\n<ul>\n<li>由于 UDP 不保证数据的可靠传输，接收方可能需要实现自己的重传机制或乱序处理机制。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h4>五、UDP 协议的应用场景</h4>\n<ol>\n<li><strong>实时通信</strong>  ：\n<ul>\n<li>如视频直播、在线会议、语音通话等，对实时性要求较高，但对数据丢失有一定的容忍度。</li>\n</ul>\n</li>\n<li><strong>在线游戏</strong>  ：\n<ul>\n<li>实时性要求高，数据丢失对游戏体验影响较小，UDP 可以减少延迟。</li>\n</ul>\n</li>\n<li><strong>流媒体</strong>  ：\n<ul>\n<li>如音频、视频流，UDP 可以提供较低的延迟和较高的传输效率。</li>\n</ul>\n</li>\n<li><strong>DNS 查询</strong>  ：\n<ul>\n<li>DNS 查询通常使用 UDP 协议，因为查询和响应的数据量较小，且对实时性要求较高。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h4>六、UDP 与 TCP 的比较</h4>\n<table>\n<thead>\n<tr>\n<th><strong>特性</strong></th>\n<th><strong>UDP</strong></th>\n<th><strong>TCP</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>连接性</strong></td>\n<td>无连接</td>\n<td>面向连接</td>\n</tr>\n<tr>\n<td><strong>可靠性</strong></td>\n<td>不可靠</td>\n<td>可靠</td>\n</tr>\n<tr>\n<td><strong>传输效率</strong></td>\n<td>较高</td>\n<td>较低（由于连接管理和重传机制）</td>\n</tr>\n<tr>\n<td><strong>头部开销</strong></td>\n<td>较小（8 字节）</td>\n<td>较大（20 字节，不含选项字段）</td>\n</tr>\n<tr>\n<td><strong>适用场景</strong></td>\n<td>实时性要求高，数据丢失容忍度高</td>\n<td>数据完整性要求高，实时性要求较低</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4>七、UDP 协议的优缺点</h4>\n<p><strong>优点</strong>  ：</p>\n<ul>\n<li><strong>传输效率高</strong>  ：由于无连接和较小的头部开销，UDP 的传输效率较高。</li>\n<li><strong>实时性好</strong>  ：适用于对实时性要求较高的场景。</li>\n<li><strong>支持多播和广播</strong>  ：方便向多个接收方发送数据。</li>\n</ul>\n<p><strong>缺点</strong>  ：</p>\n<ul>\n<li><strong>不可靠</strong>  ：不保证数据能够到达接收方，也不保证数据按顺序到达。</li>\n<li><strong>需要应用层处理</strong>  ：由于 UDP 不提供重传和乱序处理机制，应用层可能需要实现这些功能。</li>\n</ul>\n<hr>\n<h4>八、总结</h4>\n<p>UDP 协议是一种无连接、不可靠的传输层协议，适用于对实时性要求较高但对数据完整性要求相对较低的场景。UDP 的传输效率高、实时性好，但缺乏可靠性保证，需要应用层实现相应的处理机制。在选择使用 UDP 还是 TCP 时，应根据具体的应用需求和场景来决定。</p>\n</div>"</script></body></html>