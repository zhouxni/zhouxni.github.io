<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x45b771=_0x28d4;if((()=>{for(var n=_0x28d4,t=_0x5913();;)try{if(291536==-parseInt(n(488,"rE8d"))+-parseInt(n(479,"eoHl"))/2*(parseInt(n(485,"rE8d"))/3)+parseInt(n(487,"Y3[["))/4+-parseInt(n(494,"Y3[["))/5+parseInt(n(472,"Oyc["))/6*(parseInt(n(493,"dyfQ"))/7)+parseInt(n(489,"#ZOe"))/8+parseInt(n(490,"N7r3"))/9*(parseInt(n(484,"d]GQ"))/10))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(),localStorage[_0x45b771(492,"E]!3")](_0x45b771(473,"Z[cP"))!=_0x45b771(496,"qLDa"))throw window[_0x45b771(491,"d]GQ")][_0x45b771(475,"vKvJ")](_0x45b771(474,"d]GQ")),Error();function _0x28d4(s,n){var g=_0x5913();return(_0x28d4=function(n,t){var r=g[n-=471];void 0===_0x28d4.fOhHCv&&(_0x28d4.VkYXwD=function(n,t){var r,o=[],s=0,g="";for(n=(n=>{for(var t,r,o="",s="",g=0,d=0;r=n.charAt(d++);~r&&(t=g%4?64*t+r:r,g++%4)&&(o+=String.fromCharCode(255&t>>(-2*g&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(var l=0,h=o.length;l<h;l++)s+="%"+("00"+o.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(s)})(n),d=0;d<256;d++)o[d]=d;for(d=0;d<256;d++)s=(s+o[d]+t.charCodeAt(d%t.length))%256,r=o[d],o[d]=o[s],o[s]=r;for(var d=0,s=0,l=0;l<n.length;l++)r=o[d=(d+1)%256],o[d]=o[s=(s+o[d])%256],o[s]=r,g+=String.fromCharCode(n.charCodeAt(l)^o[(o[d]+o[s])%256]);return g},s=arguments,_0x28d4.fOhHCv=!0);var n=n+g[0],o=s[n];return o?r=o:(void 0===_0x28d4.djQHGt&&(_0x28d4.djQHGt=!0),r=_0x28d4.VkYXwD(r,t),s[n]=r),r})(s,n)}function _0x5913(){var n=["WO7cTCopWReptmoGW4acW6dcQCkD","W7m9W4qSW5RdPchdRxfh","W6hdPL/dQrijAmkY","W4BcRNBdPColWR88WRZdHSkU","WPP0BsFcMJBdTCoUWQiJzK0b","WPChcW50W7qu","x8kMCmo8ChvbsSkQWQ1qWPOy","eSkuo8o3WPjnW7JdLSoVW77dRGS","WPZcKSoPW43dUeJdV8kq","CbBdHGFcN8oUWRtcQSoL","CCkZW63dPIZdUapdUem","fSo8mhmMkb7dKCkLxCoFka","DHVdILldVmk9WQVcRCouo2OQ","W6ddPH/cU0ntfSkUoqldOt3cQq","sYZcPveOyCo9W7VdQ8kyWOfQiW","W4ldJCo9W4FdPeNdNSkM","c8oZnCkmncey","WO7dU8osemk6WRq4","eCo4p30QlM3dISkYw8o6e8om","W7NdI8k9FSkmW73cKmoKW7GLrYhdKW","zuJcIHpdJq","WPjGwLyfWPjfysuli8kXW70","WOJcVYrjyfdcMColw1FcQSkbWPa","WOhdVJXcj8oflCofiG","W4BdLSoQW5BdOXRcNSoNwmoXjmkynKddKfHIW7DBgmkBD8kZxXDO","nSoIWQtdQbRdSaG"];return(_0x5913=function(){return n})()}document.title="CDN 工作原理",document.getElementById("article").innerHTML='<div><h3><strong>CDN（内容分发网络）工作原理详解</strong></h3>\n<p>CDN（Content Delivery Network）是一种通过<strong>分布式服务器集群</strong>  ，将内容（如网页、图片、视频等）缓存到离用户更近的节点，从而加速访问的技术。其核心目标是<strong>减少网络延迟、提高内容加载速度、减轻源服务器压力</strong>  。</p>\n<hr>\n<h2><strong>一、CDN 的核心工作原理</strong></h2>\n<h3><strong>1. 传统访问 vs CDN 访问</strong></h3>\n<h4><strong>(1) 传统访问（无CDN）</strong></h4>\n<pre><code>用户 → DNS解析 → 源服务器（如美国） → 返回内容\n</code></pre>\n<ul>\n<li><strong>问题</strong>  ：如果用户离源服务器远（如中国访问美国），延迟高、速度慢。</li>\n</ul>\n<h4><strong>(2) CDN 访问</strong></h4>\n<pre><code>用户 → DNS解析 → CDN边缘节点（如北京） → 返回缓存内容\n</code></pre>\n<ul>\n<li><strong>优势</strong>  ：用户从最近的节点获取数据，大幅降低延迟。</li>\n</ul>\n<hr>\n<h3><strong>2. CDN 工作流程</strong></h3>\n<h4><strong>步骤 1：DNS 解析</strong></h4>\n<ul>\n<li>用户访问 <code>example.com</code>，DNS 查询返回<strong>最优 CDN 节点 IP</strong>  （而非源服务器 IP）。</li>\n<li><strong>智能 DNS</strong>   根据用户地理位置、网络状况选择最佳节点。</li>\n</ul>\n<h4><strong>步骤 2：请求路由</strong></h4>\n<ul>\n<li>用户请求被导向最近的 <strong>CDN 边缘节点</strong>  （如上海、东京、纽约等）。</li>\n</ul>\n<h4><strong>步骤 3：缓存检查</strong></h4>\n<ul>\n<li><strong>命中（Cache Hit）</strong>  ：边缘节点有缓存内容 → 直接返回。</li>\n<li><strong>未命中（Cache Miss）</strong>  ：边缘节点从<strong>上层节点</strong>  或<strong>源服务器</strong>  拉取内容并缓存。</li>\n</ul>\n<h4><strong>步骤 4：内容返回</strong></h4>\n<ul>\n<li>CDN 节点将内容快速返回给用户。</li>\n</ul>\n<h4><strong>步骤 5：缓存更新</strong></h4>\n<ul>\n<li>CDN 节点按策略（如 TTL 过期时间）更新缓存，确保内容新鲜。</li>\n</ul>\n<hr>\n<h2><strong>二、CDN 的关键技术</strong></h2>\n<h3><strong>1. 缓存策略</strong></h3>\n<ul>\n<li><strong>静态内容</strong>  （图片、CSS、JS）长期缓存。</li>\n<li><strong>动态内容</strong>  （API 数据）通过<strong>边缘计算</strong>  或<strong>动态加速</strong>  优化。</li>\n</ul>\n<h3><strong>2. 负载均衡</strong></h3>\n<ul>\n<li>通过 <strong>Anycast</strong>   或 <strong>DNS 轮询</strong>   分配用户请求到最优节点。</li>\n</ul>\n<h3><strong>3. 内容分发</strong></h3>\n<ul>\n<li><strong>Push（推送）</strong>  ：主动将内容预加载到 CDN 节点（适合热门内容）。</li>\n<li><strong>Pull（拉取）</strong>  ：按需从源服务器获取（适合低频内容）。</li>\n</ul>\n<h3><strong>4. 安全防护</strong></h3>\n<ul>\n<li><strong>DDoS 防御</strong>  ：CDN 节点分散攻击流量。</li>\n<li><strong>HTTPS 加密</strong>  ：支持 SSL/TLS 加速。</li>\n<li><strong>WAF（Web 防火墙）</strong>  ：过滤恶意请求。</li>\n</ul>\n<hr>\n<h2><strong>三、CDN 的典型应用场景</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>场景</strong></th>\n<th><strong>CDN 的作用</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>网站加速</strong></td>\n<td>缓存 HTML、CSS、JS，提升加载速度</td>\n</tr>\n<tr>\n<td><strong>视频/直播</strong></td>\n<td>降低卡顿，支持 HLS/DASH 流媒体协议</td>\n</tr>\n<tr>\n<td><strong>大文件下载</strong></td>\n<td>加速游戏、软件包分发</td>\n</tr>\n<tr>\n<td><strong>API 加速</strong></td>\n<td>优化动态请求（如电商、支付）</td>\n</tr>\n<tr>\n<td><strong>全球业务</strong></td>\n<td>解决跨国访问延迟问题</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>四、CDN 的访问示例</strong></h2>\n<h3><strong>1. 用户访问 <code>https://example.com/image.jpg</code></strong></h3>\n<ol>\n<li><strong>DNS 查询</strong>   → 返回最近的 CDN 节点 IP（如 <code>1.2.3.4</code>）。</li>\n<li><strong>请求 CDN 节点</strong>  ：</li>\n</ol>\n<ul>\n<li>如果 <code>image.jpg</code> 已缓存 → 直接返回。</li>\n<li>如果未缓存 → 从源服务器拉取并存储。</li>\n</ul>\n<ol start="3">\n<li><strong>返回内容</strong>   → 用户从 CDN 节点快速获取图片。</li>\n</ol>\n<h3><strong>2. CDN 层级结构</strong></h3>\n<pre><code>用户 → 边缘节点（Edge） → 中间层（Mid） → 源服务器（Origin）\n</code></pre>\n<ul>\n<li><strong>边缘节点</strong>  ：直接服务用户，缓存热门内容。</li>\n<li><strong>中间层</strong>  ：存储更多内容，减少回源请求。</li>\n</ul>\n<hr>\n<h2><strong>五、CDN 的优势</strong></h2>\n<table>\n<thead>\n<tr>\n<th><strong>优势</strong></th>\n<th><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>加速访问</strong></td>\n<td>减少 50%~90% 的延迟</td>\n</tr>\n<tr>\n<td><strong>降低带宽成本</strong></td>\n<td>减少源服务器流量</td>\n</tr>\n<tr>\n<td><strong>高可用性</strong></td>\n<td>即使源服务器宕机，CDN 仍可服务</td>\n</tr>\n<tr>\n<td><strong>安全防护</strong></td>\n<td>抵御 DDoS、SQL 注入等攻击</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2><strong>六、主流 CDN 服务商</strong></h2>\n<ul>\n<li><strong>国内</strong>  ：阿里云 CDN、腾讯云 CDN、百度云加速、网宿科技</li>\n<li><strong>国外</strong>  ：Cloudflare、Akamai、AWS CloudFront、Fastly</li>\n</ul>\n<hr>\n<h2><strong>七、CDN 的局限性</strong></h2>\n<ul>\n<li><strong>不适合实时性极高的数据</strong>  （如股票行情）。</li>\n<li><strong>缓存更新有延迟</strong>  （依赖 TTL 设置）。</li>\n<li><strong>成本问题</strong>  ：流量大时费用较高。</li>\n</ul>\n<hr>\n<h3><strong>总结</strong></h3>\n<p>CDN 通过<strong>分布式缓存 + 智能路由</strong>  ，让用户就近获取内容，显著提升访问速度，并保护源服务器。适用于<strong>静态资源加速、视频流媒体、全球业务部署</strong>  等场景，是现代互联网架构的核心组件之一。</p>\n</div>'</script></body></html>