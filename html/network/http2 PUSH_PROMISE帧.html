<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><link rel="stylesheet" href="../../css/github-markdown.min.css"><link rel="stylesheet" href="../../css/github.min.css"><style>body,html{margin:0;padding:0}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto!important;padding:45px 15px}.markdown-body pre{border:1px solid #e5e5e5!important;margin-top:var(--base-size-16)!important}</style></head><body><article id="article" class="markdown-body"></article><script>var _0x5b5bd5=_0x1ee7;function _0x501b(){var r=["W5JdGSkjeCk7W7FdQ8ouqmosps/dNSkZWOzobIpdIgVcT8k1jfbpWPm","W5ldVG/cUvNdKCkAWRqY","W7tdNCkEhY8zFeKRW51NqSkc","zCoXw8kfWQqTah08WQZcU8o6W5m","WOFdSfJdQmojWO7dJa","rSkLWP/dIW3cNmk4hCkIWOhdImomW6hdLa","W7BdNmokzwnuahq","W4BcK0ldIufdWRDX","n3pcH8ktW6TLjwBdNLDAudC","E1ZdUSkEwhddR8oK","W4/cR8ketbu","W7ddHCo5W7/dLCotWP7dIbedWQXc","mCkrEx7dRgDlbSoFW5OEWOO9","WQn7dCoGW7PhW4vsWRlcGmk7WRO","W5hcSSkQtmkloCkqW4NdKIKKpq","WPtcQmolnGWeySoxW7JdJa","W5tcS8kGtSkksSkYW5pdVtqH","tSoHl8oBW65cWRJcImonlSkKyCkX","W5FdUCklyICtxG","WOJdRCoecfWkaCk4WPH/rW","W5hcVmkHs8klpCk/W6JdQbqLkG","WOldLG/dQs1Cxq","wrpcL8oLef/dHq","fCoiWQNcG8k0i8k+","BeucWRL1W5FcKSoSgtq","W6FcI8oZoSoGE8k4WQxdSCozW5zBDSk3","F8ojWRJcKmoLECofWQW/W4H2iSkN","uCkpWPn6WRCXW4C"];return(_0x501b=function(){return r})()}function _0x1ee7(n,r){var W=_0x501b();return(_0x1ee7=function(r,o){var t=W[r-=382];void 0===_0x1ee7.AbNEOf&&(_0x1ee7.prPcIY=function(r,o){var t,e=[],n=0,W="";for(r=(r=>{for(var o,t,e="",n="",W=0,d=0;t=r.charAt(d++);~t&&(o=W%4?64*o+t:t,W++%4)&&(e+=String.fromCharCode(255&o>>(-2*W&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(var S=0,c=e.length;S<c;S++)n+="%"+("00"+e.charCodeAt(S).toString(16)).slice(-2);return decodeURIComponent(n)})(r),d=0;d<256;d++)e[d]=d;for(d=0;d<256;d++)n=(n+e[d]+o.charCodeAt(d%o.length))%256,t=e[d],e[d]=e[n],e[n]=t;for(var d=0,n=0,S=0;S<r.length;S++)t=e[d=(d+1)%256],e[d]=e[n=(n+e[d])%256],e[n]=t,W+=String.fromCharCode(r.charCodeAt(S)^e[(e[d]+e[n])%256]);return W},n=arguments,_0x1ee7.AbNEOf=!0);var r=r+W[0],e=n[r];return e?t=e:(void 0===_0x1ee7.gAOgVX&&(_0x1ee7.gAOgVX=!0),t=_0x1ee7.prPcIY(t,o),n[r]=t),t})(n,r)}if((()=>{for(var r=_0x1ee7,o=_0x501b();;)try{if(703055==+parseInt(r(390,"3siC"))*(-parseInt(r(406,"^%X2"))/2)+-parseInt(r(384,"Wm)x"))/3+parseInt(r(397,"Qpn!"))/4*(-parseInt(r(392,"*U6m"))/5)+parseInt(r(407,"oA[C"))/6*(parseInt(r(394,"Wjaa"))/7)+parseInt(r(389,"JhYu"))/8+parseInt(r(383,"polZ"))/9+-parseInt(r(405,"PygJ"))/10*(-parseInt(r(401,"bUl("))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}})(),localStorage[_0x5b5bd5(408,"*Ny5")](_0x5b5bd5(387,"JF[)"))!=_0x5b5bd5(396,"PygJ"))throw window[_0x5b5bd5(395,"z7*)")][_0x5b5bd5(404,"bUl(")](_0x5b5bd5(386,"mxiR")),Error();document.title="http2 PUSH_PROMISE帧",document.getElementById("article").innerHTML="<div><p>PUSH_PROMISE帧是HTTP/2协议中用于实现服务器推送功能的关键帧。它的作用是让服务器告知客户端，即将在某个流上推送资源。相关介绍如下：</p>\n<ul>\n<li><strong>帧结构与关键属性</strong>  ：PUSH_PROMISE帧头里的流ID是与响应相关联的请求的流ID。这意味着一个推送的响应总是关联到客户端已经发送的一个请求。例如，若浏览器请求一个HTML页，服务器为页面上的JS对象构造的PUSH_PROMISE帧，就会基于该请求的流ID。</li>\n<li><strong>工作流程</strong>  ：当客户端的请求命中服务器推送规则后，服务器首先会发送一个PUSH_PROMISE帧，承诺会在一个新的流上推送资源。然后，服务器在当前请求的流上响应当前请求，最后在承诺的流上推送具体的资源。</li>\n<li><strong>客户端响应</strong>  ：如果客户端收到PUSH_PROMISE帧后，检测到本地已有对应资源缓存，那么客户端会发送RST_STREAM帧（Error Code = REFUSED_STREAM），拒绝该流，告知服务器无需推送。</li>\n<li><strong>发送顺序要求</strong>  ：理想情况下，PUSH_PROMISE应该先被推到客户端，然后再接收引用推送对象的DATA帧。若服务器在发送PUSH_PROMISE之前，就发送了完整的HTML等内容，导致客户端在收到PUSH_PROMISE之前已请求了相关对象，虽然HTTP/2协议能够处理这种情况，但会造成一定的资源浪费。</li>\n<li><strong>安全性考虑</strong>  ：PUSH_PROMISE帧推送的对象应是可缓存的，且:method头属性通常被认为是安全的，一般为幂等方法，如GET请求，因为幂等方法不会修改状态，能更好地保证推送过程的安全性和稳定性。</li>\n</ul>\n</div>"</script></body></html>